webpackHotUpdate("main",{

/***/ "./src/music.js":
/*!**********************!*\
  !*** ./src/music.js ***!
  \**********************/
/*! exports provided: Music */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Music\", function() { return Music; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _music_blocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./music_blocks */ \"./src/music_blocks.js\");\n/* harmony import */ var _music_block_generators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./music_block_generators */ \"./src/music_block_generators.js\");\n/* harmony import */ var js_interpreter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js-interpreter */ \"./node_modules/js-interpreter/lib/js-interpreter.js\");\n/* harmony import */ var js_interpreter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(js_interpreter__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _note_player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./note_player */ \"./src/note_player.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Game logic for music game.\n */\n\n // import {speaker} from './speaker';\n// import {toolboxPitch} from './music_blocks';\n// import {CustomCursor} from './custom_cursor';\n\n\n\n\n/**\n * Constant denoting a rest.\n */\n\nvar REST = 'REST';\n/**\n * Class representing transcript of notes played.\n */\n\nvar Transcript = /*#__PURE__*/function () {\n  /**\n   * Class for holding transcript of notes that were played. Expects\n   * notesAndRests and durations to have a matching length.\n   * @param {Array<string>} notesAndRests The notes and rests.\n   * @param {Array<number>} durations The durations of the notes and rests.\n   */\n  function Transcript() {\n    var notesAndRests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var durations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, Transcript);\n\n    if (notesAndRests.length !== durations.length) {\n      console.error('Transcript length mismatch.');\n    }\n\n    this.notesAndRests = [];\n    this.durations = [];\n    this.size = 0;\n    this.readableText_ = '';\n\n    for (var i = 0; i < notesAndRests.length; i++) {\n      this.appendNote(notesAndRests[i], durations[i]);\n    }\n  }\n  /**\n   * Converts duration number into approriate string.\n   * @param {number} duration The duration.\n   * @return {string} The string version of duration.\n   * @private\n   */\n\n\n  _createClass(Transcript, [{\n    key: \"appendReadableText_\",\n\n    /**\n     * Internal method for appending text to transcript text.\n     * @param {string} text The text to append.\n     * @private\n     */\n    value: function appendReadableText_(text) {\n      if (this.readableText_) {\n        this.readableText_ += ', ';\n      } else {\n        text = text.charAt(0).toUpperCase() + text.slice(1);\n      }\n\n      this.readableText_ += text;\n    }\n    /**\n     * Returns sentence representing the notes played in this transcript.\n     * @return {string} The sentence.\n     */\n\n  }, {\n    key: \"getReadableText\",\n    value: function getReadableText() {\n      if (!this.readableText_) {\n        return 'Empty.';\n      }\n\n      var items = this.readableText_.split(',');\n\n      if (items.length > 1) {\n        items[items.length - 1] = ' and ' + items[items.length - 1];\n      }\n\n      return items.join(',') + '.';\n    }\n    /**\n     * Appends note to transcript.\n     * @param {string} note The pitch of note to append.\n     * @param {number} duration The duration of the note.\n     */\n\n  }, {\n    key: \"appendNote\",\n    value: function appendNote(note, duration) {\n      this.notesAndRests.push(note);\n      this.durations.push(duration);\n      this.appendReadableText_(\"play \".concat(Transcript.getDurationText_(duration), \" note \").concat(note));\n      this.size++;\n    }\n    /**\n     * Appends rest to transcript.\n     * @param {number} duration The duration of the rest.\n     */\n\n  }, {\n    key: \"appendRest\",\n    value: function appendRest(duration) {\n      this.notesAndRests.push(REST);\n      this.durations.push(duration);\n      this.appendReadableText_(\"\".concat(Transcript.getDurationText_(duration), \" rest\"));\n      this.size++;\n    }\n  }], [{\n    key: \"getDurationText_\",\n    value: function getDurationText_(duration) {\n      var durationText = 'unknown';\n\n      switch (duration) {\n        case 1:\n          durationText = 'whole';\n          break;\n\n        case 0.5:\n          durationText = 'half';\n          break;\n\n        case 0.25:\n          durationText = 'quarter';\n          break;\n\n        case 0.125:\n          durationText = 'eight';\n          break;\n      }\n\n      return durationText;\n    }\n  }]);\n\n  return Transcript;\n}();\n/**\n * Class representing musical stave.\n */\n\n\nvar Stave = /*#__PURE__*/function () {\n  /**\n   * Class holding code for music to play.\n   * @param {number} id The unique id of this stave.\n   * @param {Array<Interpreter.State>} stateStack The stateStack containing code\n   *    for this stave.\n   */\n  function Stave(id, stateStack) {\n    _classCallCheck(this, Stave);\n\n    /**\n     * The id.\n     * @type {number}\n     */\n    this.id = id;\n    /**\n     * The state stack.\n     * @type {Array<Interpreter.State>}\n     */\n\n    this.stateStack = stateStack;\n    /**\n     * Whether all the notes have ben played.\n     * @type {boolean}\n     */\n\n    this.done = false;\n    /**\n     * The time to pause till.\n     * @type {number}\n     * @private\n     */\n\n    this.pauseUntil64ths_ = 0;\n    /**\n     * The transcript of notes played.\n     * @type {Transcript}\n     * @private\n     */\n\n    this.transcript_ = new Transcript();\n    /**\n     * Currently playing note.\n     * @type {string}\n     * @private\n     */\n\n    this.note_ = '';\n  }\n  /**\n   * Whether this stave is currently paused.\n   * @param {number} clock64ths Number of 1/64ths notes since the start.\n   * @return {boolean} Whether this stave is paused.\n   */\n\n\n  _createClass(Stave, [{\n    key: \"isPaused\",\n    value: function isPaused(clock64ths) {\n      return this.pauseUntil64ths_ > clock64ths;\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note to play.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(duration, pitch, clock64ths) {\n      this.stopSound();\n      this.note_ = pitch;\n      _note_player__WEBPACK_IMPORTED_MODULE_4__[\"notePlayer\"].triggerAttack(pitch);\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this note.\n\n      this.transcript_.appendNote(pitch, duration);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"rest\",\n    value: function rest(duration, clock64ths) {\n      this.stopSound();\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this rest.\n\n      this.transcript_.appendRest(duration);\n    }\n    /**\n     * Stops currently playing note.\n     */\n\n  }, {\n    key: \"stopSound\",\n    value: function stopSound() {\n      if (this.note_) {\n        _note_player__WEBPACK_IMPORTED_MODULE_4__[\"notePlayer\"].triggerRelease();\n        this.note_ = '';\n      }\n    }\n    /**\n     * Returns feedback on what is different between the loaded transcript and the\n     * expected one, or empty string if they are equal.\n     * @param {Transcript} expectedTranscript The expected transcript.\n     * @return {string} The feedback.\n     */\n\n  }, {\n    key: \"getFeedback\",\n    value: function getFeedback(expectedTranscript) {\n      var feedback = ''; // There could be extra or missing notes.\n\n      var actualSize = this.transcript_.size;\n      var expectedSize = expectedTranscript.size;\n      var sizeMismatch = actualSize !== expectedSize;\n\n      if (actualSize < expectedSize) {\n        feedback += 'Your solution is missing notes.\\n';\n      } else if (actualSize > expectedSize) {\n        feedback += 'Your solution has extra notes.\\n';\n      } // The notes played could be wrong (duration or note).\n\n\n      var hasIncorrectNotes = false;\n      var hasIncorrectDuration = false;\n\n      for (var i = 0; i < actualSize && i < expectedSize; i++) {\n        if (this.transcript_.notesAndRests[i] !== expectedTranscript.notesAndRests[i]) {\n          hasIncorrectNotes = true;\n        }\n\n        if (this.transcript_.durations[i] !== expectedTranscript.durations[i]) {\n          hasIncorrectDuration = true;\n        }\n      }\n\n      if (hasIncorrectNotes) {\n        feedback += \"Some of the notes \".concat(sizeMismatch ? 'may be' : 'are', \" incorrect.\\n\");\n      }\n\n      if (hasIncorrectDuration) {\n        feedback += \"Some of the note durations \" + \"\".concat(sizeMismatch ? 'may be' : 'are', \" incorrect.\\n\");\n      } // Append the actual and expected notes played.\n\n\n      if (sizeMismatch || hasIncorrectNotes || hasIncorrectDuration) {\n        feedback += \"\\nYour solution: \".concat(this.transcript_.getReadableText() || 'empty', \"\\n\");\n        feedback += \"Expected solution: \".concat(expectedTranscript.getReadableText());\n      }\n\n      return feedback;\n    }\n  }]);\n\n  return Stave;\n}();\n/**\n * Game logic for music game.\n */\n\n\nvar Music = /*#__PURE__*/function () {\n  /**\n   * Class for a music game.\n   * @param {Blockly.WorkspaceSvg} workspace The Blockly workspace.\n   * @param {function(string)} onGoalUpdateCb The callback function for goal\n   *    change.\n   * @param {function()} onSuccessCb The callback function for on success event.\n   * @param {function(string)} onFailureCb The callback function for on failure\n   *    event.\n   * @constructor\n   */\n  function Music(workspace, onGoalUpdateCb, onSuccessCb, onFailureCb) {\n    _classCallCheck(this, Music);\n\n    /**\n     * The Blockly workspace associated with this game.\n     * @type {!Blockly.WorkspaceSvg}\n     */\n    this.workspace = workspace;\n    /**\n     * The currently loaded level. 0 if no level loaded.\n     */\n\n    this.level = 0;\n    /**\n     * Callback function for goal update.\n     * @param {string} text The text to set the goal to.\n     */\n\n    this.onGoalUpdate = onGoalUpdateCb;\n    /**\n     * The expected answer.\n     * @type {Array<Transcript>}\n     * @private\n     */\n\n    this.expectedAnswer_ = [];\n    /**\n     * The interpreter.\n     * @type {?Interpreter}\n     * @private\n     */\n\n    this.interpreter_ = null;\n    /**\n     * @type {Array<Stave>}\n     * @private\n     */\n\n    this.staves_ = [];\n    /**\n     * The current active stave.\n     * @type {?Stave}\n     * @private\n     */\n\n    this.activeStave_ = null;\n    /**\n     * Time of start of execution.\n     * @type {number}\n     * @private\n     */\n\n    this.startTime_ = 0;\n    /**\n     * Number of 1/64ths notes since the start.\n     * @type {number}\n     * @private\n     */\n\n    this.clock64ths_ = 0;\n    /**\n     * The speed at which to play notes. Between 0 and 1, with 0 being slow,\n     * 0.5 being normal speed, and 1 being fast.\n     * @type {number}\n     * @private\n     */\n\n    this.speed_ = 0.5;\n    /**\n     * The id of the last setTimeout call. Used for game reset.\n     * @type {number}\n     * @private\n     */\n\n    this.pid_ = 0;\n    /**\n     * The callback function on level success.\n     * @type {function()}\n     * @private\n     */\n\n    this.onSuccessCallback_ = onSuccessCb;\n    /**\n     * The callback function on level failure.\n     * @type {function(string)}\n     * @param {string} feedback The level feedback.\n     * @private\n     */\n\n    this.onFailureCallback_ = onFailureCb;\n    this.registerPlayShortcut();\n  }\n  /**\n   * Registers a shortcut to play the notes on the workspace.\n   */\n\n\n  _createClass(Music, [{\n    key: \"registerPlayShortcut\",\n    value: function registerPlayShortcut() {\n      var newFunction = function () {\n        this.execute();\n      }.bind(this);\n      /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n\n\n      var playShortcut = {\n        name: 'playShortcut',\n        preconditionFn: function preconditionFn(workspace) {\n          return workspace.keyboardAccessibilityMode && !workspace.options.readOnly;\n        },\n        callback: newFunction\n      };\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.register(playShortcut);\n      var shiftW = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.createSerializedKey(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.P, [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.SHIFT]);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.addKeyMapping(shiftW, playShortcut.name);\n    }\n    /**\n     * Clears the workspace and loads the specified blocks.\n     * @param {string} blockXml The xml text string of blocks.\n     */\n\n  }, {\n    key: \"loadWorkspaceBlocks\",\n    value: function loadWorkspaceBlocks(blockXml) {\n      this.workspace.clear();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.domToWorkspace(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.textToDom(blockXml), this.workspace);\n    }\n    /**\n     * Updates the currently loaded toolbox.\n     * @param {?Blockly.utils.toolbox.ToolboxDefinition} toolboxDef\n     *    DOM tree of toolbox contents, string of toolbox contents, or JSON\n     *    representing toolbox definition.\n     */\n\n  }, {\n    key: \"updateToolbox\",\n    value: function updateToolbox(toolboxDef) {\n      this.workspace.updateToolbox(toolboxDef);\n    }\n    /**\n     * Updates the goal based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateLevelGoal_\",\n    value: function updateLevelGoal_() {\n      var goalText = '';\n\n      switch (this.level) {\n        case 1:\n          this.expectedAnswer_ = [new Transcript(['C4', 'D4', 'E4', 'C4'], Array(4).fill(0.25))];\n          goalText = this.expectedAnswer_[0].getReadableText();\n          break;\n      }\n\n      this.onGoalUpdate(goalText);\n    }\n    /**\n     * Updates the toolbox based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateLevelToolbox_\",\n    value: function updateLevelToolbox_() {\n      var toolboxJson = {\n        'kind': 'flyoutToolbox',\n        'contents': [{\n          'kind': 'block',\n          'blockxml': \"<block type=\\\"music_note\\\">\\n                        <field name=\\\"DURATION\\\">0.25</field>\\n                        <value name=\\\"PITCH\\\">\\n                          <shadow type=\\\"music_pitch\\\">\\n                            <field name=\\\"PITCH\\\">C4</field>\\n                          </shadow>\\n                        </value>\\n                      </block>\"\n        }, {\n          'kind': 'block',\n          'type': 'music_rest'\n        }]\n      };\n      this.updateToolbox(toolboxJson);\n    }\n    /**\n     * Update the workspace blocks based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"loadLevelBlocks_\",\n    value: function loadLevelBlocks_() {\n      var levelXml = \"<xml>\\n            <block type=\\\"music_start\\\" deletable=\\\"false\\\" x=\\\"180\\\"\\n            y=\\\"50\\\"></block>\\n          </xml>\";\n      this.loadWorkspaceBlocks(levelXml);\n    }\n    /**\n     * Load the specified level.\n     * @param {number|string} level The level to load.\n     */\n\n  }, {\n    key: \"loadLevel\",\n    value: function loadLevel(level) {\n      this.level = Number(level);\n      this.updateLevelGoal_();\n      this.updateLevelToolbox_();\n      this.loadLevelBlocks_();\n    }\n    /**\n     * Set the speed (Number between 0 and 1).\n     * @param {number} speed The speed to set to.\n     */\n\n  }, {\n    key: \"setSpeed\",\n    value: function setSpeed(speed) {\n      if (speed <= 0 || speed > 1) {\n        console.error('Invalid speed');\n        return;\n      }\n\n      this.speed_ = speed;\n      this.startTime_ = 0;\n    }\n    /**\n     * Generates code and logs it to the console.\n     */\n\n  }, {\n    key: \"logGeneratedCode\",\n    value: function logGeneratedCode() {\n      var codeJs = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace);\n      console.log(codeJs);\n    }\n    /**\n     * Reset the music to the start position, clear the display, and kill any\n     * pending tasks.\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      // Kill any task.\n      clearTimeout(this.pid_);\n      this.staves_.forEach(function (stave) {\n        stave.stopSound();\n      });\n      this.interpreter_ = null;\n      this.activeStave_ = null;\n      this.staves_.length = 0;\n      this.clock64ths_ = 0;\n      this.startTime_ = 0;\n    }\n    /**\n     * Plays music based on the blocks on the workspace.\n     */\n\n  }, {\n    key: \"execute\",\n    value: function execute() {\n      var _this = this;\n\n      this.reset(); // Get generated code from workspace\n\n      var code = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace); // Run user code.\n\n      this.interpreter_ = new js_interpreter__WEBPACK_IMPORTED_MODULE_3___default.a(code, this.interpreterInit_.bind(this)); // TODO add support for multiple threads.\n\n      var interpreter = new js_interpreter__WEBPACK_IMPORTED_MODULE_3___default.a(''); // Replace this thread's global scope with the cross-thread global.\n\n      interpreter.stateStack[0].scope = this.interpreter_.globalScope; // Add start call.\n\n      interpreter.appendCode('start();\\n');\n      this.staves_.push(new Stave(0, interpreter.stateStack));\n      this.pid_ = setTimeout(function () {\n        return _this.tick_();\n      }, 100);\n    }\n    /**\n     * Inject the Music API into a JavaScript interpreter.\n     * @param {!Interpreter} interpreter The JS-Interpreter.\n     * @param {!Interpreter.Object} globalObject Global object.\n     * @private\n     */\n\n  }, {\n    key: \"interpreterInit_\",\n    value: function interpreterInit_(interpreter, globalObject) {\n      var _this2 = this;\n\n      // API\n      var wrapper;\n\n      wrapper = function wrapper(duration, pitch, _id) {\n        _this2.play_(duration, pitch);\n      };\n\n      interpreter.setProperty(globalObject, 'play', interpreter.createNativeFunction(wrapper));\n\n      wrapper = function wrapper(duration, _id) {\n        _this2.rest_(duration);\n      };\n\n      interpreter.setProperty(globalObject, 'rest', interpreter.createNativeFunction(wrapper)); // TODO implement setInstrument API.\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note play.\n     * @private\n     */\n\n  }, {\n    key: \"play_\",\n    value: function play_(duration, pitch) {\n      this.activeStave_.play(duration, pitch, this.clock64ths_);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @private\n     */\n\n  }, {\n    key: \"rest_\",\n    value: function rest_(duration) {\n      this.activeStave_.rest(duration, this.clock64ths_);\n    }\n    /**\n     * Execute a 1/64th tick of the program.\n     * @private\n     */\n\n  }, {\n    key: \"tick_\",\n    value: function tick_() {\n      var _this3 = this;\n\n      // Delay between start of each beat (1/64ths of a whole note).\n      // Reminder: The startTime_ should be reset after the slider is adjusted.\n      var scaleDuration = 1000 * (2.5 - 2 * this.speed_) / 64;\n\n      if (!this.startTime_) {\n        // Either the first tick, or first tick after slider was adjusted.\n        this.startTime_ = Date.now() - this.clock64ths_ * scaleDuration;\n      }\n\n      var done = true;\n      this.staves_.forEach(function (stave) {\n        if (!stave.done) {\n          done = false;\n\n          if (!stave.isPaused(_this3.clock64ths_)) {\n            _this3.executeChunk_(stave);\n          }\n        }\n      });\n\n      if (done) {\n        // Program complete.\n        var feedback = this.checkAnswer_();\n\n        if (feedback) {\n          this.onFailureCallback_(feedback);\n        } else {\n          this.onSuccessCallback_();\n        }\n      } else {\n        this.clock64ths_++;\n        var ms = this.startTime_ + this.clock64ths_ * scaleDuration - Date.now();\n        this.pid_ = setTimeout(function () {\n          return _this3.tick_();\n        }, ms);\n      }\n    }\n    /**\n     * Execute a bite-sized chunk of the user's code.\n     * @param {Stave} stave The stave to execute.\n     * @private\n     */\n\n  }, {\n    key: \"executeChunk_\",\n    value: function executeChunk_(stave) {\n      this.activeStave_ = stave; // Switch the interpreter to run the provided staff.\n\n      this.interpreter_.stateStack = stave.stateStack;\n      var ticks = 10000;\n      var go;\n\n      do {\n        try {\n          go = this.interpreter_.step();\n        } catch (e) {\n          // User error, terminate in shame.\n          alert(e);\n          go = false;\n        }\n\n        if (ticks-- == 0) {\n          console.warn('Staff ' + stave.id + ' is running slowly.');\n          return;\n        }\n\n        if (stave.isPaused(this.clock64ths_)) {\n          // Previously executed command (play or rest) requested a pause.\n          return;\n        }\n      } while (go); // Thread complete.  Wrap up.\n\n\n      stave.stopSound(stave);\n      stave.done = true;\n    }\n    /**\n     * Evaluates whether the answer for the currently loaded level is correct.\n     * Returns level feedback if correct or empty string if correct.\n     * @return {string} Level feedback or empty string.\n     * @private\n     */\n\n  }, {\n    key: \"checkAnswer_\",\n    value: function checkAnswer_() {\n      var feedback = '';\n\n      for (var i = 0; i < this.expectedAnswer_.length; i++) {\n        var staveFeedback = this.staves_[i].getFeedback(this.expectedAnswer_[i]);\n\n        if (staveFeedback) {\n          feedback += staveFeedback;\n        }\n      }\n\n      return feedback;\n    }\n  }]);\n\n  return Music;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbXVzaWMuanM/MmE0ZiJdLCJuYW1lcyI6WyJSRVNUIiwiVHJhbnNjcmlwdCIsIm5vdGVzQW5kUmVzdHMiLCJkdXJhdGlvbnMiLCJsZW5ndGgiLCJjb25zb2xlIiwiZXJyb3IiLCJzaXplIiwicmVhZGFibGVUZXh0XyIsImkiLCJhcHBlbmROb3RlIiwidGV4dCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJpdGVtcyIsInNwbGl0Iiwiam9pbiIsIm5vdGUiLCJkdXJhdGlvbiIsInB1c2giLCJhcHBlbmRSZWFkYWJsZVRleHRfIiwiZ2V0RHVyYXRpb25UZXh0XyIsImR1cmF0aW9uVGV4dCIsIlN0YXZlIiwiaWQiLCJzdGF0ZVN0YWNrIiwiZG9uZSIsInBhdXNlVW50aWw2NHRoc18iLCJ0cmFuc2NyaXB0XyIsIm5vdGVfIiwiY2xvY2s2NHRocyIsInBpdGNoIiwic3RvcFNvdW5kIiwibm90ZVBsYXllciIsInRyaWdnZXJBdHRhY2siLCJhcHBlbmRSZXN0IiwidHJpZ2dlclJlbGVhc2UiLCJleHBlY3RlZFRyYW5zY3JpcHQiLCJmZWVkYmFjayIsImFjdHVhbFNpemUiLCJleHBlY3RlZFNpemUiLCJzaXplTWlzbWF0Y2giLCJoYXNJbmNvcnJlY3ROb3RlcyIsImhhc0luY29ycmVjdER1cmF0aW9uIiwiZ2V0UmVhZGFibGVUZXh0IiwiTXVzaWMiLCJ3b3Jrc3BhY2UiLCJvbkdvYWxVcGRhdGVDYiIsIm9uU3VjY2Vzc0NiIiwib25GYWlsdXJlQ2IiLCJsZXZlbCIsIm9uR29hbFVwZGF0ZSIsImV4cGVjdGVkQW5zd2VyXyIsImludGVycHJldGVyXyIsInN0YXZlc18iLCJhY3RpdmVTdGF2ZV8iLCJzdGFydFRpbWVfIiwiY2xvY2s2NHRoc18iLCJzcGVlZF8iLCJwaWRfIiwib25TdWNjZXNzQ2FsbGJhY2tfIiwib25GYWlsdXJlQ2FsbGJhY2tfIiwicmVnaXN0ZXJQbGF5U2hvcnRjdXQiLCJuZXdGdW5jdGlvbiIsImV4ZWN1dGUiLCJiaW5kIiwicGxheVNob3J0Y3V0IiwibmFtZSIsInByZWNvbmRpdGlvbkZuIiwia2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSIsIm9wdGlvbnMiLCJyZWFkT25seSIsImNhbGxiYWNrIiwiQmxvY2tseSIsIlNob3J0Y3V0UmVnaXN0cnkiLCJyZWdpc3RyeSIsInJlZ2lzdGVyIiwic2hpZnRXIiwiY3JlYXRlU2VyaWFsaXplZEtleSIsInV0aWxzIiwiS2V5Q29kZXMiLCJQIiwiU0hJRlQiLCJhZGRLZXlNYXBwaW5nIiwiYmxvY2tYbWwiLCJjbGVhciIsIlhtbCIsImRvbVRvV29ya3NwYWNlIiwidGV4dFRvRG9tIiwidG9vbGJveERlZiIsInVwZGF0ZVRvb2xib3giLCJnb2FsVGV4dCIsIkFycmF5IiwiZmlsbCIsInRvb2xib3hKc29uIiwibGV2ZWxYbWwiLCJsb2FkV29ya3NwYWNlQmxvY2tzIiwiTnVtYmVyIiwidXBkYXRlTGV2ZWxHb2FsXyIsInVwZGF0ZUxldmVsVG9vbGJveF8iLCJsb2FkTGV2ZWxCbG9ja3NfIiwic3BlZWQiLCJjb2RlSnMiLCJKYXZhU2NyaXB0Iiwid29ya3NwYWNlVG9Db2RlIiwibG9nIiwiY2xlYXJUaW1lb3V0IiwiZm9yRWFjaCIsInN0YXZlIiwicmVzZXQiLCJjb2RlIiwiSW50ZXJwcmV0ZXIiLCJpbnRlcnByZXRlckluaXRfIiwiaW50ZXJwcmV0ZXIiLCJzY29wZSIsImdsb2JhbFNjb3BlIiwiYXBwZW5kQ29kZSIsInNldFRpbWVvdXQiLCJ0aWNrXyIsImdsb2JhbE9iamVjdCIsIndyYXBwZXIiLCJfaWQiLCJwbGF5XyIsInNldFByb3BlcnR5IiwiY3JlYXRlTmF0aXZlRnVuY3Rpb24iLCJyZXN0XyIsInBsYXkiLCJyZXN0Iiwic2NhbGVEdXJhdGlvbiIsIkRhdGUiLCJub3ciLCJpc1BhdXNlZCIsImV4ZWN1dGVDaHVua18iLCJjaGVja0Fuc3dlcl8iLCJtcyIsInRpY2tzIiwiZ28iLCJzdGVwIiwiZSIsImFsZXJ0Iiwid2FybiIsInN0YXZlRmVlZGJhY2siLCJn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LENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLNEMsZUFBTCxDQUFxQmpELE1BQXpDLEVBQWlESyxDQUFDLEVBQWxELEVBQXNEO0FBQ3BELFlBQU1xSSxhQUFhLEdBQ2YsS0FBS3ZGLE9BQUwsQ0FBYTlDLENBQWIsRUFBZ0JzSSxXQUFoQixDQUE0QixLQUFLMUYsZUFBTCxDQUFxQjVDLENBQXJCLENBQTVCLENBREo7O0FBRUEsWUFBSXFJLGFBQUosRUFBbUI7QUFDakJ2RyxrQkFBUSxJQUFJdUcsYUFBWjtBQUNEO0FBQ0Y7O0FBQ0QsYUFBT3ZHLFFBQVA7QUFDRDtBQWxaSDs7QUFBQTtBQUFBIiwiZmlsZSI6Ii4vc3JjL211c2ljLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgR2FtZSBsb2dpYyBmb3IgbXVzaWMgZ2FtZS5cbiAqL1xuXG5pbXBvcnQgQmxvY2tseSBmcm9tICdibG9ja2x5L2NvcmUnO1xuaW1wb3J0ICcuL211c2ljX2Jsb2Nrcyc7XG4vLyBpbXBvcnQge3NwZWFrZXJ9IGZyb20gJy4vc3BlYWtlcic7XG4vLyBpbXBvcnQge3Rvb2xib3hQaXRjaH0gZnJvbSAnLi9tdXNpY19ibG9ja3MnO1xuLy8gaW1wb3J0IHtDdXN0b21DdXJzb3J9IGZyb20gJy4vY3VzdG9tX2N1cnNvcic7XG5pbXBvcnQgJy4vbXVzaWNfYmxvY2tfZ2VuZXJhdG9ycyc7XG5pbXBvcnQgSW50ZXJwcmV0ZXIgZnJvbSAnanMtaW50ZXJwcmV0ZXInO1xuaW1wb3J0IHtub3RlUGxheWVyfSBmcm9tICcuL25vdGVfcGxheWVyJztcblxuLyoqXG4gKiBDb25zdGFudCBkZW5vdGluZyBhIHJlc3QuXG4gKi9cbmNvbnN0IFJFU1QgPSAnUkVTVCc7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIHRyYW5zY3JpcHQgb2Ygbm90ZXMgcGxheWVkLlxuICovXG5jbGFzcyBUcmFuc2NyaXB0IHtcbiAgLyoqXG4gICAqIENsYXNzIGZvciBob2xkaW5nIHRyYW5zY3JpcHQgb2Ygbm90ZXMgdGhhdCB3ZXJlIHBsYXllZC4gRXhwZWN0c1xuICAgKiBub3Rlc0FuZFJlc3RzIGFuZCBkdXJhdGlvbnMgdG8gaGF2ZSBhIG1hdGNoaW5nIGxlbmd0aC5cbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBub3Rlc0FuZFJlc3RzIFRoZSBub3RlcyBhbmQgcmVzdHMuXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZHVyYXRpb25zIFRoZSBkdXJhdGlvbnMgb2YgdGhlIG5vdGVzIGFuZCByZXN0cy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG5vdGVzQW5kUmVzdHMgPSBbXSwgZHVyYXRpb25zID0gW10pIHtcbiAgICBpZiAobm90ZXNBbmRSZXN0cy5sZW5ndGggIT09IGR1cmF0aW9ucy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zY3JpcHQgbGVuZ3RoIG1pc21hdGNoLicpO1xuICAgIH1cbiAgICB0aGlzLm5vdGVzQW5kUmVzdHMgPSBbXTtcbiAgICB0aGlzLmR1cmF0aW9ucyA9IFtdO1xuICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgdGhpcy5yZWFkYWJsZVRleHRfID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub3Rlc0FuZFJlc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmFwcGVuZE5vdGUobm90ZXNBbmRSZXN0c1tpXSwgZHVyYXRpb25zW2ldKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgZHVyYXRpb24gbnVtYmVyIGludG8gYXBwcm9yaWF0ZSBzdHJpbmcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBUaGUgZHVyYXRpb24uXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHN0cmluZyB2ZXJzaW9uIG9mIGR1cmF0aW9uLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIGdldER1cmF0aW9uVGV4dF8oZHVyYXRpb24pIHtcbiAgICBsZXQgZHVyYXRpb25UZXh0ID0gJ3Vua25vd24nO1xuICAgIHN3aXRjaCAoZHVyYXRpb24pIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgZHVyYXRpb25UZXh0ID0gJ3dob2xlJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDAuNTpcbiAgICAgICAgZHVyYXRpb25UZXh0ID0gJ2hhbGYnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMC4yNTpcbiAgICAgICAgZHVyYXRpb25UZXh0ID0gJ3F1YXJ0ZXInO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMC4xMjU6XG4gICAgICAgIGR1cmF0aW9uVGV4dCA9ICdlaWdodCc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gZHVyYXRpb25UZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVybmFsIG1ldGhvZCBmb3IgYXBwZW5kaW5nIHRleHQgdG8gdHJhbnNjcmlwdCB0ZXh0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBhcHBlbmQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcHBlbmRSZWFkYWJsZVRleHRfKHRleHQpIHtcbiAgICBpZiAodGhpcy5yZWFkYWJsZVRleHRfKSB7XG4gICAgICB0aGlzLnJlYWRhYmxlVGV4dF8gKz0gJywgJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGV4dCA9IHRleHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0ZXh0LnNsaWNlKDEpO1xuICAgIH1cbiAgICB0aGlzLnJlYWRhYmxlVGV4dF8gKz0gdGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHNlbnRlbmNlIHJlcHJlc2VudGluZyB0aGUgbm90ZXMgcGxheWVkIGluIHRoaXMgdHJhbnNjcmlwdC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgc2VudGVuY2UuXG4gICAqL1xuICBnZXRSZWFkYWJsZVRleHQoKSB7XG4gICAgaWYgKCF0aGlzLnJlYWRhYmxlVGV4dF8pIHtcbiAgICAgIHJldHVybiAnRW1wdHkuJztcbiAgICB9XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLnJlYWRhYmxlVGV4dF8uc3BsaXQoJywnKTtcbiAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV0gPSAnIGFuZCAnICsgaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBpdGVtcy5qb2luKCcsJykgKyAnLic7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kcyBub3RlIHRvIHRyYW5zY3JpcHQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBub3RlIFRoZSBwaXRjaCBvZiBub3RlIHRvIGFwcGVuZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIFRoZSBkdXJhdGlvbiBvZiB0aGUgbm90ZS5cbiAgICovXG4gIGFwcGVuZE5vdGUobm90ZSwgZHVyYXRpb24pIHtcbiAgICB0aGlzLm5vdGVzQW5kUmVzdHMucHVzaChub3RlKTtcbiAgICB0aGlzLmR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKTtcbiAgICB0aGlzLmFwcGVuZFJlYWRhYmxlVGV4dF8oXG4gICAgICAgIGBwbGF5ICR7VHJhbnNjcmlwdC5nZXREdXJhdGlvblRleHRfKGR1cmF0aW9uKX0gbm90ZSAke25vdGV9YCk7XG4gICAgdGhpcy5zaXplKys7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGVuZHMgcmVzdCB0byB0cmFuc2NyaXB0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gVGhlIGR1cmF0aW9uIG9mIHRoZSByZXN0LlxuICAgKi9cbiAgYXBwZW5kUmVzdChkdXJhdGlvbikge1xuICAgIHRoaXMubm90ZXNBbmRSZXN0cy5wdXNoKFJFU1QpO1xuICAgIHRoaXMuZHVyYXRpb25zLnB1c2goZHVyYXRpb24pO1xuICAgIHRoaXMuYXBwZW5kUmVhZGFibGVUZXh0XyhcbiAgICAgICAgYCR7VHJhbnNjcmlwdC5nZXREdXJhdGlvblRleHRfKGR1cmF0aW9uKX0gcmVzdGApO1xuICAgIHRoaXMuc2l6ZSsrO1xuICB9XG59XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIG11c2ljYWwgc3RhdmUuXG4gKi9cbmNsYXNzIFN0YXZlIHtcbiAgLyoqXG4gICAqIENsYXNzIGhvbGRpbmcgY29kZSBmb3IgbXVzaWMgdG8gcGxheS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkIFRoZSB1bmlxdWUgaWQgb2YgdGhpcyBzdGF2ZS5cbiAgICogQHBhcmFtIHtBcnJheTxJbnRlcnByZXRlci5TdGF0ZT59IHN0YXRlU3RhY2sgVGhlIHN0YXRlU3RhY2sgY29udGFpbmluZyBjb2RlXG4gICAqICAgIGZvciB0aGlzIHN0YXZlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoaWQsIHN0YXRlU3RhY2spIHtcbiAgICAvKipcbiAgICAgKiBUaGUgaWQuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgLyoqXG4gICAgICogVGhlIHN0YXRlIHN0YWNrLlxuICAgICAqIEB0eXBlIHtBcnJheTxJbnRlcnByZXRlci5TdGF0ZT59XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZVN0YWNrID0gc3RhdGVTdGFjaztcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgYWxsIHRoZSBub3RlcyBoYXZlIGJlbiBwbGF5ZWQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5kb25lID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdGltZSB0byBwYXVzZSB0aWxsLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnBhdXNlVW50aWw2NHRoc18gPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zY3JpcHQgb2Ygbm90ZXMgcGxheWVkLlxuICAgICAqIEB0eXBlIHtUcmFuc2NyaXB0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50cmFuc2NyaXB0XyA9IG5ldyBUcmFuc2NyaXB0KCk7XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50bHkgcGxheWluZyBub3RlLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm5vdGVfID0gJyc7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGlzIHN0YXZlIGlzIGN1cnJlbnRseSBwYXVzZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjbG9jazY0dGhzIE51bWJlciBvZiAxLzY0dGhzIG5vdGVzIHNpbmNlIHRoZSBzdGFydC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIHN0YXZlIGlzIHBhdXNlZC5cbiAgICovXG4gIGlzUGF1c2VkKGNsb2NrNjR0aHMpIHtcbiAgICByZXR1cm4gdGhpcy5wYXVzZVVudGlsNjR0aHNfID4gY2xvY2s2NHRocztcbiAgfVxuXG4gIC8qKlxuICAgKiBQbGF5IG9uZSBub3RlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gRnJhY3Rpb24gb2YgYSB3aG9sZSBub3RlIGxlbmd0aCB0byBwbGF5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGl0Y2ggTm90ZSB0byBwbGF5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gY2xvY2s2NHRocyBOdW1iZXIgb2YgMS82NHRocyBub3RlcyBzaW5jZSB0aGUgc3RhcnQuXG4gICAqL1xuICBwbGF5KGR1cmF0aW9uLCBwaXRjaCwgY2xvY2s2NHRocykge1xuICAgIHRoaXMuc3RvcFNvdW5kKCk7XG4gICAgdGhpcy5ub3RlXyA9IHBpdGNoO1xuICAgIG5vdGVQbGF5ZXIudHJpZ2dlckF0dGFjayhwaXRjaCk7XG4gICAgdGhpcy5wYXVzZVVudGlsNjR0aHNfID0gZHVyYXRpb24gKiA2NCArIGNsb2NrNjR0aHM7XG4gICAgLy8gTWFrZSBhIHJlY29yZCBvZiB0aGlzIG5vdGUuXG4gICAgdGhpcy50cmFuc2NyaXB0Xy5hcHBlbmROb3RlKHBpdGNoLCBkdXJhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogV2FpdCBvbmUgcmVzdC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIEZyYWN0aW9uIG9mIGEgd2hvbGUgbm90ZSBsZW5ndGggdG8gcmVzdC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNsb2NrNjR0aHMgTnVtYmVyIG9mIDEvNjR0aHMgbm90ZXMgc2luY2UgdGhlIHN0YXJ0LlxuICAgKi9cbiAgcmVzdChkdXJhdGlvbiwgY2xvY2s2NHRocykge1xuICAgIHRoaXMuc3RvcFNvdW5kKCk7XG4gICAgdGhpcy5wYXVzZVVudGlsNjR0aHNfID0gZHVyYXRpb24gKiA2NCArIGNsb2NrNjR0aHM7XG4gICAgLy8gTWFrZSBhIHJlY29yZCBvZiB0aGlzIHJlc3QuXG4gICAgdGhpcy50cmFuc2NyaXB0Xy5hcHBlbmRSZXN0KGR1cmF0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyBjdXJyZW50bHkgcGxheWluZyBub3RlLlxuICAgKi9cbiAgc3RvcFNvdW5kKCkge1xuICAgIGlmICh0aGlzLm5vdGVfKSB7XG4gICAgICBub3RlUGxheWVyLnRyaWdnZXJSZWxlYXNlKCk7XG4gICAgICB0aGlzLm5vdGVfID0gJyc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZmVlZGJhY2sgb24gd2hhdCBpcyBkaWZmZXJlbnQgYmV0d2VlbiB0aGUgbG9hZGVkIHRyYW5zY3JpcHQgYW5kIHRoZVxuICAgKiBleHBlY3RlZCBvbmUsIG9yIGVtcHR5IHN0cmluZyBpZiB0aGV5IGFyZSBlcXVhbC5cbiAgICogQHBhcmFtIHtUcmFuc2NyaXB0fSBleHBlY3RlZFRyYW5zY3JpcHQgVGhlIGV4cGVjdGVkIHRyYW5zY3JpcHQuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGZlZWRiYWNrLlxuICAgKi9cbiAgZ2V0RmVlZGJhY2soZXhwZWN0ZWRUcmFuc2NyaXB0KSB7XG4gICAgbGV0IGZlZWRiYWNrID0gJyc7XG5cbiAgICAvLyBUaGVyZSBjb3VsZCBiZSBleHRyYSBvciBtaXNzaW5nIG5vdGVzLlxuICAgIGNvbnN0IGFjdHVhbFNpemUgPSB0aGlzLnRyYW5zY3JpcHRfLnNpemU7XG4gICAgY29uc3QgZXhwZWN0ZWRTaXplID0gZXhwZWN0ZWRUcmFuc2NyaXB0LnNpemU7XG4gICAgY29uc3Qgc2l6ZU1pc21hdGNoID0gYWN0dWFsU2l6ZSAhPT0gZXhwZWN0ZWRTaXplO1xuICAgIGlmIChhY3R1YWxTaXplIDwgZXhwZWN0ZWRTaXplKSB7XG4gICAgICBmZWVkYmFjayArPSAnWW91ciBzb2x1dGlvbiBpcyBtaXNzaW5nIG5vdGVzLlxcbic7XG4gICAgfSBlbHNlIGlmIChhY3R1YWxTaXplID4gZXhwZWN0ZWRTaXplKSB7XG4gICAgICBmZWVkYmFjayArPSAnWW91ciBzb2x1dGlvbiBoYXMgZXh0cmEgbm90ZXMuXFxuJztcbiAgICB9XG5cbiAgICAvLyBUaGUgbm90ZXMgcGxheWVkIGNvdWxkIGJlIHdyb25nIChkdXJhdGlvbiBvciBub3RlKS5cbiAgICBsZXQgaGFzSW5jb3JyZWN0Tm90ZXMgPSBmYWxzZTtcbiAgICBsZXQgaGFzSW5jb3JyZWN0RHVyYXRpb24gPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdHVhbFNpemUgJiYgaSA8IGV4cGVjdGVkU2l6ZTsgaSsrKSB7XG4gICAgICBpZiAodGhpcy50cmFuc2NyaXB0Xy5ub3Rlc0FuZFJlc3RzW2ldICE9PVxuICAgICAgICAgIGV4cGVjdGVkVHJhbnNjcmlwdC5ub3Rlc0FuZFJlc3RzW2ldKSB7XG4gICAgICAgIGhhc0luY29ycmVjdE5vdGVzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnRyYW5zY3JpcHRfLmR1cmF0aW9uc1tpXSAhPT0gZXhwZWN0ZWRUcmFuc2NyaXB0LmR1cmF0aW9uc1tpXSkge1xuICAgICAgICBoYXNJbmNvcnJlY3REdXJhdGlvbiA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNJbmNvcnJlY3ROb3Rlcykge1xuICAgICAgZmVlZGJhY2sgKz1cbiAgICAgICAgICBgU29tZSBvZiB0aGUgbm90ZXMgJHtzaXplTWlzbWF0Y2ggPyAnbWF5IGJlJyA6ICdhcmUnfSBpbmNvcnJlY3QuXFxuYDtcbiAgICB9XG4gICAgaWYgKGhhc0luY29ycmVjdER1cmF0aW9uKSB7XG4gICAgICBmZWVkYmFjayArPSBgU29tZSBvZiB0aGUgbm90ZSBkdXJhdGlvbnMgYCArXG4gICAgICAgICAgYCR7c2l6ZU1pc21hdGNoID8gJ21heSBiZScgOiAnYXJlJ30gaW5jb3JyZWN0LlxcbmA7XG4gICAgfVxuXG4gICAgLy8gQXBwZW5kIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIG5vdGVzIHBsYXllZC5cbiAgICBpZiAoc2l6ZU1pc21hdGNoIHx8IGhhc0luY29ycmVjdE5vdGVzIHx8IGhhc0luY29ycmVjdER1cmF0aW9uKSB7XG4gICAgICBmZWVkYmFjayArPVxuICAgICAgICAgIGBcXG5Zb3VyIHNvbHV0aW9uOiAke3RoaXMudHJhbnNjcmlwdF8uZ2V0UmVhZGFibGVUZXh0KCkgfHwgJ2VtcHR5J31cXG5gO1xuICAgICAgZmVlZGJhY2sgKz0gYEV4cGVjdGVkIHNvbHV0aW9uOiAke2V4cGVjdGVkVHJhbnNjcmlwdC5nZXRSZWFkYWJsZVRleHQoKX1gO1xuICAgIH1cbiAgICByZXR1cm4gZmVlZGJhY2s7XG4gIH1cbn1cblxuLyoqXG4gKiBHYW1lIGxvZ2ljIGZvciBtdXNpYyBnYW1lLlxuICovXG5leHBvcnQgY2xhc3MgTXVzaWMge1xuICAvKipcbiAgICogQ2xhc3MgZm9yIGEgbXVzaWMgZ2FtZS5cbiAgICogQHBhcmFtIHtCbG9ja2x5LldvcmtzcGFjZVN2Z30gd29ya3NwYWNlIFRoZSBCbG9ja2x5IHdvcmtzcGFjZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpfSBvbkdvYWxVcGRhdGVDYiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gZm9yIGdvYWxcbiAgICogICAgY2hhbmdlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IG9uU3VjY2Vzc0NiIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBmb3Igb24gc3VjY2VzcyBldmVudC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpfSBvbkZhaWx1cmVDYiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gZm9yIG9uIGZhaWx1cmVcbiAgICogICAgZXZlbnQuXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3Iod29ya3NwYWNlLCBvbkdvYWxVcGRhdGVDYiwgb25TdWNjZXNzQ2IsIG9uRmFpbHVyZUNiKSB7XG4gICAgLyoqXG4gICAgICogVGhlIEJsb2NrbHkgd29ya3NwYWNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGdhbWUuXG4gICAgICogQHR5cGUgeyFCbG9ja2x5LldvcmtzcGFjZVN2Z31cbiAgICAgKi9cbiAgICB0aGlzLndvcmtzcGFjZSA9IHdvcmtzcGFjZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50bHkgbG9hZGVkIGxldmVsLiAwIGlmIG5vIGxldmVsIGxvYWRlZC5cbiAgICAgKi9cbiAgICB0aGlzLmxldmVsID0gMDtcblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciBnb2FsIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBzZXQgdGhlIGdvYWwgdG8uXG4gICAgICovXG4gICAgdGhpcy5vbkdvYWxVcGRhdGUgPSBvbkdvYWxVcGRhdGVDYjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBleHBlY3RlZCBhbnN3ZXIuXG4gICAgICogQHR5cGUge0FycmF5PFRyYW5zY3JpcHQ+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5leHBlY3RlZEFuc3dlcl8gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbnRlcnByZXRlci5cbiAgICAgKiBAdHlwZSB7P0ludGVycHJldGVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pbnRlcnByZXRlcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PFN0YXZlPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc3RhdmVzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWN0aXZlIHN0YXZlLlxuICAgICAqIEB0eXBlIHs/U3RhdmV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmFjdGl2ZVN0YXZlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUaW1lIG9mIHN0YXJ0IG9mIGV4ZWN1dGlvbi5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdGFydFRpbWVfID0gMDtcblxuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiAxLzY0dGhzIG5vdGVzIHNpbmNlIHRoZSBzdGFydC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jbG9jazY0dGhzXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc3BlZWQgYXQgd2hpY2ggdG8gcGxheSBub3Rlcy4gQmV0d2VlbiAwIGFuZCAxLCB3aXRoIDAgYmVpbmcgc2xvdyxcbiAgICAgKiAwLjUgYmVpbmcgbm9ybWFsIHNwZWVkLCBhbmQgMSBiZWluZyBmYXN0LlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNwZWVkXyA9IDAuNTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBpZCBvZiB0aGUgbGFzdCBzZXRUaW1lb3V0IGNhbGwuIFVzZWQgZm9yIGdhbWUgcmVzZXQuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucGlkXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gb24gbGV2ZWwgc3VjY2Vzcy5cbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oKX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub25TdWNjZXNzQ2FsbGJhY2tfID0gb25TdWNjZXNzQ2I7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gb24gbGV2ZWwgZmFpbHVyZS5cbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oc3RyaW5nKX1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmVlZGJhY2sgVGhlIGxldmVsIGZlZWRiYWNrLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5vbkZhaWx1cmVDYWxsYmFja18gPSBvbkZhaWx1cmVDYjtcblxuICAgIHRoaXMucmVnaXN0ZXJQbGF5U2hvcnRjdXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBzaG9ydGN1dCB0byBwbGF5IHRoZSBub3RlcyBvbiB0aGUgd29ya3NwYWNlLlxuICAgKi9cbiAgcmVnaXN0ZXJQbGF5U2hvcnRjdXQoKSB7XG4gICAgY29uc3QgbmV3RnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZXhlY3V0ZSgpO1xuICAgIH0uYmluZCh0aGlzKTtcbiAgICAvKiogQHR5cGUgeyFCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkuS2V5Ym9hcmRTaG9ydGN1dH0gKi9cbiAgICBjb25zdCBwbGF5U2hvcnRjdXQgPSB7XG4gICAgICBuYW1lOiAncGxheVNob3J0Y3V0JyxcbiAgICAgIHByZWNvbmRpdGlvbkZuOiBmdW5jdGlvbih3b3Jrc3BhY2UpIHtcbiAgICAgICAgcmV0dXJuIHdvcmtzcGFjZS5rZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlICYmXG4gICAgICAgICAgICAhd29ya3NwYWNlLm9wdGlvbnMucmVhZE9ubHk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IG5ld0Z1bmN0aW9uLFxuICAgIH07XG5cbiAgICBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkucmVnaXN0ZXIocGxheVNob3J0Y3V0KTtcbiAgICBjb25zdCBzaGlmdFcgPSBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkuY3JlYXRlU2VyaWFsaXplZEtleShcbiAgICAgICAgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5QLCBbQmxvY2tseS51dGlscy5LZXlDb2Rlcy5TSElGVF0pO1xuICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5hZGRLZXlNYXBwaW5nKFxuICAgICAgICBzaGlmdFcsIHBsYXlTaG9ydGN1dC5uYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIHdvcmtzcGFjZSBhbmQgbG9hZHMgdGhlIHNwZWNpZmllZCBibG9ja3MuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBibG9ja1htbCBUaGUgeG1sIHRleHQgc3RyaW5nIG9mIGJsb2Nrcy5cbiAgICovXG4gIGxvYWRXb3Jrc3BhY2VCbG9ja3MoYmxvY2tYbWwpIHtcbiAgICB0aGlzLndvcmtzcGFjZS5jbGVhcigpO1xuICAgIEJsb2NrbHkuWG1sLmRvbVRvV29ya3NwYWNlKFxuICAgICAgICBCbG9ja2x5LlhtbC50ZXh0VG9Eb20oYmxvY2tYbWwpLCB0aGlzLndvcmtzcGFjZSk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY3VycmVudGx5IGxvYWRlZCB0b29sYm94LlxuICAgKiBAcGFyYW0gez9CbG9ja2x5LnV0aWxzLnRvb2xib3guVG9vbGJveERlZmluaXRpb259IHRvb2xib3hEZWZcbiAgICogICAgRE9NIHRyZWUgb2YgdG9vbGJveCBjb250ZW50cywgc3RyaW5nIG9mIHRvb2xib3ggY29udGVudHMsIG9yIEpTT05cbiAgICogICAgcmVwcmVzZW50aW5nIHRvb2xib3ggZGVmaW5pdGlvbi5cbiAgICovXG4gIHVwZGF0ZVRvb2xib3godG9vbGJveERlZikge1xuICAgIHRoaXMud29ya3NwYWNlLnVwZGF0ZVRvb2xib3godG9vbGJveERlZik7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgZ29hbCBiYXNlZCBvbiB0aGUgY3VycmVudCBsZXZlbC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZUxldmVsR29hbF8oKSB7XG4gICAgbGV0IGdvYWxUZXh0ID0gJyc7XG4gICAgc3dpdGNoICh0aGlzLmxldmVsKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHRoaXMuZXhwZWN0ZWRBbnN3ZXJfID1cbiAgICAgICAgICAgIFtuZXcgVHJhbnNjcmlwdChbJ0M0JywgJ0Q0JywgJ0U0JywgJ0M0J10sIEFycmF5KDQpLmZpbGwoMC4yNSkpXTtcbiAgICAgICAgZ29hbFRleHQgPSB0aGlzLmV4cGVjdGVkQW5zd2VyX1swXS5nZXRSZWFkYWJsZVRleHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMub25Hb2FsVXBkYXRlKGdvYWxUZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB0b29sYm94IGJhc2VkIG9uIHRoZSBjdXJyZW50IGxldmVsLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlTGV2ZWxUb29sYm94XygpIHtcbiAgICBjb25zdCB0b29sYm94SnNvbiA9IHtcbiAgICAgICdraW5kJzogJ2ZseW91dFRvb2xib3gnLFxuICAgICAgJ2NvbnRlbnRzJzogW1xuICAgICAgICB7XG4gICAgICAgICAgJ2tpbmQnOiAnYmxvY2snLFxuICAgICAgICAgICdibG9ja3htbCc6IGA8YmxvY2sgdHlwZT1cIm11c2ljX25vdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZCBuYW1lPVwiRFVSQVRJT05cIj4wLjI1PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx2YWx1ZSBuYW1lPVwiUElUQ0hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNoYWRvdyB0eXBlPVwibXVzaWNfcGl0Y2hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIlBJVENIXCI+QzQ8L2ZpZWxkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NoYWRvdz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdmFsdWU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9ibG9jaz5gLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ2tpbmQnOiAnYmxvY2snLFxuICAgICAgICAgICd0eXBlJzogJ211c2ljX3Jlc3QnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuICAgIHRoaXMudXBkYXRlVG9vbGJveCh0b29sYm94SnNvbik7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB3b3Jrc3BhY2UgYmxvY2tzIGJhc2VkIG9uIHRoZSBjdXJyZW50IGxldmVsLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbG9hZExldmVsQmxvY2tzXygpIHtcbiAgICBjb25zdCBsZXZlbFhtbCA9XG4gICAgICAgIGA8eG1sPlxuICAgICAgICAgICAgPGJsb2NrIHR5cGU9XCJtdXNpY19zdGFydFwiIGRlbGV0YWJsZT1cImZhbHNlXCIgeD1cIjE4MFwiXG4gICAgICAgICAgICB5PVwiNTBcIj48L2Jsb2NrPlxuICAgICAgICAgIDwveG1sPmA7XG4gICAgdGhpcy5sb2FkV29ya3NwYWNlQmxvY2tzKGxldmVsWG1sKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHRoZSBzcGVjaWZpZWQgbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gbGV2ZWwgVGhlIGxldmVsIHRvIGxvYWQuXG4gICAqL1xuICBsb2FkTGV2ZWwobGV2ZWwpIHtcbiAgICB0aGlzLmxldmVsID0gTnVtYmVyKGxldmVsKTtcbiAgICB0aGlzLnVwZGF0ZUxldmVsR29hbF8oKTtcbiAgICB0aGlzLnVwZGF0ZUxldmVsVG9vbGJveF8oKTtcbiAgICB0aGlzLmxvYWRMZXZlbEJsb2Nrc18oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHNwZWVkIChOdW1iZXIgYmV0d2VlbiAwIGFuZCAxKS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNwZWVkIFRoZSBzcGVlZCB0byBzZXQgdG8uXG4gICAqL1xuICBzZXRTcGVlZChzcGVlZCkge1xuICAgIGlmIChzcGVlZCA8PSAwIHx8IHNwZWVkID4gMSkge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBzcGVlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNwZWVkXyA9IHNwZWVkO1xuICAgIHRoaXMuc3RhcnRUaW1lXyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGNvZGUgYW5kIGxvZ3MgaXQgdG8gdGhlIGNvbnNvbGUuXG4gICAqL1xuICBsb2dHZW5lcmF0ZWRDb2RlKCkge1xuICAgIGNvbnN0IGNvZGVKcyA9IEJsb2NrbHkuSmF2YVNjcmlwdC53b3Jrc3BhY2VUb0NvZGUodGhpcy53b3Jrc3BhY2UpO1xuICAgIGNvbnNvbGUubG9nKGNvZGVKcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIG11c2ljIHRvIHRoZSBzdGFydCBwb3NpdGlvbiwgY2xlYXIgdGhlIGRpc3BsYXksIGFuZCBraWxsIGFueVxuICAgKiBwZW5kaW5nIHRhc2tzLlxuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgLy8gS2lsbCBhbnkgdGFzay5cbiAgICBjbGVhclRpbWVvdXQodGhpcy5waWRfKTtcbiAgICB0aGlzLnN0YXZlc18uZm9yRWFjaCgoc3RhdmUpID0+IHtcbiAgICAgIHN0YXZlLnN0b3BTb3VuZCgpO1xuICAgIH0pO1xuICAgIHRoaXMuaW50ZXJwcmV0ZXJfID0gbnVsbDtcbiAgICB0aGlzLmFjdGl2ZVN0YXZlXyA9IG51bGw7XG4gICAgdGhpcy5zdGF2ZXNfLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5jbG9jazY0dGhzXyA9IDA7XG4gICAgdGhpcy5zdGFydFRpbWVfID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQbGF5cyBtdXNpYyBiYXNlZCBvbiB0aGUgYmxvY2tzIG9uIHRoZSB3b3Jrc3BhY2UuXG4gICAqL1xuICBleGVjdXRlKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgICAvLyBHZXQgZ2VuZXJhdGVkIGNvZGUgZnJvbSB3b3Jrc3BhY2VcbiAgICBjb25zdCBjb2RlID0gQmxvY2tseS5KYXZhU2NyaXB0LndvcmtzcGFjZVRvQ29kZSh0aGlzLndvcmtzcGFjZSk7XG5cbiAgICAvLyBSdW4gdXNlciBjb2RlLlxuICAgIHRoaXMuaW50ZXJwcmV0ZXJfID0gbmV3IEludGVycHJldGVyKGNvZGUsIHRoaXMuaW50ZXJwcmV0ZXJJbml0Xy5iaW5kKHRoaXMpKTtcbiAgICAvLyBUT0RPIGFkZCBzdXBwb3J0IGZvciBtdWx0aXBsZSB0aHJlYWRzLlxuICAgIGNvbnN0IGludGVycHJldGVyID0gbmV3IEludGVycHJldGVyKCcnKTtcbiAgICAvLyBSZXBsYWNlIHRoaXMgdGhyZWFkJ3MgZ2xvYmFsIHNjb3BlIHdpdGggdGhlIGNyb3NzLXRocmVhZCBnbG9iYWwuXG4gICAgaW50ZXJwcmV0ZXIuc3RhdGVTdGFja1swXS5zY29wZSA9IHRoaXMuaW50ZXJwcmV0ZXJfLmdsb2JhbFNjb3BlO1xuICAgIC8vIEFkZCBzdGFydCBjYWxsLlxuICAgIGludGVycHJldGVyLmFwcGVuZENvZGUoJ3N0YXJ0KCk7XFxuJyk7XG4gICAgdGhpcy5zdGF2ZXNfLnB1c2gobmV3IFN0YXZlKDAsIGludGVycHJldGVyLnN0YXRlU3RhY2spKTtcblxuICAgIHRoaXMucGlkXyA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy50aWNrXygpLCAxMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEluamVjdCB0aGUgTXVzaWMgQVBJIGludG8gYSBKYXZhU2NyaXB0IGludGVycHJldGVyLlxuICAgKiBAcGFyYW0geyFJbnRlcnByZXRlcn0gaW50ZXJwcmV0ZXIgVGhlIEpTLUludGVycHJldGVyLlxuICAgKiBAcGFyYW0geyFJbnRlcnByZXRlci5PYmplY3R9IGdsb2JhbE9iamVjdCBHbG9iYWwgb2JqZWN0LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaW50ZXJwcmV0ZXJJbml0XyhpbnRlcnByZXRlciwgZ2xvYmFsT2JqZWN0KSB7XG4gICAgLy8gQVBJXG4gICAgbGV0IHdyYXBwZXI7XG4gICAgd3JhcHBlciA9IChkdXJhdGlvbiwgcGl0Y2gsIF9pZCkgPT4ge1xuICAgICAgdGhpcy5wbGF5XyhkdXJhdGlvbiwgcGl0Y2gpO1xuICAgIH07XG4gICAgaW50ZXJwcmV0ZXIuc2V0UHJvcGVydHkoZ2xvYmFsT2JqZWN0LCAncGxheScsXG4gICAgICAgIGludGVycHJldGVyLmNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKHdyYXBwZXIpKTtcbiAgICB3cmFwcGVyID0gKGR1cmF0aW9uLCBfaWQpID0+IHtcbiAgICAgIHRoaXMucmVzdF8oZHVyYXRpb24pO1xuICAgIH07XG4gICAgaW50ZXJwcmV0ZXIuc2V0UHJvcGVydHkoZ2xvYmFsT2JqZWN0LCAncmVzdCcsXG4gICAgICAgIGludGVycHJldGVyLmNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKHdyYXBwZXIpKTtcblxuICAgIC8vIFRPRE8gaW1wbGVtZW50IHNldEluc3RydW1lbnQgQVBJLlxuICB9XG5cbiAgLyoqXG4gICAqIFBsYXkgb25lIG5vdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBGcmFjdGlvbiBvZiBhIHdob2xlIG5vdGUgbGVuZ3RoIHRvIHBsYXkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwaXRjaCBOb3RlIHBsYXkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwbGF5XyhkdXJhdGlvbiwgcGl0Y2gpIHtcbiAgICB0aGlzLmFjdGl2ZVN0YXZlXy5wbGF5KGR1cmF0aW9uLCBwaXRjaCwgdGhpcy5jbG9jazY0dGhzXyk7XG4gIH1cblxuICAvKipcbiAgICogV2FpdCBvbmUgcmVzdC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIEZyYWN0aW9uIG9mIGEgd2hvbGUgbm90ZSBsZW5ndGggdG8gcmVzdC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc3RfKGR1cmF0aW9uKSB7XG4gICAgdGhpcy5hY3RpdmVTdGF2ZV8ucmVzdChkdXJhdGlvbiwgdGhpcy5jbG9jazY0dGhzXyk7XG4gIH1cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSAxLzY0dGggdGljayBvZiB0aGUgcHJvZ3JhbS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRpY2tfKCkge1xuICAgIC8vIERlbGF5IGJldHdlZW4gc3RhcnQgb2YgZWFjaCBiZWF0ICgxLzY0dGhzIG9mIGEgd2hvbGUgbm90ZSkuXG4gICAgLy8gUmVtaW5kZXI6IFRoZSBzdGFydFRpbWVfIHNob3VsZCBiZSByZXNldCBhZnRlciB0aGUgc2xpZGVyIGlzIGFkanVzdGVkLlxuICAgIGNvbnN0IHNjYWxlRHVyYXRpb24gPSAxMDAwICogKDIuNSAtIDIgKiB0aGlzLnNwZWVkXykgLyA2NDtcbiAgICBpZiAoIXRoaXMuc3RhcnRUaW1lXykge1xuICAgICAgLy8gRWl0aGVyIHRoZSBmaXJzdCB0aWNrLCBvciBmaXJzdCB0aWNrIGFmdGVyIHNsaWRlciB3YXMgYWRqdXN0ZWQuXG4gICAgICB0aGlzLnN0YXJ0VGltZV8gPSBEYXRlLm5vdygpIC0gdGhpcy5jbG9jazY0dGhzXyAqIHNjYWxlRHVyYXRpb247XG4gICAgfVxuICAgIGxldCBkb25lID0gdHJ1ZTtcbiAgICB0aGlzLnN0YXZlc18uZm9yRWFjaCgoc3RhdmUpID0+IHtcbiAgICAgIGlmICghc3RhdmUuZG9uZSkge1xuICAgICAgICBkb25lID0gZmFsc2U7XG4gICAgICAgIGlmICghc3RhdmUuaXNQYXVzZWQodGhpcy5jbG9jazY0dGhzXykpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDaHVua18oc3RhdmUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoZG9uZSkge1xuICAgICAgLy8gUHJvZ3JhbSBjb21wbGV0ZS5cbiAgICAgIGNvbnN0IGZlZWRiYWNrID0gdGhpcy5jaGVja0Fuc3dlcl8oKTtcbiAgICAgIGlmIChmZWVkYmFjaykge1xuICAgICAgICB0aGlzLm9uRmFpbHVyZUNhbGxiYWNrXyhmZWVkYmFjayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uU3VjY2Vzc0NhbGxiYWNrXygpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsb2NrNjR0aHNfKys7XG4gICAgICBjb25zdCBtcyA9XG4gICAgICAgICAgKHRoaXMuc3RhcnRUaW1lXyArIHRoaXMuY2xvY2s2NHRoc18gKiBzY2FsZUR1cmF0aW9uKSAtIERhdGUubm93KCk7XG4gICAgICB0aGlzLnBpZF8gPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudGlja18oKSwgbXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgYml0ZS1zaXplZCBjaHVuayBvZiB0aGUgdXNlcidzIGNvZGUuXG4gICAqIEBwYXJhbSB7U3RhdmV9IHN0YXZlIFRoZSBzdGF2ZSB0byBleGVjdXRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhlY3V0ZUNodW5rXyhzdGF2ZSkge1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfID0gc3RhdmU7XG4gICAgLy8gU3dpdGNoIHRoZSBpbnRlcnByZXRlciB0byBydW4gdGhlIHByb3ZpZGVkIHN0YWZmLlxuICAgIHRoaXMuaW50ZXJwcmV0ZXJfLnN0YXRlU3RhY2sgPSBzdGF2ZS5zdGF0ZVN0YWNrO1xuICAgIGxldCB0aWNrcyA9IDEwMDAwO1xuICAgIGxldCBnbztcbiAgICBkbyB7XG4gICAgICB0cnkge1xuICAgICAgICBnbyA9IHRoaXMuaW50ZXJwcmV0ZXJfLnN0ZXAoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gVXNlciBlcnJvciwgdGVybWluYXRlIGluIHNoYW1lLlxuICAgICAgICBhbGVydChlKTtcbiAgICAgICAgZ28gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aWNrcy0tID09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdTdGFmZiAnICsgc3RhdmUuaWQgKyAnIGlzIHJ1bm5pbmcgc2xvd2x5LicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc3RhdmUuaXNQYXVzZWQodGhpcy5jbG9jazY0dGhzXykpIHtcbiAgICAgICAgLy8gUHJldmlvdXNseSBleGVjdXRlZCBjb21tYW5kIChwbGF5IG9yIHJlc3QpIHJlcXVlc3RlZCBhIHBhdXNlLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSB3aGlsZSAoZ28pO1xuICAgIC8vIFRocmVhZCBjb21wbGV0ZS4gIFdyYXAgdXAuXG4gICAgc3RhdmUuc3RvcFNvdW5kKHN0YXZlKTtcbiAgICBzdGF2ZS5kb25lID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZXMgd2hldGhlciB0aGUgYW5zd2VyIGZvciB0aGUgY3VycmVudGx5IGxvYWRlZCBsZXZlbCBpcyBjb3JyZWN0LlxuICAgKiBSZXR1cm5zIGxldmVsIGZlZWRiYWNrIGlmIGNvcnJlY3Qgb3IgZW1wdHkgc3RyaW5nIGlmIGNvcnJlY3QuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTGV2ZWwgZmVlZGJhY2sgb3IgZW1wdHkgc3RyaW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2hlY2tBbnN3ZXJfKCkge1xuICAgIGxldCBmZWVkYmFjayA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5leHBlY3RlZEFuc3dlcl8ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHN0YXZlRmVlZGJhY2sgPVxuICAgICAgICAgIHRoaXMuc3RhdmVzX1tpXS5nZXRGZWVkYmFjayh0aGlzLmV4cGVjdGVkQW5zd2VyX1tpXSk7XG4gICAgICBpZiAoc3RhdmVGZWVkYmFjaykge1xuICAgICAgICBmZWVkYmFjayArPSBzdGF2ZUZlZWRiYWNrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmVlZGJhY2s7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/music.js\n");

/***/ })

})
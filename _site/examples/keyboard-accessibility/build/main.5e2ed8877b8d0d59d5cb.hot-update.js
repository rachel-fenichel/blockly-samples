webpackHotUpdate("main",{

/***/ "./src/music.js":
/*!**********************!*\
  !*** ./src/music.js ***!
  \**********************/
/*! exports provided: Music */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Music\", function() { return Music; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _music_blocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./music_blocks */ \"./src/music_blocks.js\");\n/* harmony import */ var _speaker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./speaker */ \"./src/speaker.js\");\n/* harmony import */ var _custom_cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./custom_cursor */ \"./src/custom_cursor.js\");\n/* harmony import */ var _music_block_generators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./music_block_generators */ \"./src/music_block_generators.js\");\n/* harmony import */ var js_interpreter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-interpreter */ \"./node_modules/js-interpreter/lib/js-interpreter.js\");\n/* harmony import */ var js_interpreter__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_interpreter__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _note_player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./note_player */ \"./src/note_player.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Game logic for music game.\n */\n\n\n // import {toolboxPitch} from './music_blocks';\n\n\n\n\n\n/**\n * Constant denoting a rest.\n */\n\nvar REST = 'REST';\n/**\n * Class representing transcript of notes played.\n */\n\nvar Transcript = /*#__PURE__*/function () {\n  /**\n   * Class for holding transcript of notes that were played. Expects\n   * notesAndRests and durations to have a matching length.\n   * @param {Array<string>} notesAndRests The notes and rests.\n   * @param {Array<number>} durations The durations of the notes and rests.\n   */\n  function Transcript() {\n    var notesAndRests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var durations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, Transcript);\n\n    if (notesAndRests.length !== durations.length) {\n      console.error('Transcript length mismatch.');\n    }\n\n    this.notesAndRests = [];\n    this.durations = [];\n    this.size = 0;\n    this.readableText_ = '';\n\n    for (var i = 0; i < notesAndRests.length; i++) {\n      this.appendNote(notesAndRests[i], durations[i]);\n    }\n  }\n  /**\n   * Converts duration number into approriate string.\n   * @param {number} duration The duration.\n   * @return {string} The string version of duration.\n   * @private\n   */\n\n\n  _createClass(Transcript, [{\n    key: \"appendReadableText_\",\n\n    /**\n     * Internal method for appending text to transcript text.\n     * @param {string} text The text to append.\n     * @private\n     */\n    value: function appendReadableText_(text) {\n      if (this.readableText_) {\n        this.readableText_ += ', ';\n      } else {\n        text = text.charAt(0).toUpperCase() + text.slice(1);\n      }\n\n      this.readableText_ += text;\n    }\n    /**\n     * Returns sentence representing the notes played in this transcript.\n     * @return {string} The sentence.\n     */\n\n  }, {\n    key: \"getReadableText\",\n    value: function getReadableText() {\n      if (!this.readableText_) {\n        return 'Empty.';\n      }\n\n      var items = this.readableText_.split(',');\n\n      if (items.length > 1) {\n        items[items.length - 1] = ' and ' + items[items.length - 1];\n      }\n\n      return items.join(',') + '.';\n    }\n    /**\n     * Appends note to transcript.\n     * @param {string} note The pitch of note to append.\n     * @param {number} duration The duration of the note.\n     */\n\n  }, {\n    key: \"appendNote\",\n    value: function appendNote(note, duration) {\n      this.notesAndRests.push(note);\n      this.durations.push(duration);\n      this.appendReadableText_(\"play \".concat(Transcript.getDurationText_(duration), \" note \").concat(note));\n      this.size++;\n    }\n    /**\n     * Appends rest to transcript.\n     * @param {number} duration The duration of the rest.\n     */\n\n  }, {\n    key: \"appendRest\",\n    value: function appendRest(duration) {\n      this.notesAndRests.push(REST);\n      this.durations.push(duration);\n      this.appendReadableText_(\"\".concat(Transcript.getDurationText_(duration), \" rest\"));\n      this.size++;\n    }\n  }], [{\n    key: \"getDurationText_\",\n    value: function getDurationText_(duration) {\n      var durationText = 'unknown';\n\n      switch (duration) {\n        case 1:\n          durationText = 'whole';\n          break;\n\n        case 0.5:\n          durationText = 'half';\n          break;\n\n        case 0.25:\n          durationText = 'quarter';\n          break;\n\n        case 0.125:\n          durationText = 'eight';\n          break;\n      }\n\n      return durationText;\n    }\n  }]);\n\n  return Transcript;\n}();\n/**\n * Class representing musical stave.\n */\n\n\nvar Stave = /*#__PURE__*/function () {\n  /**\n   * Class holding code for music to play.\n   * @param {number} id The unique id of this stave.\n   * @param {Array<Interpreter.State>} stateStack The stateStack containing code\n   *    for this stave.\n   */\n  function Stave(id, stateStack) {\n    _classCallCheck(this, Stave);\n\n    /**\n     * The id.\n     * @type {number}\n     */\n    this.id = id;\n    /**\n     * The state stack.\n     * @type {Array<Interpreter.State>}\n     */\n\n    this.stateStack = stateStack;\n    /**\n     * Whether all the notes have ben played.\n     * @type {boolean}\n     */\n\n    this.done = false;\n    /**\n     * The time to pause till.\n     * @type {number}\n     * @private\n     */\n\n    this.pauseUntil64ths_ = 0;\n    /**\n     * The transcript of notes played.\n     * @type {Transcript}\n     * @private\n     */\n\n    this.transcript_ = new Transcript();\n    /**\n     * Currently playing note.\n     * @type {string}\n     * @private\n     */\n\n    this.note_ = '';\n  }\n  /**\n   * Whether this stave is currently paused.\n   * @param {number} clock64ths Number of 1/64ths notes since the start.\n   * @return {boolean} Whether this stave is paused.\n   */\n\n\n  _createClass(Stave, [{\n    key: \"isPaused\",\n    value: function isPaused(clock64ths) {\n      return this.pauseUntil64ths_ > clock64ths;\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note to play.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(duration, pitch, clock64ths) {\n      this.stopSound();\n      this.note_ = pitch;\n      _note_player__WEBPACK_IMPORTED_MODULE_6__[\"notePlayer\"].triggerAttack(pitch);\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this note.\n\n      this.transcript_.appendNote(pitch, duration);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"rest\",\n    value: function rest(duration, clock64ths) {\n      this.stopSound();\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this rest.\n\n      this.transcript_.appendRest(duration);\n    }\n    /**\n     * Stops currently playing note.\n     */\n\n  }, {\n    key: \"stopSound\",\n    value: function stopSound() {\n      if (this.note_) {\n        _note_player__WEBPACK_IMPORTED_MODULE_6__[\"notePlayer\"].triggerRelease();\n        this.note_ = '';\n      }\n    }\n    /**\n     * Returns feedback on what is different between the loaded transcript and the\n     * expected one, or empty string if they are equal.\n     * @param {Transcript} expectedTranscript The expected transcript.\n     * @return {string} The feedback.\n     */\n\n  }, {\n    key: \"getFeedback\",\n    value: function getFeedback(expectedTranscript) {\n      var feedback = ''; // There could be extra or missing notes.\n\n      var actualSize = this.transcript_.size;\n      var expectedSize = expectedTranscript.size;\n      var sizeMismatch = actualSize !== expectedSize;\n\n      if (actualSize < expectedSize) {\n        feedback += 'Your solution is missing notes.\\n';\n      } else if (actualSize > expectedSize) {\n        feedback += 'Your solution has extra notes.\\n';\n      } // The notes played could be wrong (duration or note).\n\n\n      var hasIncorrectNotes = false;\n      var hasIncorrectDuration = false;\n\n      for (var i = 0; i < actualSize && i < expectedSize; i++) {\n        if (this.transcript_.notesAndRests[i] !== expectedTranscript.notesAndRests[i]) {\n          hasIncorrectNotes = true;\n        }\n\n        if (this.transcript_.durations[i] !== expectedTranscript.durations[i]) {\n          hasIncorrectDuration = true;\n        }\n      }\n\n      if (hasIncorrectNotes) {\n        feedback += \"Some of the notes \".concat(sizeMismatch ? 'may be' : 'are', \" incorrect.\\n\");\n      }\n\n      if (hasIncorrectDuration) {\n        feedback += \"Some of the note durations \" + \"\".concat(sizeMismatch ? 'may be' : 'are', \" incorrect.\\n\");\n      } // Append the actual and expected notes played.\n\n\n      if (sizeMismatch || hasIncorrectNotes || hasIncorrectDuration) {\n        feedback += \"\\nYour solution: \".concat(this.transcript_.getReadableText() || 'empty', \"\\n\");\n        feedback += \"Expected solution: \".concat(expectedTranscript.getReadableText());\n      }\n\n      return feedback;\n    }\n  }]);\n\n  return Stave;\n}();\n/**\n * Game logic for music game.\n */\n\n\nvar Music = /*#__PURE__*/function () {\n  /**\n   * Class for a music game.\n   * @param {Blockly.WorkspaceSvg} workspace The Blockly workspace.\n   * @param {function(string)} onGoalUpdateCb The callback function for goal\n   *    change.\n   * @param {function()} onSuccessCb The callback function for on success event.\n   * @param {function(string)} onFailureCb The callback function for on failure\n   *    event.\n   * @constructor\n   */\n  function Music(workspace, onGoalUpdateCb, onSuccessCb, onFailureCb) {\n    _classCallCheck(this, Music);\n\n    /**\n     * The Blockly workspace associated with this game.\n     * @type {!Blockly.WorkspaceSvg}\n     */\n    this.workspace = workspace;\n    /**\n     * The currently loaded level. 0 if no level loaded.\n     */\n\n    this.level = 0;\n    /**\n     * Callback function for goal update.\n     * @param {string} text The text to set the goal to.\n     */\n\n    this.onGoalUpdate = onGoalUpdateCb;\n    /**\n     * The expected answer.\n     * @type {Array<Transcript>}\n     * @private\n     */\n\n    this.expectedAnswer_ = [];\n    /**\n     * The interpreter.\n     * @type {?Interpreter}\n     * @private\n     */\n\n    this.interpreter_ = null;\n    /**\n     * @type {Array<Stave>}\n     * @private\n     */\n\n    this.staves_ = [];\n    /**\n     * The current active stave.\n     * @type {?Stave}\n     * @private\n     */\n\n    this.activeStave_ = null;\n    /**\n     * Time of start of execution.\n     * @type {number}\n     * @private\n     */\n\n    this.startTime_ = 0;\n    /**\n     * Number of 1/64ths notes since the start.\n     * @type {number}\n     * @private\n     */\n\n    this.clock64ths_ = 0;\n    /**\n     * The speed at which to play notes. Between 0 and 1, with 0 being slow,\n     * 0.5 being normal speed, and 1 being fast.\n     * @type {number}\n     * @private\n     */\n\n    this.speed_ = 0.5;\n    /**\n     * The id of the last setTimeout call. Used for game reset.\n     * @type {number}\n     * @private\n     */\n\n    this.pid_ = 0;\n    /**\n     * The callback function on level success.\n     * @type {function()}\n     * @private\n     */\n\n    this.onSuccessCallback_ = onSuccessCb;\n    /**\n     * The callback function on level failure.\n     * @type {function(string)}\n     * @param {string} feedback The level feedback.\n     * @private\n     */\n\n    this.onFailureCallback_ = onFailureCb;\n    this.registerPlayShortcut();\n  }\n  /**\n   * Registers a shortcut to play the notes on the workspace.\n   */\n\n\n  _createClass(Music, [{\n    key: \"registerPlayShortcut\",\n    value: function registerPlayShortcut() {\n      var newFunction = function () {\n        this.execute();\n      }.bind(this);\n      /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n\n\n      var playShortcut = {\n        name: 'playShortcut',\n        preconditionFn: function preconditionFn(workspace) {\n          return workspace.keyboardAccessibilityMode && !workspace.options.readOnly;\n        },\n        callback: newFunction\n      };\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.register(playShortcut);\n      var shiftW = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.createSerializedKey(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.P, [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.SHIFT]);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.addKeyMapping(shiftW, playShortcut.name);\n    }\n    /**\n     * Clears the workspace and loads the specified blocks.\n     * @param {string} blockXml The xml text string of blocks.\n     */\n\n  }, {\n    key: \"loadWorkspaceBlocks\",\n    value: function loadWorkspaceBlocks(blockXml) {\n      this.workspace.clear();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.domToWorkspace(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.textToDom(blockXml), this.workspace);\n    }\n    /**\n     * Updates the currently loaded toolbox.\n     * @param {?Blockly.utils.toolbox.ToolboxDefinition} toolboxDef\n     *    DOM tree of toolbox contents, string of toolbox contents, or JSON\n     *    representing toolbox definition.\n     */\n\n  }, {\n    key: \"updateToolbox\",\n    value: function updateToolbox(toolboxDef) {\n      this.workspace.updateToolbox(toolboxDef);\n    }\n    /**\n     * Updates the goal based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateLevelGoal_\",\n    value: function updateLevelGoal_() {\n      var goalText = '';\n\n      switch (this.level) {\n        case 1:\n          this.expectedAnswer_ = [new Transcript(['C4', 'D4', 'E4', 'C4'], Array(4).fill(0.25))];\n          goalText = this.expectedAnswer_[0].getReadableText();\n          break;\n      }\n\n      this.onGoalUpdate(goalText);\n    }\n    /**\n     * Updates the toolbox based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateLevelToolbox_\",\n    value: function updateLevelToolbox_() {\n      var toolboxJson = {\n        'kind': 'flyoutToolbox',\n        'contents': [{\n          'kind': 'block',\n          'blockxml': \"<block type=\\\"music_note\\\">\\n                        <field name=\\\"DURATION\\\">0.25</field>\\n                        <value name=\\\"PITCH\\\">\\n                          <shadow type=\\\"music_pitch\\\">\\n                            <field name=\\\"PITCH\\\">C4</field>\\n                          </shadow>\\n                        </value>\\n                      </block>\"\n        }, {\n          'kind': 'block',\n          'type': 'music_rest'\n        }]\n      };\n      this.updateToolbox(toolboxJson);\n    }\n    /**\n     * Update the workspace blocks based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"loadLevelBlocks_\",\n    value: function loadLevelBlocks_() {\n      var levelXml = \"<xml>\\n            <block type=\\\"music_start\\\" deletable=\\\"false\\\" x=\\\"180\\\"\\n            y=\\\"50\\\"></block>\\n          </xml>\";\n      this.loadWorkspaceBlocks(levelXml);\n    }\n    /**\n     * Load the specified level.\n     * @param {number|string} level The level to load.\n     */\n\n  }, {\n    key: \"loadLevel\",\n    value: function loadLevel(level) {\n      this.level = Number(level);\n      this.updateLevelGoal_();\n      this.updateLevelToolbox_();\n      this.loadLevelBlocks_();\n    }\n    /**\n     * Set the speed (Number between 0 and 1).\n     * @param {number} speed The speed to set to.\n     */\n\n  }, {\n    key: \"setSpeed\",\n    value: function setSpeed(speed) {\n      if (speed <= 0 || speed > 1) {\n        console.error('Invalid speed');\n        return;\n      }\n\n      this.speed_ = speed;\n      this.startTime_ = 0;\n    }\n    /**\n     * Generates code and logs it to the console.\n     */\n\n  }, {\n    key: \"logGeneratedCode\",\n    value: function logGeneratedCode() {\n      var codeJs = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace);\n      console.log(codeJs);\n    }\n    /**\n     * Reset the music to the start position, clear the display, and kill any\n     * pending tasks.\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      // Kill any task.\n      clearTimeout(this.pid_);\n      this.staves_.forEach(function (stave) {\n        stave.stopSound();\n      });\n      this.interpreter_ = null;\n      this.activeStave_ = null;\n      this.staves_.length = 0;\n      this.clock64ths_ = 0;\n      this.startTime_ = 0;\n    }\n    /**\n     * Plays music based on the blocks on the workspace.\n     */\n\n  }, {\n    key: \"execute\",\n    value: function execute() {\n      var _this = this;\n\n      this.reset(); // Get generated code from workspace\n\n      var code = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace); // Run user code.\n\n      this.interpreter_ = new js_interpreter__WEBPACK_IMPORTED_MODULE_5___default.a(code, this.interpreterInit_.bind(this)); // TODO add support for multiple threads.\n\n      var interpreter = new js_interpreter__WEBPACK_IMPORTED_MODULE_5___default.a(''); // Replace this thread's global scope with the cross-thread global.\n\n      interpreter.stateStack[0].scope = this.interpreter_.globalScope; // Add start call.\n\n      interpreter.appendCode('start();\\n');\n      this.staves_.push(new Stave(0, interpreter.stateStack));\n      this.pid_ = setTimeout(function () {\n        return _this.tick_();\n      }, 100);\n    }\n    /**\n     * Inject the Music API into a JavaScript interpreter.\n     * @param {!Interpreter} interpreter The JS-Interpreter.\n     * @param {!Interpreter.Object} globalObject Global object.\n     * @private\n     */\n\n  }, {\n    key: \"interpreterInit_\",\n    value: function interpreterInit_(interpreter, globalObject) {\n      var _this2 = this;\n\n      // API\n      var wrapper;\n\n      wrapper = function wrapper(duration, pitch, _id) {\n        _this2.play_(duration, pitch);\n      };\n\n      interpreter.setProperty(globalObject, 'play', interpreter.createNativeFunction(wrapper));\n\n      wrapper = function wrapper(duration, _id) {\n        _this2.rest_(duration);\n      };\n\n      interpreter.setProperty(globalObject, 'rest', interpreter.createNativeFunction(wrapper)); // TODO implement setInstrument API.\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note play.\n     * @private\n     */\n\n  }, {\n    key: \"play_\",\n    value: function play_(duration, pitch) {\n      this.activeStave_.play(duration, pitch, this.clock64ths_);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @private\n     */\n\n  }, {\n    key: \"rest_\",\n    value: function rest_(duration) {\n      this.activeStave_.rest(duration, this.clock64ths_);\n    }\n    /**\n     * Execute a 1/64th tick of the program.\n     * @private\n     */\n\n  }, {\n    key: \"tick_\",\n    value: function tick_() {\n      var _this3 = this;\n\n      // Delay between start of each beat (1/64ths of a whole note).\n      // Reminder: The startTime_ should be reset after the slider is adjusted.\n      var scaleDuration = 1000 * (2.5 - 2 * this.speed_) / 64;\n\n      if (!this.startTime_) {\n        // Either the first tick, or first tick after slider was adjusted.\n        this.startTime_ = Date.now() - this.clock64ths_ * scaleDuration;\n      }\n\n      var done = true;\n      this.staves_.forEach(function (stave) {\n        if (!stave.done) {\n          done = false;\n\n          if (!stave.isPaused(_this3.clock64ths_)) {\n            _this3.executeChunk_(stave);\n          }\n        }\n      });\n\n      if (done) {\n        // Program complete.\n        var feedback = this.checkAnswer_();\n\n        if (feedback) {\n          this.onFailureCallback_(feedback);\n        } else {\n          this.onSuccessCallback_();\n        }\n      } else {\n        this.clock64ths_++;\n        var ms = this.startTime_ + this.clock64ths_ * scaleDuration - Date.now();\n        this.pid_ = setTimeout(function () {\n          return _this3.tick_();\n        }, ms);\n      }\n    }\n    /**\n     * Execute a bite-sized chunk of the user's code.\n     * @param {Stave} stave The stave to execute.\n     * @private\n     */\n\n  }, {\n    key: \"executeChunk_\",\n    value: function executeChunk_(stave) {\n      this.activeStave_ = stave; // Switch the interpreter to run the provided staff.\n\n      this.interpreter_.stateStack = stave.stateStack;\n      var ticks = 10000;\n      var go;\n\n      do {\n        try {\n          go = this.interpreter_.step();\n        } catch (e) {\n          // User error, terminate in shame.\n          alert(e);\n          go = false;\n        }\n\n        if (ticks-- == 0) {\n          console.warn('Staff ' + stave.id + ' is running slowly.');\n          return;\n        }\n\n        if (stave.isPaused(this.clock64ths_)) {\n          // Previously executed command (play or rest) requested a pause.\n          return;\n        }\n      } while (go); // Thread complete.  Wrap up.\n\n\n      stave.stopSound(stave);\n      stave.done = true;\n    }\n    /**\n     * Evaluates whether the answer for the currently loaded level is correct.\n     * Returns level feedback if correct or empty string if correct.\n     * @return {string} Level feedback or empty string.\n     * @private\n     */\n\n  }, {\n    key: \"checkAnswer_\",\n    value: function checkAnswer_() {\n      var feedback = '';\n\n      for (var i = 0; i < this.expectedAnswer_.length; i++) {\n        var staveFeedback = this.staves_[i].getFeedback(this.expectedAnswer_[i]);\n\n        if (staveFeedback) {\n          feedback += staveFeedback;\n        }\n      }\n\n      return feedback;\n    }\n  }]);\n\n  return Music;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbXVzaWMuanM/MmE0ZiJdLCJuYW1lcyI6WyJSRVNUIiwiVHJhbnNjcmlwdCIsIm5vdGVzQW5kUmVzdHMiLCJkdXJhdGlvbnMiLCJsZW5ndGgiLCJjb25zb2xlIiwiZXJyb3IiLCJzaXplIiwicmVhZGFibGVUZXh0XyIsImkiLCJhcHBlbmROb3RlIiwidGV4dCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJpdGVtcyIsInNwbGl0Iiwiam9pbiIsIm5vdGUiLCJkdXJhdGlvbiIsInB1c2giLCJhcHBlbmRSZWFkYWJsZVRleHRfIiwiZ2V0RHVyYXRpb25UZXh0XyIsImR1cmF0aW9uVGV4dCIsIlN0YXZlIiwiaWQiLCJzdGF0ZVN0YWNrIiwiZG9uZSIsInBhdXNlVW50aWw2NHRoc18iLCJ0cmFuc2NyaXB0XyIsIm5vdGVfIiwiY2xvY2s2NHRocyIsInBpdGNoIiwic3RvcFNvdW5kIiwibm90ZVBsYXllciIsInRyaWdnZXJBdHRhY2siLCJhcHBlbmRSZXN0IiwidHJpZ2dlclJlbGVhc2UiLCJleHBlY3RlZFRyYW5zY3JpcHQiLCJmZWVkYmFjayIsImFjdHVhbFNpemUiLCJleHBlY3RlZFNpemUiLCJzaXplTWlzbWF0Y2giLCJoYXNJbmNvcnJlY3ROb3RlcyIsImhhc0luY29ycmVjdER1cmF0aW9uIiwiZ2V0UmVhZGFibGVUZXh0IiwiTXVzaWMiLCJ3b3Jrc3BhY2UiLCJvbkdvYWxVcGRhdGVDYiIsIm9uU3VjY2Vzc0NiIiwib25GYWlsdXJlQ2IiLCJsZXZlbCIsIm9uR29hbFVwZGF0ZSIsImV4cGVjdGVkQW5zd2VyXyIsImludGVycHJldGVyXyIsInN0YXZlc18iLCJhY3RpdmVTdGF2ZV8iLCJzdGFydFRpbWVfIiwiY2xvY2s2NHRoc18iLCJzcGVlZF8iLCJwaWRfIiwib25TdWNjZXNzQ2FsbGJhY2tfIiwib25GYWlsdXJlQ2FsbGJhY2tfIiwicmVnaXN0ZXJQbGF5U2hvcnRjdXQiLCJuZXdGdW5jdGlvbiIsImV4ZWN1dGUiLCJiaW5kIiwicGxheVNob3J0Y3V0IiwibmFtZSIsInByZWNvbmRpdGlvbkZuIiwia2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSIsIm9wdGlvbnMiLCJyZWFkT25seSIsImNhbGxiYWNrIiwiQmxvY2tseSIsIlNob3J0Y3V0UmVnaXN0cnkiLCJyZWdpc3RyeSIsInJlZ2lzdGVyIiwic2hpZnRXIiwiY3JlYXRlU2VyaWFsaXplZEtleSIsInV0aWxzIiwiS2V5Q29kZXMiLCJQIiwiU0hJRlQiLCJhZGRLZXlNYXBwaW5nIiwiYmxvY2tYbWwiLCJjbGVhciIsIlhtbCIsImRvbVRvV29ya3NwYWNlIiwidGV4dFRvRG9tIiwidG9vbGJveERlZiIsInVwZGF0ZVRvb2xib3giLCJnb2FsVGV4dCIsIkFycmF5IiwiZmlsbCIsInRvb2xib3hKc29uIiwibGV2ZWxYbWwiLCJsb2FkV29ya3NwYWNlQmxvY2tzIiwiTnVtYmVyIiwidXBkYXRlTGV2ZWxHb2FsXyIsInVwZGF0ZUxldmVsVG9vbGJveF8iLCJsb2FkTGV2ZWxCbG9ja3NfIiwic3BlZWQiLCJjb2RlSnMiLCJKYXZhU2NyaXB0Iiwid29ya3NwYWNlVG9Db2RlIiwibG9nIiwiY2xlYXJUaW1lb3V0IiwiZm9yRWFjaCIsInN0YXZlIiwicmVzZXQiLCJjb2RlIiwiSW50ZXJwcmV0ZXIiLCJpbnRlcnByZXRlckluaXRfIiwiaW50ZXJwcmV0ZXIiLCJzY29wZSIsImdsb2JhbFNjb3BlIiwiYXBwZW5kQ29kZSIsInNldFRpbWVvdXQiLCJ0aWNrXyIsImdsb2JhbE9iamVjdCIsIndyYXBwZXIiLCJfaWQiLCJwbGF5XyIsInNldFByb3BlcnR5IiwiY3JlYXRlTmF0aXZlRnVuY3Rpb24iLCJyZXN0XyIsInBsYXkiLCJyZXN0Iiwic2NhbGVEdXJhdGlvbiIsIkRhdGUiLCJub3ciLCJpc1BhdXNlZCIsImV4ZWN1dGVDaHVua18iLCJjaGVja0Fuc3dlcl8iLCJtcyIsInRpY2tzIiwiZ28iLCJzdGVwIiwiZSIsImFsZXJ0Iiwid2FybiIsInN0YXZlRmVlZGJhY2siLCJn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QUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHLEtBQUs0QyxlQUFMLENBQXFCakQsTUFBekMsRUFBaURLLENBQUMsRUFBbEQsRUFBc0Q7QUFDcEQsWUFBTXFJLGFBQWEsR0FDZixLQUFLdkYsT0FBTCxDQUFhOUMsQ0FBYixFQUFnQnNJLFdBQWhCLENBQTRCLEtBQUsxRixlQUFMLENBQXFCNUMsQ0FBckIsQ0FBNUIsQ0FESjs7QUFFQSxZQUFJcUksYUFBSixFQUFtQjtBQUNqQnZHLGtCQUFRLElBQUl1RyxhQUFaO0FBQ0Q7QUFDRjs7QUFDRCxhQUFPdkcsUUFBUDtBQUNEO0FBbFpIOztBQUFBO0FBQUEiLCJmaWxlIjoiLi9zcmMvbXVzaWMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBHYW1lIGxvZ2ljIGZvciBtdXNpYyBnYW1lLlxuICovXG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5pbXBvcnQgJy4vbXVzaWNfYmxvY2tzJztcbmltcG9ydCB7c3BlYWtlcn0gZnJvbSAnLi9zcGVha2VyJztcbi8vIGltcG9ydCB7dG9vbGJveFBpdGNofSBmcm9tICcuL211c2ljX2Jsb2Nrcyc7XG5pbXBvcnQge0N1c3RvbUN1cnNvcn0gZnJvbSAnLi9jdXN0b21fY3Vyc29yJztcbmltcG9ydCAnLi9tdXNpY19ibG9ja19nZW5lcmF0b3JzJztcbmltcG9ydCBJbnRlcnByZXRlciBmcm9tICdqcy1pbnRlcnByZXRlcic7XG5pbXBvcnQge25vdGVQbGF5ZXJ9IGZyb20gJy4vbm90ZV9wbGF5ZXInO1xuXG4vKipcbiAqIENvbnN0YW50IGRlbm90aW5nIGEgcmVzdC5cbiAqL1xuY29uc3QgUkVTVCA9ICdSRVNUJztcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgdHJhbnNjcmlwdCBvZiBub3RlcyBwbGF5ZWQuXG4gKi9cbmNsYXNzIFRyYW5zY3JpcHQge1xuICAvKipcbiAgICogQ2xhc3MgZm9yIGhvbGRpbmcgdHJhbnNjcmlwdCBvZiBub3RlcyB0aGF0IHdlcmUgcGxheWVkLiBFeHBlY3RzXG4gICAqIG5vdGVzQW5kUmVzdHMgYW5kIGR1cmF0aW9ucyB0byBoYXZlIGEgbWF0Y2hpbmcgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IG5vdGVzQW5kUmVzdHMgVGhlIG5vdGVzIGFuZCByZXN0cy5cbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBkdXJhdGlvbnMgVGhlIGR1cmF0aW9ucyBvZiB0aGUgbm90ZXMgYW5kIHJlc3RzLlxuICAgKi9cbiAgY29uc3RydWN0b3Iobm90ZXNBbmRSZXN0cyA9IFtdLCBkdXJhdGlvbnMgPSBbXSkge1xuICAgIGlmIChub3Rlc0FuZFJlc3RzLmxlbmd0aCAhPT0gZHVyYXRpb25zLmxlbmd0aCkge1xuICAgICAgY29uc29sZS5lcnJvcignVHJhbnNjcmlwdCBsZW5ndGggbWlzbWF0Y2guJyk7XG4gICAgfVxuICAgIHRoaXMubm90ZXNBbmRSZXN0cyA9IFtdO1xuICAgIHRoaXMuZHVyYXRpb25zID0gW107XG4gICAgdGhpcy5zaXplID0gMDtcbiAgICB0aGlzLnJlYWRhYmxlVGV4dF8gPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vdGVzQW5kUmVzdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuYXBwZW5kTm90ZShub3Rlc0FuZFJlc3RzW2ldLCBkdXJhdGlvbnNbaV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBkdXJhdGlvbiBudW1iZXIgaW50byBhcHByb3JpYXRlIHN0cmluZy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIFRoZSBkdXJhdGlvbi5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgc3RyaW5nIHZlcnNpb24gb2YgZHVyYXRpb24uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgZ2V0RHVyYXRpb25UZXh0XyhkdXJhdGlvbikge1xuICAgIGxldCBkdXJhdGlvblRleHQgPSAndW5rbm93bic7XG4gICAgc3dpdGNoIChkdXJhdGlvbikge1xuICAgICAgY2FzZSAxOlxuICAgICAgICBkdXJhdGlvblRleHQgPSAnd2hvbGUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMC41OlxuICAgICAgICBkdXJhdGlvblRleHQgPSAnaGFsZic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAwLjI1OlxuICAgICAgICBkdXJhdGlvblRleHQgPSAncXVhcnRlcic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAwLjEyNTpcbiAgICAgICAgZHVyYXRpb25UZXh0ID0gJ2VpZ2h0JztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBkdXJhdGlvblRleHQ7XG4gIH1cblxuICAvKipcbiAgICogSW50ZXJuYWwgbWV0aG9kIGZvciBhcHBlbmRpbmcgdGV4dCB0byB0cmFuc2NyaXB0IHRleHQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIGFwcGVuZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFwcGVuZFJlYWRhYmxlVGV4dF8odGV4dCkge1xuICAgIGlmICh0aGlzLnJlYWRhYmxlVGV4dF8pIHtcbiAgICAgIHRoaXMucmVhZGFibGVUZXh0XyArPSAnLCAnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXh0ID0gdGV4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRleHQuc2xpY2UoMSk7XG4gICAgfVxuICAgIHRoaXMucmVhZGFibGVUZXh0XyArPSB0ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgc2VudGVuY2UgcmVwcmVzZW50aW5nIHRoZSBub3RlcyBwbGF5ZWQgaW4gdGhpcyB0cmFuc2NyaXB0LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzZW50ZW5jZS5cbiAgICovXG4gIGdldFJlYWRhYmxlVGV4dCgpIHtcbiAgICBpZiAoIXRoaXMucmVhZGFibGVUZXh0Xykge1xuICAgICAgcmV0dXJuICdFbXB0eS4nO1xuICAgIH1cbiAgICBjb25zdCBpdGVtcyA9IHRoaXMucmVhZGFibGVUZXh0Xy5zcGxpdCgnLCcpO1xuICAgIGlmIChpdGVtcy5sZW5ndGggPiAxKSB7XG4gICAgICBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXSA9ICcgYW5kICcgKyBpdGVtc1tpdGVtcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zLmpvaW4oJywnKSArICcuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmRzIG5vdGUgdG8gdHJhbnNjcmlwdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5vdGUgVGhlIHBpdGNoIG9mIG5vdGUgdG8gYXBwZW5kLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gVGhlIGR1cmF0aW9uIG9mIHRoZSBub3RlLlxuICAgKi9cbiAgYXBwZW5kTm90ZShub3RlLCBkdXJhdGlvbikge1xuICAgIHRoaXMubm90ZXNBbmRSZXN0cy5wdXNoKG5vdGUpO1xuICAgIHRoaXMuZHVyYXRpb25zLnB1c2goZHVyYXRpb24pO1xuICAgIHRoaXMuYXBwZW5kUmVhZGFibGVUZXh0XyhcbiAgICAgICAgYHBsYXkgJHtUcmFuc2NyaXB0LmdldER1cmF0aW9uVGV4dF8oZHVyYXRpb24pfSBub3RlICR7bm90ZX1gKTtcbiAgICB0aGlzLnNpemUrKztcbiAgfVxuICAvKipcbiAgICogQXBwZW5kcyByZXN0IHRvIHRyYW5zY3JpcHQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBUaGUgZHVyYXRpb24gb2YgdGhlIHJlc3QuXG4gICAqL1xuICBhcHBlbmRSZXN0KGR1cmF0aW9uKSB7XG4gICAgdGhpcy5ub3Rlc0FuZFJlc3RzLnB1c2goUkVTVCk7XG4gICAgdGhpcy5kdXJhdGlvbnMucHVzaChkdXJhdGlvbik7XG4gICAgdGhpcy5hcHBlbmRSZWFkYWJsZVRleHRfKFxuICAgICAgICBgJHtUcmFuc2NyaXB0LmdldER1cmF0aW9uVGV4dF8oZHVyYXRpb24pfSByZXN0YCk7XG4gICAgdGhpcy5zaXplKys7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgbXVzaWNhbCBzdGF2ZS5cbiAqL1xuY2xhc3MgU3RhdmUge1xuICAvKipcbiAgICogQ2xhc3MgaG9sZGluZyBjb2RlIGZvciBtdXNpYyB0byBwbGF5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgVGhlIHVuaXF1ZSBpZCBvZiB0aGlzIHN0YXZlLlxuICAgKiBAcGFyYW0ge0FycmF5PEludGVycHJldGVyLlN0YXRlPn0gc3RhdGVTdGFjayBUaGUgc3RhdGVTdGFjayBjb250YWluaW5nIGNvZGVcbiAgICogICAgZm9yIHRoaXMgc3RhdmUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZCwgc3RhdGVTdGFjaykge1xuICAgIC8qKlxuICAgICAqIFRoZSBpZC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdGUgc3RhY2suXG4gICAgICogQHR5cGUge0FycmF5PEludGVycHJldGVyLlN0YXRlPn1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXRlU3RhY2sgPSBzdGF0ZVN0YWNrO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciBhbGwgdGhlIG5vdGVzIGhhdmUgYmVuIHBsYXllZC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmRvbmUgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lIHRvIHBhdXNlIHRpbGwuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNjcmlwdCBvZiBub3RlcyBwbGF5ZWQuXG4gICAgICogQHR5cGUge1RyYW5zY3JpcHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyYW5zY3JpcHRfID0gbmV3IFRyYW5zY3JpcHQoKTtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnRseSBwbGF5aW5nIG5vdGUuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubm90ZV8gPSAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoaXMgc3RhdmUgaXMgY3VycmVudGx5IHBhdXNlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNsb2NrNjR0aHMgTnVtYmVyIG9mIDEvNjR0aHMgbm90ZXMgc2luY2UgdGhlIHN0YXJ0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgc3RhdmUgaXMgcGF1c2VkLlxuICAgKi9cbiAgaXNQYXVzZWQoY2xvY2s2NHRocykge1xuICAgIHJldHVybiB0aGlzLnBhdXNlVW50aWw2NHRoc18gPiBjbG9jazY0dGhzO1xuICB9XG5cbiAgLyoqXG4gICAqIFBsYXkgb25lIG5vdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBGcmFjdGlvbiBvZiBhIHdob2xlIG5vdGUgbGVuZ3RoIHRvIHBsYXkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwaXRjaCBOb3RlIHRvIHBsYXkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjbG9jazY0dGhzIE51bWJlciBvZiAxLzY0dGhzIG5vdGVzIHNpbmNlIHRoZSBzdGFydC5cbiAgICovXG4gIHBsYXkoZHVyYXRpb24sIHBpdGNoLCBjbG9jazY0dGhzKSB7XG4gICAgdGhpcy5zdG9wU291bmQoKTtcbiAgICB0aGlzLm5vdGVfID0gcGl0Y2g7XG4gICAgbm90ZVBsYXllci50cmlnZ2VyQXR0YWNrKHBpdGNoKTtcbiAgICB0aGlzLnBhdXNlVW50aWw2NHRoc18gPSBkdXJhdGlvbiAqIDY0ICsgY2xvY2s2NHRocztcbiAgICAvLyBNYWtlIGEgcmVjb3JkIG9mIHRoaXMgbm90ZS5cbiAgICB0aGlzLnRyYW5zY3JpcHRfLmFwcGVuZE5vdGUocGl0Y2gsIGR1cmF0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0IG9uZSByZXN0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gRnJhY3Rpb24gb2YgYSB3aG9sZSBub3RlIGxlbmd0aCB0byByZXN0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gY2xvY2s2NHRocyBOdW1iZXIgb2YgMS82NHRocyBub3RlcyBzaW5jZSB0aGUgc3RhcnQuXG4gICAqL1xuICByZXN0KGR1cmF0aW9uLCBjbG9jazY0dGhzKSB7XG4gICAgdGhpcy5zdG9wU291bmQoKTtcbiAgICB0aGlzLnBhdXNlVW50aWw2NHRoc18gPSBkdXJhdGlvbiAqIDY0ICsgY2xvY2s2NHRocztcbiAgICAvLyBNYWtlIGEgcmVjb3JkIG9mIHRoaXMgcmVzdC5cbiAgICB0aGlzLnRyYW5zY3JpcHRfLmFwcGVuZFJlc3QoZHVyYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3BzIGN1cnJlbnRseSBwbGF5aW5nIG5vdGUuXG4gICAqL1xuICBzdG9wU291bmQoKSB7XG4gICAgaWYgKHRoaXMubm90ZV8pIHtcbiAgICAgIG5vdGVQbGF5ZXIudHJpZ2dlclJlbGVhc2UoKTtcbiAgICAgIHRoaXMubm90ZV8gPSAnJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmZWVkYmFjayBvbiB3aGF0IGlzIGRpZmZlcmVudCBiZXR3ZWVuIHRoZSBsb2FkZWQgdHJhbnNjcmlwdCBhbmQgdGhlXG4gICAqIGV4cGVjdGVkIG9uZSwgb3IgZW1wdHkgc3RyaW5nIGlmIHRoZXkgYXJlIGVxdWFsLlxuICAgKiBAcGFyYW0ge1RyYW5zY3JpcHR9IGV4cGVjdGVkVHJhbnNjcmlwdCBUaGUgZXhwZWN0ZWQgdHJhbnNjcmlwdC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgZmVlZGJhY2suXG4gICAqL1xuICBnZXRGZWVkYmFjayhleHBlY3RlZFRyYW5zY3JpcHQpIHtcbiAgICBsZXQgZmVlZGJhY2sgPSAnJztcblxuICAgIC8vIFRoZXJlIGNvdWxkIGJlIGV4dHJhIG9yIG1pc3Npbmcgbm90ZXMuXG4gICAgY29uc3QgYWN0dWFsU2l6ZSA9IHRoaXMudHJhbnNjcmlwdF8uc2l6ZTtcbiAgICBjb25zdCBleHBlY3RlZFNpemUgPSBleHBlY3RlZFRyYW5zY3JpcHQuc2l6ZTtcbiAgICBjb25zdCBzaXplTWlzbWF0Y2ggPSBhY3R1YWxTaXplICE9PSBleHBlY3RlZFNpemU7XG4gICAgaWYgKGFjdHVhbFNpemUgPCBleHBlY3RlZFNpemUpIHtcbiAgICAgIGZlZWRiYWNrICs9ICdZb3VyIHNvbHV0aW9uIGlzIG1pc3Npbmcgbm90ZXMuXFxuJztcbiAgICB9IGVsc2UgaWYgKGFjdHVhbFNpemUgPiBleHBlY3RlZFNpemUpIHtcbiAgICAgIGZlZWRiYWNrICs9ICdZb3VyIHNvbHV0aW9uIGhhcyBleHRyYSBub3Rlcy5cXG4nO1xuICAgIH1cblxuICAgIC8vIFRoZSBub3RlcyBwbGF5ZWQgY291bGQgYmUgd3JvbmcgKGR1cmF0aW9uIG9yIG5vdGUpLlxuICAgIGxldCBoYXNJbmNvcnJlY3ROb3RlcyA9IGZhbHNlO1xuICAgIGxldCBoYXNJbmNvcnJlY3REdXJhdGlvbiA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0dWFsU2l6ZSAmJiBpIDwgZXhwZWN0ZWRTaXplOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnRyYW5zY3JpcHRfLm5vdGVzQW5kUmVzdHNbaV0gIT09XG4gICAgICAgICAgZXhwZWN0ZWRUcmFuc2NyaXB0Lm5vdGVzQW5kUmVzdHNbaV0pIHtcbiAgICAgICAgaGFzSW5jb3JyZWN0Tm90ZXMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMudHJhbnNjcmlwdF8uZHVyYXRpb25zW2ldICE9PSBleHBlY3RlZFRyYW5zY3JpcHQuZHVyYXRpb25zW2ldKSB7XG4gICAgICAgIGhhc0luY29ycmVjdER1cmF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc0luY29ycmVjdE5vdGVzKSB7XG4gICAgICBmZWVkYmFjayArPVxuICAgICAgICAgIGBTb21lIG9mIHRoZSBub3RlcyAke3NpemVNaXNtYXRjaCA/ICdtYXkgYmUnIDogJ2FyZSd9IGluY29ycmVjdC5cXG5gO1xuICAgIH1cbiAgICBpZiAoaGFzSW5jb3JyZWN0RHVyYXRpb24pIHtcbiAgICAgIGZlZWRiYWNrICs9IGBTb21lIG9mIHRoZSBub3RlIGR1cmF0aW9ucyBgICtcbiAgICAgICAgICBgJHtzaXplTWlzbWF0Y2ggPyAnbWF5IGJlJyA6ICdhcmUnfSBpbmNvcnJlY3QuXFxuYDtcbiAgICB9XG5cbiAgICAvLyBBcHBlbmQgdGhlIGFjdHVhbCBhbmQgZXhwZWN0ZWQgbm90ZXMgcGxheWVkLlxuICAgIGlmIChzaXplTWlzbWF0Y2ggfHwgaGFzSW5jb3JyZWN0Tm90ZXMgfHwgaGFzSW5jb3JyZWN0RHVyYXRpb24pIHtcbiAgICAgIGZlZWRiYWNrICs9XG4gICAgICAgICAgYFxcbllvdXIgc29sdXRpb246ICR7dGhpcy50cmFuc2NyaXB0Xy5nZXRSZWFkYWJsZVRleHQoKSB8fCAnZW1wdHknfVxcbmA7XG4gICAgICBmZWVkYmFjayArPSBgRXhwZWN0ZWQgc29sdXRpb246ICR7ZXhwZWN0ZWRUcmFuc2NyaXB0LmdldFJlYWRhYmxlVGV4dCgpfWA7XG4gICAgfVxuICAgIHJldHVybiBmZWVkYmFjaztcbiAgfVxufVxuXG4vKipcbiAqIEdhbWUgbG9naWMgZm9yIG11c2ljIGdhbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBNdXNpYyB7XG4gIC8qKlxuICAgKiBDbGFzcyBmb3IgYSBtdXNpYyBnYW1lLlxuICAgKiBAcGFyYW0ge0Jsb2NrbHkuV29ya3NwYWNlU3ZnfSB3b3Jrc3BhY2UgVGhlIEJsb2NrbHkgd29ya3NwYWNlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IG9uR29hbFVwZGF0ZUNiIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBmb3IgZ29hbFxuICAgKiAgICBjaGFuZ2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gb25TdWNjZXNzQ2IgVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBvbiBzdWNjZXNzIGV2ZW50LlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IG9uRmFpbHVyZUNiIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBmb3Igb24gZmFpbHVyZVxuICAgKiAgICBldmVudC5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3b3Jrc3BhY2UsIG9uR29hbFVwZGF0ZUNiLCBvblN1Y2Nlc3NDYiwgb25GYWlsdXJlQ2IpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgQmxvY2tseSB3b3Jrc3BhY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZ2FtZS5cbiAgICAgKiBAdHlwZSB7IUJsb2NrbHkuV29ya3NwYWNlU3ZnfVxuICAgICAqL1xuICAgIHRoaXMud29ya3NwYWNlID0gd29ya3NwYWNlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnRseSBsb2FkZWQgbGV2ZWwuIDAgaWYgbm8gbGV2ZWwgbG9hZGVkLlxuICAgICAqL1xuICAgIHRoaXMubGV2ZWwgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIGdvYWwgdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIHNldCB0aGUgZ29hbCB0by5cbiAgICAgKi9cbiAgICB0aGlzLm9uR29hbFVwZGF0ZSA9IG9uR29hbFVwZGF0ZUNiO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGV4cGVjdGVkIGFuc3dlci5cbiAgICAgKiBAdHlwZSB7QXJyYXk8VHJhbnNjcmlwdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmV4cGVjdGVkQW5zd2VyXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGludGVycHJldGVyLlxuICAgICAqIEB0eXBlIHs/SW50ZXJwcmV0ZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmludGVycHJldGVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXk8U3RhdmU+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdGF2ZXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhY3RpdmUgc3RhdmUuXG4gICAgICogQHR5cGUgez9TdGF2ZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRpbWUgb2Ygc3RhcnQgb2YgZXhlY3V0aW9uLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIDEvNjR0aHMgbm90ZXMgc2luY2UgdGhlIHN0YXJ0LlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNsb2NrNjR0aHNfID0gMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzcGVlZCBhdCB3aGljaCB0byBwbGF5IG5vdGVzLiBCZXR3ZWVuIDAgYW5kIDEsIHdpdGggMCBiZWluZyBzbG93LFxuICAgICAqIDAuNSBiZWluZyBub3JtYWwgc3BlZWQsIGFuZCAxIGJlaW5nIGZhc3QuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc3BlZWRfID0gMC41O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGlkIG9mIHRoZSBsYXN0IHNldFRpbWVvdXQgY2FsbC4gVXNlZCBmb3IgZ2FtZSByZXNldC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5waWRfID0gMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBvbiBsZXZlbCBzdWNjZXNzLlxuICAgICAqIEB0eXBlIHtmdW5jdGlvbigpfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5vblN1Y2Nlc3NDYWxsYmFja18gPSBvblN1Y2Nlc3NDYjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBvbiBsZXZlbCBmYWlsdXJlLlxuICAgICAqIEB0eXBlIHtmdW5jdGlvbihzdHJpbmcpfVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmZWVkYmFjayBUaGUgbGV2ZWwgZmVlZGJhY2suXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm9uRmFpbHVyZUNhbGxiYWNrXyA9IG9uRmFpbHVyZUNiO1xuXG4gICAgdGhpcy5yZWdpc3RlclBsYXlTaG9ydGN1dCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIHNob3J0Y3V0IHRvIHBsYXkgdGhlIG5vdGVzIG9uIHRoZSB3b3Jrc3BhY2UuXG4gICAqL1xuICByZWdpc3RlclBsYXlTaG9ydGN1dCgpIHtcbiAgICBjb25zdCBuZXdGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5leGVjdXRlKCk7XG4gICAgfS5iaW5kKHRoaXMpO1xuICAgIC8qKiBAdHlwZSB7IUJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5LZXlib2FyZFNob3J0Y3V0fSAqL1xuICAgIGNvbnN0IHBsYXlTaG9ydGN1dCA9IHtcbiAgICAgIG5hbWU6ICdwbGF5U2hvcnRjdXQnLFxuICAgICAgcHJlY29uZGl0aW9uRm46IGZ1bmN0aW9uKHdvcmtzcGFjZSkge1xuICAgICAgICByZXR1cm4gd29ya3NwYWNlLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGUgJiZcbiAgICAgICAgICAgICF3b3Jrc3BhY2Uub3B0aW9ucy5yZWFkT25seTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogbmV3RnVuY3Rpb24sXG4gICAgfTtcblxuICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5yZWdpc3RlcihwbGF5U2hvcnRjdXQpO1xuICAgIGNvbnN0IHNoaWZ0VyA9IEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5jcmVhdGVTZXJpYWxpemVkS2V5KFxuICAgICAgICBCbG9ja2x5LnV0aWxzLktleUNvZGVzLlAsIFtCbG9ja2x5LnV0aWxzLktleUNvZGVzLlNISUZUXSk7XG4gICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LmFkZEtleU1hcHBpbmcoXG4gICAgICAgIHNoaWZ0VywgcGxheVNob3J0Y3V0Lm5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgd29ya3NwYWNlIGFuZCBsb2FkcyB0aGUgc3BlY2lmaWVkIGJsb2Nrcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGJsb2NrWG1sIFRoZSB4bWwgdGV4dCBzdHJpbmcgb2YgYmxvY2tzLlxuICAgKi9cbiAgbG9hZFdvcmtzcGFjZUJsb2NrcyhibG9ja1htbCkge1xuICAgIHRoaXMud29ya3NwYWNlLmNsZWFyKCk7XG4gICAgQmxvY2tseS5YbWwuZG9tVG9Xb3Jrc3BhY2UoXG4gICAgICAgIEJsb2NrbHkuWG1sLnRleHRUb0RvbShibG9ja1htbCksIHRoaXMud29ya3NwYWNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjdXJyZW50bHkgbG9hZGVkIHRvb2xib3guXG4gICAqIEBwYXJhbSB7P0Jsb2NrbHkudXRpbHMudG9vbGJveC5Ub29sYm94RGVmaW5pdGlvbn0gdG9vbGJveERlZlxuICAgKiAgICBET00gdHJlZSBvZiB0b29sYm94IGNvbnRlbnRzLCBzdHJpbmcgb2YgdG9vbGJveCBjb250ZW50cywgb3IgSlNPTlxuICAgKiAgICByZXByZXNlbnRpbmcgdG9vbGJveCBkZWZpbml0aW9uLlxuICAgKi9cbiAgdXBkYXRlVG9vbGJveCh0b29sYm94RGVmKSB7XG4gICAgdGhpcy53b3Jrc3BhY2UudXBkYXRlVG9vbGJveCh0b29sYm94RGVmKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBnb2FsIGJhc2VkIG9uIHRoZSBjdXJyZW50IGxldmVsLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlTGV2ZWxHb2FsXygpIHtcbiAgICBsZXQgZ29hbFRleHQgPSAnJztcbiAgICBzd2l0Y2ggKHRoaXMubGV2ZWwpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgdGhpcy5leHBlY3RlZEFuc3dlcl8gPVxuICAgICAgICAgICAgW25ldyBUcmFuc2NyaXB0KFsnQzQnLCAnRDQnLCAnRTQnLCAnQzQnXSwgQXJyYXkoNCkuZmlsbCgwLjI1KSldO1xuICAgICAgICBnb2FsVGV4dCA9IHRoaXMuZXhwZWN0ZWRBbnN3ZXJfWzBdLmdldFJlYWRhYmxlVGV4dCgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5vbkdvYWxVcGRhdGUoZ29hbFRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHRvb2xib3ggYmFzZWQgb24gdGhlIGN1cnJlbnQgbGV2ZWwuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1cGRhdGVMZXZlbFRvb2xib3hfKCkge1xuICAgIGNvbnN0IHRvb2xib3hKc29uID0ge1xuICAgICAgJ2tpbmQnOiAnZmx5b3V0VG9vbGJveCcsXG4gICAgICAnY29udGVudHMnOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAna2luZCc6ICdibG9jaycsXG4gICAgICAgICAgJ2Jsb2NreG1sJzogYDxibG9jayB0eXBlPVwibXVzaWNfbm90ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGZpZWxkIG5hbWU9XCJEVVJBVElPTlwiPjAuMjU8L2ZpZWxkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHZhbHVlIG5hbWU9XCJQSVRDSFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c2hhZG93IHR5cGU9XCJtdXNpY19waXRjaFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZCBuYW1lPVwiUElUQ0hcIj5DNDwvZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2hhZG93PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC92YWx1ZT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Jsb2NrPmAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAna2luZCc6ICdibG9jaycsXG4gICAgICAgICAgJ3R5cGUnOiAnbXVzaWNfcmVzdCcsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH07XG4gICAgdGhpcy51cGRhdGVUb29sYm94KHRvb2xib3hKc29uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHdvcmtzcGFjZSBibG9ja3MgYmFzZWQgb24gdGhlIGN1cnJlbnQgbGV2ZWwuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBsb2FkTGV2ZWxCbG9ja3NfKCkge1xuICAgIGNvbnN0IGxldmVsWG1sID1cbiAgICAgICAgYDx4bWw+XG4gICAgICAgICAgICA8YmxvY2sgdHlwZT1cIm11c2ljX3N0YXJ0XCIgZGVsZXRhYmxlPVwiZmFsc2VcIiB4PVwiMTgwXCJcbiAgICAgICAgICAgIHk9XCI1MFwiPjwvYmxvY2s+XG4gICAgICAgICAgPC94bWw+YDtcbiAgICB0aGlzLmxvYWRXb3Jrc3BhY2VCbG9ja3MobGV2ZWxYbWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgdGhlIHNwZWNpZmllZCBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBsZXZlbCBUaGUgbGV2ZWwgdG8gbG9hZC5cbiAgICovXG4gIGxvYWRMZXZlbChsZXZlbCkge1xuICAgIHRoaXMubGV2ZWwgPSBOdW1iZXIobGV2ZWwpO1xuICAgIHRoaXMudXBkYXRlTGV2ZWxHb2FsXygpO1xuICAgIHRoaXMudXBkYXRlTGV2ZWxUb29sYm94XygpO1xuICAgIHRoaXMubG9hZExldmVsQmxvY2tzXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3BlZWQgKE51bWJlciBiZXR3ZWVuIDAgYW5kIDEpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3BlZWQgVGhlIHNwZWVkIHRvIHNldCB0by5cbiAgICovXG4gIHNldFNwZWVkKHNwZWVkKSB7XG4gICAgaWYgKHNwZWVkIDw9IDAgfHwgc3BlZWQgPiAxKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIHNwZWVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc3BlZWRfID0gc3BlZWQ7XG4gICAgdGhpcy5zdGFydFRpbWVfID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgY29kZSBhbmQgbG9ncyBpdCB0byB0aGUgY29uc29sZS5cbiAgICovXG4gIGxvZ0dlbmVyYXRlZENvZGUoKSB7XG4gICAgY29uc3QgY29kZUpzID0gQmxvY2tseS5KYXZhU2NyaXB0LndvcmtzcGFjZVRvQ29kZSh0aGlzLndvcmtzcGFjZSk7XG4gICAgY29uc29sZS5sb2coY29kZUpzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0aGUgbXVzaWMgdG8gdGhlIHN0YXJ0IHBvc2l0aW9uLCBjbGVhciB0aGUgZGlzcGxheSwgYW5kIGtpbGwgYW55XG4gICAqIHBlbmRpbmcgdGFza3MuXG4gICAqL1xuICByZXNldCgpIHtcbiAgICAvLyBLaWxsIGFueSB0YXNrLlxuICAgIGNsZWFyVGltZW91dCh0aGlzLnBpZF8pO1xuICAgIHRoaXMuc3RhdmVzXy5mb3JFYWNoKChzdGF2ZSkgPT4ge1xuICAgICAgc3RhdmUuc3RvcFNvdW5kKCk7XG4gICAgfSk7XG4gICAgdGhpcy5pbnRlcnByZXRlcl8gPSBudWxsO1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfID0gbnVsbDtcbiAgICB0aGlzLnN0YXZlc18ubGVuZ3RoID0gMDtcbiAgICB0aGlzLmNsb2NrNjR0aHNfID0gMDtcbiAgICB0aGlzLnN0YXJ0VGltZV8gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFBsYXlzIG11c2ljIGJhc2VkIG9uIHRoZSBibG9ja3Mgb24gdGhlIHdvcmtzcGFjZS5cbiAgICovXG4gIGV4ZWN1dGUoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICAgIC8vIEdldCBnZW5lcmF0ZWQgY29kZSBmcm9tIHdvcmtzcGFjZVxuICAgIGNvbnN0IGNvZGUgPSBCbG9ja2x5LkphdmFTY3JpcHQud29ya3NwYWNlVG9Db2RlKHRoaXMud29ya3NwYWNlKTtcblxuICAgIC8vIFJ1biB1c2VyIGNvZGUuXG4gICAgdGhpcy5pbnRlcnByZXRlcl8gPSBuZXcgSW50ZXJwcmV0ZXIoY29kZSwgdGhpcy5pbnRlcnByZXRlckluaXRfLmJpbmQodGhpcykpO1xuICAgIC8vIFRPRE8gYWRkIHN1cHBvcnQgZm9yIG11bHRpcGxlIHRocmVhZHMuXG4gICAgY29uc3QgaW50ZXJwcmV0ZXIgPSBuZXcgSW50ZXJwcmV0ZXIoJycpO1xuICAgIC8vIFJlcGxhY2UgdGhpcyB0aHJlYWQncyBnbG9iYWwgc2NvcGUgd2l0aCB0aGUgY3Jvc3MtdGhyZWFkIGdsb2JhbC5cbiAgICBpbnRlcnByZXRlci5zdGF0ZVN0YWNrWzBdLnNjb3BlID0gdGhpcy5pbnRlcnByZXRlcl8uZ2xvYmFsU2NvcGU7XG4gICAgLy8gQWRkIHN0YXJ0IGNhbGwuXG4gICAgaW50ZXJwcmV0ZXIuYXBwZW5kQ29kZSgnc3RhcnQoKTtcXG4nKTtcbiAgICB0aGlzLnN0YXZlc18ucHVzaChuZXcgU3RhdmUoMCwgaW50ZXJwcmV0ZXIuc3RhdGVTdGFjaykpO1xuXG4gICAgdGhpcy5waWRfID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpY2tfKCksIDEwMCk7XG4gIH1cblxuICAvKipcbiAgICogSW5qZWN0IHRoZSBNdXNpYyBBUEkgaW50byBhIEphdmFTY3JpcHQgaW50ZXJwcmV0ZXIuXG4gICAqIEBwYXJhbSB7IUludGVycHJldGVyfSBpbnRlcnByZXRlciBUaGUgSlMtSW50ZXJwcmV0ZXIuXG4gICAqIEBwYXJhbSB7IUludGVycHJldGVyLk9iamVjdH0gZ2xvYmFsT2JqZWN0IEdsb2JhbCBvYmplY3QuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbnRlcnByZXRlckluaXRfKGludGVycHJldGVyLCBnbG9iYWxPYmplY3QpIHtcbiAgICAvLyBBUElcbiAgICBsZXQgd3JhcHBlcjtcbiAgICB3cmFwcGVyID0gKGR1cmF0aW9uLCBwaXRjaCwgX2lkKSA9PiB7XG4gICAgICB0aGlzLnBsYXlfKGR1cmF0aW9uLCBwaXRjaCk7XG4gICAgfTtcbiAgICBpbnRlcnByZXRlci5zZXRQcm9wZXJ0eShnbG9iYWxPYmplY3QsICdwbGF5JyxcbiAgICAgICAgaW50ZXJwcmV0ZXIuY3JlYXRlTmF0aXZlRnVuY3Rpb24od3JhcHBlcikpO1xuICAgIHdyYXBwZXIgPSAoZHVyYXRpb24sIF9pZCkgPT4ge1xuICAgICAgdGhpcy5yZXN0XyhkdXJhdGlvbik7XG4gICAgfTtcbiAgICBpbnRlcnByZXRlci5zZXRQcm9wZXJ0eShnbG9iYWxPYmplY3QsICdyZXN0JyxcbiAgICAgICAgaW50ZXJwcmV0ZXIuY3JlYXRlTmF0aXZlRnVuY3Rpb24od3JhcHBlcikpO1xuXG4gICAgLy8gVE9ETyBpbXBsZW1lbnQgc2V0SW5zdHJ1bWVudCBBUEkuXG4gIH1cblxuICAvKipcbiAgICogUGxheSBvbmUgbm90ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIEZyYWN0aW9uIG9mIGEgd2hvbGUgbm90ZSBsZW5ndGggdG8gcGxheS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBpdGNoIE5vdGUgcGxheS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHBsYXlfKGR1cmF0aW9uLCBwaXRjaCkge1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfLnBsYXkoZHVyYXRpb24sIHBpdGNoLCB0aGlzLmNsb2NrNjR0aHNfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0IG9uZSByZXN0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gRnJhY3Rpb24gb2YgYSB3aG9sZSBub3RlIGxlbmd0aCB0byByZXN0LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVzdF8oZHVyYXRpb24pIHtcbiAgICB0aGlzLmFjdGl2ZVN0YXZlXy5yZXN0KGR1cmF0aW9uLCB0aGlzLmNsb2NrNjR0aHNfKTtcbiAgfVxuICAvKipcbiAgICogRXhlY3V0ZSBhIDEvNjR0aCB0aWNrIG9mIHRoZSBwcm9ncmFtLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGlja18oKSB7XG4gICAgLy8gRGVsYXkgYmV0d2VlbiBzdGFydCBvZiBlYWNoIGJlYXQgKDEvNjR0aHMgb2YgYSB3aG9sZSBub3RlKS5cbiAgICAvLyBSZW1pbmRlcjogVGhlIHN0YXJ0VGltZV8gc2hvdWxkIGJlIHJlc2V0IGFmdGVyIHRoZSBzbGlkZXIgaXMgYWRqdXN0ZWQuXG4gICAgY29uc3Qgc2NhbGVEdXJhdGlvbiA9IDEwMDAgKiAoMi41IC0gMiAqIHRoaXMuc3BlZWRfKSAvIDY0O1xuICAgIGlmICghdGhpcy5zdGFydFRpbWVfKSB7XG4gICAgICAvLyBFaXRoZXIgdGhlIGZpcnN0IHRpY2ssIG9yIGZpcnN0IHRpY2sgYWZ0ZXIgc2xpZGVyIHdhcyBhZGp1c3RlZC5cbiAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IERhdGUubm93KCkgLSB0aGlzLmNsb2NrNjR0aHNfICogc2NhbGVEdXJhdGlvbjtcbiAgICB9XG4gICAgbGV0IGRvbmUgPSB0cnVlO1xuICAgIHRoaXMuc3RhdmVzXy5mb3JFYWNoKChzdGF2ZSkgPT4ge1xuICAgICAgaWYgKCFzdGF2ZS5kb25lKSB7XG4gICAgICAgIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgaWYgKCFzdGF2ZS5pc1BhdXNlZCh0aGlzLmNsb2NrNjR0aHNfKSkge1xuICAgICAgICAgIHRoaXMuZXhlY3V0ZUNodW5rXyhzdGF2ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChkb25lKSB7XG4gICAgICAvLyBQcm9ncmFtIGNvbXBsZXRlLlxuICAgICAgY29uc3QgZmVlZGJhY2sgPSB0aGlzLmNoZWNrQW5zd2VyXygpO1xuICAgICAgaWYgKGZlZWRiYWNrKSB7XG4gICAgICAgIHRoaXMub25GYWlsdXJlQ2FsbGJhY2tfKGZlZWRiYWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25TdWNjZXNzQ2FsbGJhY2tfKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xvY2s2NHRoc18rKztcbiAgICAgIGNvbnN0IG1zID1cbiAgICAgICAgICAodGhpcy5zdGFydFRpbWVfICsgdGhpcy5jbG9jazY0dGhzXyAqIHNjYWxlRHVyYXRpb24pIC0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMucGlkXyA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy50aWNrXygpLCBtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSBiaXRlLXNpemVkIGNodW5rIG9mIHRoZSB1c2VyJ3MgY29kZS5cbiAgICogQHBhcmFtIHtTdGF2ZX0gc3RhdmUgVGhlIHN0YXZlIHRvIGV4ZWN1dGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBleGVjdXRlQ2h1bmtfKHN0YXZlKSB7XG4gICAgdGhpcy5hY3RpdmVTdGF2ZV8gPSBzdGF2ZTtcbiAgICAvLyBTd2l0Y2ggdGhlIGludGVycHJldGVyIHRvIHJ1biB0aGUgcHJvdmlkZWQgc3RhZmYuXG4gICAgdGhpcy5pbnRlcnByZXRlcl8uc3RhdGVTdGFjayA9IHN0YXZlLnN0YXRlU3RhY2s7XG4gICAgbGV0IHRpY2tzID0gMTAwMDA7XG4gICAgbGV0IGdvO1xuICAgIGRvIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGdvID0gdGhpcy5pbnRlcnByZXRlcl8uc3RlcCgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBVc2VyIGVycm9yLCB0ZXJtaW5hdGUgaW4gc2hhbWUuXG4gICAgICAgIGFsZXJ0KGUpO1xuICAgICAgICBnbyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHRpY2tzLS0gPT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1N0YWZmICcgKyBzdGF2ZS5pZCArICcgaXMgcnVubmluZyBzbG93bHkuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF2ZS5pc1BhdXNlZCh0aGlzLmNsb2NrNjR0aHNfKSkge1xuICAgICAgICAvLyBQcmV2aW91c2x5IGV4ZWN1dGVkIGNvbW1hbmQgKHBsYXkgb3IgcmVzdCkgcmVxdWVzdGVkIGEgcGF1c2UuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChnbyk7XG4gICAgLy8gVGhyZWFkIGNvbXBsZXRlLiAgV3JhcCB1cC5cbiAgICBzdGF2ZS5zdG9wU291bmQoc3RhdmUpO1xuICAgIHN0YXZlLmRvbmUgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlcyB3aGV0aGVyIHRoZSBhbnN3ZXIgZm9yIHRoZSBjdXJyZW50bHkgbG9hZGVkIGxldmVsIGlzIGNvcnJlY3QuXG4gICAqIFJldHVybnMgbGV2ZWwgZmVlZGJhY2sgaWYgY29ycmVjdCBvciBlbXB0eSBzdHJpbmcgaWYgY29ycmVjdC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBMZXZlbCBmZWVkYmFjayBvciBlbXB0eSBzdHJpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjaGVja0Fuc3dlcl8oKSB7XG4gICAgbGV0IGZlZWRiYWNrID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmV4cGVjdGVkQW5zd2VyXy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc3RhdmVGZWVkYmFjayA9XG4gICAgICAgICAgdGhpcy5zdGF2ZXNfW2ldLmdldEZlZWRiYWNrKHRoaXMuZXhwZWN0ZWRBbnN3ZXJfW2ldKTtcbiAgICAgIGlmIChzdGF2ZUZlZWRiYWNrKSB7XG4gICAgICAgIGZlZWRiYWNrICs9IHN0YXZlRmVlZGJhY2s7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmZWVkYmFjaztcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/music.js\n");

/***/ })

})
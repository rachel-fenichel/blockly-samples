webpackHotUpdate("main",{

/***/ "./src/music.js":
/*!**********************!*\
  !*** ./src/music.js ***!
  \**********************/
/*! exports provided: Music */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Music\", function() { return Music; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _music_blocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./music_blocks */ \"./src/music_blocks.js\");\n/* harmony import */ var _custom_cursor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./custom_cursor */ \"./src/custom_cursor.js\");\n/* harmony import */ var _music_block_generators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./music_block_generators */ \"./src/music_block_generators.js\");\n/* harmony import */ var js_interpreter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js-interpreter */ \"./node_modules/js-interpreter/lib/js-interpreter.js\");\n/* harmony import */ var js_interpreter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(js_interpreter__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _note_player__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./note_player */ \"./src/note_player.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Game logic for music game.\n */\n\n // import {speaker} from './speaker';\n// import {toolboxPitch} from './music_blocks';\n\n\n\n\n\n/**\n * Constant denoting a rest.\n */\n\nvar REST = 'REST';\n/**\n * Class representing transcript of notes played.\n */\n\nvar Transcript = /*#__PURE__*/function () {\n  /**\n   * Class for holding transcript of notes that were played. Expects\n   * notesAndRests and durations to have a matching length.\n   * @param {Array<string>} notesAndRests The notes and rests.\n   * @param {Array<number>} durations The durations of the notes and rests.\n   */\n  function Transcript() {\n    var notesAndRests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var durations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, Transcript);\n\n    if (notesAndRests.length !== durations.length) {\n      console.error('Transcript length mismatch.');\n    }\n\n    this.notesAndRests = [];\n    this.durations = [];\n    this.size = 0;\n    this.readableText_ = '';\n\n    for (var i = 0; i < notesAndRests.length; i++) {\n      this.appendNote(notesAndRests[i], durations[i]);\n    }\n  }\n  /**\n   * Converts duration number into approriate string.\n   * @param {number} duration The duration.\n   * @return {string} The string version of duration.\n   * @private\n   */\n\n\n  _createClass(Transcript, [{\n    key: \"appendReadableText_\",\n\n    /**\n     * Internal method for appending text to transcript text.\n     * @param {string} text The text to append.\n     * @private\n     */\n    value: function appendReadableText_(text) {\n      if (this.readableText_) {\n        this.readableText_ += ', ';\n      } else {\n        text = text.charAt(0).toUpperCase() + text.slice(1);\n      }\n\n      this.readableText_ += text;\n    }\n    /**\n     * Returns sentence representing the notes played in this transcript.\n     * @return {string} The sentence.\n     */\n\n  }, {\n    key: \"getReadableText\",\n    value: function getReadableText() {\n      if (!this.readableText_) {\n        return 'Empty.';\n      }\n\n      var items = this.readableText_.split(',');\n\n      if (items.length > 1) {\n        items[items.length - 1] = ' and ' + items[items.length - 1];\n      }\n\n      return items.join(',') + '.';\n    }\n    /**\n     * Appends note to transcript.\n     * @param {string} note The pitch of note to append.\n     * @param {number} duration The duration of the note.\n     */\n\n  }, {\n    key: \"appendNote\",\n    value: function appendNote(note, duration) {\n      this.notesAndRests.push(note);\n      this.durations.push(duration);\n      this.appendReadableText_(\"play \".concat(Transcript.getDurationText_(duration), \" note \").concat(note));\n      this.size++;\n    }\n    /**\n     * Appends rest to transcript.\n     * @param {number} duration The duration of the rest.\n     */\n\n  }, {\n    key: \"appendRest\",\n    value: function appendRest(duration) {\n      this.notesAndRests.push(REST);\n      this.durations.push(duration);\n      this.appendReadableText_(\"\".concat(Transcript.getDurationText_(duration), \" rest\"));\n      this.size++;\n    }\n  }], [{\n    key: \"getDurationText_\",\n    value: function getDurationText_(duration) {\n      var durationText = 'unknown';\n\n      switch (duration) {\n        case 1:\n          durationText = 'whole';\n          break;\n\n        case 0.5:\n          durationText = 'half';\n          break;\n\n        case 0.25:\n          durationText = 'quarter';\n          break;\n\n        case 0.125:\n          durationText = 'eight';\n          break;\n      }\n\n      return durationText;\n    }\n  }]);\n\n  return Transcript;\n}();\n/**\n * Class representing musical stave.\n */\n\n\nvar Stave = /*#__PURE__*/function () {\n  /**\n   * Class holding code for music to play.\n   * @param {number} id The unique id of this stave.\n   * @param {Array<Interpreter.State>} stateStack The stateStack containing code\n   *    for this stave.\n   */\n  function Stave(id, stateStack) {\n    _classCallCheck(this, Stave);\n\n    /**\n     * The id.\n     * @type {number}\n     */\n    this.id = id;\n    /**\n     * The state stack.\n     * @type {Array<Interpreter.State>}\n     */\n\n    this.stateStack = stateStack;\n    /**\n     * Whether all the notes have ben played.\n     * @type {boolean}\n     */\n\n    this.done = false;\n    /**\n     * The time to pause till.\n     * @type {number}\n     * @private\n     */\n\n    this.pauseUntil64ths_ = 0;\n    /**\n     * The transcript of notes played.\n     * @type {Transcript}\n     * @private\n     */\n\n    this.transcript_ = new Transcript();\n    /**\n     * Currently playing note.\n     * @type {string}\n     * @private\n     */\n\n    this.note_ = '';\n  }\n  /**\n   * Whether this stave is currently paused.\n   * @param {number} clock64ths Number of 1/64ths notes since the start.\n   * @return {boolean} Whether this stave is paused.\n   */\n\n\n  _createClass(Stave, [{\n    key: \"isPaused\",\n    value: function isPaused(clock64ths) {\n      return this.pauseUntil64ths_ > clock64ths;\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note to play.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(duration, pitch, clock64ths) {\n      this.stopSound();\n      this.note_ = pitch;\n      _note_player__WEBPACK_IMPORTED_MODULE_5__[\"notePlayer\"].triggerAttack(pitch);\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this note.\n\n      this.transcript_.appendNote(pitch, duration);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"rest\",\n    value: function rest(duration, clock64ths) {\n      this.stopSound();\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this rest.\n\n      this.transcript_.appendRest(duration);\n    }\n    /**\n     * Stops currently playing note.\n     */\n\n  }, {\n    key: \"stopSound\",\n    value: function stopSound() {\n      if (this.note_) {\n        _note_player__WEBPACK_IMPORTED_MODULE_5__[\"notePlayer\"].triggerRelease();\n        this.note_ = '';\n      }\n    }\n    /**\n     * Returns feedback on what is different between the loaded transcript and the\n     * expected one, or empty string if they are equal.\n     * @param {Transcript} expectedTranscript The expected transcript.\n     * @return {string} The feedback.\n     */\n\n  }, {\n    key: \"getFeedback\",\n    value: function getFeedback(expectedTranscript) {\n      var feedback = ''; // There could be extra or missing notes.\n\n      var actualSize = this.transcript_.size;\n      var expectedSize = expectedTranscript.size;\n      var sizeMismatch = actualSize !== expectedSize;\n\n      if (actualSize < expectedSize) {\n        feedback += 'Your solution is missing notes.\\n';\n      } else if (actualSize > expectedSize) {\n        feedback += 'Your solution has extra notes.\\n';\n      } // The notes played could be wrong (duration or note).\n\n\n      var hasIncorrectNotes = false;\n      var hasIncorrectDuration = false;\n\n      for (var i = 0; i < actualSize && i < expectedSize; i++) {\n        if (this.transcript_.notesAndRests[i] !== expectedTranscript.notesAndRests[i]) {\n          hasIncorrectNotes = true;\n        }\n\n        if (this.transcript_.durations[i] !== expectedTranscript.durations[i]) {\n          hasIncorrectDuration = true;\n        }\n      }\n\n      if (hasIncorrectNotes) {\n        feedback += \"Some of the notes \".concat(sizeMismatch ? 'may be' : 'are', \" incorrect.\\n\");\n      }\n\n      if (hasIncorrectDuration) {\n        feedback += \"Some of the note durations \" + \"\".concat(sizeMismatch ? 'may be' : 'are', \" incorrect.\\n\");\n      } // Append the actual and expected notes played.\n\n\n      if (sizeMismatch || hasIncorrectNotes || hasIncorrectDuration) {\n        feedback += \"\\nYour solution: \".concat(this.transcript_.getReadableText() || 'empty', \"\\n\");\n        feedback += \"Expected solution: \".concat(expectedTranscript.getReadableText());\n      }\n\n      return feedback;\n    }\n  }]);\n\n  return Stave;\n}();\n/**\n * Game logic for music game.\n */\n\n\nvar Music = /*#__PURE__*/function () {\n  /**\n   * Class for a music game.\n   * @param {Blockly.WorkspaceSvg} workspace The Blockly workspace.\n   * @param {function(string)} onGoalUpdateCb The callback function for goal\n   *    change.\n   * @param {function()} onSuccessCb The callback function for on success event.\n   * @param {function(string)} onFailureCb The callback function for on failure\n   *    event.\n   * @constructor\n   */\n  function Music(workspace, onGoalUpdateCb, onSuccessCb, onFailureCb) {\n    _classCallCheck(this, Music);\n\n    /**\n     * The Blockly workspace associated with this game.\n     * @type {!Blockly.WorkspaceSvg}\n     */\n    this.workspace = workspace;\n    /**\n     * The currently loaded level. 0 if no level loaded.\n     */\n\n    this.level = 0;\n    /**\n     * Callback function for goal update.\n     * @param {string} text The text to set the goal to.\n     */\n\n    this.onGoalUpdate = onGoalUpdateCb;\n    /**\n     * The expected answer.\n     * @type {Array<Transcript>}\n     * @private\n     */\n\n    this.expectedAnswer_ = [];\n    /**\n     * The interpreter.\n     * @type {?Interpreter}\n     * @private\n     */\n\n    this.interpreter_ = null;\n    /**\n     * @type {Array<Stave>}\n     * @private\n     */\n\n    this.staves_ = [];\n    /**\n     * The current active stave.\n     * @type {?Stave}\n     * @private\n     */\n\n    this.activeStave_ = null;\n    /**\n     * Time of start of execution.\n     * @type {number}\n     * @private\n     */\n\n    this.startTime_ = 0;\n    /**\n     * Number of 1/64ths notes since the start.\n     * @type {number}\n     * @private\n     */\n\n    this.clock64ths_ = 0;\n    /**\n     * The speed at which to play notes. Between 0 and 1, with 0 being slow,\n     * 0.5 being normal speed, and 1 being fast.\n     * @type {number}\n     * @private\n     */\n\n    this.speed_ = 0.5;\n    /**\n     * The id of the last setTimeout call. Used for game reset.\n     * @type {number}\n     * @private\n     */\n\n    this.pid_ = 0;\n    /**\n     * The callback function on level success.\n     * @type {function()}\n     * @private\n     */\n\n    this.onSuccessCallback_ = onSuccessCb;\n    /**\n     * The callback function on level failure.\n     * @type {function(string)}\n     * @param {string} feedback The level feedback.\n     * @private\n     */\n\n    this.onFailureCallback_ = onFailureCb;\n    this.registerPlayShortcut();\n  }\n  /**\n   * Registers a shortcut to play the notes on the workspace.\n   */\n\n\n  _createClass(Music, [{\n    key: \"registerPlayShortcut\",\n    value: function registerPlayShortcut() {\n      var newFunction = function () {\n        this.execute();\n      }.bind(this);\n      /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n\n\n      var playShortcut = {\n        name: 'playShortcut',\n        preconditionFn: function preconditionFn(workspace) {\n          return workspace.keyboardAccessibilityMode && !workspace.options.readOnly;\n        },\n        callback: newFunction\n      };\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.register(playShortcut);\n      var shiftW = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.createSerializedKey(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.P, [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.SHIFT]);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.addKeyMapping(shiftW, playShortcut.name);\n    }\n    /**\n     * Clears the workspace and loads the specified blocks.\n     * @param {string} blockXml The xml text string of blocks.\n     */\n\n  }, {\n    key: \"loadWorkspaceBlocks\",\n    value: function loadWorkspaceBlocks(blockXml) {\n      this.workspace.clear();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.domToWorkspace(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.textToDom(blockXml), this.workspace);\n    }\n    /**\n     * Updates the currently loaded toolbox.\n     * @param {?Blockly.utils.toolbox.ToolboxDefinition} toolboxDef\n     *    DOM tree of toolbox contents, string of toolbox contents, or JSON\n     *    representing toolbox definition.\n     */\n\n  }, {\n    key: \"updateToolbox\",\n    value: function updateToolbox(toolboxDef) {\n      this.workspace.updateToolbox(toolboxDef);\n    }\n    /**\n     * Updates the goal based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateLevelGoal_\",\n    value: function updateLevelGoal_() {\n      var goalText = '';\n\n      switch (this.level) {\n        case 1:\n          this.expectedAnswer_ = [new Transcript(['C4', 'D4', 'E4', 'C4'], Array(4).fill(0.25))];\n          goalText = this.expectedAnswer_[0].getReadableText();\n          break;\n      }\n\n      this.onGoalUpdate(goalText);\n    }\n    /**\n     * Updates the toolbox based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateLevelToolbox_\",\n    value: function updateLevelToolbox_() {\n      var toolboxJson = {\n        'kind': 'flyoutToolbox',\n        'contents': [{\n          'kind': 'block',\n          'blockxml': \"<block type=\\\"music_note\\\">\\n                        <field name=\\\"DURATION\\\">0.25</field>\\n                        <value name=\\\"PITCH\\\">\\n                          <shadow type=\\\"music_pitch\\\">\\n                            <field name=\\\"PITCH\\\">C4</field>\\n                          </shadow>\\n                        </value>\\n                      </block>\"\n        }, {\n          'kind': 'block',\n          'type': 'music_rest'\n        }]\n      };\n      this.updateToolbox(toolboxJson);\n    }\n    /**\n     * Update the workspace blocks based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"loadLevelBlocks_\",\n    value: function loadLevelBlocks_() {\n      var levelXml = \"<xml>\\n            <block type=\\\"music_start\\\" deletable=\\\"false\\\" x=\\\"180\\\"\\n            y=\\\"50\\\"></block>\\n          </xml>\";\n      this.loadWorkspaceBlocks(levelXml);\n    }\n    /**\n     * Load the specified level.\n     * @param {number|string} level The level to load.\n     */\n\n  }, {\n    key: \"loadLevel\",\n    value: function loadLevel(level) {\n      this.level = Number(level);\n      this.updateLevelGoal_();\n      this.updateLevelToolbox_();\n      this.loadLevelBlocks_();\n    }\n    /**\n     * Set the speed (Number between 0 and 1).\n     * @param {number} speed The speed to set to.\n     */\n\n  }, {\n    key: \"setSpeed\",\n    value: function setSpeed(speed) {\n      if (speed <= 0 || speed > 1) {\n        console.error('Invalid speed');\n        return;\n      }\n\n      this.speed_ = speed;\n      this.startTime_ = 0;\n    }\n    /**\n     * Generates code and logs it to the console.\n     */\n\n  }, {\n    key: \"logGeneratedCode\",\n    value: function logGeneratedCode() {\n      var codeJs = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace);\n      console.log(codeJs);\n    }\n    /**\n     * Reset the music to the start position, clear the display, and kill any\n     * pending tasks.\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      // Kill any task.\n      clearTimeout(this.pid_);\n      this.staves_.forEach(function (stave) {\n        stave.stopSound();\n      });\n      this.interpreter_ = null;\n      this.activeStave_ = null;\n      this.staves_.length = 0;\n      this.clock64ths_ = 0;\n      this.startTime_ = 0;\n    }\n    /**\n     * Plays music based on the blocks on the workspace.\n     */\n\n  }, {\n    key: \"execute\",\n    value: function execute() {\n      var _this = this;\n\n      this.reset(); // Get generated code from workspace\n\n      var code = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace); // Run user code.\n\n      this.interpreter_ = new js_interpreter__WEBPACK_IMPORTED_MODULE_4___default.a(code, this.interpreterInit_.bind(this)); // TODO add support for multiple threads.\n\n      var interpreter = new js_interpreter__WEBPACK_IMPORTED_MODULE_4___default.a(''); // Replace this thread's global scope with the cross-thread global.\n\n      interpreter.stateStack[0].scope = this.interpreter_.globalScope; // Add start call.\n\n      interpreter.appendCode('start();\\n');\n      this.staves_.push(new Stave(0, interpreter.stateStack));\n      this.pid_ = setTimeout(function () {\n        return _this.tick_();\n      }, 100);\n    }\n    /**\n     * Inject the Music API into a JavaScript interpreter.\n     * @param {!Interpreter} interpreter The JS-Interpreter.\n     * @param {!Interpreter.Object} globalObject Global object.\n     * @private\n     */\n\n  }, {\n    key: \"interpreterInit_\",\n    value: function interpreterInit_(interpreter, globalObject) {\n      var _this2 = this;\n\n      // API\n      var wrapper;\n\n      wrapper = function wrapper(duration, pitch, _id) {\n        _this2.play_(duration, pitch);\n      };\n\n      interpreter.setProperty(globalObject, 'play', interpreter.createNativeFunction(wrapper));\n\n      wrapper = function wrapper(duration, _id) {\n        _this2.rest_(duration);\n      };\n\n      interpreter.setProperty(globalObject, 'rest', interpreter.createNativeFunction(wrapper)); // TODO implement setInstrument API.\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note play.\n     * @private\n     */\n\n  }, {\n    key: \"play_\",\n    value: function play_(duration, pitch) {\n      this.activeStave_.play(duration, pitch, this.clock64ths_);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @private\n     */\n\n  }, {\n    key: \"rest_\",\n    value: function rest_(duration) {\n      this.activeStave_.rest(duration, this.clock64ths_);\n    }\n    /**\n     * Execute a 1/64th tick of the program.\n     * @private\n     */\n\n  }, {\n    key: \"tick_\",\n    value: function tick_() {\n      var _this3 = this;\n\n      // Delay between start of each beat (1/64ths of a whole note).\n      // Reminder: The startTime_ should be reset after the slider is adjusted.\n      var scaleDuration = 1000 * (2.5 - 2 * this.speed_) / 64;\n\n      if (!this.startTime_) {\n        // Either the first tick, or first tick after slider was adjusted.\n        this.startTime_ = Date.now() - this.clock64ths_ * scaleDuration;\n      }\n\n      var done = true;\n      this.staves_.forEach(function (stave) {\n        if (!stave.done) {\n          done = false;\n\n          if (!stave.isPaused(_this3.clock64ths_)) {\n            _this3.executeChunk_(stave);\n          }\n        }\n      });\n\n      if (done) {\n        // Program complete.\n        var feedback = this.checkAnswer_();\n\n        if (feedback) {\n          this.onFailureCallback_(feedback);\n        } else {\n          this.onSuccessCallback_();\n        }\n      } else {\n        this.clock64ths_++;\n        var ms = this.startTime_ + this.clock64ths_ * scaleDuration - Date.now();\n        this.pid_ = setTimeout(function () {\n          return _this3.tick_();\n        }, ms);\n      }\n    }\n    /**\n     * Execute a bite-sized chunk of the user's code.\n     * @param {Stave} stave The stave to execute.\n     * @private\n     */\n\n  }, {\n    key: \"executeChunk_\",\n    value: function executeChunk_(stave) {\n      this.activeStave_ = stave; // Switch the interpreter to run the provided staff.\n\n      this.interpreter_.stateStack = stave.stateStack;\n      var ticks = 10000;\n      var go;\n\n      do {\n        try {\n          go = this.interpreter_.step();\n        } catch (e) {\n          // User error, terminate in shame.\n          alert(e);\n          go = false;\n        }\n\n        if (ticks-- == 0) {\n          console.warn('Staff ' + stave.id + ' is running slowly.');\n          return;\n        }\n\n        if (stave.isPaused(this.clock64ths_)) {\n          // Previously executed command (play or rest) requested a pause.\n          return;\n        }\n      } while (go); // Thread complete.  Wrap up.\n\n\n      stave.stopSound(stave);\n      stave.done = true;\n    }\n    /**\n     * Evaluates whether the answer for the currently loaded level is correct.\n     * Returns level feedback if correct or empty string if correct.\n     * @return {string} Level feedback or empty string.\n     * @private\n     */\n\n  }, {\n    key: \"checkAnswer_\",\n    value: function checkAnswer_() {\n      var feedback = '';\n\n      for (var i = 0; i < this.expectedAnswer_.length; i++) {\n        var staveFeedback = this.staves_[i].getFeedback(this.expectedAnswer_[i]);\n\n        if (staveFeedback) {\n          feedback += staveFeedback;\n        }\n      }\n\n      return feedback;\n    }\n  }]);\n\n  return Music;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbXVzaWMuanM/MmE0ZiJdLCJuYW1lcyI6WyJSRVNUIiwiVHJhbnNjcmlwdCIsIm5vdGVzQW5kUmVzdHMiLCJkdXJhdGlvbnMiLCJsZW5ndGgiLCJjb25zb2xlIiwiZXJyb3IiLCJzaXplIiwicmVhZGFibGVUZXh0XyIsImkiLCJhcHBlbmROb3RlIiwidGV4dCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJpdGVtcyIsInNwbGl0Iiwiam9pbiIsIm5vdGUiLCJkdXJhdGlvbiIsInB1c2giLCJhcHBlbmRSZWFkYWJsZVRleHRfIiwiZ2V0RHVyYXRpb25UZXh0XyIsImR1cmF0aW9uVGV4dCIsIlN0YXZlIiwiaWQiLCJzdGF0ZVN0YWNrIiwiZG9uZSIsInBhdXNlVW50aWw2NHRoc18iLCJ0cmFuc2NyaXB0XyIsIm5vdGVfIiwiY2xvY2s2NHRocyIsInBpdGNoIiwic3RvcFNvdW5kIiwibm90ZVBsYXllciIsInRyaWdnZXJBdHRhY2siLCJhcHBlbmRSZXN0IiwidHJpZ2dlclJlbGVhc2UiLCJleHBlY3RlZFRyYW5zY3JpcHQiLCJmZWVkYmFjayIsImFjdHVhbFNpemUiLCJleHBlY3RlZFNpemUiLCJzaXplTWlzbWF0Y2giLCJoYXNJbmNvcnJlY3ROb3RlcyIsImhhc0luY29ycmVjdER1cmF0aW9uIiwiZ2V0UmVhZGFibGVUZXh0IiwiTXVzaWMiLCJ3b3Jrc3BhY2UiLCJvbkdvYWxVcGRhdGVDYiIsIm9uU3VjY2Vzc0NiIiwib25GYWlsdXJlQ2IiLCJsZXZlbCIsIm9uR29hbFVwZGF0ZSIsImV4cGVjdGVkQW5zd2VyXyIsImludGVycHJldGVyXyIsInN0YXZlc18iLCJhY3RpdmVTdGF2ZV8iLCJzdGFydFRpbWVfIiwiY2xvY2s2NHRoc18iLCJzcGVlZF8iLCJwaWRfIiwib25TdWNjZXNzQ2FsbGJhY2tfIiwib25GYWlsdXJlQ2FsbGJhY2tfIiwicmVnaXN0ZXJQbGF5U2hvcnRjdXQiLCJuZXdGdW5jdGlvbiIsImV4ZWN1dGUiLCJiaW5kIiwicGxheVNob3J0Y3V0IiwibmFtZSIsInByZWNvbmRpdGlvbkZuIiwia2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSIsIm9wdGlvbnMiLCJyZWFkT25seSIsImNhbGxiYWNrIiwiQmxvY2tseSIsIlNob3J0Y3V0UmVnaXN0cnkiLCJyZWdpc3RyeSIsInJlZ2lzdGVyIiwic2hpZnRXIiwiY3JlYXRlU2VyaWFsaXplZEtleSIsInV0aWxzIiwiS2V5Q29kZXMiLCJQIiwiU0hJRlQiLCJhZGRLZXlNYXBwaW5nIiwiYmxvY2tYbWwiLCJjbGVhciIsIlhtbCIsImRvbVRvV29ya3NwYWNlIiwidGV4dFRvRG9tIiwidG9vbGJveERlZiIsInVwZGF0ZVRvb2xib3giLCJnb2FsVGV4dCIsIkFycmF5IiwiZmlsbCIsInRvb2xib3hKc29uIiwibGV2ZWxYbWwiLCJsb2FkV29ya3NwYWNlQmxvY2tzIiwiTnVtYmVyIiwidXBkYXRlTGV2ZWxHb2FsXyIsInVwZGF0ZUxldmVsVG9vbGJveF8iLCJsb2FkTGV2ZWxCbG9ja3NfIiwic3BlZWQiLCJjb2RlSnMiLCJKYXZhU2NyaXB0Iiwid29ya3NwYWNlVG9Db2RlIiwibG9nIiwiY2xlYXJUaW1lb3V0IiwiZm9yRWFjaCIsInN0YXZlIiwicmVzZXQiLCJjb2RlIiwiSW50ZXJwcmV0ZXIiLCJpbnRlcnByZXRlckluaXRfIiwiaW50ZXJwcmV0ZXIiLCJzY29wZSIsImdsb2JhbFNjb3BlIiwiYXBwZW5kQ29kZSIsInNldFRpbWVvdXQiLCJ0aWNrXyIsImdsb2JhbE9iamVjdCIsIndyYXBwZXIiLCJfaWQiLCJwbGF5XyIsInNldFByb3BlcnR5IiwiY3JlYXRlTmF0aXZlRnVuY3Rpb24iLCJyZXN0XyIsInBsYXkiLCJyZXN0Iiwic2NhbGVEdXJhdGlvbiIsIkRhdGUiLCJub3ciLCJpc1BhdXNlZCIsImV4ZWN1dGVDaHVua18iLCJjaGVja0Fuc3dlcl8iLCJtcyIsInRpY2tzIiwiZ28iLCJzdGVwIiwiZSIsImFsZXJ0Iiwid2FybiIsInN0YXZlRmVlZGJhY2siLCJn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RyxDQUFiLEVBQWdCQSxDQUFDLEdBQUcsS0FBSzRDLGVBQUwsQ0FBcUJqRCxNQUF6QyxFQUFpREssQ0FBQyxFQUFsRCxFQUFzRDtBQUNwRCxZQUFNcUksYUFBYSxHQUNmLEtBQUt2RixPQUFMLENBQWE5QyxDQUFiLEVBQWdCc0ksV0FBaEIsQ0FBNEIsS0FBSzFGLGVBQUwsQ0FBcUI1QyxDQUFyQixDQUE1QixDQURKOztBQUVBLFlBQUlxSSxhQUFKLEVBQW1CO0FBQ2pCdkcsa0JBQVEsSUFBSXVHLGFBQVo7QUFDRDtBQUNGOztBQUNELGFBQU92RyxRQUFQO0FBQ0Q7QUFsWkg7O0FBQUE7QUFBQSIsImZpbGUiOiIuL3NyYy9tdXNpYy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEdhbWUgbG9naWMgZm9yIG11c2ljIGdhbWUuXG4gKi9cblxuaW1wb3J0IEJsb2NrbHkgZnJvbSAnYmxvY2tseS9jb3JlJztcbmltcG9ydCAnLi9tdXNpY19ibG9ja3MnO1xuLy8gaW1wb3J0IHtzcGVha2VyfSBmcm9tICcuL3NwZWFrZXInO1xuLy8gaW1wb3J0IHt0b29sYm94UGl0Y2h9IGZyb20gJy4vbXVzaWNfYmxvY2tzJztcbmltcG9ydCB7Q3VzdG9tQ3Vyc29yfSBmcm9tICcuL2N1c3RvbV9jdXJzb3InO1xuaW1wb3J0ICcuL211c2ljX2Jsb2NrX2dlbmVyYXRvcnMnO1xuaW1wb3J0IEludGVycHJldGVyIGZyb20gJ2pzLWludGVycHJldGVyJztcbmltcG9ydCB7bm90ZVBsYXllcn0gZnJvbSAnLi9ub3RlX3BsYXllcic7XG5cbi8qKlxuICogQ29uc3RhbnQgZGVub3RpbmcgYSByZXN0LlxuICovXG5jb25zdCBSRVNUID0gJ1JFU1QnO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyB0cmFuc2NyaXB0IG9mIG5vdGVzIHBsYXllZC5cbiAqL1xuY2xhc3MgVHJhbnNjcmlwdCB7XG4gIC8qKlxuICAgKiBDbGFzcyBmb3IgaG9sZGluZyB0cmFuc2NyaXB0IG9mIG5vdGVzIHRoYXQgd2VyZSBwbGF5ZWQuIEV4cGVjdHNcbiAgICogbm90ZXNBbmRSZXN0cyBhbmQgZHVyYXRpb25zIHRvIGhhdmUgYSBtYXRjaGluZyBsZW5ndGguXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gbm90ZXNBbmRSZXN0cyBUaGUgbm90ZXMgYW5kIHJlc3RzLlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGR1cmF0aW9ucyBUaGUgZHVyYXRpb25zIG9mIHRoZSBub3RlcyBhbmQgcmVzdHMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihub3Rlc0FuZFJlc3RzID0gW10sIGR1cmF0aW9ucyA9IFtdKSB7XG4gICAgaWYgKG5vdGVzQW5kUmVzdHMubGVuZ3RoICE9PSBkdXJhdGlvbnMubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUcmFuc2NyaXB0IGxlbmd0aCBtaXNtYXRjaC4nKTtcbiAgICB9XG4gICAgdGhpcy5ub3Rlc0FuZFJlc3RzID0gW107XG4gICAgdGhpcy5kdXJhdGlvbnMgPSBbXTtcbiAgICB0aGlzLnNpemUgPSAwO1xuICAgIHRoaXMucmVhZGFibGVUZXh0XyA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90ZXNBbmRSZXN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hcHBlbmROb3RlKG5vdGVzQW5kUmVzdHNbaV0sIGR1cmF0aW9uc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGR1cmF0aW9uIG51bWJlciBpbnRvIGFwcHJvcmlhdGUgc3RyaW5nLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gVGhlIGR1cmF0aW9uLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzdHJpbmcgdmVyc2lvbiBvZiBkdXJhdGlvbi5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBnZXREdXJhdGlvblRleHRfKGR1cmF0aW9uKSB7XG4gICAgbGV0IGR1cmF0aW9uVGV4dCA9ICd1bmtub3duJztcbiAgICBzd2l0Y2ggKGR1cmF0aW9uKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGR1cmF0aW9uVGV4dCA9ICd3aG9sZSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAwLjU6XG4gICAgICAgIGR1cmF0aW9uVGV4dCA9ICdoYWxmJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDAuMjU6XG4gICAgICAgIGR1cmF0aW9uVGV4dCA9ICdxdWFydGVyJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDAuMTI1OlxuICAgICAgICBkdXJhdGlvblRleHQgPSAnZWlnaHQnO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGR1cmF0aW9uVGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBtZXRob2QgZm9yIGFwcGVuZGluZyB0ZXh0IHRvIHRyYW5zY3JpcHQgdGV4dC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gYXBwZW5kLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXBwZW5kUmVhZGFibGVUZXh0Xyh0ZXh0KSB7XG4gICAgaWYgKHRoaXMucmVhZGFibGVUZXh0Xykge1xuICAgICAgdGhpcy5yZWFkYWJsZVRleHRfICs9ICcsICc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRleHQgPSB0ZXh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zbGljZSgxKTtcbiAgICB9XG4gICAgdGhpcy5yZWFkYWJsZVRleHRfICs9IHRleHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBzZW50ZW5jZSByZXByZXNlbnRpbmcgdGhlIG5vdGVzIHBsYXllZCBpbiB0aGlzIHRyYW5zY3JpcHQuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHNlbnRlbmNlLlxuICAgKi9cbiAgZ2V0UmVhZGFibGVUZXh0KCkge1xuICAgIGlmICghdGhpcy5yZWFkYWJsZVRleHRfKSB7XG4gICAgICByZXR1cm4gJ0VtcHR5Lic7XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5yZWFkYWJsZVRleHRfLnNwbGl0KCcsJyk7XG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDEpIHtcbiAgICAgIGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdID0gJyBhbmQgJyArIGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbXMuam9pbignLCcpICsgJy4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZHMgbm90ZSB0byB0cmFuc2NyaXB0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbm90ZSBUaGUgcGl0Y2ggb2Ygbm90ZSB0byBhcHBlbmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBUaGUgZHVyYXRpb24gb2YgdGhlIG5vdGUuXG4gICAqL1xuICBhcHBlbmROb3RlKG5vdGUsIGR1cmF0aW9uKSB7XG4gICAgdGhpcy5ub3Rlc0FuZFJlc3RzLnB1c2gobm90ZSk7XG4gICAgdGhpcy5kdXJhdGlvbnMucHVzaChkdXJhdGlvbik7XG4gICAgdGhpcy5hcHBlbmRSZWFkYWJsZVRleHRfKFxuICAgICAgICBgcGxheSAke1RyYW5zY3JpcHQuZ2V0RHVyYXRpb25UZXh0XyhkdXJhdGlvbil9IG5vdGUgJHtub3RlfWApO1xuICAgIHRoaXMuc2l6ZSsrO1xuICB9XG4gIC8qKlxuICAgKiBBcHBlbmRzIHJlc3QgdG8gdHJhbnNjcmlwdC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIFRoZSBkdXJhdGlvbiBvZiB0aGUgcmVzdC5cbiAgICovXG4gIGFwcGVuZFJlc3QoZHVyYXRpb24pIHtcbiAgICB0aGlzLm5vdGVzQW5kUmVzdHMucHVzaChSRVNUKTtcbiAgICB0aGlzLmR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKTtcbiAgICB0aGlzLmFwcGVuZFJlYWRhYmxlVGV4dF8oXG4gICAgICAgIGAke1RyYW5zY3JpcHQuZ2V0RHVyYXRpb25UZXh0XyhkdXJhdGlvbil9IHJlc3RgKTtcbiAgICB0aGlzLnNpemUrKztcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBtdXNpY2FsIHN0YXZlLlxuICovXG5jbGFzcyBTdGF2ZSB7XG4gIC8qKlxuICAgKiBDbGFzcyBob2xkaW5nIGNvZGUgZm9yIG11c2ljIHRvIHBsYXkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZCBUaGUgdW5pcXVlIGlkIG9mIHRoaXMgc3RhdmUuXG4gICAqIEBwYXJhbSB7QXJyYXk8SW50ZXJwcmV0ZXIuU3RhdGU+fSBzdGF0ZVN0YWNrIFRoZSBzdGF0ZVN0YWNrIGNvbnRhaW5pbmcgY29kZVxuICAgKiAgICBmb3IgdGhpcyBzdGF2ZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGlkLCBzdGF0ZVN0YWNrKSB7XG4gICAgLyoqXG4gICAgICogVGhlIGlkLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0ZSBzdGFjay5cbiAgICAgKiBAdHlwZSB7QXJyYXk8SW50ZXJwcmV0ZXIuU3RhdGU+fVxuICAgICAqL1xuICAgIHRoaXMuc3RhdGVTdGFjayA9IHN0YXRlU3RhY2s7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIGFsbCB0aGUgbm90ZXMgaGF2ZSBiZW4gcGxheWVkLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRpbWUgdG8gcGF1c2UgdGlsbC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wYXVzZVVudGlsNjR0aHNfID0gMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2NyaXB0IG9mIG5vdGVzIHBsYXllZC5cbiAgICAgKiBAdHlwZSB7VHJhbnNjcmlwdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudHJhbnNjcmlwdF8gPSBuZXcgVHJhbnNjcmlwdCgpO1xuXG4gICAgLyoqXG4gICAgICogQ3VycmVudGx5IHBsYXlpbmcgbm90ZS5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5ub3RlXyA9ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBzdGF2ZSBpcyBjdXJyZW50bHkgcGF1c2VkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gY2xvY2s2NHRocyBOdW1iZXIgb2YgMS82NHRocyBub3RlcyBzaW5jZSB0aGUgc3RhcnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBzdGF2ZSBpcyBwYXVzZWQuXG4gICAqL1xuICBpc1BhdXNlZChjbG9jazY0dGhzKSB7XG4gICAgcmV0dXJuIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA+IGNsb2NrNjR0aHM7XG4gIH1cblxuICAvKipcbiAgICogUGxheSBvbmUgbm90ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIEZyYWN0aW9uIG9mIGEgd2hvbGUgbm90ZSBsZW5ndGggdG8gcGxheS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBpdGNoIE5vdGUgdG8gcGxheS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNsb2NrNjR0aHMgTnVtYmVyIG9mIDEvNjR0aHMgbm90ZXMgc2luY2UgdGhlIHN0YXJ0LlxuICAgKi9cbiAgcGxheShkdXJhdGlvbiwgcGl0Y2gsIGNsb2NrNjR0aHMpIHtcbiAgICB0aGlzLnN0b3BTb3VuZCgpO1xuICAgIHRoaXMubm90ZV8gPSBwaXRjaDtcbiAgICBub3RlUGxheWVyLnRyaWdnZXJBdHRhY2socGl0Y2gpO1xuICAgIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA9IGR1cmF0aW9uICogNjQgKyBjbG9jazY0dGhzO1xuICAgIC8vIE1ha2UgYSByZWNvcmQgb2YgdGhpcyBub3RlLlxuICAgIHRoaXMudHJhbnNjcmlwdF8uYXBwZW5kTm90ZShwaXRjaCwgZHVyYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgb25lIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBGcmFjdGlvbiBvZiBhIHdob2xlIG5vdGUgbGVuZ3RoIHRvIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjbG9jazY0dGhzIE51bWJlciBvZiAxLzY0dGhzIG5vdGVzIHNpbmNlIHRoZSBzdGFydC5cbiAgICovXG4gIHJlc3QoZHVyYXRpb24sIGNsb2NrNjR0aHMpIHtcbiAgICB0aGlzLnN0b3BTb3VuZCgpO1xuICAgIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA9IGR1cmF0aW9uICogNjQgKyBjbG9jazY0dGhzO1xuICAgIC8vIE1ha2UgYSByZWNvcmQgb2YgdGhpcyByZXN0LlxuICAgIHRoaXMudHJhbnNjcmlwdF8uYXBwZW5kUmVzdChkdXJhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogU3RvcHMgY3VycmVudGx5IHBsYXlpbmcgbm90ZS5cbiAgICovXG4gIHN0b3BTb3VuZCgpIHtcbiAgICBpZiAodGhpcy5ub3RlXykge1xuICAgICAgbm90ZVBsYXllci50cmlnZ2VyUmVsZWFzZSgpO1xuICAgICAgdGhpcy5ub3RlXyA9ICcnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZlZWRiYWNrIG9uIHdoYXQgaXMgZGlmZmVyZW50IGJldHdlZW4gdGhlIGxvYWRlZCB0cmFuc2NyaXB0IGFuZCB0aGVcbiAgICogZXhwZWN0ZWQgb25lLCBvciBlbXB0eSBzdHJpbmcgaWYgdGhleSBhcmUgZXF1YWwuXG4gICAqIEBwYXJhbSB7VHJhbnNjcmlwdH0gZXhwZWN0ZWRUcmFuc2NyaXB0IFRoZSBleHBlY3RlZCB0cmFuc2NyaXB0LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBmZWVkYmFjay5cbiAgICovXG4gIGdldEZlZWRiYWNrKGV4cGVjdGVkVHJhbnNjcmlwdCkge1xuICAgIGxldCBmZWVkYmFjayA9ICcnO1xuXG4gICAgLy8gVGhlcmUgY291bGQgYmUgZXh0cmEgb3IgbWlzc2luZyBub3Rlcy5cbiAgICBjb25zdCBhY3R1YWxTaXplID0gdGhpcy50cmFuc2NyaXB0Xy5zaXplO1xuICAgIGNvbnN0IGV4cGVjdGVkU2l6ZSA9IGV4cGVjdGVkVHJhbnNjcmlwdC5zaXplO1xuICAgIGNvbnN0IHNpemVNaXNtYXRjaCA9IGFjdHVhbFNpemUgIT09IGV4cGVjdGVkU2l6ZTtcbiAgICBpZiAoYWN0dWFsU2l6ZSA8IGV4cGVjdGVkU2l6ZSkge1xuICAgICAgZmVlZGJhY2sgKz0gJ1lvdXIgc29sdXRpb24gaXMgbWlzc2luZyBub3Rlcy5cXG4nO1xuICAgIH0gZWxzZSBpZiAoYWN0dWFsU2l6ZSA+IGV4cGVjdGVkU2l6ZSkge1xuICAgICAgZmVlZGJhY2sgKz0gJ1lvdXIgc29sdXRpb24gaGFzIGV4dHJhIG5vdGVzLlxcbic7XG4gICAgfVxuXG4gICAgLy8gVGhlIG5vdGVzIHBsYXllZCBjb3VsZCBiZSB3cm9uZyAoZHVyYXRpb24gb3Igbm90ZSkuXG4gICAgbGV0IGhhc0luY29ycmVjdE5vdGVzID0gZmFsc2U7XG4gICAgbGV0IGhhc0luY29ycmVjdER1cmF0aW9uID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3R1YWxTaXplICYmIGkgPCBleHBlY3RlZFNpemU7IGkrKykge1xuICAgICAgaWYgKHRoaXMudHJhbnNjcmlwdF8ubm90ZXNBbmRSZXN0c1tpXSAhPT1cbiAgICAgICAgICBleHBlY3RlZFRyYW5zY3JpcHQubm90ZXNBbmRSZXN0c1tpXSkge1xuICAgICAgICBoYXNJbmNvcnJlY3ROb3RlcyA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy50cmFuc2NyaXB0Xy5kdXJhdGlvbnNbaV0gIT09IGV4cGVjdGVkVHJhbnNjcmlwdC5kdXJhdGlvbnNbaV0pIHtcbiAgICAgICAgaGFzSW5jb3JyZWN0RHVyYXRpb24gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGFzSW5jb3JyZWN0Tm90ZXMpIHtcbiAgICAgIGZlZWRiYWNrICs9XG4gICAgICAgICAgYFNvbWUgb2YgdGhlIG5vdGVzICR7c2l6ZU1pc21hdGNoID8gJ21heSBiZScgOiAnYXJlJ30gaW5jb3JyZWN0LlxcbmA7XG4gICAgfVxuICAgIGlmIChoYXNJbmNvcnJlY3REdXJhdGlvbikge1xuICAgICAgZmVlZGJhY2sgKz0gYFNvbWUgb2YgdGhlIG5vdGUgZHVyYXRpb25zIGAgK1xuICAgICAgICAgIGAke3NpemVNaXNtYXRjaCA/ICdtYXkgYmUnIDogJ2FyZSd9IGluY29ycmVjdC5cXG5gO1xuICAgIH1cblxuICAgIC8vIEFwcGVuZCB0aGUgYWN0dWFsIGFuZCBleHBlY3RlZCBub3RlcyBwbGF5ZWQuXG4gICAgaWYgKHNpemVNaXNtYXRjaCB8fCBoYXNJbmNvcnJlY3ROb3RlcyB8fCBoYXNJbmNvcnJlY3REdXJhdGlvbikge1xuICAgICAgZmVlZGJhY2sgKz1cbiAgICAgICAgICBgXFxuWW91ciBzb2x1dGlvbjogJHt0aGlzLnRyYW5zY3JpcHRfLmdldFJlYWRhYmxlVGV4dCgpIHx8ICdlbXB0eSd9XFxuYDtcbiAgICAgIGZlZWRiYWNrICs9IGBFeHBlY3RlZCBzb2x1dGlvbjogJHtleHBlY3RlZFRyYW5zY3JpcHQuZ2V0UmVhZGFibGVUZXh0KCl9YDtcbiAgICB9XG4gICAgcmV0dXJuIGZlZWRiYWNrO1xuICB9XG59XG5cbi8qKlxuICogR2FtZSBsb2dpYyBmb3IgbXVzaWMgZ2FtZS5cbiAqL1xuZXhwb3J0IGNsYXNzIE11c2ljIHtcbiAgLyoqXG4gICAqIENsYXNzIGZvciBhIG11c2ljIGdhbWUuXG4gICAqIEBwYXJhbSB7QmxvY2tseS5Xb3Jrc3BhY2VTdmd9IHdvcmtzcGFjZSBUaGUgQmxvY2tseSB3b3Jrc3BhY2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKX0gb25Hb2FsVXBkYXRlQ2IgVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBnb2FsXG4gICAqICAgIGNoYW5nZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBvblN1Y2Nlc3NDYiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gZm9yIG9uIHN1Y2Nlc3MgZXZlbnQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKX0gb25GYWlsdXJlQ2IgVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBvbiBmYWlsdXJlXG4gICAqICAgIGV2ZW50LlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdvcmtzcGFjZSwgb25Hb2FsVXBkYXRlQ2IsIG9uU3VjY2Vzc0NiLCBvbkZhaWx1cmVDYikge1xuICAgIC8qKlxuICAgICAqIFRoZSBCbG9ja2x5IHdvcmtzcGFjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBnYW1lLlxuICAgICAqIEB0eXBlIHshQmxvY2tseS5Xb3Jrc3BhY2VTdmd9XG4gICAgICovXG4gICAgdGhpcy53b3Jrc3BhY2UgPSB3b3Jrc3BhY2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudGx5IGxvYWRlZCBsZXZlbC4gMCBpZiBubyBsZXZlbCBsb2FkZWQuXG4gICAgICovXG4gICAgdGhpcy5sZXZlbCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmb3IgZ29hbCB1cGRhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gc2V0IHRoZSBnb2FsIHRvLlxuICAgICAqL1xuICAgIHRoaXMub25Hb2FsVXBkYXRlID0gb25Hb2FsVXBkYXRlQ2I7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZXhwZWN0ZWQgYW5zd2VyLlxuICAgICAqIEB0eXBlIHtBcnJheTxUcmFuc2NyaXB0Pn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZXhwZWN0ZWRBbnN3ZXJfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW50ZXJwcmV0ZXIuXG4gICAgICogQHR5cGUgez9JbnRlcnByZXRlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaW50ZXJwcmV0ZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxTdGF2ZT59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnN0YXZlc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFjdGl2ZSBzdGF2ZS5cbiAgICAgKiBAdHlwZSB7P1N0YXZlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5hY3RpdmVTdGF2ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGltZSBvZiBzdGFydCBvZiBleGVjdXRpb24uXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc3RhcnRUaW1lXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgMS82NHRocyBub3RlcyBzaW5jZSB0aGUgc3RhcnQuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuY2xvY2s2NHRoc18gPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNwZWVkIGF0IHdoaWNoIHRvIHBsYXkgbm90ZXMuIEJldHdlZW4gMCBhbmQgMSwgd2l0aCAwIGJlaW5nIHNsb3csXG4gICAgICogMC41IGJlaW5nIG5vcm1hbCBzcGVlZCwgYW5kIDEgYmVpbmcgZmFzdC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zcGVlZF8gPSAwLjU7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaWQgb2YgdGhlIGxhc3Qgc2V0VGltZW91dCBjYWxsLiBVc2VkIGZvciBnYW1lIHJlc2V0LlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnBpZF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIG9uIGxldmVsIHN1Y2Nlc3MuXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKCl9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm9uU3VjY2Vzc0NhbGxiYWNrXyA9IG9uU3VjY2Vzc0NiO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIG9uIGxldmVsIGZhaWx1cmUuXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKHN0cmluZyl9XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZlZWRiYWNrIFRoZSBsZXZlbCBmZWVkYmFjay5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub25GYWlsdXJlQ2FsbGJhY2tfID0gb25GYWlsdXJlQ2I7XG5cbiAgICB0aGlzLnJlZ2lzdGVyUGxheVNob3J0Y3V0KCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgc2hvcnRjdXQgdG8gcGxheSB0aGUgbm90ZXMgb24gdGhlIHdvcmtzcGFjZS5cbiAgICovXG4gIHJlZ2lzdGVyUGxheVNob3J0Y3V0KCkge1xuICAgIGNvbnN0IG5ld0Z1bmN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmV4ZWN1dGUoKTtcbiAgICB9LmJpbmQodGhpcyk7XG4gICAgLyoqIEB0eXBlIHshQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LktleWJvYXJkU2hvcnRjdXR9ICovXG4gICAgY29uc3QgcGxheVNob3J0Y3V0ID0ge1xuICAgICAgbmFtZTogJ3BsYXlTaG9ydGN1dCcsXG4gICAgICBwcmVjb25kaXRpb25GbjogZnVuY3Rpb24od29ya3NwYWNlKSB7XG4gICAgICAgIHJldHVybiB3b3Jrc3BhY2Uua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSAmJlxuICAgICAgICAgICAgIXdvcmtzcGFjZS5vcHRpb25zLnJlYWRPbmx5O1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiBuZXdGdW5jdGlvbixcbiAgICB9O1xuXG4gICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LnJlZ2lzdGVyKHBsYXlTaG9ydGN1dCk7XG4gICAgY29uc3Qgc2hpZnRXID0gQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LmNyZWF0ZVNlcmlhbGl6ZWRLZXkoXG4gICAgICAgIEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuUCwgW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuU0hJRlRdKTtcbiAgICBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkuYWRkS2V5TWFwcGluZyhcbiAgICAgICAgc2hpZnRXLCBwbGF5U2hvcnRjdXQubmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSB3b3Jrc3BhY2UgYW5kIGxvYWRzIHRoZSBzcGVjaWZpZWQgYmxvY2tzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYmxvY2tYbWwgVGhlIHhtbCB0ZXh0IHN0cmluZyBvZiBibG9ja3MuXG4gICAqL1xuICBsb2FkV29ya3NwYWNlQmxvY2tzKGJsb2NrWG1sKSB7XG4gICAgdGhpcy53b3Jrc3BhY2UuY2xlYXIoKTtcbiAgICBCbG9ja2x5LlhtbC5kb21Ub1dvcmtzcGFjZShcbiAgICAgICAgQmxvY2tseS5YbWwudGV4dFRvRG9tKGJsb2NrWG1sKSwgdGhpcy53b3Jrc3BhY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnRseSBsb2FkZWQgdG9vbGJveC5cbiAgICogQHBhcmFtIHs/QmxvY2tseS51dGlscy50b29sYm94LlRvb2xib3hEZWZpbml0aW9ufSB0b29sYm94RGVmXG4gICAqICAgIERPTSB0cmVlIG9mIHRvb2xib3ggY29udGVudHMsIHN0cmluZyBvZiB0b29sYm94IGNvbnRlbnRzLCBvciBKU09OXG4gICAqICAgIHJlcHJlc2VudGluZyB0b29sYm94IGRlZmluaXRpb24uXG4gICAqL1xuICB1cGRhdGVUb29sYm94KHRvb2xib3hEZWYpIHtcbiAgICB0aGlzLndvcmtzcGFjZS51cGRhdGVUb29sYm94KHRvb2xib3hEZWYpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGdvYWwgYmFzZWQgb24gdGhlIGN1cnJlbnQgbGV2ZWwuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1cGRhdGVMZXZlbEdvYWxfKCkge1xuICAgIGxldCBnb2FsVGV4dCA9ICcnO1xuICAgIHN3aXRjaCAodGhpcy5sZXZlbCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICB0aGlzLmV4cGVjdGVkQW5zd2VyXyA9XG4gICAgICAgICAgICBbbmV3IFRyYW5zY3JpcHQoWydDNCcsICdENCcsICdFNCcsICdDNCddLCBBcnJheSg0KS5maWxsKDAuMjUpKV07XG4gICAgICAgIGdvYWxUZXh0ID0gdGhpcy5leHBlY3RlZEFuc3dlcl9bMF0uZ2V0UmVhZGFibGVUZXh0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLm9uR29hbFVwZGF0ZShnb2FsVGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgdG9vbGJveCBiYXNlZCBvbiB0aGUgY3VycmVudCBsZXZlbC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZUxldmVsVG9vbGJveF8oKSB7XG4gICAgY29uc3QgdG9vbGJveEpzb24gPSB7XG4gICAgICAna2luZCc6ICdmbHlvdXRUb29sYm94JyxcbiAgICAgICdjb250ZW50cyc6IFtcbiAgICAgICAge1xuICAgICAgICAgICdraW5kJzogJ2Jsb2NrJyxcbiAgICAgICAgICAnYmxvY2t4bWwnOiBgPGJsb2NrIHR5cGU9XCJtdXNpY19ub3RlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIkRVUkFUSU9OXCI+MC4yNTwvZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dmFsdWUgbmFtZT1cIlBJVENIXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzaGFkb3cgdHlwZT1cIm11c2ljX3BpdGNoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZpZWxkIG5hbWU9XCJQSVRDSFwiPkM0PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaGFkb3c+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3ZhbHVlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvYmxvY2s+YCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICdraW5kJzogJ2Jsb2NrJyxcbiAgICAgICAgICAndHlwZSc6ICdtdXNpY19yZXN0JyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcbiAgICB0aGlzLnVwZGF0ZVRvb2xib3godG9vbGJveEpzb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgd29ya3NwYWNlIGJsb2NrcyBiYXNlZCBvbiB0aGUgY3VycmVudCBsZXZlbC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGxvYWRMZXZlbEJsb2Nrc18oKSB7XG4gICAgY29uc3QgbGV2ZWxYbWwgPVxuICAgICAgICBgPHhtbD5cbiAgICAgICAgICAgIDxibG9jayB0eXBlPVwibXVzaWNfc3RhcnRcIiBkZWxldGFibGU9XCJmYWxzZVwiIHg9XCIxODBcIlxuICAgICAgICAgICAgeT1cIjUwXCI+PC9ibG9jaz5cbiAgICAgICAgICA8L3htbD5gO1xuICAgIHRoaXMubG9hZFdvcmtzcGFjZUJsb2NrcyhsZXZlbFhtbCk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCB0aGUgc3BlY2lmaWVkIGxldmVsLlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGxldmVsIFRoZSBsZXZlbCB0byBsb2FkLlxuICAgKi9cbiAgbG9hZExldmVsKGxldmVsKSB7XG4gICAgdGhpcy5sZXZlbCA9IE51bWJlcihsZXZlbCk7XG4gICAgdGhpcy51cGRhdGVMZXZlbEdvYWxfKCk7XG4gICAgdGhpcy51cGRhdGVMZXZlbFRvb2xib3hfKCk7XG4gICAgdGhpcy5sb2FkTGV2ZWxCbG9ja3NfKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzcGVlZCAoTnVtYmVyIGJldHdlZW4gMCBhbmQgMSkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcGVlZCBUaGUgc3BlZWQgdG8gc2V0IHRvLlxuICAgKi9cbiAgc2V0U3BlZWQoc3BlZWQpIHtcbiAgICBpZiAoc3BlZWQgPD0gMCB8fCBzcGVlZCA+IDEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgc3BlZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zcGVlZF8gPSBzcGVlZDtcbiAgICB0aGlzLnN0YXJ0VGltZV8gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBjb2RlIGFuZCBsb2dzIGl0IHRvIHRoZSBjb25zb2xlLlxuICAgKi9cbiAgbG9nR2VuZXJhdGVkQ29kZSgpIHtcbiAgICBjb25zdCBjb2RlSnMgPSBCbG9ja2x5LkphdmFTY3JpcHQud29ya3NwYWNlVG9Db2RlKHRoaXMud29ya3NwYWNlKTtcbiAgICBjb25zb2xlLmxvZyhjb2RlSnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRoZSBtdXNpYyB0byB0aGUgc3RhcnQgcG9zaXRpb24sIGNsZWFyIHRoZSBkaXNwbGF5LCBhbmQga2lsbCBhbnlcbiAgICogcGVuZGluZyB0YXNrcy5cbiAgICovXG4gIHJlc2V0KCkge1xuICAgIC8vIEtpbGwgYW55IHRhc2suXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucGlkXyk7XG4gICAgdGhpcy5zdGF2ZXNfLmZvckVhY2goKHN0YXZlKSA9PiB7XG4gICAgICBzdGF2ZS5zdG9wU291bmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLmludGVycHJldGVyXyA9IG51bGw7XG4gICAgdGhpcy5hY3RpdmVTdGF2ZV8gPSBudWxsO1xuICAgIHRoaXMuc3RhdmVzXy5sZW5ndGggPSAwO1xuICAgIHRoaXMuY2xvY2s2NHRoc18gPSAwO1xuICAgIHRoaXMuc3RhcnRUaW1lXyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUGxheXMgbXVzaWMgYmFzZWQgb24gdGhlIGJsb2NrcyBvbiB0aGUgd29ya3NwYWNlLlxuICAgKi9cbiAgZXhlY3V0ZSgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgLy8gR2V0IGdlbmVyYXRlZCBjb2RlIGZyb20gd29ya3NwYWNlXG4gICAgY29uc3QgY29kZSA9IEJsb2NrbHkuSmF2YVNjcmlwdC53b3Jrc3BhY2VUb0NvZGUodGhpcy53b3Jrc3BhY2UpO1xuXG4gICAgLy8gUnVuIHVzZXIgY29kZS5cbiAgICB0aGlzLmludGVycHJldGVyXyA9IG5ldyBJbnRlcnByZXRlcihjb2RlLCB0aGlzLmludGVycHJldGVySW5pdF8uYmluZCh0aGlzKSk7XG4gICAgLy8gVE9ETyBhZGQgc3VwcG9ydCBmb3IgbXVsdGlwbGUgdGhyZWFkcy5cbiAgICBjb25zdCBpbnRlcnByZXRlciA9IG5ldyBJbnRlcnByZXRlcignJyk7XG4gICAgLy8gUmVwbGFjZSB0aGlzIHRocmVhZCdzIGdsb2JhbCBzY29wZSB3aXRoIHRoZSBjcm9zcy10aHJlYWQgZ2xvYmFsLlxuICAgIGludGVycHJldGVyLnN0YXRlU3RhY2tbMF0uc2NvcGUgPSB0aGlzLmludGVycHJldGVyXy5nbG9iYWxTY29wZTtcbiAgICAvLyBBZGQgc3RhcnQgY2FsbC5cbiAgICBpbnRlcnByZXRlci5hcHBlbmRDb2RlKCdzdGFydCgpO1xcbicpO1xuICAgIHRoaXMuc3RhdmVzXy5wdXNoKG5ldyBTdGF2ZSgwLCBpbnRlcnByZXRlci5zdGF0ZVN0YWNrKSk7XG5cbiAgICB0aGlzLnBpZF8gPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudGlja18oKSwgMTAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmplY3QgdGhlIE11c2ljIEFQSSBpbnRvIGEgSmF2YVNjcmlwdCBpbnRlcnByZXRlci5cbiAgICogQHBhcmFtIHshSW50ZXJwcmV0ZXJ9IGludGVycHJldGVyIFRoZSBKUy1JbnRlcnByZXRlci5cbiAgICogQHBhcmFtIHshSW50ZXJwcmV0ZXIuT2JqZWN0fSBnbG9iYWxPYmplY3QgR2xvYmFsIG9iamVjdC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGludGVycHJldGVySW5pdF8oaW50ZXJwcmV0ZXIsIGdsb2JhbE9iamVjdCkge1xuICAgIC8vIEFQSVxuICAgIGxldCB3cmFwcGVyO1xuICAgIHdyYXBwZXIgPSAoZHVyYXRpb24sIHBpdGNoLCBfaWQpID0+IHtcbiAgICAgIHRoaXMucGxheV8oZHVyYXRpb24sIHBpdGNoKTtcbiAgICB9O1xuICAgIGludGVycHJldGVyLnNldFByb3BlcnR5KGdsb2JhbE9iamVjdCwgJ3BsYXknLFxuICAgICAgICBpbnRlcnByZXRlci5jcmVhdGVOYXRpdmVGdW5jdGlvbih3cmFwcGVyKSk7XG4gICAgd3JhcHBlciA9IChkdXJhdGlvbiwgX2lkKSA9PiB7XG4gICAgICB0aGlzLnJlc3RfKGR1cmF0aW9uKTtcbiAgICB9O1xuICAgIGludGVycHJldGVyLnNldFByb3BlcnR5KGdsb2JhbE9iamVjdCwgJ3Jlc3QnLFxuICAgICAgICBpbnRlcnByZXRlci5jcmVhdGVOYXRpdmVGdW5jdGlvbih3cmFwcGVyKSk7XG5cbiAgICAvLyBUT0RPIGltcGxlbWVudCBzZXRJbnN0cnVtZW50IEFQSS5cbiAgfVxuXG4gIC8qKlxuICAgKiBQbGF5IG9uZSBub3RlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gRnJhY3Rpb24gb2YgYSB3aG9sZSBub3RlIGxlbmd0aCB0byBwbGF5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGl0Y2ggTm90ZSBwbGF5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcGxheV8oZHVyYXRpb24sIHBpdGNoKSB7XG4gICAgdGhpcy5hY3RpdmVTdGF2ZV8ucGxheShkdXJhdGlvbiwgcGl0Y2gsIHRoaXMuY2xvY2s2NHRoc18pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgb25lIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBGcmFjdGlvbiBvZiBhIHdob2xlIG5vdGUgbGVuZ3RoIHRvIHJlc3QuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXN0XyhkdXJhdGlvbikge1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfLnJlc3QoZHVyYXRpb24sIHRoaXMuY2xvY2s2NHRoc18pO1xuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgMS82NHRoIHRpY2sgb2YgdGhlIHByb2dyYW0uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aWNrXygpIHtcbiAgICAvLyBEZWxheSBiZXR3ZWVuIHN0YXJ0IG9mIGVhY2ggYmVhdCAoMS82NHRocyBvZiBhIHdob2xlIG5vdGUpLlxuICAgIC8vIFJlbWluZGVyOiBUaGUgc3RhcnRUaW1lXyBzaG91bGQgYmUgcmVzZXQgYWZ0ZXIgdGhlIHNsaWRlciBpcyBhZGp1c3RlZC5cbiAgICBjb25zdCBzY2FsZUR1cmF0aW9uID0gMTAwMCAqICgyLjUgLSAyICogdGhpcy5zcGVlZF8pIC8gNjQ7XG4gICAgaWYgKCF0aGlzLnN0YXJ0VGltZV8pIHtcbiAgICAgIC8vIEVpdGhlciB0aGUgZmlyc3QgdGljaywgb3IgZmlyc3QgdGljayBhZnRlciBzbGlkZXIgd2FzIGFkanVzdGVkLlxuICAgICAgdGhpcy5zdGFydFRpbWVfID0gRGF0ZS5ub3coKSAtIHRoaXMuY2xvY2s2NHRoc18gKiBzY2FsZUR1cmF0aW9uO1xuICAgIH1cbiAgICBsZXQgZG9uZSA9IHRydWU7XG4gICAgdGhpcy5zdGF2ZXNfLmZvckVhY2goKHN0YXZlKSA9PiB7XG4gICAgICBpZiAoIXN0YXZlLmRvbmUpIHtcbiAgICAgICAgZG9uZSA9IGZhbHNlO1xuICAgICAgICBpZiAoIXN0YXZlLmlzUGF1c2VkKHRoaXMuY2xvY2s2NHRoc18pKSB7XG4gICAgICAgICAgdGhpcy5leGVjdXRlQ2h1bmtfKHN0YXZlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGRvbmUpIHtcbiAgICAgIC8vIFByb2dyYW0gY29tcGxldGUuXG4gICAgICBjb25zdCBmZWVkYmFjayA9IHRoaXMuY2hlY2tBbnN3ZXJfKCk7XG4gICAgICBpZiAoZmVlZGJhY2spIHtcbiAgICAgICAgdGhpcy5vbkZhaWx1cmVDYWxsYmFja18oZmVlZGJhY2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vblN1Y2Nlc3NDYWxsYmFja18oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbG9jazY0dGhzXysrO1xuICAgICAgY29uc3QgbXMgPVxuICAgICAgICAgICh0aGlzLnN0YXJ0VGltZV8gKyB0aGlzLmNsb2NrNjR0aHNfICogc2NhbGVEdXJhdGlvbikgLSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5waWRfID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpY2tfKCksIG1zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIGJpdGUtc2l6ZWQgY2h1bmsgb2YgdGhlIHVzZXIncyBjb2RlLlxuICAgKiBAcGFyYW0ge1N0YXZlfSBzdGF2ZSBUaGUgc3RhdmUgdG8gZXhlY3V0ZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGV4ZWN1dGVDaHVua18oc3RhdmUpIHtcbiAgICB0aGlzLmFjdGl2ZVN0YXZlXyA9IHN0YXZlO1xuICAgIC8vIFN3aXRjaCB0aGUgaW50ZXJwcmV0ZXIgdG8gcnVuIHRoZSBwcm92aWRlZCBzdGFmZi5cbiAgICB0aGlzLmludGVycHJldGVyXy5zdGF0ZVN0YWNrID0gc3RhdmUuc3RhdGVTdGFjaztcbiAgICBsZXQgdGlja3MgPSAxMDAwMDtcbiAgICBsZXQgZ287XG4gICAgZG8ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZ28gPSB0aGlzLmludGVycHJldGVyXy5zdGVwKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIFVzZXIgZXJyb3IsIHRlcm1pbmF0ZSBpbiBzaGFtZS5cbiAgICAgICAgYWxlcnQoZSk7XG4gICAgICAgIGdvID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAodGlja3MtLSA9PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignU3RhZmYgJyArIHN0YXZlLmlkICsgJyBpcyBydW5uaW5nIHNsb3dseS4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXZlLmlzUGF1c2VkKHRoaXMuY2xvY2s2NHRoc18pKSB7XG4gICAgICAgIC8vIFByZXZpb3VzbHkgZXhlY3V0ZWQgY29tbWFuZCAocGxheSBvciByZXN0KSByZXF1ZXN0ZWQgYSBwYXVzZS5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKGdvKTtcbiAgICAvLyBUaHJlYWQgY29tcGxldGUuICBXcmFwIHVwLlxuICAgIHN0YXZlLnN0b3BTb3VuZChzdGF2ZSk7XG4gICAgc3RhdmUuZG9uZSA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhdGVzIHdoZXRoZXIgdGhlIGFuc3dlciBmb3IgdGhlIGN1cnJlbnRseSBsb2FkZWQgbGV2ZWwgaXMgY29ycmVjdC5cbiAgICogUmV0dXJucyBsZXZlbCBmZWVkYmFjayBpZiBjb3JyZWN0IG9yIGVtcHR5IHN0cmluZyBpZiBjb3JyZWN0LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IExldmVsIGZlZWRiYWNrIG9yIGVtcHR5IHN0cmluZy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNoZWNrQW5zd2VyXygpIHtcbiAgICBsZXQgZmVlZGJhY2sgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZXhwZWN0ZWRBbnN3ZXJfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzdGF2ZUZlZWRiYWNrID1cbiAgICAgICAgICB0aGlzLnN0YXZlc19baV0uZ2V0RmVlZGJhY2sodGhpcy5leHBlY3RlZEFuc3dlcl9baV0pO1xuICAgICAgaWYgKHN0YXZlRmVlZGJhY2spIHtcbiAgICAgICAgZmVlZGJhY2sgKz0gc3RhdmVGZWVkYmFjaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZlZWRiYWNrO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/music.js\n");

/***/ })

})
webpackHotUpdate("main",{

/***/ "./src/field_pitch.js":
/*!****************************!*\
  !*** ./src/field_pitch.js ***!
  \****************************/
/*! exports provided: FieldPitch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FieldPitch\", function() { return FieldPitch; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _note_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./note_player */ \"./src/note_player.js\");\n/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Music pitch input field. Borrowed from Blockly Games.\n * @author fraser@google.com (Neil Fraser)\n * @author samelh@google.com (Sam El-Husseini)\n */\n\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n/**\n * Pitch field from Blockly Games music.\n * @extends {Blockly.FieldTextInput}\n */\n\nvar FieldPitch = /*#__PURE__*/function (_Blockly$FieldTextInp) {\n  _inherits(FieldPitch, _Blockly$FieldTextInp);\n\n  var _super = _createSuper(FieldPitch);\n\n  /**\n   * Class for an editable pitch field.\n   * @param {string} text The initial content of the field.\n   * @constructor\n   */\n  function FieldPitch(text) {\n    _classCallCheck(this, FieldPitch);\n\n    return _super.call(this, text);\n  }\n  /**\n   * Construct a FieldPitch from a JSON arg object.\n   * @param {!Object} options A JSON object with options (pitch).\n   * @return {!FieldPitch} The new field instance.\n   * @package\n   * @nocollapse\n   */\n\n\n  _createClass(FieldPitch, [{\n    key: \"showEditor_\",\n\n    /**\n     * Show the inline free-text editor on top of the text and the note picker.\n     * @private\n     */\n    value: function showEditor_() {\n      _get(_getPrototypeOf(FieldPitch.prototype), \"showEditor_\", this).call(this);\n\n      var div = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.WidgetDiv.DIV;\n\n      if (!div.firstChild) {\n        // Mobile interface uses Blockly.prompt.\n        return;\n      } // Build the DOM.\n\n\n      var editor = this.dropdownCreate_();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.DropDownDiv.getContentDiv().appendChild(editor);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.DropDownDiv.setColour(this.sourceBlock_.getColour(), this.sourceBlock_.style.colourTertiary);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.DropDownDiv.showPositionedByField(this, this.dropdownDispose_.bind(this)); // The note picker is different from other fields in that it updates on\n      // mousemove even if it's not in the middle of a drag.  In future we may\n      // change this behaviour.  For now, using bindEvent_ instead of\n      // bindEventWithChecks_ allows it to work without a mousedown/touchstart.\n\n      this.clickWrapper_ = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.bindEvent_(this.imageElement_, 'click', this, this.hide_);\n      this.moveWrapper_ = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.bindEvent_(this.imageElement_, 'mousemove', this, this.onMouseMove);\n      this.bindAdditionalInputEvents_(this.htmlInput_);\n      this.updateGraph_();\n    }\n    /**\n     * Create the pitch editor.\n     * @return {!Element} The newly created pitch picker.\n     * @private\n     */\n\n  }, {\n    key: \"dropdownCreate_\",\n    value: function dropdownCreate_() {\n      this.imageElement_ = document.createElement('div');\n      this.imageElement_.id = 'notePicker';\n      return this.imageElement_;\n    }\n    /**\n     * Dispose of events belonging to the pitch editor.\n     * @private\n     */\n\n  }, {\n    key: \"dropdownDispose_\",\n    value: function dropdownDispose_() {\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.unbindEvent_(this.clickWrapper_);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.unbindEvent_(this.moveWrapper_);\n    }\n    /**\n     * Hide the editor.\n     * @private\n     */\n\n  }, {\n    key: \"hide_\",\n    value: function hide_() {\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.WidgetDiv.hide();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.DropDownDiv.hideWithoutAnimation();\n    }\n    /**\n     * Set the note to match the mouse's position.\n     * @param {!Event} e Mouse move event.\n     */\n\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove(e) {\n      var bBox = this.imageElement_.getBoundingClientRect();\n      var dy = e.clientY - bBox.top;\n      var note = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.math.clamp(Math.round(13.5 - dy / 7.5), 0, 12);\n      this.imageElement_.style.backgroundPosition = -note * 37 + 'px 0';\n      this.setEditorValue_(this.valueToNote(note));\n    }\n    /**\n     * Convert the machine-readable value (0-12) to human-readable text (C3-A4).\n     * @param {number|string} value The provided value.\n     * @return {string|undefined} The respective note, or undefined if invalid.\n     */\n\n  }, {\n    key: \"valueToNote\",\n    value: function valueToNote(value) {\n      return FieldPitch.NOTES[Number(value)];\n    }\n    /**\n     * Convert the human-readable text (C3-A4) to machine-readable value (0-12).\n     * @param {string} text The provided note.\n     * @return {number|undefined} The respective value, or undefined if invalid.\n     */\n\n  }, {\n    key: \"noteToValue\",\n    value: function noteToValue(text) {\n      var normalizedText = text.trim().toUpperCase();\n      var i = FieldPitch.NOTES.indexOf(normalizedText);\n      return i > -1 ? i : undefined;\n    }\n    /**\n     * Updates the graph when the field rerenders.\n     * @private\n     * @override\n     */\n\n  }, {\n    key: \"render_\",\n    value: function render_() {\n      _get(_getPrototypeOf(FieldPitch.prototype), \"render_\", this).call(this);\n\n      this.updateGraph_();\n    }\n    /**\n     * Redraw the note picker with the current note.\n     * @private\n     */\n\n  }, {\n    key: \"updateGraph_\",\n    value: function updateGraph_() {\n      if (!this.imageElement_) {\n        return;\n      }\n\n      var i = this.noteToValue(this.getValue());\n      this.imageElement_.style.backgroundPosition = -i * 37 + 'px 0';\n    }\n    /**\n     * Ensure that only a valid value may be entered.\n     * @param {*} opt_newValue The input value.\n     * @return {*} A valid value, or null if invalid.\n     */\n\n  }, {\n    key: \"doClassValidation_\",\n    value: function doClassValidation_(opt_newValue) {\n      if (opt_newValue === null || opt_newValue === undefined) {\n        return null;\n      }\n\n      var noteNum = this.noteToValue(opt_newValue);\n\n      if (noteNum !== undefined && this.valueToNote(noteNum) == opt_newValue) {\n        return opt_newValue;\n      }\n\n      return null;\n    }\n    /**\n     * Select a note one higher than current, or stay at the highest note.\n     */\n\n  }, {\n    key: \"selectHigherNote\",\n    value: function selectHigherNote() {\n      var currentNote = this.noteToValue(this.getValue());\n      currentNote = currentNote === undefined ? 12 : currentNote;\n      var note = Math.min(currentNote + 1, 12);\n      this.setEditorValue_(this.valueToNote(note));\n    }\n    /**\n     * Select a note one lower than current, or stay at the lowest note.\n     */\n\n  }, {\n    key: \"selectLowerNote\",\n    value: function selectLowerNote() {\n      var currentNote = this.noteToValue(this.getValue());\n      currentNote = currentNote === undefined ? 0 : currentNote;\n      var note = Math.max(currentNote - 1, 0);\n      this.setEditorValue_(this.valueToNote(note));\n    }\n    /**\n     * Handles next/previous key presses on the input event.\n     * OnBlocklyAction would normally receive next/previous actions,\n     * but the html input element is capturing the keypresses.\n     * We bind our own event that only handles keys registered to next/previous.\n     * If we handle it, we stop other handlers from firing.\n     * This does not clobber the events registered by FieldTextInput, so\n     * esc and enter presses are still handled by that.\n     * @param {!Event} e Keyboard event.\n     */\n\n  }, {\n    key: \"handleKeyPress_\",\n    value: function handleKeyPress_(e) {\n      var action = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.getKeyboardShortcuts(e.keyCode);\n      var handled = false;\n\n      if (action.includes('next')) {\n        this.selectLowerNote();\n        handled = true;\n      } else if (action.includes('previous')) {\n        this.selectHigherNote();\n        handled = true;\n      }\n\n      if (handled) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n    /**\n     * Bind handler for keypresses on input.\n     * @param {!HTMLElement} htmlInput Input element.\n     */\n\n  }, {\n    key: \"bindAdditionalInputEvents_\",\n    value: function bindAdditionalInputEvents_(htmlInput) {\n      this.additionalOnKeyDownWrapper_ = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.bindEventWithChecks_(htmlInput, 'keydown', this, this.handleKeyPress_);\n    }\n    /**\n     * Unbind handler for user input.\n     * @private\n     */\n\n  }, {\n    key: \"unbindAdditionalInputEvents_\",\n    value: function unbindAdditionalInputEvents_() {\n      if (this.additionalOnKeyDownWrapper_) {\n        blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.unbindEvent_(this.additionalOnKeyDownWrapper_);\n        this.additionalOnKeyDownWrapper_ = null;\n      }\n    }\n    /**\n     * Dispose of event handlers.\n     * @override\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.unbindAdditionalInputEvents_();\n\n      _get(_getPrototypeOf(FieldPitch.prototype), \"dispose\", this).call(this);\n    }\n    /**\n     * Play the tone when the field is read aloud.\n     */\n\n  }, {\n    key: \"actionBeforeSpeaker\",\n    value: function actionBeforeSpeaker() {\n      _note_player__WEBPACK_IMPORTED_MODULE_1__[\"notePlayer\"].playNote(this.getValue(), '4n');\n    }\n  }], [{\n    key: \"fromJson\",\n    value: function fromJson(options) {\n      return new FieldPitch(options['pitch']);\n    }\n  }]);\n\n  return FieldPitch;\n}(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.FieldTextInput);\n/**\n * All notes available for the picker.\n */\n\nFieldPitch.NOTES = 'C3 D3 E3 F3 G3 A3 B3 C4 D4 E4 F4 G4 A4'.split(/ /);\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.fieldRegistry.register('field_pitch', FieldPitch);\n/**\n * CSS for the pitch field.\n * This field is using CSS to set a background image of a series of notes, then\n * translating left or right to show only the correct note.\n */\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Css.register([\n/* eslint-disable indent */\n\"#notePicker {\\n    background-image: url(https://raw.githubusercontent.com/google/blockly-games/master/appengine/music/notes.png);\\n    border: 1px solid #ccc;\\n    height: 109px;\\n    width: 46px;\\n  }\"\n/* eslint-enable indent */\n]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZmllbGRfcGl0Y2guanM/OThkZCJdLCJuYW1lcyI6WyJGaWVsZFBpdGNoIiwidGV4dCIsImRpdiIsIkJsb2NrbHkiLCJXaWRnZXREaXYiLCJESVYiLCJmaXJzdENoaWxkIiwiZWRpdG9yIiwiZHJvcGRvd25DcmVhdGVfIiwiRHJvcERvd25EaXYiLCJnZXRDb250ZW50RGl2IiwiYXBwZW5kQ2hpbGQiLCJzZXRDb2xvdXIiLCJzb3VyY2VCbG9ja18iLCJnZXRDb2xvdXIiLCJzdHlsZSIsImNvbG91clRlcnRpYXJ5Iiwic2hvd1Bvc2l0aW9uZWRCeUZpZWxkIiwiZHJvcGRvd25EaXNwb3NlXyIsImJpbmQiLCJjbGlja1dyYXBwZXJfIiwiYmluZEV2ZW50XyIsImltYWdlRWxlbWVudF8iLCJoaWRlXyIsIm1vdmVXcmFwcGVyXyIsIm9uTW91c2VNb3ZlIiwiYmluZEFkZGl0aW9uYWxJbnB1dEV2ZW50c18iLCJodG1sSW5wdXRfIiwidXBkYXRlR3JhcGhfIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJ1bmJpbmRFdmVudF8iLCJoaWRlIiwiaGlkZVdpdGhvdXRBbmltYXRpb24iLCJlIiwiYkJveCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImR5IiwiY2xpZW50WSIsInRvcCIsIm5vdGUiLCJ1dGlscyIsIm1hdGgiLCJjbGFtcCIsIk1hdGgiLCJyb3VuZCIsImJhY2tncm91bmRQb3NpdGlvbiIsInNldEVkaXRvclZhbHVlXyIsInZhbHVlVG9Ob3RlIiwidmFsdWUiLCJOT1RFUyIsIk51bWJlciIsIm5vcm1hbGl6ZWRUZXh0IiwidHJpbSIsInRvVXBwZXJDYXNlIiwiaSIsImluZGV4T2YiLCJ1bmRlZmluZWQiLCJub3RlVG9WYWx1ZSIsImdldFZhbHVlIiwib3B0X25ld1ZhbHVlIiwibm90ZU51bSIsImN1cnJlbnROb3RlIiwibWluIiwibWF4IiwiYWN0aW9uIiwiU2hvcnRjdXRSZWdpc3RyeSIsInJlZ2lzdHJ5IiwiZ2V0S2V5Ym9hcmRTaG9ydGN1dHMiLCJrZXlDb2RlIiwiaGFuZGxlZCIsImluY2x1ZGVzIiwic2VsZWN0TG93ZXJOb3RlIiwic2VsZWN0SGlnaGVyTm90ZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiaHRtbElucHV0IiwiYWRkaXRpb25hbE9uS2V5RG93bldyYXBwZXJfIiwiYmluZEV2ZW50V2l0aENoZWNrc18iLCJoYW5kbGVLZXlQcmVzc18iLCJ1bmJpbmRBZGRpdGlvbmFsSW5wdXRFdmVudHNfIiwibm90ZVBsYXllciIsInBsYXlOb3RlIiwib3B0aW9ucyIsIkZpZWxkVGV4dElucHV0Iiwic3BsaXQiLCJmaWVsZFJlZ2lzdHJ5IiwicmVnaXN0ZXIiLCJDc3MiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUViO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxJQUFNQSxVQUFiO0FBQUE7O0FBQUE7O0FBQ0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNFLHNCQUFZQyxJQUFaLEVBQWtCO0FBQUE7O0FBQUEsNkJBQ1ZBLElBRFU7QUFFakI7QUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBaEJBO0FBQUE7O0FBcUJFO0FBQ0Y7QUFDQTtBQUNBO0FBeEJBLGtDQXlCZ0I7QUFDWjs7QUFFQSxVQUFNQyxHQUFHLEdBQUdDLG1EQUFPLENBQUNDLFNBQVIsQ0FBa0JDLEdBQTlCOztBQUNBLFVBQUksQ0FBQ0gsR0FBRyxDQUFDSSxVQUFULEVBQXFCO0FBQ25CO0FBQ0E7QUFDRCxPQVBXLENBUVo7OztBQUNBLFVBQU1DLE1BQU0sR0FBRyxLQUFLQyxlQUFMLEVBQWY7QUFDQUwseURBQU8sQ0FBQ00sV0FBUixDQUFvQkMsYUFBcEIsR0FBb0NDLFdBQXBDLENBQWdESixNQUFoRDtBQUVB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LENBQ0lGLFNBREosRUFDZSxTQURmLEVBQzBCLElBRDFCLEVBQ2dDLEtBQUtHLGVBRHJDLENBREo7QUFHRDtBQUVEO0FBQ0Y7QUFDQTtBQUNBOztBQTNOQTtBQUFBO0FBQUEsbURBNE5pQztBQUM3QixVQUFJLEtBQUtGLDJCQUFULEVBQXNDO0FBQ3BDM0UsMkRBQU8sQ0FBQzZCLFlBQVIsQ0FBcUIsS0FBSzhDLDJCQUExQjtBQUNBLGFBQUtBLDJCQUFMLEdBQW1DLElBQW5DO0FBQ0Q7QUFDRjtBQUVEO0FBQ0Y7QUFDQTtBQUNBOztBQXRPQTtBQUFBO0FBQUEsOEJBdU9ZO0FBQ1IsV0FBS0csNEJBQUw7O0FBQ0E7QUFDRDtBQUVEO0FBQ0Y7QUFDQTs7QUE5T0E7QUFBQTtBQUFBLDBDQStPd0I7QUFDcEJDLDZEQUFVLENBQUNDLFFBQVgsQ0FBb0IsS0FBS3ZCLFFBQUwsRUFBcEIsRUFBcUMsSUFBckM7QUFDRDtBQWpQSDtBQUFBO0FBQUEsNkJBaUJrQndCLE9BakJsQixFQWlCMkI7QUFDdkIsYUFBTyxJQUFJcEYsVUFBSixDQUFlb0YsT0FBTyxDQUFDLE9BQUQsQ0FBdEIsQ0FBUDtBQUNEO0FBbkJIOztBQUFBO0FBQUEsRUFBZ0NqRixtREFBTyxDQUFDa0YsY0FBeEM7QUFvUEE7QUFDQTtBQUNBOztBQUNBckYsVUFBVSxDQUFDbUQsS0FBWCxHQUFtQix5Q0FBeUNtQyxLQUF6QyxDQUErQyxHQUEvQyxDQUFuQjtBQUdBbkYsbURBQU8sQ0FBQ29GLGFBQVIsQ0FBc0JDLFFBQXRCLENBQStCLGFBQS9CLEVBQThDeEYsVUFBOUM7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBRyxtREFBTyxDQUFDc0YsR0FBUixDQUFZRCxRQUFaLENBQXFCO0FBQ3JCO0FBRHFCO0FBUW5CO0FBUm1CLENBQXJCIiwiZmlsZSI6Ii4vc3JjL2ZpZWxkX3BpdGNoLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgTXVzaWMgcGl0Y2ggaW5wdXQgZmllbGQuIEJvcnJvd2VkIGZyb20gQmxvY2tseSBHYW1lcy5cbiAqIEBhdXRob3IgZnJhc2VyQGdvb2dsZS5jb20gKE5laWwgRnJhc2VyKVxuICogQGF1dGhvciBzYW1lbGhAZ29vZ2xlLmNvbSAoU2FtIEVsLUh1c3NlaW5pKVxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5pbXBvcnQge25vdGVQbGF5ZXJ9IGZyb20gJy4vbm90ZV9wbGF5ZXInO1xuXG4vKipcbiAqIFBpdGNoIGZpZWxkIGZyb20gQmxvY2tseSBHYW1lcyBtdXNpYy5cbiAqIEBleHRlbmRzIHtCbG9ja2x5LkZpZWxkVGV4dElucHV0fVxuICovXG5leHBvcnQgY2xhc3MgRmllbGRQaXRjaCBleHRlbmRzIEJsb2NrbHkuRmllbGRUZXh0SW5wdXQge1xuICAvKipcbiAgICogQ2xhc3MgZm9yIGFuIGVkaXRhYmxlIHBpdGNoIGZpZWxkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgaW5pdGlhbCBjb250ZW50IG9mIHRoZSBmaWVsZC5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0ZXh0KSB7XG4gICAgc3VwZXIodGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0IGEgRmllbGRQaXRjaCBmcm9tIGEgSlNPTiBhcmcgb2JqZWN0LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IG9wdGlvbnMgQSBKU09OIG9iamVjdCB3aXRoIG9wdGlvbnMgKHBpdGNoKS5cbiAgICogQHJldHVybiB7IUZpZWxkUGl0Y2h9IFRoZSBuZXcgZmllbGQgaW5zdGFuY2UuXG4gICAqIEBwYWNrYWdlXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBzdGF0aWMgZnJvbUpzb24ob3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgRmllbGRQaXRjaChvcHRpb25zWydwaXRjaCddKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IHRoZSBpbmxpbmUgZnJlZS10ZXh0IGVkaXRvciBvbiB0b3Agb2YgdGhlIHRleHQgYW5kIHRoZSBub3RlIHBpY2tlci5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNob3dFZGl0b3JfKCkge1xuICAgIHN1cGVyLnNob3dFZGl0b3JfKCk7XG5cbiAgICBjb25zdCBkaXYgPSBCbG9ja2x5LldpZGdldERpdi5ESVY7XG4gICAgaWYgKCFkaXYuZmlyc3RDaGlsZCkge1xuICAgICAgLy8gTW9iaWxlIGludGVyZmFjZSB1c2VzIEJsb2NrbHkucHJvbXB0LlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBCdWlsZCB0aGUgRE9NLlxuICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZHJvcGRvd25DcmVhdGVfKCk7XG4gICAgQmxvY2tseS5Ecm9wRG93bkRpdi5nZXRDb250ZW50RGl2KCkuYXBwZW5kQ2hpbGQoZWRpdG9yKTtcblxuICAgIEJsb2NrbHkuRHJvcERvd25EaXYuc2V0Q29sb3VyKHRoaXMuc291cmNlQmxvY2tfLmdldENvbG91cigpLFxuICAgICAgICB0aGlzLnNvdXJjZUJsb2NrXy5zdHlsZS5jb2xvdXJUZXJ0aWFyeSk7XG5cbiAgICBCbG9ja2x5LkRyb3BEb3duRGl2LnNob3dQb3NpdGlvbmVkQnlGaWVsZChcbiAgICAgICAgdGhpcywgdGhpcy5kcm9wZG93bkRpc3Bvc2VfLmJpbmQodGhpcykpO1xuXG4gICAgLy8gVGhlIG5vdGUgcGlja2VyIGlzIGRpZmZlcmVudCBmcm9tIG90aGVyIGZpZWxkcyBpbiB0aGF0IGl0IHVwZGF0ZXMgb25cbiAgICAvLyBtb3VzZW1vdmUgZXZlbiBpZiBpdCdzIG5vdCBpbiB0aGUgbWlkZGxlIG9mIGEgZHJhZy4gIEluIGZ1dHVyZSB3ZSBtYXlcbiAgICAvLyBjaGFuZ2UgdGhpcyBiZWhhdmlvdXIuICBGb3Igbm93LCB1c2luZyBiaW5kRXZlbnRfIGluc3RlYWQgb2ZcbiAgICAvLyBiaW5kRXZlbnRXaXRoQ2hlY2tzXyBhbGxvd3MgaXQgdG8gd29yayB3aXRob3V0IGEgbW91c2Vkb3duL3RvdWNoc3RhcnQuXG4gICAgdGhpcy5jbGlja1dyYXBwZXJfID1cbiAgICAgIEJsb2NrbHkuYmluZEV2ZW50Xyh0aGlzLmltYWdlRWxlbWVudF8sICdjbGljaycsIHRoaXMsXG4gICAgICAgICAgdGhpcy5oaWRlXyk7XG4gICAgdGhpcy5tb3ZlV3JhcHBlcl8gPVxuICAgICAgQmxvY2tseS5iaW5kRXZlbnRfKHRoaXMuaW1hZ2VFbGVtZW50XywgJ21vdXNlbW92ZScsIHRoaXMsXG4gICAgICAgICAgdGhpcy5vbk1vdXNlTW92ZSk7XG5cbiAgICB0aGlzLmJpbmRBZGRpdGlvbmFsSW5wdXRFdmVudHNfKHRoaXMuaHRtbElucHV0Xyk7XG5cbiAgICB0aGlzLnVwZGF0ZUdyYXBoXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgcGl0Y2ggZWRpdG9yLlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH0gVGhlIG5ld2x5IGNyZWF0ZWQgcGl0Y2ggcGlja2VyLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZHJvcGRvd25DcmVhdGVfKCkge1xuICAgIHRoaXMuaW1hZ2VFbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuaW1hZ2VFbGVtZW50Xy5pZCA9ICdub3RlUGlja2VyJztcblxuICAgIHJldHVybiB0aGlzLmltYWdlRWxlbWVudF87XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZSBvZiBldmVudHMgYmVsb25naW5nIHRvIHRoZSBwaXRjaCBlZGl0b3IuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkcm9wZG93bkRpc3Bvc2VfKCkge1xuICAgIEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMuY2xpY2tXcmFwcGVyXyk7XG4gICAgQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5tb3ZlV3JhcHBlcl8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgdGhlIGVkaXRvci5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhpZGVfKCkge1xuICAgIEJsb2NrbHkuV2lkZ2V0RGl2LmhpZGUoKTtcbiAgICBCbG9ja2x5LkRyb3BEb3duRGl2LmhpZGVXaXRob3V0QW5pbWF0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBub3RlIHRvIG1hdGNoIHRoZSBtb3VzZSdzIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0geyFFdmVudH0gZSBNb3VzZSBtb3ZlIGV2ZW50LlxuICAgKi9cbiAgb25Nb3VzZU1vdmUoZSkge1xuICAgIGNvbnN0IGJCb3ggPSB0aGlzLmltYWdlRWxlbWVudF8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgZHkgPSBlLmNsaWVudFkgLSBiQm94LnRvcDtcbiAgICBjb25zdCBub3RlID0gQmxvY2tseS51dGlscy5tYXRoLmNsYW1wKE1hdGgucm91bmQoMTMuNSAtIGR5IC8gNy41KSwgMCwgMTIpO1xuICAgIHRoaXMuaW1hZ2VFbGVtZW50Xy5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAoLW5vdGUgKiAzNykgKyAncHggMCc7XG4gICAgdGhpcy5zZXRFZGl0b3JWYWx1ZV8odGhpcy52YWx1ZVRvTm90ZShub3RlKSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCB0aGUgbWFjaGluZS1yZWFkYWJsZSB2YWx1ZSAoMC0xMikgdG8gaHVtYW4tcmVhZGFibGUgdGV4dCAoQzMtQTQpLlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHZhbHVlIFRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGhlIHJlc3BlY3RpdmUgbm90ZSwgb3IgdW5kZWZpbmVkIGlmIGludmFsaWQuXG4gICAqL1xuICB2YWx1ZVRvTm90ZSh2YWx1ZSkge1xuICAgIHJldHVybiBGaWVsZFBpdGNoLk5PVEVTW051bWJlcih2YWx1ZSldO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhlIGh1bWFuLXJlYWRhYmxlIHRleHQgKEMzLUE0KSB0byBtYWNoaW5lLXJlYWRhYmxlIHZhbHVlICgwLTEyKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHByb3ZpZGVkIG5vdGUuXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSByZXNwZWN0aXZlIHZhbHVlLCBvciB1bmRlZmluZWQgaWYgaW52YWxpZC5cbiAgICovXG4gIG5vdGVUb1ZhbHVlKHRleHQpIHtcbiAgICBjb25zdCBub3JtYWxpemVkVGV4dCA9IHRleHQudHJpbSgpLnRvVXBwZXJDYXNlKCk7XG4gICAgY29uc3QgaSA9IEZpZWxkUGl0Y2guTk9URVMuaW5kZXhPZihub3JtYWxpemVkVGV4dCk7XG4gICAgcmV0dXJuIGkgPiAtMSA/IGkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgZ3JhcGggd2hlbiB0aGUgZmllbGQgcmVyZW5kZXJzLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHJlbmRlcl8oKSB7XG4gICAgc3VwZXIucmVuZGVyXygpO1xuICAgIHRoaXMudXBkYXRlR3JhcGhfKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVkcmF3IHRoZSBub3RlIHBpY2tlciB3aXRoIHRoZSBjdXJyZW50IG5vdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1cGRhdGVHcmFwaF8oKSB7XG4gICAgaWYgKCF0aGlzLmltYWdlRWxlbWVudF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaSA9IHRoaXMubm90ZVRvVmFsdWUodGhpcy5nZXRWYWx1ZSgpKTtcbiAgICB0aGlzLmltYWdlRWxlbWVudF8uc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gKC1pICogMzcpICsgJ3B4IDAnO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSB0aGF0IG9ubHkgYSB2YWxpZCB2YWx1ZSBtYXkgYmUgZW50ZXJlZC5cbiAgICogQHBhcmFtIHsqfSBvcHRfbmV3VmFsdWUgVGhlIGlucHV0IHZhbHVlLlxuICAgKiBAcmV0dXJuIHsqfSBBIHZhbGlkIHZhbHVlLCBvciBudWxsIGlmIGludmFsaWQuXG4gICAqL1xuICBkb0NsYXNzVmFsaWRhdGlvbl8ob3B0X25ld1ZhbHVlKSB7XG4gICAgaWYgKG9wdF9uZXdWYWx1ZSA9PT0gbnVsbCB8fCBvcHRfbmV3VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5vdGVOdW0gPSB0aGlzLm5vdGVUb1ZhbHVlKG9wdF9uZXdWYWx1ZSk7XG4gICAgaWYgKG5vdGVOdW0gIT09IHVuZGVmaW5lZCAmJiB0aGlzLnZhbHVlVG9Ob3RlKG5vdGVOdW0pID09IG9wdF9uZXdWYWx1ZSkge1xuICAgICAgcmV0dXJuIG9wdF9uZXdWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IGEgbm90ZSBvbmUgaGlnaGVyIHRoYW4gY3VycmVudCwgb3Igc3RheSBhdCB0aGUgaGlnaGVzdCBub3RlLlxuICAgKi9cbiAgc2VsZWN0SGlnaGVyTm90ZSgpIHtcbiAgICBsZXQgY3VycmVudE5vdGUgPSB0aGlzLm5vdGVUb1ZhbHVlKHRoaXMuZ2V0VmFsdWUoKSk7XG4gICAgY3VycmVudE5vdGUgPSBjdXJyZW50Tm90ZSA9PT0gdW5kZWZpbmVkID8gMTIgOiBjdXJyZW50Tm90ZTtcbiAgICBjb25zdCBub3RlID0gTWF0aC5taW4oY3VycmVudE5vdGUgKyAxLCAxMik7XG4gICAgdGhpcy5zZXRFZGl0b3JWYWx1ZV8odGhpcy52YWx1ZVRvTm90ZShub3RlKSk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IGEgbm90ZSBvbmUgbG93ZXIgdGhhbiBjdXJyZW50LCBvciBzdGF5IGF0IHRoZSBsb3dlc3Qgbm90ZS5cbiAgICovXG4gIHNlbGVjdExvd2VyTm90ZSgpIHtcbiAgICBsZXQgY3VycmVudE5vdGUgPSB0aGlzLm5vdGVUb1ZhbHVlKHRoaXMuZ2V0VmFsdWUoKSk7XG4gICAgY3VycmVudE5vdGUgPSBjdXJyZW50Tm90ZSA9PT0gdW5kZWZpbmVkID8gMCA6IGN1cnJlbnROb3RlO1xuICAgIGNvbnN0IG5vdGUgPSBNYXRoLm1heChjdXJyZW50Tm90ZSAtIDEsIDApO1xuICAgIHRoaXMuc2V0RWRpdG9yVmFsdWVfKHRoaXMudmFsdWVUb05vdGUobm90ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbmV4dC9wcmV2aW91cyBrZXkgcHJlc3NlcyBvbiB0aGUgaW5wdXQgZXZlbnQuXG4gICAqIE9uQmxvY2tseUFjdGlvbiB3b3VsZCBub3JtYWxseSByZWNlaXZlIG5leHQvcHJldmlvdXMgYWN0aW9ucyxcbiAgICogYnV0IHRoZSBodG1sIGlucHV0IGVsZW1lbnQgaXMgY2FwdHVyaW5nIHRoZSBrZXlwcmVzc2VzLlxuICAgKiBXZSBiaW5kIG91ciBvd24gZXZlbnQgdGhhdCBvbmx5IGhhbmRsZXMga2V5cyByZWdpc3RlcmVkIHRvIG5leHQvcHJldmlvdXMuXG4gICAqIElmIHdlIGhhbmRsZSBpdCwgd2Ugc3RvcCBvdGhlciBoYW5kbGVycyBmcm9tIGZpcmluZy5cbiAgICogVGhpcyBkb2VzIG5vdCBjbG9iYmVyIHRoZSBldmVudHMgcmVnaXN0ZXJlZCBieSBGaWVsZFRleHRJbnB1dCwgc29cbiAgICogZXNjIGFuZCBlbnRlciBwcmVzc2VzIGFyZSBzdGlsbCBoYW5kbGVkIGJ5IHRoYXQuXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBlIEtleWJvYXJkIGV2ZW50LlxuICAgKi9cbiAgaGFuZGxlS2V5UHJlc3NfKGUpIHtcbiAgICBjb25zdCBhY3Rpb24gPVxuICAgICAgICBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkuZ2V0S2V5Ym9hcmRTaG9ydGN1dHMoZS5rZXlDb2RlKTtcbiAgICBsZXQgaGFuZGxlZCA9IGZhbHNlO1xuICAgIGlmIChhY3Rpb24uaW5jbHVkZXMoJ25leHQnKSkge1xuICAgICAgdGhpcy5zZWxlY3RMb3dlck5vdGUoKTtcbiAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoYWN0aW9uLmluY2x1ZGVzKCdwcmV2aW91cycpKSB7XG4gICAgICB0aGlzLnNlbGVjdEhpZ2hlck5vdGUoKTtcbiAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoaGFuZGxlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQmluZCBoYW5kbGVyIGZvciBrZXlwcmVzc2VzIG9uIGlucHV0LlxuICAgKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gaHRtbElucHV0IElucHV0IGVsZW1lbnQuXG4gICAqL1xuICBiaW5kQWRkaXRpb25hbElucHV0RXZlbnRzXyhodG1sSW5wdXQpIHtcbiAgICB0aGlzLmFkZGl0aW9uYWxPbktleURvd25XcmFwcGVyXyA9XG4gICAgICAgIEJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oXG4gICAgICAgICAgICBodG1sSW5wdXQsICdrZXlkb3duJywgdGhpcywgdGhpcy5oYW5kbGVLZXlQcmVzc18pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuYmluZCBoYW5kbGVyIGZvciB1c2VyIGlucHV0LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdW5iaW5kQWRkaXRpb25hbElucHV0RXZlbnRzXygpIHtcbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsT25LZXlEb3duV3JhcHBlcl8pIHtcbiAgICAgIEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMuYWRkaXRpb25hbE9uS2V5RG93bldyYXBwZXJfKTtcbiAgICAgIHRoaXMuYWRkaXRpb25hbE9uS2V5RG93bldyYXBwZXJfID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZSBvZiBldmVudCBoYW5kbGVycy5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBkaXNwb3NlKCkge1xuICAgIHRoaXMudW5iaW5kQWRkaXRpb25hbElucHV0RXZlbnRzXygpO1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQbGF5IHRoZSB0b25lIHdoZW4gdGhlIGZpZWxkIGlzIHJlYWQgYWxvdWQuXG4gICAqL1xuICBhY3Rpb25CZWZvcmVTcGVha2VyKCkge1xuICAgIG5vdGVQbGF5ZXIucGxheU5vdGUodGhpcy5nZXRWYWx1ZSgpLCAnNG4nKTtcbiAgfVxufVxuXG4vKipcbiAqIEFsbCBub3RlcyBhdmFpbGFibGUgZm9yIHRoZSBwaWNrZXIuXG4gKi9cbkZpZWxkUGl0Y2guTk9URVMgPSAnQzMgRDMgRTMgRjMgRzMgQTMgQjMgQzQgRDQgRTQgRjQgRzQgQTQnLnNwbGl0KC8gLyk7XG5cblxuQmxvY2tseS5maWVsZFJlZ2lzdHJ5LnJlZ2lzdGVyKCdmaWVsZF9waXRjaCcsIEZpZWxkUGl0Y2gpO1xuXG4vKipcbiAqIENTUyBmb3IgdGhlIHBpdGNoIGZpZWxkLlxuICogVGhpcyBmaWVsZCBpcyB1c2luZyBDU1MgdG8gc2V0IGEgYmFja2dyb3VuZCBpbWFnZSBvZiBhIHNlcmllcyBvZiBub3RlcywgdGhlblxuICogdHJhbnNsYXRpbmcgbGVmdCBvciByaWdodCB0byBzaG93IG9ubHkgdGhlIGNvcnJlY3Qgbm90ZS5cbiAqL1xuQmxvY2tseS5Dc3MucmVnaXN0ZXIoW1xuLyogZXNsaW50LWRpc2FibGUgaW5kZW50ICovXG4gIGAjbm90ZVBpY2tlciB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9nb29nbGUvYmxvY2tseS1nYW1lcy9tYXN0ZXIvYXBwZW5naW5lL211c2ljL25vdGVzLnBuZyk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICBoZWlnaHQ6IDEwOXB4O1xuICAgIHdpZHRoOiA0NnB4O1xuICB9YCxcbiAgLyogZXNsaW50LWVuYWJsZSBpbmRlbnQgKi9cbl0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/field_pitch.js\n");

/***/ }),

/***/ "./src/game.js":
/*!*********************!*\
  !*** ./src/game.js ***!
  \*********************/
/*! exports provided: MusicGame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MusicGame\", function() { return MusicGame; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _music__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./music */ \"./src/music.js\");\n/* harmony import */ var _speaker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./speaker */ \"./src/speaker.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Game logic for music game.\n */\n\n\n\n/**\n * Game logic for music game.\n */\n\nvar MusicGame = /*#__PURE__*/function () {\n  /**\n   * Class for a music game.\n   * @param {Blockly.WorkspaceSvg} workspace The Blockly workspace.\n   * @param {Music} music A reference to the music object.\n   * @param {function(string, MusicGame)} onGoalUpdateCb The callback function\n   *    for goal change.\n   * @param {function(MusicGame)} onSuccessCb The callback function for on\n   *    success event.\n   * @param {function(string, MusicGame)} onFailureCb The callback function for\n   *    on failure event.\n   * @constructor\n   */\n  function MusicGame(workspace, music, onGoalUpdateCb, onSuccessCb, onFailureCb) {\n    _classCallCheck(this, MusicGame);\n\n    /**\n     * The Blockly workspace associated with this game.\n     * @type {!Blockly.WorkspaceSvg}\n     */\n    this.workspace = workspace;\n    /**\n     * The music logic object.\n     * @type {Music}\n     */\n\n    this.music_ = music;\n    /**\n     * The currently loaded level. 0 if no level loaded.\n     * @type {number}\n     */\n\n    this.level = 0;\n    /**\n     * The total supported levels.\n     * @type {number}\n     * @const\n     */\n\n    this.TOTAL_LEVELS = 2;\n    /**\n     * The expected answer.\n     * @type {Array<Transcript>}\n     * @private\n     */\n\n    this.expectedAnswer_ = [];\n    /**\n     * The last played answer.\n     * @type {Array<Transcript>}\n     * @private\n     */\n\n    this.answer_ = [];\n    /**\n     * Callback function for goal update.\n     * @param {string} text The text to set the goal to.\n     * @type {function(string, MusicGame)}\n     * @private\n     */\n\n    this.onGoalUpdateCallback_ = onGoalUpdateCb;\n    /**\n     * The callback function on level success.\n     * @type {function(MusicGame)}\n     * @private\n     */\n\n    this.onSuccessCallback_ = onSuccessCb;\n    /**\n     * The callback function on level failure.\n     * @type {function(string, MusicGame)}\n     * @param {string} feedback The level feedback.\n     * @private\n     */\n\n    this.onFailureCallback_ = onFailureCb;\n    /**\n     * The current level goal.\n     * @private\n     */\n\n    this.goalText_ = '';\n    /**\n     * The current level feedback. Does not include transcript of actual and\n     * expected solution. Empty if nothing has been played yet.\n     * @private\n     */\n\n    this.feedback_ = '';\n    /**\n     * The full current level feedback. Empty if nothing has been played yet.\n     * @private\n     */\n\n    this.feedback_ = '';\n    /**\n     * Whether to only play notes in feedback and goal, instead of reading them\n     * out.\n     * @type {boolean}\n     * @private\n     */\n\n    this.playOnly_ = false;\n  }\n  /**\n   * Initializes the game and loads the first level.\n   */\n\n\n  _createClass(MusicGame, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this.music_.setOnFinishPlayCallback(function (transcripts) {\n        return _this.onFinishPlay_(transcripts);\n      });\n      this.loadLevel(1);\n      this.registerPlayHelpText();\n    }\n    /**\n     * Sets play only state for feedback and goal.\n     */\n\n  }, {\n    key: \"setPlayOnly\",\n    value: function setPlayOnly(playOnly) {\n      this.playOnly_ = playOnly;\n    }\n    /**\n     * Registers shortcut to replay the current tutorial step.\n     */\n\n  }, {\n    key: \"registerPlayHelpText\",\n    value: function registerPlayHelpText() {\n      var _this2 = this;\n\n      /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n      var playHelpText = {\n        name: 'playHelpText',\n        preconditionFn: function preconditionFn(workspace) {\n          return workspace.keyboardAccessibilityMode && !workspace.options.readOnly;\n        },\n        callback: function callback() {\n          if (_this2.feedback_) {\n            _this2.speakFeedback();\n          } else {\n            _this2.speakGoal();\n          }\n        }\n      };\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.register(playHelpText);\n      var shiftH = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.createSerializedKey(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.H);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.addKeyMapping(shiftH, playHelpText.name);\n    }\n    /**\n     * Speaks the current goal.\n     * @param {function=} onEnd The function to run after the text has been\n     *     spoken.\n     */\n\n  }, {\n    key: \"speakGoal\",\n    value: function speakGoal(onEnd) {\n      var _this3 = this;\n\n      _speaker__WEBPACK_IMPORTED_MODULE_2__[\"speaker\"].speak('The goal is:', true, function (event) {\n        _this3.expectedAnswer_[0].playback(_this3.music_.getBpm(), function () {\n          if (!_this3.playOnly_) {\n            _speaker__WEBPACK_IMPORTED_MODULE_2__[\"speaker\"].speak(_this3.goalText_, true, onEnd);\n          }\n        });\n      });\n    }\n    /**\n     * Speaks the current feedback.\n     * @param {function=} onEnd The function to run after the text has been\n     *     spoken.\n     */\n\n  }, {\n    key: \"speakFeedback\",\n    value: function speakFeedback(onEnd) {\n      var _this4 = this;\n\n      if (this.playOnly_) {\n        _speaker__WEBPACK_IMPORTED_MODULE_2__[\"speaker\"].speak(this.feedback_, true, function () {\n          _speaker__WEBPACK_IMPORTED_MODULE_2__[\"speaker\"].speak('Your solution: ', true, function () {\n            _this4.answer_[0].playback(_this4.music_.getBpm(), function () {\n              _speaker__WEBPACK_IMPORTED_MODULE_2__[\"speaker\"].speak('Expected solution: ', true, function () {\n                _this4.expectedAnswer_[0].playback(_this4.music_.getBpm(), onEnd);\n              });\n            });\n          });\n        });\n      } else {\n        _speaker__WEBPACK_IMPORTED_MODULE_2__[\"speaker\"].speak(this.fullFeedback_, true, onEnd);\n      }\n    }\n    /**\n     * Load the specified level.\n     * @param {number|string} level The level to load.\n     */\n\n  }, {\n    key: \"loadLevel\",\n    value: function loadLevel(level) {\n      this.level = Number(level);\n      this.loadLevelWorkspace_();\n      this.updateLevelGoal_();\n    }\n    /**\n     * Whether there is a next level.\n     * @return {boolean} Whether there is a next level.\n     */\n\n  }, {\n    key: \"hasNextLevel\",\n    value: function hasNextLevel() {\n      return this.level <= this.TOTAL_LEVELS;\n    }\n    /**\n     * Loads the next level, if available.\n     */\n\n  }, {\n    key: \"loadNextLevel\",\n    value: function loadNextLevel() {\n      if (this.hasNextLevel()) {\n        this.loadLevel(this.level + 1);\n      }\n    }\n    /**\n     * Updates the goal based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateLevelGoal_\",\n    value: function updateLevelGoal_() {\n      var goalText = '';\n\n      switch (this.level) {\n        case 1:\n          this.expectedAnswer_ = [new _music__WEBPACK_IMPORTED_MODULE_1__[\"Transcript\"](['C4', 'D4', 'E4', 'C4'], Array(4).fill(0.25))];\n          this.goalText_ = this.expectedAnswer_[0].getReadableText();\n          goalText = this.expectedAnswer_[0].getReadableText();\n          break;\n\n        case 2:\n          this.expectedAnswer_ = [new _music__WEBPACK_IMPORTED_MODULE_1__[\"Transcript\"](['D4', 'F4', 'D4', 'C4'], [0.25, 0.125, 0.25, 0.25])];\n          this.goalText_ = this.expectedAnswer_[0].getReadableText();\n          goalText = this.expectedAnswer_[0].getReadableText();\n          break;\n      }\n\n      this.onGoalUpdateCallback_(goalText, this);\n    }\n    /**\n     * Updates the toolbox and workspace blocks based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"loadLevelWorkspace_\",\n    value: function loadLevelWorkspace_() {\n      var toolboxDef = {\n        'kind': 'flyoutToolbox',\n        'contents': [{\n          'kind': 'block',\n          'blockxml': \"<block type=\\\"music_note\\\">\\n                        <field name=\\\"DURATION\\\">0.25</field>\\n                        <value name=\\\"PITCH\\\">\\n                          <shadow type=\\\"music_pitch\\\">\\n                            <field name=\\\"PITCH\\\">C4</field>\\n                          </shadow>\\n                        </value>\\n                      </block>\"\n        }, {\n          'kind': 'block',\n          'type': 'music_rest'\n        }]\n      };\n      var levelXml = \"<xml>\\n            <block type=\\\"music_start\\\" deletable=\\\"false\\\" x=\\\"180\\\"\\n            y=\\\"50\\\"></block>\\n          </xml>\";\n      this.workspace.updateToolbox(toolboxDef);\n      this.workspace.clear();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.domToWorkspace(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.textToDom(levelXml), this.workspace);\n    }\n    /**\n     * Callback on finish playing user code.\n     * @param {Array<Transcript>} transcripts The transcripts of the notes\n     *    played.\n     * @private\n     */\n\n  }, {\n    key: \"onFinishPlay_\",\n    value: function onFinishPlay_(transcripts) {\n      // Program complete.\n      var feedback = this.checkAnswer_(transcripts);\n\n      if (feedback) {\n        this.onFailureCallback_(feedback, this);\n      } else {\n        this.onSuccessCallback_(this);\n      }\n    }\n    /**\n     * Evaluates whether the answer for the currently loaded level is correct.\n     * Returns level feedback if correct or empty string if correct.\n     * @param {Array<Transcript>} transcripts The transcripts of the music played\n     *    by the user's code.\n     * @return {string} Level feedback or empty string.\n     * @private\n     */\n\n  }, {\n    key: \"checkAnswer_\",\n    value: function checkAnswer_(transcripts) {\n      var _this5 = this;\n\n      this.answer_ = transcripts;\n      var feedback = '';\n      var fullFeedback = '';\n\n      if (transcripts.length !== this.expectedAnswer_.length) {\n        console.warn('Multiple play blocks not fully supported');\n        return \"Expected \".concat(this.expectedAnswer_.length, \" play blocks, but found \") + transcripts.length;\n      }\n\n      transcripts.forEach(function (transcript, i) {\n        var transcriptFeedback = MusicGame.getFeedback_(transcript, _this5.expectedAnswer_[i]);\n        feedback += transcriptFeedback;\n        fullFeedback += transcriptFeedback;\n\n        if (transcriptFeedback) {\n          fullFeedback += \"\\nYour solution: \".concat(transcript.getReadableText() || 'empty', \"\\n\");\n          fullFeedback += \"Expected solution: \".concat(_this5.expectedAnswer_[i].getReadableText());\n        }\n      });\n      this.feedback_ = feedback;\n      this.fullFeedback_ = fullFeedback;\n      return fullFeedback;\n    }\n    /**\n     * Returns feedback on what is different between the actual and expected music\n     * transcripts. Returns empty string if the provided transcripts are\n     * equivalent.\n     * @param {Transcript} actual The actual transcript.\n     * @param {Transcript} expected The expected transcript.\n     * @return {string} The feedback.\n     * @private\n     */\n\n  }], [{\n    key: \"getFeedback_\",\n    value: function getFeedback_(actual, expected) {\n      var feedback = ''; // There could be extra or missing notes.\n\n      var sizeMismatch = actual.size !== expected.size;\n\n      if (actual.size < expected.size) {\n        feedback += 'Your solution is missing notes.\\n';\n      } else if (actual.size > expected.size) {\n        feedback += 'Your solution has extra notes.\\n';\n      } // The notes played could be wrong (duration or note).\n\n\n      var hasIncorrectNotes = false;\n      var hasIncorrectDuration = false;\n\n      for (var i = 0; i < actual.size && i < expected.size; i++) {\n        if (actual.notesAndRests[i] !== expected.notesAndRests[i]) {\n          hasIncorrectNotes = true;\n        }\n\n        if (actual.durations[i] !== expected.durations[i]) {\n          hasIncorrectDuration = true;\n        }\n      }\n\n      if (hasIncorrectNotes) {\n        feedback += \"Some of the notes \".concat(sizeMismatch ? 'may be' : 'are', \" incorrect.\\n\");\n      }\n\n      if (hasIncorrectDuration) {\n        feedback += \"Some of the note durations \" + \"\".concat(sizeMismatch ? 'may be' : 'are', \" incorrect.\\n\");\n      }\n\n      return feedback;\n    }\n  }]);\n\n  return MusicGame;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS5qcz83ZGUwIl0sIm5hbWVzIjpbIk11c2ljR2FtZSIsIndvcmtzcGFjZSIsIm11c2ljIiwib25Hb2FsVXBkYXRlQ2IiLCJvblN1Y2Nlc3NDYiIsIm9uRmFpbHVyZUNiIiwibXVzaWNfIiwibGV2ZWwiLCJUT1RBTF9MRVZFTFMiLCJleHBlY3RlZEFuc3dlcl8iLCJhbnN3ZXJfIiwib25Hb2FsVXBkYXRlQ2FsbGJhY2tfIiwib25TdWNjZXNzQ2FsbGJhY2tfIiwib25GYWlsdXJlQ2FsbGJhY2tfIiwiZ29hbFRleHRfIiwiZmVlZGJhY2tfIiwicGxheU9ubHlfIiwic2V0T25GaW5pc2hQbGF5Q2FsbGJhY2siLCJ0cmFuc2NyaXB0cyIsIm9uRmluaXNoUGxheV8iLCJsb2FkTGV2ZWwiLCJyZWdpc3RlclBsYXlIZWxwVGV4dCIsInBsYXlPbmx5IiwicGxheUhlbHBUZXh0IiwibmFtZSIsInByZWNvbmRpdGlvbkZuIiwia2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSIsIm9wdGlvbnMiLCJyZWFkT25seSIsImNhbGxiYWNrIiwic3BlYWtGZWVkYmFjayIsInNwZWFrR29hbCIsIkJsb2NrbHkiLCJTaG9ydGN1dFJlZ2lzdHJ5IiwicmVnaXN0cnkiLCJyZWdpc3RlciIsInNoaWZ0SCIsImNyZWF0ZVNlcmlhbGl6ZWRLZXkiLCJ1dGlscyIsIktleUNvZGVzIiwiSCIsImFkZEtleU1hcHBpbmciLCJvbkVuZCIsInNwZWFrZXIiLCJzcGVhayIsImV2ZW50IiwicGxheWJhY2siLCJnZXRCcG0iLCJmdWxsRmVlZGJhY2tfIiwiTnVtYmVyIiwibG9hZExldmVsV29ya3NwYWNlXyIsInVwZGF0ZUxldmVsR29hbF8iLCJoYXNOZXh0TGV2ZWwiLCJnb2FsVGV4dCIsIlRyYW5zY3JpcHQiLCJBcnJheSIsImZpbGwiLCJnZXRSZWFkYWJsZVRleHQiLCJ0b29sYm94RGVmIiwibGV2ZWxYbWwiLCJ1cGRhdGVUb29sYm94IiwiY2xlYXIiLCJYbWwiLCJkb21Ub1dvcmtzcGFjZSIsInRleHRUb0RvbSIsImZlZWRiYWNrIiwiY2hlY2tBbnN3ZXJfIiwiZnVsbEZlZWRiYWNrIiwibGVuZ3RoIiwiY29uc29sZSIsIndhcm4iLCJmb3JFYWNoIiwidHJhbnNjcmlwdCIsImkiLCJ0cmFuc2NyaXB0RmVlZGJhY2siLCJnZXRGZWVkYmFja18iLCJhY3R1YWwiLCJleHBlY3RlZCIsInNpemVNaXNtYXRjaCIsInNpemUiLCJoYXNJbmNvcnJlY3ROb3RlcyIsImhhc0luY29ycmVjdER1cmF0aW9uIiwibm90ZXNBbmRSZXN0cyIsImR1cmF0aW9ucyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ08sSUFBTUEsU0FBYjtBQUNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNFLHFCQUFZQyxTQUFaLEVBQXVCQyxLQUF2QixFQUE4QkMsY0FBOUIsRUFBOENDLFdBQTlDLEVBQTJEQyxXQUEzRCxFQUF3RTtBQUFBOztBQUN0RTtBQUNKO0FBQ0E7QUFDQTtBQUNJLFNBQUtKLFNBQUwsR0FBaUJBLFNBQWpCO0FBRUE7QUFDSjtBQUNBO0FBQ0E7O0FBQ0ksU0FBS0ssTUFBTCxHQUFjSixLQUFkO0FBRUE7QUFDSjtBQUNBO0FBQ0E7O0FBQ0ksU0FBS0ssS0FBTCxHQUFhLENBQWI7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUNJLFNBQUtDLFlBQUwsR0FBb0IsQ0FBcEI7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUNJLFNBQUtDLGVBQUwsR0FBdUIsRUFBdkI7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUNJLFNBQUtDLE9BQUwsR0FBZSxFQUFmO0FBRUE7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNJLFNBQUtDLHFCQUFMLEdBQTZCUixjQUE3QjtBQUVBO0FB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QXFCVCxDQUFyQixNQUE0QkksUUFBUSxDQUFDSyxhQUFULENBQXVCVCxDQUF2QixDQUFoQyxFQUEyRDtBQUN6RE8sMkJBQWlCLEdBQUcsSUFBcEI7QUFDRDs7QUFDRCxZQUFJSixNQUFNLENBQUNPLFNBQVAsQ0FBaUJWLENBQWpCLE1BQXdCSSxRQUFRLENBQUNNLFNBQVQsQ0FBbUJWLENBQW5CLENBQTVCLEVBQW1EO0FBQ2pEUSw4QkFBb0IsR0FBRyxJQUF2QjtBQUNEO0FBQ0Y7O0FBQ0QsVUFBSUQsaUJBQUosRUFBdUI7QUFDckJmLGdCQUFRLGdDQUNpQmEsWUFBWSxHQUFHLFFBQUgsR0FBYyxLQUQzQyxrQkFBUjtBQUVEOztBQUNELFVBQUlHLG9CQUFKLEVBQTBCO0FBQ3hCaEIsZ0JBQVEsSUFBSSwwQ0FDTGEsWUFBWSxHQUFHLFFBQUgsR0FBYyxLQURyQixrQkFBWjtBQUVEOztBQUNELGFBQU9iLFFBQVA7QUFDRDtBQXpXSDs7QUFBQTtBQUFBIiwiZmlsZSI6Ii4vc3JjL2dhbWUuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBHYW1lIGxvZ2ljIGZvciBtdXNpYyBnYW1lLlxuICovXG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5pbXBvcnQge011c2ljLCBUcmFuc2NyaXB0fSBmcm9tICcuL211c2ljJztcbmltcG9ydCB7c3BlYWtlcn0gZnJvbSAnLi9zcGVha2VyJztcblxuLyoqXG4gKiBHYW1lIGxvZ2ljIGZvciBtdXNpYyBnYW1lLlxuICovXG5leHBvcnQgY2xhc3MgTXVzaWNHYW1lIHtcbiAgLyoqXG4gICAqIENsYXNzIGZvciBhIG11c2ljIGdhbWUuXG4gICAqIEBwYXJhbSB7QmxvY2tseS5Xb3Jrc3BhY2VTdmd9IHdvcmtzcGFjZSBUaGUgQmxvY2tseSB3b3Jrc3BhY2UuXG4gICAqIEBwYXJhbSB7TXVzaWN9IG11c2ljIEEgcmVmZXJlbmNlIHRvIHRoZSBtdXNpYyBvYmplY3QuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCBNdXNpY0dhbWUpfSBvbkdvYWxVcGRhdGVDYiBUaGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICogICAgZm9yIGdvYWwgY2hhbmdlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKE11c2ljR2FtZSl9IG9uU3VjY2Vzc0NiIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBmb3Igb25cbiAgICogICAgc3VjY2VzcyBldmVudC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcsIE11c2ljR2FtZSl9IG9uRmFpbHVyZUNiIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBmb3JcbiAgICogICAgb24gZmFpbHVyZSBldmVudC5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3b3Jrc3BhY2UsIG11c2ljLCBvbkdvYWxVcGRhdGVDYiwgb25TdWNjZXNzQ2IsIG9uRmFpbHVyZUNiKSB7XG4gICAgLyoqXG4gICAgICogVGhlIEJsb2NrbHkgd29ya3NwYWNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGdhbWUuXG4gICAgICogQHR5cGUgeyFCbG9ja2x5LldvcmtzcGFjZVN2Z31cbiAgICAgKi9cbiAgICB0aGlzLndvcmtzcGFjZSA9IHdvcmtzcGFjZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtdXNpYyBsb2dpYyBvYmplY3QuXG4gICAgICogQHR5cGUge011c2ljfVxuICAgICAqL1xuICAgIHRoaXMubXVzaWNfID0gbXVzaWM7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudGx5IGxvYWRlZCBsZXZlbC4gMCBpZiBubyBsZXZlbCBsb2FkZWQuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxldmVsID0gMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBzdXBwb3J0ZWQgbGV2ZWxzLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQGNvbnN0XG4gICAgICovXG4gICAgdGhpcy5UT1RBTF9MRVZFTFMgPSAyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGV4cGVjdGVkIGFuc3dlci5cbiAgICAgKiBAdHlwZSB7QXJyYXk8VHJhbnNjcmlwdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmV4cGVjdGVkQW5zd2VyXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcGxheWVkIGFuc3dlci5cbiAgICAgKiBAdHlwZSB7QXJyYXk8VHJhbnNjcmlwdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmFuc3dlcl8gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciBnb2FsIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBzZXQgdGhlIGdvYWwgdG8uXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKHN0cmluZywgTXVzaWNHYW1lKX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub25Hb2FsVXBkYXRlQ2FsbGJhY2tfID0gb25Hb2FsVXBkYXRlQ2I7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gb24gbGV2ZWwgc3VjY2Vzcy5cbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oTXVzaWNHYW1lKX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub25TdWNjZXNzQ2FsbGJhY2tfID0gb25TdWNjZXNzQ2I7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gb24gbGV2ZWwgZmFpbHVyZS5cbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oc3RyaW5nLCBNdXNpY0dhbWUpfVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmZWVkYmFjayBUaGUgbGV2ZWwgZmVlZGJhY2suXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm9uRmFpbHVyZUNhbGxiYWNrXyA9IG9uRmFpbHVyZUNiO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbGV2ZWwgZ29hbC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZ29hbFRleHRfID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBsZXZlbCBmZWVkYmFjay4gRG9lcyBub3QgaW5jbHVkZSB0cmFuc2NyaXB0IG9mIGFjdHVhbCBhbmRcbiAgICAgKiBleHBlY3RlZCBzb2x1dGlvbi4gRW1wdHkgaWYgbm90aGluZyBoYXMgYmVlbiBwbGF5ZWQgeWV0LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5mZWVkYmFja18gPSAnJztcblxuICAgIC8qKlxuICAgICAqIFRoZSBmdWxsIGN1cnJlbnQgbGV2ZWwgZmVlZGJhY2suIEVtcHR5IGlmIG5vdGhpbmcgaGFzIGJlZW4gcGxheWVkIHlldC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZmVlZGJhY2tfID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIG9ubHkgcGxheSBub3RlcyBpbiBmZWVkYmFjayBhbmQgZ29hbCwgaW5zdGVhZCBvZiByZWFkaW5nIHRoZW1cbiAgICAgKiBvdXQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnBsYXlPbmx5XyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBnYW1lIGFuZCBsb2FkcyB0aGUgZmlyc3QgbGV2ZWwuXG4gICAqL1xuICBpbml0KCkge1xuICAgIHRoaXMubXVzaWNfLnNldE9uRmluaXNoUGxheUNhbGxiYWNrKFxuICAgICAgICAodHJhbnNjcmlwdHMpID0+IHRoaXMub25GaW5pc2hQbGF5Xyh0cmFuc2NyaXB0cykpO1xuICAgIHRoaXMubG9hZExldmVsKDEpO1xuICAgIHRoaXMucmVnaXN0ZXJQbGF5SGVscFRleHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHBsYXkgb25seSBzdGF0ZSBmb3IgZmVlZGJhY2sgYW5kIGdvYWwuXG4gICAqL1xuICBzZXRQbGF5T25seShwbGF5T25seSkge1xuICAgIHRoaXMucGxheU9ubHlfID0gcGxheU9ubHk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHNob3J0Y3V0IHRvIHJlcGxheSB0aGUgY3VycmVudCB0dXRvcmlhbCBzdGVwLlxuICAgKi9cbiAgcmVnaXN0ZXJQbGF5SGVscFRleHQoKSB7XG4gICAgLyoqIEB0eXBlIHshQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LktleWJvYXJkU2hvcnRjdXR9ICovXG4gICAgY29uc3QgcGxheUhlbHBUZXh0ID0ge1xuICAgICAgbmFtZTogJ3BsYXlIZWxwVGV4dCcsXG4gICAgICBwcmVjb25kaXRpb25GbjogZnVuY3Rpb24od29ya3NwYWNlKSB7XG4gICAgICAgIHJldHVybiB3b3Jrc3BhY2Uua2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSAmJlxuICAgICAgICAgICAgIXdvcmtzcGFjZS5vcHRpb25zLnJlYWRPbmx5O1xuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmZlZWRiYWNrXykge1xuICAgICAgICAgIHRoaXMuc3BlYWtGZWVkYmFjaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3BlYWtHb2FsKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LnJlZ2lzdGVyKHBsYXlIZWxwVGV4dCk7XG4gICAgY29uc3Qgc2hpZnRIID0gQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LmNyZWF0ZVNlcmlhbGl6ZWRLZXkoXG4gICAgICAgIEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuSCk7XG4gICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LmFkZEtleU1hcHBpbmcoXG4gICAgICAgIHNoaWZ0SCwgcGxheUhlbHBUZXh0Lm5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWFrcyB0aGUgY3VycmVudCBnb2FsLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uPX0gb25FbmQgVGhlIGZ1bmN0aW9uIHRvIHJ1biBhZnRlciB0aGUgdGV4dCBoYXMgYmVlblxuICAgKiAgICAgc3Bva2VuLlxuICAgKi9cbiAgc3BlYWtHb2FsKG9uRW5kKSB7XG4gICAgc3BlYWtlci5zcGVhaygnVGhlIGdvYWwgaXM6JywgdHJ1ZSwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmV4cGVjdGVkQW5zd2VyX1swXS5wbGF5YmFjayh0aGlzLm11c2ljXy5nZXRCcG0oKSwgKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMucGxheU9ubHlfKSB7XG4gICAgICAgICAgc3BlYWtlci5zcGVhayh0aGlzLmdvYWxUZXh0XywgdHJ1ZSwgb25FbmQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVha3MgdGhlIGN1cnJlbnQgZmVlZGJhY2suXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBvbkVuZCBUaGUgZnVuY3Rpb24gdG8gcnVuIGFmdGVyIHRoZSB0ZXh0IGhhcyBiZWVuXG4gICAqICAgICBzcG9rZW4uXG4gICAqL1xuICBzcGVha0ZlZWRiYWNrKG9uRW5kKSB7XG4gICAgaWYgKHRoaXMucGxheU9ubHlfKSB7XG4gICAgICBzcGVha2VyLnNwZWFrKHRoaXMuZmVlZGJhY2tfLCB0cnVlLCAoKSA9PiB7XG4gICAgICAgIHNwZWFrZXIuc3BlYWsoJ1lvdXIgc29sdXRpb246ICcsIHRydWUsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFuc3dlcl9bMF0ucGxheWJhY2sodGhpcy5tdXNpY18uZ2V0QnBtKCksICgpID0+IHtcbiAgICAgICAgICAgIHNwZWFrZXIuc3BlYWsoJ0V4cGVjdGVkIHNvbHV0aW9uOiAnLCB0cnVlLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuZXhwZWN0ZWRBbnN3ZXJfWzBdLnBsYXliYWNrKHRoaXMubXVzaWNfLmdldEJwbSgpLCBvbkVuZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlci5zcGVhayh0aGlzLmZ1bGxGZWVkYmFja18sIHRydWUsIG9uRW5kKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9hZCB0aGUgc3BlY2lmaWVkIGxldmVsLlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGxldmVsIFRoZSBsZXZlbCB0byBsb2FkLlxuICAgKi9cbiAgbG9hZExldmVsKGxldmVsKSB7XG4gICAgdGhpcy5sZXZlbCA9IE51bWJlcihsZXZlbCk7XG4gICAgdGhpcy5sb2FkTGV2ZWxXb3Jrc3BhY2VfKCk7XG4gICAgdGhpcy51cGRhdGVMZXZlbEdvYWxfKCk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGVyZSBpcyBhIG5leHQgbGV2ZWwuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlcmUgaXMgYSBuZXh0IGxldmVsLlxuICAgKi9cbiAgaGFzTmV4dExldmVsKCkge1xuICAgIHJldHVybiB0aGlzLmxldmVsIDw9IHRoaXMuVE9UQUxfTEVWRUxTO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWRzIHRoZSBuZXh0IGxldmVsLCBpZiBhdmFpbGFibGUuXG4gICAqL1xuICBsb2FkTmV4dExldmVsKCkge1xuICAgIGlmICh0aGlzLmhhc05leHRMZXZlbCgpKSB7XG4gICAgICB0aGlzLmxvYWRMZXZlbCh0aGlzLmxldmVsICsgMSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGdvYWwgYmFzZWQgb24gdGhlIGN1cnJlbnQgbGV2ZWwuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1cGRhdGVMZXZlbEdvYWxfKCkge1xuICAgIGxldCBnb2FsVGV4dCA9ICcnO1xuICAgIHN3aXRjaCAodGhpcy5sZXZlbCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICB0aGlzLmV4cGVjdGVkQW5zd2VyXyA9XG4gICAgICAgICAgICBbbmV3IFRyYW5zY3JpcHQoWydDNCcsICdENCcsICdFNCcsICdDNCddLCBBcnJheSg0KS5maWxsKDAuMjUpKV07XG4gICAgICAgIHRoaXMuZ29hbFRleHRfID0gdGhpcy5leHBlY3RlZEFuc3dlcl9bMF0uZ2V0UmVhZGFibGVUZXh0KCk7XG4gICAgICAgIGdvYWxUZXh0ID0gdGhpcy5leHBlY3RlZEFuc3dlcl9bMF0uZ2V0UmVhZGFibGVUZXh0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICB0aGlzLmV4cGVjdGVkQW5zd2VyXyA9XG4gICAgICAgICAgICBbbmV3IFRyYW5zY3JpcHQoXG4gICAgICAgICAgICAgICAgWydENCcsICdGNCcsICdENCcsICdDNCddLCBbMC4yNSwgMC4xMjUsIDAuMjUsIDAuMjVdKV07XG4gICAgICAgIHRoaXMuZ29hbFRleHRfID0gdGhpcy5leHBlY3RlZEFuc3dlcl9bMF0uZ2V0UmVhZGFibGVUZXh0KCk7XG4gICAgICAgIGdvYWxUZXh0ID0gdGhpcy5leHBlY3RlZEFuc3dlcl9bMF0uZ2V0UmVhZGFibGVUZXh0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLm9uR29hbFVwZGF0ZUNhbGxiYWNrXyhnb2FsVGV4dCwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgdG9vbGJveCBhbmQgd29ya3NwYWNlIGJsb2NrcyBiYXNlZCBvbiB0aGUgY3VycmVudCBsZXZlbC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGxvYWRMZXZlbFdvcmtzcGFjZV8oKSB7XG4gICAgY29uc3QgdG9vbGJveERlZiA9IHtcbiAgICAgICdraW5kJzogJ2ZseW91dFRvb2xib3gnLFxuICAgICAgJ2NvbnRlbnRzJzogW1xuICAgICAgICB7XG4gICAgICAgICAgJ2tpbmQnOiAnYmxvY2snLFxuICAgICAgICAgICdibG9ja3htbCc6IGA8YmxvY2sgdHlwZT1cIm11c2ljX25vdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZCBuYW1lPVwiRFVSQVRJT05cIj4wLjI1PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx2YWx1ZSBuYW1lPVwiUElUQ0hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNoYWRvdyB0eXBlPVwibXVzaWNfcGl0Y2hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIlBJVENIXCI+QzQ8L2ZpZWxkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NoYWRvdz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdmFsdWU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9ibG9jaz5gLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ2tpbmQnOiAnYmxvY2snLFxuICAgICAgICAgICd0eXBlJzogJ211c2ljX3Jlc3QnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuICAgIGNvbnN0IGxldmVsWG1sID1cbiAgICAgICAgYDx4bWw+XG4gICAgICAgICAgICA8YmxvY2sgdHlwZT1cIm11c2ljX3N0YXJ0XCIgZGVsZXRhYmxlPVwiZmFsc2VcIiB4PVwiMTgwXCJcbiAgICAgICAgICAgIHk9XCI1MFwiPjwvYmxvY2s+XG4gICAgICAgICAgPC94bWw+YDtcbiAgICB0aGlzLndvcmtzcGFjZS51cGRhdGVUb29sYm94KHRvb2xib3hEZWYpO1xuICAgIHRoaXMud29ya3NwYWNlLmNsZWFyKCk7XG4gICAgQmxvY2tseS5YbWwuZG9tVG9Xb3Jrc3BhY2UoXG4gICAgICAgIEJsb2NrbHkuWG1sLnRleHRUb0RvbShsZXZlbFhtbCksIHRoaXMud29ya3NwYWNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBvbiBmaW5pc2ggcGxheWluZyB1c2VyIGNvZGUuXG4gICAqIEBwYXJhbSB7QXJyYXk8VHJhbnNjcmlwdD59IHRyYW5zY3JpcHRzIFRoZSB0cmFuc2NyaXB0cyBvZiB0aGUgbm90ZXNcbiAgICogICAgcGxheWVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25GaW5pc2hQbGF5Xyh0cmFuc2NyaXB0cykge1xuICAgIC8vIFByb2dyYW0gY29tcGxldGUuXG4gICAgY29uc3QgZmVlZGJhY2sgPSB0aGlzLmNoZWNrQW5zd2VyXyh0cmFuc2NyaXB0cyk7XG4gICAgaWYgKGZlZWRiYWNrKSB7XG4gICAgICB0aGlzLm9uRmFpbHVyZUNhbGxiYWNrXyhmZWVkYmFjaywgdGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25TdWNjZXNzQ2FsbGJhY2tfKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZXMgd2hldGhlciB0aGUgYW5zd2VyIGZvciB0aGUgY3VycmVudGx5IGxvYWRlZCBsZXZlbCBpcyBjb3JyZWN0LlxuICAgKiBSZXR1cm5zIGxldmVsIGZlZWRiYWNrIGlmIGNvcnJlY3Qgb3IgZW1wdHkgc3RyaW5nIGlmIGNvcnJlY3QuXG4gICAqIEBwYXJhbSB7QXJyYXk8VHJhbnNjcmlwdD59IHRyYW5zY3JpcHRzIFRoZSB0cmFuc2NyaXB0cyBvZiB0aGUgbXVzaWMgcGxheWVkXG4gICAqICAgIGJ5IHRoZSB1c2VyJ3MgY29kZS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBMZXZlbCBmZWVkYmFjayBvciBlbXB0eSBzdHJpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjaGVja0Fuc3dlcl8odHJhbnNjcmlwdHMpIHtcbiAgICB0aGlzLmFuc3dlcl8gPSB0cmFuc2NyaXB0cztcbiAgICBsZXQgZmVlZGJhY2sgPSAnJztcbiAgICBsZXQgZnVsbEZlZWRiYWNrID0gJyc7XG4gICAgaWYgKHRyYW5zY3JpcHRzLmxlbmd0aCAhPT0gdGhpcy5leHBlY3RlZEFuc3dlcl8ubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ011bHRpcGxlIHBsYXkgYmxvY2tzIG5vdCBmdWxseSBzdXBwb3J0ZWQnKTtcbiAgICAgIHJldHVybiBgRXhwZWN0ZWQgJHt0aGlzLmV4cGVjdGVkQW5zd2VyXy5sZW5ndGh9IHBsYXkgYmxvY2tzLCBidXQgZm91bmQgYCArXG4gICAgICAgICAgdHJhbnNjcmlwdHMubGVuZ3RoO1xuICAgIH1cbiAgICB0cmFuc2NyaXB0cy5mb3JFYWNoKCh0cmFuc2NyaXB0LCBpKSA9PiB7XG4gICAgICBjb25zdCB0cmFuc2NyaXB0RmVlZGJhY2sgPVxuICAgICAgICAgIE11c2ljR2FtZS5nZXRGZWVkYmFja18odHJhbnNjcmlwdCwgdGhpcy5leHBlY3RlZEFuc3dlcl9baV0pO1xuICAgICAgZmVlZGJhY2sgKz0gdHJhbnNjcmlwdEZlZWRiYWNrO1xuICAgICAgZnVsbEZlZWRiYWNrICs9IHRyYW5zY3JpcHRGZWVkYmFjaztcbiAgICAgIGlmICh0cmFuc2NyaXB0RmVlZGJhY2spIHtcbiAgICAgICAgZnVsbEZlZWRiYWNrICs9XG4gICAgICAgICAgICBgXFxuWW91ciBzb2x1dGlvbjogJHt0cmFuc2NyaXB0LmdldFJlYWRhYmxlVGV4dCgpIHx8ICdlbXB0eSd9XFxuYDtcbiAgICAgICAgZnVsbEZlZWRiYWNrICs9XG4gICAgICAgICAgICBgRXhwZWN0ZWQgc29sdXRpb246ICR7dGhpcy5leHBlY3RlZEFuc3dlcl9baV0uZ2V0UmVhZGFibGVUZXh0KCl9YDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmZlZWRiYWNrXyA9IGZlZWRiYWNrO1xuICAgIHRoaXMuZnVsbEZlZWRiYWNrXyA9IGZ1bGxGZWVkYmFjaztcbiAgICByZXR1cm4gZnVsbEZlZWRiYWNrO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZmVlZGJhY2sgb24gd2hhdCBpcyBkaWZmZXJlbnQgYmV0d2VlbiB0aGUgYWN0dWFsIGFuZCBleHBlY3RlZCBtdXNpY1xuICAgKiB0cmFuc2NyaXB0cy4gUmV0dXJucyBlbXB0eSBzdHJpbmcgaWYgdGhlIHByb3ZpZGVkIHRyYW5zY3JpcHRzIGFyZVxuICAgKiBlcXVpdmFsZW50LlxuICAgKiBAcGFyYW0ge1RyYW5zY3JpcHR9IGFjdHVhbCBUaGUgYWN0dWFsIHRyYW5zY3JpcHQuXG4gICAqIEBwYXJhbSB7VHJhbnNjcmlwdH0gZXhwZWN0ZWQgVGhlIGV4cGVjdGVkIHRyYW5zY3JpcHQuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGZlZWRiYWNrLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIGdldEZlZWRiYWNrXyhhY3R1YWwsIGV4cGVjdGVkKSB7XG4gICAgbGV0IGZlZWRiYWNrID0gJyc7XG5cbiAgICAvLyBUaGVyZSBjb3VsZCBiZSBleHRyYSBvciBtaXNzaW5nIG5vdGVzLlxuICAgIGNvbnN0IHNpemVNaXNtYXRjaCA9IGFjdHVhbC5zaXplICE9PSBleHBlY3RlZC5zaXplO1xuICAgIGlmIChhY3R1YWwuc2l6ZSA8IGV4cGVjdGVkLnNpemUpIHtcbiAgICAgIGZlZWRiYWNrICs9ICdZb3VyIHNvbHV0aW9uIGlzIG1pc3Npbmcgbm90ZXMuXFxuJztcbiAgICB9IGVsc2UgaWYgKGFjdHVhbC5zaXplID4gZXhwZWN0ZWQuc2l6ZSkge1xuICAgICAgZmVlZGJhY2sgKz0gJ1lvdXIgc29sdXRpb24gaGFzIGV4dHJhIG5vdGVzLlxcbic7XG4gICAgfVxuXG4gICAgLy8gVGhlIG5vdGVzIHBsYXllZCBjb3VsZCBiZSB3cm9uZyAoZHVyYXRpb24gb3Igbm90ZSkuXG4gICAgbGV0IGhhc0luY29ycmVjdE5vdGVzID0gZmFsc2U7XG4gICAgbGV0IGhhc0luY29ycmVjdER1cmF0aW9uID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3R1YWwuc2l6ZSAmJiBpIDwgZXhwZWN0ZWQuc2l6ZTsgaSsrKSB7XG4gICAgICBpZiAoYWN0dWFsLm5vdGVzQW5kUmVzdHNbaV0gIT09IGV4cGVjdGVkLm5vdGVzQW5kUmVzdHNbaV0pIHtcbiAgICAgICAgaGFzSW5jb3JyZWN0Tm90ZXMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGFjdHVhbC5kdXJhdGlvbnNbaV0gIT09IGV4cGVjdGVkLmR1cmF0aW9uc1tpXSkge1xuICAgICAgICBoYXNJbmNvcnJlY3REdXJhdGlvbiA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNJbmNvcnJlY3ROb3Rlcykge1xuICAgICAgZmVlZGJhY2sgKz1cbiAgICAgICAgICBgU29tZSBvZiB0aGUgbm90ZXMgJHtzaXplTWlzbWF0Y2ggPyAnbWF5IGJlJyA6ICdhcmUnfSBpbmNvcnJlY3QuXFxuYDtcbiAgICB9XG4gICAgaWYgKGhhc0luY29ycmVjdER1cmF0aW9uKSB7XG4gICAgICBmZWVkYmFjayArPSBgU29tZSBvZiB0aGUgbm90ZSBkdXJhdGlvbnMgYCArXG4gICAgICAgICAgYCR7c2l6ZU1pc21hdGNoID8gJ21heSBiZScgOiAnYXJlJ30gaW5jb3JyZWN0LlxcbmA7XG4gICAgfVxuICAgIHJldHVybiBmZWVkYmFjaztcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game.js\n");

/***/ }),

/***/ "./src/music.js":
/*!**********************!*\
  !*** ./src/music.js ***!
  \**********************/
/*! exports provided: Transcript, Music */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Transcript\", function() { return Transcript; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Music\", function() { return Music; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _music_blocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./music_blocks */ \"./src/music_blocks.js\");\n/* harmony import */ var _music_block_generators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./music_block_generators */ \"./src/music_block_generators.js\");\n/* harmony import */ var js_interpreter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js-interpreter */ \"./node_modules/js-interpreter/lib/js-interpreter.js\");\n/* harmony import */ var js_interpreter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(js_interpreter__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _note_player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./note_player */ \"./src/note_player.js\");\n/* harmony import */ var tone__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! tone */ \"./node_modules/tone/build/esm/index.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Game logic for music game.\n */\n\n\n\n\n\n\n/**\n * Constant denoting a rest.\n */\n\nvar REST = 'REST';\n/**\n * Class representing transcript of notes played.\n */\n\nvar Transcript = /*#__PURE__*/function () {\n  /**\n   * Class for holding transcript of notes that were played. Expects\n   * notesAndRests and durations to have a matching length.\n   * @param {Array<string>} notesAndRests The notes and rests.\n   * @param {Array<number>} durations The durations of the notes and rests.\n   */\n  function Transcript() {\n    var notesAndRests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var durations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, Transcript);\n\n    if (notesAndRests.length !== durations.length) {\n      console.error('Transcript length mismatch.');\n    }\n\n    this.notesAndRests = [];\n    this.durations = [];\n    this.size = 0;\n    this.readableText_ = '';\n\n    for (var i = 0; i < notesAndRests.length; i++) {\n      this.appendNote(notesAndRests[i], durations[i]);\n    }\n  }\n  /**\n   * Converts duration number into appropriate string.\n   * @param {number} duration The duration.\n   * @return {string} The string version of duration.\n   * @private\n   */\n\n\n  _createClass(Transcript, [{\n    key: \"appendReadableText_\",\n\n    /**\n     * Internal method for appending text to transcript text.\n     * @param {string} text The text to append.\n     * @private\n     */\n    value: function appendReadableText_(text) {\n      if (this.readableText_) {\n        this.readableText_ += ', ';\n      } else {\n        text = text.charAt(0).toUpperCase() + text.slice(1);\n      }\n\n      this.readableText_ += text;\n    }\n    /**\n     * Returns sentence representing the notes played in this transcript.\n     * @return {string} The sentence.\n     */\n\n  }, {\n    key: \"getReadableText\",\n    value: function getReadableText() {\n      if (!this.readableText_) {\n        return 'Empty.';\n      }\n\n      var items = this.readableText_.split(',');\n\n      if (items.length > 1) {\n        items[items.length - 1] = ' and ' + items[items.length - 1];\n      }\n\n      return items.join(',') + '.';\n    }\n    /**\n     * Appends note to transcript.\n     * @param {string} note The pitch of note to append.\n     * @param {number} duration The duration of the note.\n     */\n\n  }, {\n    key: \"appendNote\",\n    value: function appendNote(note, duration) {\n      this.notesAndRests.push(note);\n      this.durations.push(duration);\n      this.appendReadableText_(\"play \".concat(Transcript.getDurationText_(duration), \" note \").concat(note));\n      this.size++;\n    }\n    /**\n     * Appends rest to transcript.\n     * @param {number} duration The duration of the rest.\n     */\n\n  }, {\n    key: \"appendRest\",\n    value: function appendRest(duration) {\n      this.notesAndRests.push(REST);\n      this.durations.push(duration);\n      this.appendReadableText_(\"\".concat(Transcript.getDurationText_(duration), \" rest\"));\n      this.size++;\n    }\n    /**\n     * Plays the notes in this transcript.\n     * @param {number} bpm The speed to play at in bpm.\n     * @param {function()} callback Callback after playback has completed.\n     */\n\n  }, {\n    key: \"playback\",\n    value: function playback() {\n      var _this = this;\n\n      var bpm = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      var speedMod = 60 / bpm;\n      var startTime = tone__WEBPACK_IMPORTED_MODULE_5__[\"now\"]();\n      var lastTimestamp = startTime;\n      this.notesAndRests.forEach(function (note, i) {\n        var duration = _this.durations[i] * speedMod;\n\n        if (note !== REST) {\n          _note_player__WEBPACK_IMPORTED_MODULE_4__[\"notePlayer\"].playNote(note, duration, lastTimestamp);\n        }\n\n        lastTimestamp += duration;\n      });\n      setTimeout(callback, (lastTimestamp - startTime + 0.5) * 1000);\n    }\n  }], [{\n    key: \"getDurationText_\",\n    value: function getDurationText_(duration) {\n      var durationText = 'unknown';\n\n      switch (duration) {\n        case 1:\n          durationText = 'whole';\n          break;\n\n        case 0.5:\n          durationText = 'half';\n          break;\n\n        case 0.25:\n          durationText = 'quarter';\n          break;\n\n        case 0.125:\n          durationText = 'eighth';\n          break;\n      }\n\n      return durationText;\n    }\n  }]);\n\n  return Transcript;\n}();\n/**\n * Class representing musical stave (staff) of notes to play.\n */\n\nvar Stave = /*#__PURE__*/function () {\n  /**\n   * Class holding code for music to play.\n   * @param {Array<Interpreter.State>} stateStack The stateStack containing code\n   *    for this stave.\n   */\n  function Stave(stateStack) {\n    _classCallCheck(this, Stave);\n\n    /**\n     * The state stack.\n     * @type {Array<Interpreter.State>}\n     */\n    this.stateStack = stateStack;\n    /**\n     * Whether all the notes have ben played.\n     * @type {boolean}\n     */\n\n    this.done = false;\n    /**\n     * The time to pause till.\n     * @type {number}\n     * @private\n     */\n\n    this.pauseUntil64ths_ = 0;\n    /**\n     * The transcript of notes played.\n     * @type {Transcript}\n     * @private\n     */\n\n    this.transcript_ = new Transcript();\n    /**\n     * Currently playing note.\n     * @type {string}\n     * @private\n     */\n\n    this.note_ = '';\n  }\n  /**\n   * Returns the transcript for this stave.\n   * @return {Transcript} The transcript.\n   */\n\n\n  _createClass(Stave, [{\n    key: \"getTranscript\",\n    value: function getTranscript() {\n      return this.transcript_;\n    }\n    /**\n     * Whether this stave is currently paused.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     * @return {boolean} Whether this stave is paused.\n     */\n\n  }, {\n    key: \"isPaused\",\n    value: function isPaused(clock64ths) {\n      return this.pauseUntil64ths_ > clock64ths;\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note to play.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(duration, pitch, clock64ths) {\n      this.stopSound();\n      this.note_ = pitch;\n      _note_player__WEBPACK_IMPORTED_MODULE_4__[\"notePlayer\"].triggerAttack(pitch);\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this note.\n\n      this.transcript_.appendNote(pitch, duration);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"rest\",\n    value: function rest(duration, clock64ths) {\n      this.stopSound();\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this rest.\n\n      this.transcript_.appendRest(duration);\n    }\n    /**\n     * Stops currently playing note.\n     */\n\n  }, {\n    key: \"stopSound\",\n    value: function stopSound() {\n      if (this.note_) {\n        _note_player__WEBPACK_IMPORTED_MODULE_4__[\"notePlayer\"].triggerRelease();\n        this.note_ = '';\n      }\n    }\n  }]);\n\n  return Stave;\n}();\n/**\n * Logic for playing music.\n */\n\n\nvar Music = /*#__PURE__*/function () {\n  /**\n   * Class for a music game.\n   * @param {Blockly.WorkspaceSvg} workspace The Blockly workspace.\n   * @constructor\n   */\n  function Music(workspace) {\n    _classCallCheck(this, Music);\n\n    /**\n     * The Blockly workspace associated with this game.\n     * @type {!Blockly.WorkspaceSvg}\n     */\n    this.workspace = workspace;\n    /**\n     * The interpreter.\n     * @type {?Interpreter}\n     * @private\n     */\n\n    this.interpreter_ = null;\n    /**\n     * @type {Array<Stave>}\n     * @private\n     */\n\n    this.staves_ = [];\n    /**\n     * The current active stave.\n     * @type {?Stave}\n     * @private\n     */\n\n    this.activeStave_ = null;\n    /**\n     * Time of start of execution.\n     * @type {number}\n     * @private\n     */\n\n    this.startTime_ = 0;\n    /**\n     * Number of 1/64ths notes since the start.\n     * @type {number}\n     * @private\n     */\n\n    this.clock64ths_ = 0;\n    /**\n     * The speed at which to play notes in beats per minute.\n     * @type {number}\n     * @private\n     */\n\n    this.bpm_ = 100;\n    /**\n     * The id of the last setTimeout call. Used for game reset.\n     * @type {number}\n     * @private\n     */\n\n    this.pid_ = 0;\n    /**\n     * Callback function for on finish playing.\n     * @param {Array<Transcript>} transcripts The transcripts of the notes\n     *    played.\n     * @private\n     */\n\n    this.onFinishPlayCb_ = null;\n  }\n  /**\n   * Sets the callback for on finish playing.\n   * @param {function(Array<Transcript>)} onFinishPlayCb The call back to set\n   *    for calling after code has finished playing.\n   */\n\n\n  _createClass(Music, [{\n    key: \"setOnFinishPlayCallback\",\n    value: function setOnFinishPlayCallback(onFinishPlayCb) {\n      this.onFinishPlayCb_ = onFinishPlayCb;\n    }\n    /**\n     * Set the speed (in beats per minute).\n     * @param {number} bpm The speed to set to.\n     */\n\n  }, {\n    key: \"setBpm\",\n    value: function setBpm(bpm) {\n      if (bpm <= 0) {\n        console.error('Invalid bpm');\n        return;\n      }\n\n      this.bpm_ = bpm;\n      this.startTime_ = 0;\n    }\n    /**\n     * Returns the BPM.\n     * @return {number} The current bpm set.\n     */\n\n  }, {\n    key: \"getBpm\",\n    value: function getBpm() {\n      return this.bpm_;\n    }\n    /**\n     * Generates code and logs it to the console.\n     */\n\n  }, {\n    key: \"logGeneratedCode\",\n    value: function logGeneratedCode() {\n      var codeJs = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace);\n      console.log(codeJs);\n    }\n    /**\n     * Reset the music to the start position, clear the display, and kill any\n     * pending tasks.\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      // Kill any task.\n      clearTimeout(this.pid_);\n      this.staves_.forEach(function (stave) {\n        stave.stopSound();\n      });\n      this.interpreter_ = null;\n      this.activeStave_ = null;\n      this.staves_.length = 0;\n      this.clock64ths_ = 0;\n      this.startTime_ = 0;\n    }\n    /**\n     * Plays music based on the blocks on the workspace.\n     */\n\n  }, {\n    key: \"execute\",\n    value: function execute() {\n      var _this2 = this;\n\n      this.reset(); // Get generated code from workspace\n\n      var code = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace); // Run user code.\n\n      this.interpreter_ = new js_interpreter__WEBPACK_IMPORTED_MODULE_3___default.a(code, this.interpreterInit_.bind(this)); // TODO add support for multiple threads (staves).\n\n      var interpreter = new js_interpreter__WEBPACK_IMPORTED_MODULE_3___default.a(''); // Replace this thread's global scope with the cross-thread global.\n\n      interpreter.stateStack[0].scope = this.interpreter_.globalScope; // Add start call.\n\n      interpreter.appendCode('start();\\n');\n      this.staves_.push(new Stave(interpreter.stateStack));\n      this.pid_ = setTimeout(function () {\n        return _this2.tick_();\n      }, 100);\n    }\n    /**\n     * Inject the Music API into a JavaScript interpreter.\n     * @param {!Interpreter} interpreter The JS-Interpreter.\n     * @param {!Interpreter.Object} globalObject Global object.\n     * @private\n     */\n\n  }, {\n    key: \"interpreterInit_\",\n    value: function interpreterInit_(interpreter, globalObject) {\n      var _this3 = this;\n\n      // API\n      var wrapper;\n\n      wrapper = function wrapper(duration, pitch, _id) {\n        _this3.play_(duration, pitch);\n      };\n\n      interpreter.setProperty(globalObject, 'play', interpreter.createNativeFunction(wrapper));\n\n      wrapper = function wrapper(duration, _id) {\n        _this3.rest_(duration);\n      };\n\n      interpreter.setProperty(globalObject, 'rest', interpreter.createNativeFunction(wrapper)); // TODO implement setInstrument API.\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note play.\n     * @private\n     */\n\n  }, {\n    key: \"play_\",\n    value: function play_(duration, pitch) {\n      this.activeStave_.play(duration, pitch, this.clock64ths_);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @private\n     */\n\n  }, {\n    key: \"rest_\",\n    value: function rest_(duration) {\n      this.activeStave_.rest(duration, this.clock64ths_);\n    }\n    /**\n     * Execute a 1/64th tick of the program.\n     * @private\n     */\n\n  }, {\n    key: \"tick_\",\n    value: function tick_() {\n      var _this4 = this;\n\n      // Delay between start of each beat (1/64ths of a whole note).\n      var scaleDuration = 60000 / (this.bpm_ * 64);\n\n      if (!this.startTime_) {\n        // Either the first tick, or first tick after slider was adjusted.\n        this.startTime_ = Date.now() - this.clock64ths_ * scaleDuration;\n      }\n\n      var done = true;\n      this.staves_.forEach(function (stave) {\n        if (!stave.done) {\n          done = false;\n\n          if (!stave.isPaused(_this4.clock64ths_)) {\n            _this4.executeChunk_(stave);\n          }\n        }\n      });\n\n      if (done) {\n        if (this.onFinishPlayCb_) {\n          var finishedTranscripts = Array.from(this.staves_, function (stave) {\n            return stave.getTranscript();\n          });\n          this.onFinishPlayCb_(finishedTranscripts);\n        }\n      } else {\n        this.clock64ths_++;\n        var ms = this.startTime_ + this.clock64ths_ * scaleDuration - Date.now();\n        this.pid_ = setTimeout(function () {\n          return _this4.tick_();\n        }, ms);\n      }\n    }\n    /**\n     * Execute a bite-sized chunk of the user's code.\n     * @param {Stave} stave The stave to execute.\n     * @private\n     */\n\n  }, {\n    key: \"executeChunk_\",\n    value: function executeChunk_(stave) {\n      this.activeStave_ = stave; // Switch the interpreter to run the provided staff.\n\n      this.interpreter_.stateStack = stave.stateStack;\n      var ticks = 10000;\n      var go;\n\n      do {\n        try {\n          go = this.interpreter_.step();\n        } catch (e) {\n          // User error, terminate in shame.\n          alert(e);\n          go = false;\n        }\n\n        if (ticks-- == 0) {\n          console.warn('Staff ' + stave.id + ' is running slowly.');\n          return;\n        }\n\n        if (stave.isPaused(this.clock64ths_)) {\n          // Previously executed command (play or rest) requested a pause.\n          return;\n        }\n      } while (go); // Thread complete.  Wrap up.\n\n\n      stave.stopSound(stave);\n      stave.done = true;\n    }\n  }]);\n\n  return Music;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbXVzaWMuanM/MmE0ZiJdLCJuYW1lcyI6WyJSRVNUIiwiVHJhbnNjcmlwdCIsIm5vdGVzQW5kUmVzdHMiLCJkdXJhdGlvbnMiLCJsZW5ndGgiLCJjb25zb2xlIiwiZXJyb3IiLCJzaXplIiwicmVhZGFibGVUZXh0XyIsImkiLCJhcHBlbmROb3RlIiwidGV4dCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJpdGVtcyIsInNwbGl0Iiwiam9pbiIsIm5vdGUiLCJkdXJhdGlvbiIsInB1c2giLCJhcHBlbmRSZWFkYWJsZVRleHRfIiwiZ2V0RHVyYXRpb25UZXh0XyIsImJwbSIsImNhbGxiYWNrIiwic3BlZWRNb2QiLCJzdGFydFRpbWUiLCJUb25lIiwibGFzdFRpbWVzdGFtcCIsImZvckVhY2giLCJub3RlUGxheWVyIiwicGxheU5vdGUiLCJzZXRUaW1lb3V0IiwiZHVyYXRpb25UZXh0IiwiU3RhdmUiLCJzdGF0ZVN0YWNrIiwiZG9uZSIsInBhdXNlVW50aWw2NHRoc18iLCJ0cmFuc2NyaXB0XyIsIm5vdGVfIiwiY2xvY2s2NHRocyIsInBpdGNoIiwic3RvcFNvdW5kIiwidHJpZ2dlckF0dGFjayIsImFwcGVuZFJlc3QiLCJ0cmlnZ2VyUmVsZWFzZSIsIk11c2ljIiwid29ya3NwYWNlIiwiaW50ZXJwcmV0ZXJfIiwic3RhdmVzXyIsImFjdGl2ZVN0YXZlXyIsInN0YXJ0VGltZV8iLCJjbG9jazY0dGhzXyIsImJwbV8iLCJwaWRfIiwib25GaW5pc2hQbGF5Q2JfIiwib25GaW5pc2hQbGF5Q2IiLCJjb2RlSnMiLCJCbG9ja2x5IiwiSmF2YVNjcmlwdCIsIndvcmtzcGFjZVRvQ29kZSIsImxvZyIsImNsZWFyVGltZW91dCIsInN0YXZlIiwicmVzZXQiLCJjb2RlIiwiSW50ZXJwcmV0ZXIiLCJpbnRlcnByZXRlckluaXRfIiwiYmluZCIsImludGVycHJldGVyIiwic2NvcGUiLCJnbG9iYWxTY29wZSIsImFwcGVuZENvZGUiLCJ0aWNrXyIsImdsb2JhbE9iamVjdCIsIndyYXBwZXIiLCJfaWQiLCJwbGF5XyIsInNldFByb3BlcnR5IiwiY3JlYXRlTmF0aXZlRnVuY3Rpb24iLCJyZXN0XyIsInBsYXkiLCJyZXN0Iiwic2NhbGVEdXJhdGlvbiIsIkRhdGUiLCJub3ciLCJpc1BhdXNlZCIsImV4ZWN1dGVDaHVua18iLCJmaW5pc2hlZFRyYW5zY3JpcHRzIiwiQXJyYXkiLCJmcm9tIiwiZ2V0VHJhbnNjcmlwdCIsIm1zIiwidGlja3MiLCJnbyIsInN0ZXAiLCJlIiwiYWxlcnQiLCJ3YXJuIiwiaWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ0EsSUFBTUEsSUFBSSxHQUFHLE1BQWI7QUFFQTtBQUNBO0FBQ0E7O0FBQ08sSUFBTUMsVUFBYjtBQUNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNFLHdCQUFnRDtBQUFBLFFBQXBDQyxhQUFvQyx1RUFBcEIsRUFBb0I7QUFBQSxRQUFoQkMsU0FBZ0IsdUVBQUosRUFBSTs7QUFBQTs7QUFDOUMsUUFBSUQsYUFBYSxDQUFDRSxNQUFkLEtBQXlCRCxTQUFTLENBQUNDLE1BQXZDLEVBQStDO0FBQzdDQyxhQUFPLENBQUNDLEtBQVIsQ0FBYyw2QkFBZDtBQUNEOztBQUNELFNBQUtKLGFBQUwsR0FBcUIsRUFBckI7QUFDQSxTQUFLQyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsU0FBS0ksSUFBTCxHQUFZLENBQVo7QUFDQSxTQUFLQyxhQUFMLEdBQXFCLEVBQXJCOztBQUNBLFNBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR1AsYUFBYSxDQUFDRSxNQUFsQyxFQUEwQ0ssQ0FBQyxFQUEzQyxFQUErQztBQUM3QyxXQUFLQyxVQUFMLENBQWdCUixhQUFhLENBQUNPLENBQUQsQ0FBN0IsRUFBa0NO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bEIsRUFBTDtBQUNELFNBRkQsQ0FFRSxPQUFPQyxDQUFQLEVBQVU7QUFDVjtBQUNBQyxlQUFLLENBQUNELENBQUQsQ0FBTDtBQUNBRixZQUFFLEdBQUcsS0FBTDtBQUNEOztBQUNELFlBQUlELEtBQUssTUFBTSxDQUFmLEVBQWtCO0FBQ2hCeEYsaUJBQU8sQ0FBQzZGLElBQVIsQ0FBYSxXQUFXbkMsS0FBSyxDQUFDb0MsRUFBakIsR0FBc0IscUJBQW5DO0FBQ0E7QUFDRDs7QUFDRCxZQUFJcEMsS0FBSyxDQUFDdUIsUUFBTixDQUFlLEtBQUtsQyxXQUFwQixDQUFKLEVBQXNDO0FBQ3BDO0FBQ0E7QUFDRDtBQUNGLE9BaEJELFFBZ0JTMEMsRUFoQlQsRUFObUIsQ0F1Qm5COzs7QUFDQS9CLFdBQUssQ0FBQ3JCLFNBQU4sQ0FBZ0JxQixLQUFoQjtBQUNBQSxXQUFLLENBQUMzQixJQUFOLEdBQWEsSUFBYjtBQUNEO0FBN1BIOztBQUFBO0FBQUEiLCJmaWxlIjoiLi9zcmMvbXVzaWMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBHYW1lIGxvZ2ljIGZvciBtdXNpYyBnYW1lLlxuICovXG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5pbXBvcnQgJy4vbXVzaWNfYmxvY2tzJztcbmltcG9ydCAnLi9tdXNpY19ibG9ja19nZW5lcmF0b3JzJztcbmltcG9ydCBJbnRlcnByZXRlciBmcm9tICdqcy1pbnRlcnByZXRlcic7XG5pbXBvcnQge25vdGVQbGF5ZXJ9IGZyb20gJy4vbm90ZV9wbGF5ZXInO1xuaW1wb3J0ICogYXMgVG9uZSBmcm9tICd0b25lJztcblxuLyoqXG4gKiBDb25zdGFudCBkZW5vdGluZyBhIHJlc3QuXG4gKi9cbmNvbnN0IFJFU1QgPSAnUkVTVCc7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIHRyYW5zY3JpcHQgb2Ygbm90ZXMgcGxheWVkLlxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNjcmlwdCB7XG4gIC8qKlxuICAgKiBDbGFzcyBmb3IgaG9sZGluZyB0cmFuc2NyaXB0IG9mIG5vdGVzIHRoYXQgd2VyZSBwbGF5ZWQuIEV4cGVjdHNcbiAgICogbm90ZXNBbmRSZXN0cyBhbmQgZHVyYXRpb25zIHRvIGhhdmUgYSBtYXRjaGluZyBsZW5ndGguXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gbm90ZXNBbmRSZXN0cyBUaGUgbm90ZXMgYW5kIHJlc3RzLlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGR1cmF0aW9ucyBUaGUgZHVyYXRpb25zIG9mIHRoZSBub3RlcyBhbmQgcmVzdHMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihub3Rlc0FuZFJlc3RzID0gW10sIGR1cmF0aW9ucyA9IFtdKSB7XG4gICAgaWYgKG5vdGVzQW5kUmVzdHMubGVuZ3RoICE9PSBkdXJhdGlvbnMubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUcmFuc2NyaXB0IGxlbmd0aCBtaXNtYXRjaC4nKTtcbiAgICB9XG4gICAgdGhpcy5ub3Rlc0FuZFJlc3RzID0gW107XG4gICAgdGhpcy5kdXJhdGlvbnMgPSBbXTtcbiAgICB0aGlzLnNpemUgPSAwO1xuICAgIHRoaXMucmVhZGFibGVUZXh0XyA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90ZXNBbmRSZXN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hcHBlbmROb3RlKG5vdGVzQW5kUmVzdHNbaV0sIGR1cmF0aW9uc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGR1cmF0aW9uIG51bWJlciBpbnRvIGFwcHJvcHJpYXRlIHN0cmluZy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIFRoZSBkdXJhdGlvbi5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgc3RyaW5nIHZlcnNpb24gb2YgZHVyYXRpb24uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgZ2V0RHVyYXRpb25UZXh0XyhkdXJhdGlvbikge1xuICAgIGxldCBkdXJhdGlvblRleHQgPSAndW5rbm93bic7XG4gICAgc3dpdGNoIChkdXJhdGlvbikge1xuICAgICAgY2FzZSAxOlxuICAgICAgICBkdXJhdGlvblRleHQgPSAnd2hvbGUnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMC41OlxuICAgICAgICBkdXJhdGlvblRleHQgPSAnaGFsZic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAwLjI1OlxuICAgICAgICBkdXJhdGlvblRleHQgPSAncXVhcnRlcic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAwLjEyNTpcbiAgICAgICAgZHVyYXRpb25UZXh0ID0gJ2VpZ2h0aCc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gZHVyYXRpb25UZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVybmFsIG1ldGhvZCBmb3IgYXBwZW5kaW5nIHRleHQgdG8gdHJhbnNjcmlwdCB0ZXh0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBhcHBlbmQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcHBlbmRSZWFkYWJsZVRleHRfKHRleHQpIHtcbiAgICBpZiAodGhpcy5yZWFkYWJsZVRleHRfKSB7XG4gICAgICB0aGlzLnJlYWRhYmxlVGV4dF8gKz0gJywgJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGV4dCA9IHRleHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0ZXh0LnNsaWNlKDEpO1xuICAgIH1cbiAgICB0aGlzLnJlYWRhYmxlVGV4dF8gKz0gdGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHNlbnRlbmNlIHJlcHJlc2VudGluZyB0aGUgbm90ZXMgcGxheWVkIGluIHRoaXMgdHJhbnNjcmlwdC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgc2VudGVuY2UuXG4gICAqL1xuICBnZXRSZWFkYWJsZVRleHQoKSB7XG4gICAgaWYgKCF0aGlzLnJlYWRhYmxlVGV4dF8pIHtcbiAgICAgIHJldHVybiAnRW1wdHkuJztcbiAgICB9XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLnJlYWRhYmxlVGV4dF8uc3BsaXQoJywnKTtcbiAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV0gPSAnIGFuZCAnICsgaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBpdGVtcy5qb2luKCcsJykgKyAnLic7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kcyBub3RlIHRvIHRyYW5zY3JpcHQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBub3RlIFRoZSBwaXRjaCBvZiBub3RlIHRvIGFwcGVuZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIFRoZSBkdXJhdGlvbiBvZiB0aGUgbm90ZS5cbiAgICovXG4gIGFwcGVuZE5vdGUobm90ZSwgZHVyYXRpb24pIHtcbiAgICB0aGlzLm5vdGVzQW5kUmVzdHMucHVzaChub3RlKTtcbiAgICB0aGlzLmR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKTtcbiAgICB0aGlzLmFwcGVuZFJlYWRhYmxlVGV4dF8oXG4gICAgICAgIGBwbGF5ICR7VHJhbnNjcmlwdC5nZXREdXJhdGlvblRleHRfKGR1cmF0aW9uKX0gbm90ZSAke25vdGV9YCk7XG4gICAgdGhpcy5zaXplKys7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kcyByZXN0IHRvIHRyYW5zY3JpcHQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBUaGUgZHVyYXRpb24gb2YgdGhlIHJlc3QuXG4gICAqL1xuICBhcHBlbmRSZXN0KGR1cmF0aW9uKSB7XG4gICAgdGhpcy5ub3Rlc0FuZFJlc3RzLnB1c2goUkVTVCk7XG4gICAgdGhpcy5kdXJhdGlvbnMucHVzaChkdXJhdGlvbik7XG4gICAgdGhpcy5hcHBlbmRSZWFkYWJsZVRleHRfKFxuICAgICAgICBgJHtUcmFuc2NyaXB0LmdldER1cmF0aW9uVGV4dF8oZHVyYXRpb24pfSByZXN0YCk7XG4gICAgdGhpcy5zaXplKys7XG4gIH1cblxuICAvKipcbiAgICogUGxheXMgdGhlIG5vdGVzIGluIHRoaXMgdHJhbnNjcmlwdC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGJwbSBUaGUgc3BlZWQgdG8gcGxheSBhdCBpbiBicG0uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2sgQ2FsbGJhY2sgYWZ0ZXIgcGxheWJhY2sgaGFzIGNvbXBsZXRlZC5cbiAgICovXG4gIHBsYXliYWNrKGJwbSA9IDEwMCwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBzcGVlZE1vZCA9IDYwIC8gYnBtO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IFRvbmUubm93KCk7XG4gICAgbGV0IGxhc3RUaW1lc3RhbXAgPSBzdGFydFRpbWU7XG4gICAgdGhpcy5ub3Rlc0FuZFJlc3RzLmZvckVhY2goKG5vdGUsIGkpID0+IHtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbnNbaV0gKiBzcGVlZE1vZDtcbiAgICAgIGlmIChub3RlICE9PSBSRVNUKSB7XG4gICAgICAgIG5vdGVQbGF5ZXIucGxheU5vdGUobm90ZSwgZHVyYXRpb24sIGxhc3RUaW1lc3RhbXApO1xuICAgICAgfVxuICAgICAgbGFzdFRpbWVzdGFtcCArPSBkdXJhdGlvbjtcbiAgICB9KTtcbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAobGFzdFRpbWVzdGFtcCAtIHN0YXJ0VGltZSArIDAuNSkgKiAxMDAwKTtcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBtdXNpY2FsIHN0YXZlIChzdGFmZikgb2Ygbm90ZXMgdG8gcGxheS5cbiAqL1xuY2xhc3MgU3RhdmUge1xuICAvKipcbiAgICogQ2xhc3MgaG9sZGluZyBjb2RlIGZvciBtdXNpYyB0byBwbGF5LlxuICAgKiBAcGFyYW0ge0FycmF5PEludGVycHJldGVyLlN0YXRlPn0gc3RhdGVTdGFjayBUaGUgc3RhdGVTdGFjayBjb250YWluaW5nIGNvZGVcbiAgICogICAgZm9yIHRoaXMgc3RhdmUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihzdGF0ZVN0YWNrKSB7XG4gICAgLyoqXG4gICAgICogVGhlIHN0YXRlIHN0YWNrLlxuICAgICAqIEB0eXBlIHtBcnJheTxJbnRlcnByZXRlci5TdGF0ZT59XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZVN0YWNrID0gc3RhdGVTdGFjaztcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgYWxsIHRoZSBub3RlcyBoYXZlIGJlbiBwbGF5ZWQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5kb25lID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdGltZSB0byBwYXVzZSB0aWxsLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnBhdXNlVW50aWw2NHRoc18gPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zY3JpcHQgb2Ygbm90ZXMgcGxheWVkLlxuICAgICAqIEB0eXBlIHtUcmFuc2NyaXB0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50cmFuc2NyaXB0XyA9IG5ldyBUcmFuc2NyaXB0KCk7XG5cbiAgICAvKipcbiAgICAgKiBDdXJyZW50bHkgcGxheWluZyBub3RlLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm5vdGVfID0gJyc7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdHJhbnNjcmlwdCBmb3IgdGhpcyBzdGF2ZS5cbiAgICogQHJldHVybiB7VHJhbnNjcmlwdH0gVGhlIHRyYW5zY3JpcHQuXG4gICAqL1xuICBnZXRUcmFuc2NyaXB0KCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zY3JpcHRfO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBzdGF2ZSBpcyBjdXJyZW50bHkgcGF1c2VkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gY2xvY2s2NHRocyBOdW1iZXIgb2YgMS82NHRocyBub3RlcyBzaW5jZSB0aGUgc3RhcnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBzdGF2ZSBpcyBwYXVzZWQuXG4gICAqL1xuICBpc1BhdXNlZChjbG9jazY0dGhzKSB7XG4gICAgcmV0dXJuIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA+IGNsb2NrNjR0aHM7XG4gIH1cblxuICAvKipcbiAgICogUGxheSBvbmUgbm90ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIEZyYWN0aW9uIG9mIGEgd2hvbGUgbm90ZSBsZW5ndGggdG8gcGxheS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBpdGNoIE5vdGUgdG8gcGxheS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNsb2NrNjR0aHMgTnVtYmVyIG9mIDEvNjR0aHMgbm90ZXMgc2luY2UgdGhlIHN0YXJ0LlxuICAgKi9cbiAgcGxheShkdXJhdGlvbiwgcGl0Y2gsIGNsb2NrNjR0aHMpIHtcbiAgICB0aGlzLnN0b3BTb3VuZCgpO1xuICAgIHRoaXMubm90ZV8gPSBwaXRjaDtcbiAgICBub3RlUGxheWVyLnRyaWdnZXJBdHRhY2socGl0Y2gpO1xuICAgIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA9IGR1cmF0aW9uICogNjQgKyBjbG9jazY0dGhzO1xuICAgIC8vIE1ha2UgYSByZWNvcmQgb2YgdGhpcyBub3RlLlxuICAgIHRoaXMudHJhbnNjcmlwdF8uYXBwZW5kTm90ZShwaXRjaCwgZHVyYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgb25lIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBGcmFjdGlvbiBvZiBhIHdob2xlIG5vdGUgbGVuZ3RoIHRvIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjbG9jazY0dGhzIE51bWJlciBvZiAxLzY0dGhzIG5vdGVzIHNpbmNlIHRoZSBzdGFydC5cbiAgICovXG4gIHJlc3QoZHVyYXRpb24sIGNsb2NrNjR0aHMpIHtcbiAgICB0aGlzLnN0b3BTb3VuZCgpO1xuICAgIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA9IGR1cmF0aW9uICogNjQgKyBjbG9jazY0dGhzO1xuICAgIC8vIE1ha2UgYSByZWNvcmQgb2YgdGhpcyByZXN0LlxuICAgIHRoaXMudHJhbnNjcmlwdF8uYXBwZW5kUmVzdChkdXJhdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogU3RvcHMgY3VycmVudGx5IHBsYXlpbmcgbm90ZS5cbiAgICovXG4gIHN0b3BTb3VuZCgpIHtcbiAgICBpZiAodGhpcy5ub3RlXykge1xuICAgICAgbm90ZVBsYXllci50cmlnZ2VyUmVsZWFzZSgpO1xuICAgICAgdGhpcy5ub3RlXyA9ICcnO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIExvZ2ljIGZvciBwbGF5aW5nIG11c2ljLlxuICovXG5leHBvcnQgY2xhc3MgTXVzaWMge1xuICAvKipcbiAgICogQ2xhc3MgZm9yIGEgbXVzaWMgZ2FtZS5cbiAgICogQHBhcmFtIHtCbG9ja2x5LldvcmtzcGFjZVN2Z30gd29ya3NwYWNlIFRoZSBCbG9ja2x5IHdvcmtzcGFjZS5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3b3Jrc3BhY2UpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgQmxvY2tseSB3b3Jrc3BhY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZ2FtZS5cbiAgICAgKiBAdHlwZSB7IUJsb2NrbHkuV29ya3NwYWNlU3ZnfVxuICAgICAqL1xuICAgIHRoaXMud29ya3NwYWNlID0gd29ya3NwYWNlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGludGVycHJldGVyLlxuICAgICAqIEB0eXBlIHs/SW50ZXJwcmV0ZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmludGVycHJldGVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXk8U3RhdmU+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdGF2ZXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhY3RpdmUgc3RhdmUuXG4gICAgICogQHR5cGUgez9TdGF2ZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRpbWUgb2Ygc3RhcnQgb2YgZXhlY3V0aW9uLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIDEvNjR0aHMgbm90ZXMgc2luY2UgdGhlIHN0YXJ0LlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNsb2NrNjR0aHNfID0gMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzcGVlZCBhdCB3aGljaCB0byBwbGF5IG5vdGVzIGluIGJlYXRzIHBlciBtaW51dGUuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYnBtXyA9IDEwMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBpZCBvZiB0aGUgbGFzdCBzZXRUaW1lb3V0IGNhbGwuIFVzZWQgZm9yIGdhbWUgcmVzZXQuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucGlkXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmb3Igb24gZmluaXNoIHBsYXlpbmcuXG4gICAgICogQHBhcmFtIHtBcnJheTxUcmFuc2NyaXB0Pn0gdHJhbnNjcmlwdHMgVGhlIHRyYW5zY3JpcHRzIG9mIHRoZSBub3Rlc1xuICAgICAqICAgIHBsYXllZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub25GaW5pc2hQbGF5Q2JfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjYWxsYmFjayBmb3Igb24gZmluaXNoIHBsYXlpbmcuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oQXJyYXk8VHJhbnNjcmlwdD4pfSBvbkZpbmlzaFBsYXlDYiBUaGUgY2FsbCBiYWNrIHRvIHNldFxuICAgKiAgICBmb3IgY2FsbGluZyBhZnRlciBjb2RlIGhhcyBmaW5pc2hlZCBwbGF5aW5nLlxuICAgKi9cbiAgc2V0T25GaW5pc2hQbGF5Q2FsbGJhY2sob25GaW5pc2hQbGF5Q2IpIHtcbiAgICB0aGlzLm9uRmluaXNoUGxheUNiXyA9IG9uRmluaXNoUGxheUNiO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3BlZWQgKGluIGJlYXRzIHBlciBtaW51dGUpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYnBtIFRoZSBzcGVlZCB0byBzZXQgdG8uXG4gICAqL1xuICBzZXRCcG0oYnBtKSB7XG4gICAgaWYgKGJwbSA8PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGJwbScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmJwbV8gPSBicG07XG4gICAgdGhpcy5zdGFydFRpbWVfID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBCUE0uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGN1cnJlbnQgYnBtIHNldC5cbiAgICovXG4gIGdldEJwbSgpIHtcbiAgICByZXR1cm4gdGhpcy5icG1fO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBjb2RlIGFuZCBsb2dzIGl0IHRvIHRoZSBjb25zb2xlLlxuICAgKi9cbiAgbG9nR2VuZXJhdGVkQ29kZSgpIHtcbiAgICBjb25zdCBjb2RlSnMgPSBCbG9ja2x5LkphdmFTY3JpcHQud29ya3NwYWNlVG9Db2RlKHRoaXMud29ya3NwYWNlKTtcbiAgICBjb25zb2xlLmxvZyhjb2RlSnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRoZSBtdXNpYyB0byB0aGUgc3RhcnQgcG9zaXRpb24sIGNsZWFyIHRoZSBkaXNwbGF5LCBhbmQga2lsbCBhbnlcbiAgICogcGVuZGluZyB0YXNrcy5cbiAgICovXG4gIHJlc2V0KCkge1xuICAgIC8vIEtpbGwgYW55IHRhc2suXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucGlkXyk7XG4gICAgdGhpcy5zdGF2ZXNfLmZvckVhY2goKHN0YXZlKSA9PiB7XG4gICAgICBzdGF2ZS5zdG9wU291bmQoKTtcbiAgICB9KTtcbiAgICB0aGlzLmludGVycHJldGVyXyA9IG51bGw7XG4gICAgdGhpcy5hY3RpdmVTdGF2ZV8gPSBudWxsO1xuICAgIHRoaXMuc3RhdmVzXy5sZW5ndGggPSAwO1xuICAgIHRoaXMuY2xvY2s2NHRoc18gPSAwO1xuICAgIHRoaXMuc3RhcnRUaW1lXyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUGxheXMgbXVzaWMgYmFzZWQgb24gdGhlIGJsb2NrcyBvbiB0aGUgd29ya3NwYWNlLlxuICAgKi9cbiAgZXhlY3V0ZSgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgLy8gR2V0IGdlbmVyYXRlZCBjb2RlIGZyb20gd29ya3NwYWNlXG4gICAgY29uc3QgY29kZSA9IEJsb2NrbHkuSmF2YVNjcmlwdC53b3Jrc3BhY2VUb0NvZGUodGhpcy53b3Jrc3BhY2UpO1xuXG4gICAgLy8gUnVuIHVzZXIgY29kZS5cbiAgICB0aGlzLmludGVycHJldGVyXyA9IG5ldyBJbnRlcnByZXRlcihjb2RlLCB0aGlzLmludGVycHJldGVySW5pdF8uYmluZCh0aGlzKSk7XG4gICAgLy8gVE9ETyBhZGQgc3VwcG9ydCBmb3IgbXVsdGlwbGUgdGhyZWFkcyAoc3RhdmVzKS5cbiAgICBjb25zdCBpbnRlcnByZXRlciA9IG5ldyBJbnRlcnByZXRlcignJyk7XG4gICAgLy8gUmVwbGFjZSB0aGlzIHRocmVhZCdzIGdsb2JhbCBzY29wZSB3aXRoIHRoZSBjcm9zcy10aHJlYWQgZ2xvYmFsLlxuICAgIGludGVycHJldGVyLnN0YXRlU3RhY2tbMF0uc2NvcGUgPSB0aGlzLmludGVycHJldGVyXy5nbG9iYWxTY29wZTtcbiAgICAvLyBBZGQgc3RhcnQgY2FsbC5cbiAgICBpbnRlcnByZXRlci5hcHBlbmRDb2RlKCdzdGFydCgpO1xcbicpO1xuICAgIHRoaXMuc3RhdmVzXy5wdXNoKG5ldyBTdGF2ZShpbnRlcnByZXRlci5zdGF0ZVN0YWNrKSk7XG5cbiAgICB0aGlzLnBpZF8gPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudGlja18oKSwgMTAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmplY3QgdGhlIE11c2ljIEFQSSBpbnRvIGEgSmF2YVNjcmlwdCBpbnRlcnByZXRlci5cbiAgICogQHBhcmFtIHshSW50ZXJwcmV0ZXJ9IGludGVycHJldGVyIFRoZSBKUy1JbnRlcnByZXRlci5cbiAgICogQHBhcmFtIHshSW50ZXJwcmV0ZXIuT2JqZWN0fSBnbG9iYWxPYmplY3QgR2xvYmFsIG9iamVjdC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGludGVycHJldGVySW5pdF8oaW50ZXJwcmV0ZXIsIGdsb2JhbE9iamVjdCkge1xuICAgIC8vIEFQSVxuICAgIGxldCB3cmFwcGVyO1xuICAgIHdyYXBwZXIgPSAoZHVyYXRpb24sIHBpdGNoLCBfaWQpID0+IHtcbiAgICAgIHRoaXMucGxheV8oZHVyYXRpb24sIHBpdGNoKTtcbiAgICB9O1xuICAgIGludGVycHJldGVyLnNldFByb3BlcnR5KGdsb2JhbE9iamVjdCwgJ3BsYXknLFxuICAgICAgICBpbnRlcnByZXRlci5jcmVhdGVOYXRpdmVGdW5jdGlvbih3cmFwcGVyKSk7XG4gICAgd3JhcHBlciA9IChkdXJhdGlvbiwgX2lkKSA9PiB7XG4gICAgICB0aGlzLnJlc3RfKGR1cmF0aW9uKTtcbiAgICB9O1xuICAgIGludGVycHJldGVyLnNldFByb3BlcnR5KGdsb2JhbE9iamVjdCwgJ3Jlc3QnLFxuICAgICAgICBpbnRlcnByZXRlci5jcmVhdGVOYXRpdmVGdW5jdGlvbih3cmFwcGVyKSk7XG5cbiAgICAvLyBUT0RPIGltcGxlbWVudCBzZXRJbnN0cnVtZW50IEFQSS5cbiAgfVxuXG4gIC8qKlxuICAgKiBQbGF5IG9uZSBub3RlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gRnJhY3Rpb24gb2YgYSB3aG9sZSBub3RlIGxlbmd0aCB0byBwbGF5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGl0Y2ggTm90ZSBwbGF5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcGxheV8oZHVyYXRpb24sIHBpdGNoKSB7XG4gICAgdGhpcy5hY3RpdmVTdGF2ZV8ucGxheShkdXJhdGlvbiwgcGl0Y2gsIHRoaXMuY2xvY2s2NHRoc18pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgb25lIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBGcmFjdGlvbiBvZiBhIHdob2xlIG5vdGUgbGVuZ3RoIHRvIHJlc3QuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXN0XyhkdXJhdGlvbikge1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfLnJlc3QoZHVyYXRpb24sIHRoaXMuY2xvY2s2NHRoc18pO1xuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgMS82NHRoIHRpY2sgb2YgdGhlIHByb2dyYW0uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aWNrXygpIHtcbiAgICAvLyBEZWxheSBiZXR3ZWVuIHN0YXJ0IG9mIGVhY2ggYmVhdCAoMS82NHRocyBvZiBhIHdob2xlIG5vdGUpLlxuICAgIGNvbnN0IHNjYWxlRHVyYXRpb24gPSA2MDAwMCAvICh0aGlzLmJwbV8gKiA2NCk7XG4gICAgaWYgKCF0aGlzLnN0YXJ0VGltZV8pIHtcbiAgICAgIC8vIEVpdGhlciB0aGUgZmlyc3QgdGljaywgb3IgZmlyc3QgdGljayBhZnRlciBzbGlkZXIgd2FzIGFkanVzdGVkLlxuICAgICAgdGhpcy5zdGFydFRpbWVfID0gRGF0ZS5ub3coKSAtIHRoaXMuY2xvY2s2NHRoc18gKiBzY2FsZUR1cmF0aW9uO1xuICAgIH1cbiAgICBsZXQgZG9uZSA9IHRydWU7XG4gICAgdGhpcy5zdGF2ZXNfLmZvckVhY2goKHN0YXZlKSA9PiB7XG4gICAgICBpZiAoIXN0YXZlLmRvbmUpIHtcbiAgICAgICAgZG9uZSA9IGZhbHNlO1xuICAgICAgICBpZiAoIXN0YXZlLmlzUGF1c2VkKHRoaXMuY2xvY2s2NHRoc18pKSB7XG4gICAgICAgICAgdGhpcy5leGVjdXRlQ2h1bmtfKHN0YXZlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGRvbmUpIHtcbiAgICAgIGlmICh0aGlzLm9uRmluaXNoUGxheUNiXykge1xuICAgICAgICBjb25zdCBmaW5pc2hlZFRyYW5zY3JpcHRzID1cbiAgICAgICAgICAgIEFycmF5LmZyb20odGhpcy5zdGF2ZXNfLCAoc3RhdmUpID0+IHN0YXZlLmdldFRyYW5zY3JpcHQoKSk7XG4gICAgICAgIHRoaXMub25GaW5pc2hQbGF5Q2JfKGZpbmlzaGVkVHJhbnNjcmlwdHMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsb2NrNjR0aHNfKys7XG4gICAgICBjb25zdCBtcyA9XG4gICAgICAgICAgKHRoaXMuc3RhcnRUaW1lXyArIHRoaXMuY2xvY2s2NHRoc18gKiBzY2FsZUR1cmF0aW9uKSAtIERhdGUubm93KCk7XG4gICAgICB0aGlzLnBpZF8gPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMudGlja18oKSwgbXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgYml0ZS1zaXplZCBjaHVuayBvZiB0aGUgdXNlcidzIGNvZGUuXG4gICAqIEBwYXJhbSB7U3RhdmV9IHN0YXZlIFRoZSBzdGF2ZSB0byBleGVjdXRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhlY3V0ZUNodW5rXyhzdGF2ZSkge1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfID0gc3RhdmU7XG4gICAgLy8gU3dpdGNoIHRoZSBpbnRlcnByZXRlciB0byBydW4gdGhlIHByb3ZpZGVkIHN0YWZmLlxuICAgIHRoaXMuaW50ZXJwcmV0ZXJfLnN0YXRlU3RhY2sgPSBzdGF2ZS5zdGF0ZVN0YWNrO1xuICAgIGxldCB0aWNrcyA9IDEwMDAwO1xuICAgIGxldCBnbztcbiAgICBkbyB7XG4gICAgICB0cnkge1xuICAgICAgICBnbyA9IHRoaXMuaW50ZXJwcmV0ZXJfLnN0ZXAoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gVXNlciBlcnJvciwgdGVybWluYXRlIGluIHNoYW1lLlxuICAgICAgICBhbGVydChlKTtcbiAgICAgICAgZ28gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aWNrcy0tID09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdTdGFmZiAnICsgc3RhdmUuaWQgKyAnIGlzIHJ1bm5pbmcgc2xvd2x5LicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc3RhdmUuaXNQYXVzZWQodGhpcy5jbG9jazY0dGhzXykpIHtcbiAgICAgICAgLy8gUHJldmlvdXNseSBleGVjdXRlZCBjb21tYW5kIChwbGF5IG9yIHJlc3QpIHJlcXVlc3RlZCBhIHBhdXNlLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSB3aGlsZSAoZ28pO1xuICAgIC8vIFRocmVhZCBjb21wbGV0ZS4gIFdyYXAgdXAuXG4gICAgc3RhdmUuc3RvcFNvdW5kKHN0YXZlKTtcbiAgICBzdGF2ZS5kb25lID0gdHJ1ZTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/music.js\n");

/***/ }),

/***/ "./src/music_game_controller.js":
/*!**************************************!*\
  !*** ./src/music_game_controller.js ***!
  \**************************************/
/*! exports provided: MusicGameController */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MusicGameController\", function() { return MusicGameController; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var micromodal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! micromodal */ \"./node_modules/micromodal/dist/micromodal.es.js\");\n/* harmony import */ var _music__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./music */ \"./src/music.js\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game */ \"./src/game.js\");\n/* harmony import */ var _help_modal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./help_modal */ \"./src/help_modal.js\");\n/* harmony import */ var _key_press_modal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./key_press_modal */ \"./src/key_press_modal.js\");\n/* harmony import */ var _welcome_modal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./welcome_modal */ \"./src/welcome_modal.js\");\n/* harmony import */ var _speaker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./speaker */ \"./src/speaker.js\");\n/* harmony import */ var _tutorial__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tutorial */ \"./src/tutorial.js\");\n/* harmony import */ var _custom_cursor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./custom_cursor */ \"./src/custom_cursor.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Music game controller.\n */\n\n\n\n\n\n\n\n\n\n\n/**\n * Class for a controller for the music game, which handles\n * creation of the game and coordination of related modals, tutorials,\n * etc.\n */\n\nvar MusicGameController = /*#__PURE__*/function () {\n  /**\n   * The constructor for the music game controller.\n   */\n  function MusicGameController() {\n    var _this = this;\n\n    _classCallCheck(this, MusicGameController);\n\n    micromodal__WEBPACK_IMPORTED_MODULE_1__[\"default\"].init({\n      onClose: function onClose() {\n        return _speaker__WEBPACK_IMPORTED_MODULE_7__[\"speaker\"].cancel();\n      }\n    });\n    /**\n     * The shared Blockly Workspace.\n     * @type {!Blockly.WorkspaceSvg}\n     * @private\n     */\n\n    this.workspace = this.createWorkspace_();\n    /**\n     * The music logic object.\n     * @type {Music}\n     * @private\n     */\n\n    this.music_ = new _music__WEBPACK_IMPORTED_MODULE_2__[\"Music\"](this.workspace);\n    this.registerPlayShortcut_();\n    /**\n     * The music game object.\n     * @type {MusicGame}\n     * @private\n     */\n\n    this.game_ = this.createGame();\n    /**\n     * Whether to only play goal text.\n     * @type {boolean}\n     */\n\n    this.playOnly = false;\n    var helpModal = new _help_modal__WEBPACK_IMPORTED_MODULE_4__[\"HelpModal\"]('modal-1', 'modalButton');\n    helpModal.init(); // Start by showing the key press modal.\n\n    new _key_press_modal__WEBPACK_IMPORTED_MODULE_5__[\"KeyPressModal\"](function () {\n      return _this.showWelcomeModal();\n    }).init();\n  }\n  /**\n   * Creates a MusicGame object with the appropriate callbacks.\n   * @return {!MusicGame} The Blockly workspace.\n   * @private\n   */\n\n\n  _createClass(MusicGameController, [{\n    key: \"createGame\",\n    value: function createGame() {\n      var _this2 = this;\n\n      return new _game__WEBPACK_IMPORTED_MODULE_3__[\"MusicGame\"](this.workspace, this.music_, function (goalText, gameRef) {\n        _this2.setFeedbackText('');\n\n        _this2.setGoalText(goalText);\n\n        gameRef.speakGoal(function () {\n          blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.enableKeyboardAccessibility();\n        });\n      }, function (gameRef) {\n        var successText = 'Congratulations. You did it!';\n\n        _this2.setFeedbackText(successText);\n\n        _speaker__WEBPACK_IMPORTED_MODULE_7__[\"speaker\"].speak(successText, true, function () {\n          setTimeout(function () {\n            return gameRef.loadNextLevel();\n          }, 1000);\n        });\n      }, function (feedback, gameRef) {\n        _this2.setFeedbackText(feedback);\n\n        gameRef.speakFeedback();\n      });\n    }\n    /**\n     * Initializes the Blockly workspace.\n     * @return {!Blockly.WorkspaceSvg} The Blockly workspace.\n     * @private\n     */\n\n  }, {\n    key: \"createWorkspace_\",\n    value: function createWorkspace_() {\n      // Initialize Blockly workspace.\n      var blocklyDiv = document.getElementById('blocklyDiv');\n      var workspace = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.inject(blocklyDiv, {\n        toolbox: {\n          'kind': 'flyoutToolbox',\n          'contents': [{\n            'kind': 'block',\n            'blockxml': \"<block type=\\\"music_note\\\">\\n                          <field name=\\\"DURATION\\\">0.25</field>\\n                          <value name=\\\"PITCH\\\">\\n                            <shadow type=\\\"music_pitch\\\">\\n                              <field name=\\\"PITCH\\\">C4</field>\\n                            </shadow>\\n                          </value>\\n                        </block>\"\n          }, {\n            'kind': 'block',\n            'type': 'music_rest'\n          }]\n        }\n      });\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.NAVIGATE_ALL_FIELDS = true;\n      workspace.getMarkerManager().setCursor(new _custom_cursor__WEBPACK_IMPORTED_MODULE_9__[\"CustomCursor\"]());\n      workspace.addChangeListener(function (event) {\n        return _speaker__WEBPACK_IMPORTED_MODULE_7__[\"speaker\"].nodeToSpeech(event);\n      });\n      workspace.getFlyout().getWorkspace().addChangeListener(function (event) {\n        return _speaker__WEBPACK_IMPORTED_MODULE_7__[\"speaker\"].nodeToSpeech(event);\n      });\n      return workspace;\n    }\n    /**\n     * Registers a shortcut to play the notes on the workspace.\n     * @private\n     */\n\n  }, {\n    key: \"registerPlayShortcut_\",\n    value: function registerPlayShortcut_() {\n      var _this3 = this;\n\n      /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n      var playShortcut = {\n        name: 'playShortcut',\n        preconditionFn: function preconditionFn(workspace) {\n          return workspace.keyboardAccessibilityMode && !workspace.options.readOnly;\n        },\n        callback: function callback() {\n          return _this3.music_.execute();\n        }\n      };\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.register(playShortcut);\n      var shiftP = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.createSerializedKey(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.P, [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.SHIFT]);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.addKeyMapping(shiftP, playShortcut.name);\n    }\n    /**\n     * Sets the feedback text and speaks it out.\n     * @param {string} text The text to set the feedback to.\n     */\n\n  }, {\n    key: \"setFeedbackText\",\n    value: function setFeedbackText(text) {\n      var feedbackTextEl = document.getElementById('feedbackText');\n      feedbackTextEl.innerHTML = text.replaceAll('\\n', '<br>');\n    }\n    /**\n     * Sets the goal text.\n     * @param {string} text The text to set the goal to.\n     */\n\n  }, {\n    key: \"setGoalText\",\n    value: function setGoalText(text) {\n      var goalTextEl = document.getElementById('goalText');\n      goalTextEl.innerHTML = text.replaceAll('\\n', '<br>');\n    }\n    /**\n     * Get the music object.\n     * @return {Music} The current game object.\n     */\n\n  }, {\n    key: \"getMusic\",\n    value: function getMusic() {\n      return this.music_;\n    }\n    /**\n     * Get the game object.\n     * @return {Music} The current game object.\n     */\n\n  }, {\n    key: \"getGame\",\n    value: function getGame() {\n      return this.game_;\n    }\n    /**\n     * Start the tutorial.\n     */\n\n  }, {\n    key: \"runTutorial\",\n    value: function runTutorial() {\n      var _this4 = this;\n\n      new _tutorial__WEBPACK_IMPORTED_MODULE_8__[\"Tutorial\"](this.workspace, this.music_, function (text) {\n        return _this4.setGoalText(text);\n      }, function () {\n        return _this4.runGame();\n      }).init();\n    }\n    /**\n     * Start the Game.\n     */\n\n  }, {\n    key: \"runGame\",\n    value: function runGame() {\n      this.game_.init();\n    }\n    /**\n     * Show the welcome modal.\n     */\n\n  }, {\n    key: \"showWelcomeModal\",\n    value: function showWelcomeModal() {\n      var _this5 = this;\n\n      new _welcome_modal__WEBPACK_IMPORTED_MODULE_6__[\"WelcomeModal\"](function () {\n        return _this5.runTutorial();\n      }, function () {\n        return _this5.runGame();\n      }).init();\n    }\n  }]);\n\n  return MusicGameController;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbXVzaWNfZ2FtZV9jb250cm9sbGVyLmpzPzczYTYiXSwibmFtZXMiOlsiTXVzaWNHYW1lQ29udHJvbGxlciIsIk1pY3JvTW9kYWwiLCJpbml0Iiwib25DbG9zZSIsInNwZWFrZXIiLCJjYW5jZWwiLCJ3b3Jrc3BhY2UiLCJjcmVhdGVXb3Jrc3BhY2VfIiwibXVzaWNfIiwiTXVzaWMiLCJyZWdpc3RlclBsYXlTaG9ydGN1dF8iLCJnYW1lXyIsImNyZWF0ZUdhbWUiLCJwbGF5T25seSIsImhlbHBNb2RhbCIsIkhlbHBNb2RhbCIsIktleVByZXNzTW9kYWwiLCJzaG93V2VsY29tZU1vZGFsIiwiTXVzaWNHYW1lIiwiZ29hbFRleHQiLCJnYW1lUmVmIiwic2V0RmVlZGJhY2tUZXh0Iiwic2V0R29hbFRleHQiLCJzcGVha0dvYWwiLCJCbG9ja2x5IiwibmF2aWdhdGlvbiIsImVuYWJsZUtleWJvYXJkQWNjZXNzaWJpbGl0eSIsInN1Y2Nlc3NUZXh0Iiwic3BlYWsiLCJzZXRUaW1lb3V0IiwibG9hZE5leHRMZXZlbCIsImZlZWRiYWNrIiwic3BlYWtGZWVkYmFjayIsImJsb2NrbHlEaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5qZWN0IiwidG9vbGJveCIsIkFTVE5vZGUiLCJOQVZJR0FURV9BTExfRklFTERTIiwiZ2V0TWFya2VyTWFuYWdlciIsInNldEN1cnNvciIsIkN1c3RvbUN1cnNvciIsImFkZENoYW5nZUxpc3RlbmVyIiwiZXZlbnQiLCJub2RlVG9TcGVlY2giLCJnZXRGbHlvdXQiLCJnZXRXb3Jrc3BhY2UiLCJwbGF5U2hvcnRjdXQiLCJuYW1lIiwicHJlY29uZGl0aW9uRm4iLCJrZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlIiwib3B0aW9ucyIsInJlYWRPbmx5IiwiY2FsbGJhY2siLCJleGVjdXRlIiwiU2hvcnRjdXRSZWdpc3RyeSIsInJlZ2lzdHJ5IiwicmVnaXN0ZXIiLCJzaGlmdFAiLCJjcmVhdGVTZXJpYWxpemVkS2V5IiwidXRpbHMiLCJLZXlDb2RlcyIsIlAiLCJTSElGVCIsImFkZEtleU1hcHBpbmciLCJ0ZXh0IiwiZmVlZGJhY2tUZXh0RWwiLCJpbm5lckhUTUwiLCJyZXBsYWNlQWxsIiwiZ29hbFRleHRFbCIsIlR1dG9yaWFsIiwicnVuR2FtZSIsIldlbGNvbWVNb2RhbCIsInJ1blR1dG9yaWFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ08sSUFBTUEsbUJBQWI7QUFDRTtBQUNGO0FBQ0E7QUFDRSxpQ0FBYztBQUFBOztBQUFBOztBQUNaQyxzREFBVSxDQUFDQyxJQUFYLENBQWdCO0FBQ2RDLGFBQU8sRUFBRTtBQUFBLGVBQU1DLGdEQUFPLENBQUNDLE1BQVIsRUFBTjtBQUFBO0FBREssS0FBaEI7QUFJQTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUNJLFNBQUtDLFNBQUwsR0FBaUIsS0FBS0MsZ0JBQUwsRUFBakI7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUNJLFNBQUtDLE1BQUwsR0FBYyxJQUFJQyw0Q0FBSixDQUFVLEtBQUtILFNBQWYsQ0FBZDtBQUNBLFNBQUtJLHFCQUFMO0FBRUE7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFDSSxTQUFLQyxLQUFMLEdBQWEsS0FBS0MsVUFBTCxFQUFiO0FBRUE7QUFDSjtBQUNBO0FBQ0E7O0FBQ0ksU0FBS0MsUUFBTCxHQUFnQixLQUFoQjtBQUVBLFFBQU1DLFNBQVMsR0FBRyxJQUFJQyxxREFBSixDQUFjLFNBQWQsRUFBeUIsYUFBekIsQ0FBbEI7QUFDQUQsYUFBUyxDQUFDWixJQUFWLEdBbENZLENBb0NaOztBQUNBLFFBQUljLDhEQUFKLENBQWtCO0FBQUEsYUFBTSxLQUFJLENBQUNDLGdCQUFMLEVBQU47QUFBQSxLQUFsQixFQUFpRGYsSUFBakQ7QUFDRDtBQUVEO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7OztBQWhEQTtBQUFBO0FBQUEsaUNBaURlO0FBQUE7O0FBQ1gsYUFBTyxJQUFJZ0IsK0NBQUosQ0FBYyxLQUFLWixTQUFuQixFQUE4QixLQUFLRSxNQUFuQyxFQUNILFVBQUNXLFFBQUQsRUFBV0MsT0FBWCxFQUF1QjtBQUNyQixjQUFJLENBQUNDLGVBQUwsQ0FBcUIsRUFBckI7O0FBQ0EsY0FBSSxDQUFDQyxXQUFMLENBQWlCSCxRQUFqQjs7QUFDQUMsZUFBTyxDQUFDRyxTQUFSLENBQWtCLFlBQU07QUFDdEJDLDZEQUFPLENBQUNDLFVBQVIsQ0FBbUJDLDJCQUFuQjtBQUNELFNBRkQ7QUFHRCxPQVBFLEVBUUgsVUFBQ04sT0FBRCxFQUFhO0FBQ1gsWUFBTU8sV0FBVyxHQUFHLDhCQUFwQjs7QUFDQSxjQUFJLENBQUNOLGVBQUwsQ0FBcUJNLFdBQXJCOztBQUNBdkIsd0RBQU8sQ0FBQ3dCLEtBQVIsQ0FBY0QsV0FBZCxFQUEyQixJQUEzQixFQUFpQyxZQUFNO0FBQ3JDRSxvQkFBVSxDQUFDO0FBQUEsbUJBQU1ULE9BQU8sQ0FBQ1UsYUFBUixFQUFOO0FBQUEsV0FBRCxFQUFnQyxJQUFoQyxDQUFWO0FBQ0QsU0FGRDtBQUdELE9BZEUsRUFlSCxVQUFDQyxRQUFELEVBQVdYLE9BQVgsRUFBdUI7QUFDckIsY0FBSSxDQUFDQyxlQUFMLENBQXFCVSxRQUFyQjs7QUFDQVgsZUFBTyxDQUFDWSxhQUFSO0FBQ0QsT0FsQkUsQ0FBUDtBQW1CRDtBQUVEO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBM0VBO0FBQUE7QUFBQSx1Q0E0RXFCO0FBQ2pCO0FBQ0EsVUFBTUMsVUFBVSxHQUFHQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsWUFBeEIsQ0FBbkI7QUFDQSxVQUFNN0IsU0FBUyxHQUFHa0IsbURBQU8sQ0FBQ1ksTUFBUixDQUFlSCxVQUFmLEVBQTJCO0FBQzNDSSxlQUFPLEVBQUU7QUFDUCxrQkFBUSxlQUREO0FBRVAsc0JBQVksQ0FDVjtBQUNFLG9CQUFRLE9BRFY7QUFFRTtBQUZGLFdBRFUsRUFZVjtBQUNFLG9CQUFRLE9BRFY7QUFFRSxvQkFBUTtBQUZWLFdBWlU7QUFGTDtBQURrQyxPQUEzQixDQUFsQjtBQXNCQWIseURBQU8sQ0FBQ2MsT0FBUixDQUFnQkMsbUJBQWhCLEdBQXNDLElBQXRDO0FBQ0FqQyxlQUFTLENBQUNrQyxnQkFBVixHQUE2QkMsU0FBN0IsQ0FBdUMsSUFBSUMsMkRBQUosRUFBdkM7QUFDQXBDLGVBQVMsQ0FBQ3FDLGlCQUFWLENBQTRCLFVBQUNDLEtBQUQ7QUFBQSxlQUFXeEMsZ0RBQU8sQ0FBQ3lDLFlBQVIsQ0FBcUJELEtBQXJCLENBQVg7QUFBQSxPQUE1QjtBQUNBdEMsZUFBUyxDQUFDd0MsU0FBVixHQUFzQkMsWUFBdEIsR0FBcUNKLGlCQUFyQyxDQUNJLFVBQUNDLEtBQUQ7QUFBQSxlQUFXeEMsZ0RBQU8sQ0FBQ3lDLFlBQVIsQ0FBcUJELEtBQXJCLENBQVg7QUFBQSxPQURKO0FBRUEsYUFBT3RDLFNBQVA7QUFDRDtBQUVEO0FBQ0Y7QUFDQTtBQUNBOztBQWhIQTtBQUFBO0FBQUEsNENBaUgwQjtBQUFBOztBQUN0QjtBQUNBLFVBQU0wQyxZQUFZLEdBQUc7QUFDbkJDLFlBQUksRUFBRSxjQURhO0FBRW5CQyxzQkFBYyxFQUFFLHdCQUFTNUMsU0FBVCxFQUFvQjtBQUNsQyxpQkFBT0EsU0FBUyxDQUFDNkMseUJBQVYsSUFDSCxDQUFDN0MsU0FBUyxDQUFDOEMsT0FBVixDQUFrQkMsUUFEdkI7QUFFRCxTQUxrQjtBQU1uQkMsZ0JBQVEsRUFBRTtBQUFBLGlCQUFNLE1BQUksQ0FBQzlDLE1BQUwsQ0FBWStDLE9BQVosRUFBTjtBQUFBO0FBTlMsT0FBckI7QUFTQS9CLHlEQUFPLENBQUNnQyxnQkFBUixDQUF5QkMsUUFBekIsQ0FBa0NDLFFBQWxDLENBQTJDVixZQUEzQztBQUNBLFVBQU1XLE1BQU0sR0FBR25DLG1EQUFPLENBQUNnQyxnQkFBUixDQUF5QkMsUUFBekIsQ0FBa0NHLG1CQUFsQyxDQUNYcEMsbURBQU8sQ0FBQ3FDLEtBQVIsQ0FBY0MsUUFBZCxDQUF1QkMsQ0FEWixFQUNlLENBQUN2QyxtREFBTyxDQUFDcUMsS0FBUixDQUFjQyxRQUFkLENBQXVCRSxLQUF4QixDQURmLENBQWY7QUFFQXhDLHlEQUFPLENBQUNnQyxnQkFBUixDQUF5QkMsUUFBekIsQ0FBa0NRLGFBQWxDLENBQ0lOLE1BREosRUFDWVgsWUFBWSxDQUFDQyxJQUR6QjtBQUVEO0FBR0Q7QUFDRjtBQUNBO0FBQ0E7O0FBdklBO0FBQUE7QUFBQSxvQ0F3SWtCaUIsSUF4SWxCLEVBd0l3QjtBQUNwQixVQUFNQyxjQUFjLEdBQUdqQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsY0FBeEIsQ0FBdkI7QUFDQWdDLG9CQUFjLENBQUNDLFNBQWYsR0FBMkJGLElBQUksQ0FBQ0csVUFBTCxDQUFnQixJQUFoQixFQUFzQixNQUF0QixDQUEzQjtBQUNEO0FBRUQ7QUFDRjtBQUNBO0FBQ0E7O0FBaEpBO0FBQUE7QUFBQSxnQ0FpSmNILElBakpkLEVBaUpvQjtBQUNoQixVQUFNSSxVQUFVLEdBQUdwQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBbkI7QUFDQW1DLGdCQUFVLENBQUNGLFNBQVgsR0FBdUJGLElBQUksQ0FBQ0csVUFBTCxDQUFnQixJQUFoQixFQUFzQixNQUF0QixDQUF2QjtBQUNEO0FBRUQ7QUFDRjtBQUNBO0FBQ0E7O0FBekpBO0FBQUE7QUFBQSwrQkEwSmE7QUFDVCxhQUFPLEtBQUs3RCxNQUFaO0FBQ0Q7QUFFRDtBQUNGO0FBQ0E7QUFDQTs7QUFqS0E7QUFBQTtBQUFBLDhCQWtLWTtBQUNSLGFBQU8sS0FBS0csS0FBWjtBQUNEO0FBRUQ7QUFDRjtBQUNBOztBQXhLQTtBQUFBO0FBQUEsa0NBeUtnQjtBQUFBOztBQUNaLFVBQUk0RCxrREFBSixDQUFhLEtBQUtqRSxTQUFsQixFQUE2QixLQUFLRSxNQUFsQyxFQUNJLFVBQUMwRCxJQUFEO0FBQUEsZUFBVSxNQUFJLENBQUM1QyxXQUFMLENBQWlCNEMsSUFBakIsQ0FBVjtBQUFBLE9BREosRUFFSTtBQUFBLGVBQU0sTUFBSSxDQUFDTSxPQUFMLEVBQU47QUFBQSxPQUZKLEVBR0V0RSxJQUhGO0FBSUQ7QUFFRDtBQUNGO0FBQ0E7O0FBbExBO0FBQUE7QUFBQSw4QkFtTFk7QUFDUixXQUFLUyxLQUFMLENBQVdULElBQVg7QUFDRDtBQUVEO0FBQ0Y7QUFDQTs7QUF6TEE7QUFBQTtBQUFBLHVDQTBMcUI7QUFBQTs7QUFDakIsVUFBSXVFLDJEQUFKLENBQWlCO0FBQUEsZUFBTSxNQUFJLENBQUNDLFdBQUwsRUFBTjtBQUFBLE9BQWpCLEVBQTJDO0FBQUEsZUFBTSxNQUFJLENBQUNGLE9BQUwsRUFBTjtBQUFBLE9BQTNDLEVBQWlFdEUsSUFBakU7QUFDRDtBQTVMSDs7QUFBQTtBQUFBIiwiZmlsZSI6Ii4vc3JjL211c2ljX2dhbWVfY29udHJvbGxlci5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IE11c2ljIGdhbWUgY29udHJvbGxlci5cbiAqL1xuXG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5pbXBvcnQgTWljcm9Nb2RhbCBmcm9tICdtaWNyb21vZGFsJztcbmltcG9ydCB7TXVzaWN9IGZyb20gJy4vbXVzaWMnO1xuaW1wb3J0IHtNdXNpY0dhbWV9IGZyb20gJy4vZ2FtZSc7XG5pbXBvcnQge0hlbHBNb2RhbH0gZnJvbSAnLi9oZWxwX21vZGFsJztcbmltcG9ydCB7S2V5UHJlc3NNb2RhbH0gZnJvbSAnLi9rZXlfcHJlc3NfbW9kYWwnO1xuaW1wb3J0IHtXZWxjb21lTW9kYWx9IGZyb20gJy4vd2VsY29tZV9tb2RhbCc7XG5pbXBvcnQge3NwZWFrZXJ9IGZyb20gJy4vc3BlYWtlcic7XG5pbXBvcnQge1R1dG9yaWFsfSBmcm9tICcuL3R1dG9yaWFsJztcbmltcG9ydCB7Q3VzdG9tQ3Vyc29yfSBmcm9tICcuL2N1c3RvbV9jdXJzb3InO1xuXG4vKipcbiAqIENsYXNzIGZvciBhIGNvbnRyb2xsZXIgZm9yIHRoZSBtdXNpYyBnYW1lLCB3aGljaCBoYW5kbGVzXG4gKiBjcmVhdGlvbiBvZiB0aGUgZ2FtZSBhbmQgY29vcmRpbmF0aW9uIG9mIHJlbGF0ZWQgbW9kYWxzLCB0dXRvcmlhbHMsXG4gKiBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBNdXNpY0dhbWVDb250cm9sbGVyIHtcbiAgLyoqXG4gICAqIFRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIG11c2ljIGdhbWUgY29udHJvbGxlci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIE1pY3JvTW9kYWwuaW5pdCh7XG4gICAgICBvbkNsb3NlOiAoKSA9PiBzcGVha2VyLmNhbmNlbCgpLFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNoYXJlZCBCbG9ja2x5IFdvcmtzcGFjZS5cbiAgICAgKiBAdHlwZSB7IUJsb2NrbHkuV29ya3NwYWNlU3ZnfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy53b3Jrc3BhY2UgPSB0aGlzLmNyZWF0ZVdvcmtzcGFjZV8oKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtdXNpYyBsb2dpYyBvYmplY3QuXG4gICAgICogQHR5cGUge011c2ljfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tdXNpY18gPSBuZXcgTXVzaWModGhpcy53b3Jrc3BhY2UpO1xuICAgIHRoaXMucmVnaXN0ZXJQbGF5U2hvcnRjdXRfKCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbXVzaWMgZ2FtZSBvYmplY3QuXG4gICAgICogQHR5cGUge011c2ljR2FtZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZ2FtZV8gPSB0aGlzLmNyZWF0ZUdhbWUoKTtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gb25seSBwbGF5IGdvYWwgdGV4dC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnBsYXlPbmx5ID0gZmFsc2U7XG5cbiAgICBjb25zdCBoZWxwTW9kYWwgPSBuZXcgSGVscE1vZGFsKCdtb2RhbC0xJywgJ21vZGFsQnV0dG9uJyk7XG4gICAgaGVscE1vZGFsLmluaXQoKTtcblxuICAgIC8vIFN0YXJ0IGJ5IHNob3dpbmcgdGhlIGtleSBwcmVzcyBtb2RhbC5cbiAgICBuZXcgS2V5UHJlc3NNb2RhbCgoKSA9PiB0aGlzLnNob3dXZWxjb21lTW9kYWwoKSkuaW5pdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBNdXNpY0dhbWUgb2JqZWN0IHdpdGggdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrcy5cbiAgICogQHJldHVybiB7IU11c2ljR2FtZX0gVGhlIEJsb2NrbHkgd29ya3NwYWNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlR2FtZSgpIHtcbiAgICByZXR1cm4gbmV3IE11c2ljR2FtZSh0aGlzLndvcmtzcGFjZSwgdGhpcy5tdXNpY18sXG4gICAgICAgIChnb2FsVGV4dCwgZ2FtZVJlZikgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0RmVlZGJhY2tUZXh0KCcnKTtcbiAgICAgICAgICB0aGlzLnNldEdvYWxUZXh0KGdvYWxUZXh0KTtcbiAgICAgICAgICBnYW1lUmVmLnNwZWFrR29hbCgoKSA9PiB7XG4gICAgICAgICAgICBCbG9ja2x5Lm5hdmlnYXRpb24uZW5hYmxlS2V5Ym9hcmRBY2Nlc3NpYmlsaXR5KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIChnYW1lUmVmKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3VjY2Vzc1RleHQgPSAnQ29uZ3JhdHVsYXRpb25zLiBZb3UgZGlkIGl0ISc7XG4gICAgICAgICAgdGhpcy5zZXRGZWVkYmFja1RleHQoc3VjY2Vzc1RleHQpO1xuICAgICAgICAgIHNwZWFrZXIuc3BlYWsoc3VjY2Vzc1RleHQsIHRydWUsICgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2FtZVJlZi5sb2FkTmV4dExldmVsKCksIDEwMDApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAoZmVlZGJhY2ssIGdhbWVSZWYpID0+IHtcbiAgICAgICAgICB0aGlzLnNldEZlZWRiYWNrVGV4dChmZWVkYmFjayk7XG4gICAgICAgICAgZ2FtZVJlZi5zcGVha0ZlZWRiYWNrKCk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBCbG9ja2x5IHdvcmtzcGFjZS5cbiAgICogQHJldHVybiB7IUJsb2NrbHkuV29ya3NwYWNlU3ZnfSBUaGUgQmxvY2tseSB3b3Jrc3BhY2UuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVXb3Jrc3BhY2VfKCkge1xuICAgIC8vIEluaXRpYWxpemUgQmxvY2tseSB3b3Jrc3BhY2UuXG4gICAgY29uc3QgYmxvY2tseURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibG9ja2x5RGl2Jyk7XG4gICAgY29uc3Qgd29ya3NwYWNlID0gQmxvY2tseS5pbmplY3QoYmxvY2tseURpdiwge1xuICAgICAgdG9vbGJveDoge1xuICAgICAgICAna2luZCc6ICdmbHlvdXRUb29sYm94JyxcbiAgICAgICAgJ2NvbnRlbnRzJzogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgICdraW5kJzogJ2Jsb2NrJyxcbiAgICAgICAgICAgICdibG9ja3htbCc6IGA8YmxvY2sgdHlwZT1cIm11c2ljX25vdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGZpZWxkIG5hbWU9XCJEVVJBVElPTlwiPjAuMjU8L2ZpZWxkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8dmFsdWUgbmFtZT1cIlBJVENIXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNoYWRvdyB0eXBlPVwibXVzaWNfcGl0Y2hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZCBuYW1lPVwiUElUQ0hcIj5DNDwvZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaGFkb3c+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvdmFsdWU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Jsb2NrPmAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAna2luZCc6ICdibG9jaycsXG4gICAgICAgICAgICAndHlwZSc6ICdtdXNpY19yZXN0JyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBCbG9ja2x5LkFTVE5vZGUuTkFWSUdBVEVfQUxMX0ZJRUxEUyA9IHRydWU7XG4gICAgd29ya3NwYWNlLmdldE1hcmtlck1hbmFnZXIoKS5zZXRDdXJzb3IobmV3IEN1c3RvbUN1cnNvcigpKTtcbiAgICB3b3Jrc3BhY2UuYWRkQ2hhbmdlTGlzdGVuZXIoKGV2ZW50KSA9PiBzcGVha2VyLm5vZGVUb1NwZWVjaChldmVudCkpO1xuICAgIHdvcmtzcGFjZS5nZXRGbHlvdXQoKS5nZXRXb3Jrc3BhY2UoKS5hZGRDaGFuZ2VMaXN0ZW5lcihcbiAgICAgICAgKGV2ZW50KSA9PiBzcGVha2VyLm5vZGVUb1NwZWVjaChldmVudCkpO1xuICAgIHJldHVybiB3b3Jrc3BhY2U7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgc2hvcnRjdXQgdG8gcGxheSB0aGUgbm90ZXMgb24gdGhlIHdvcmtzcGFjZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlZ2lzdGVyUGxheVNob3J0Y3V0XygpIHtcbiAgICAvKiogQHR5cGUgeyFCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkuS2V5Ym9hcmRTaG9ydGN1dH0gKi9cbiAgICBjb25zdCBwbGF5U2hvcnRjdXQgPSB7XG4gICAgICBuYW1lOiAncGxheVNob3J0Y3V0JyxcbiAgICAgIHByZWNvbmRpdGlvbkZuOiBmdW5jdGlvbih3b3Jrc3BhY2UpIHtcbiAgICAgICAgcmV0dXJuIHdvcmtzcGFjZS5rZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlICYmXG4gICAgICAgICAgICAhd29ya3NwYWNlLm9wdGlvbnMucmVhZE9ubHk7XG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMubXVzaWNfLmV4ZWN1dGUoKSxcbiAgICB9O1xuXG4gICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LnJlZ2lzdGVyKHBsYXlTaG9ydGN1dCk7XG4gICAgY29uc3Qgc2hpZnRQID0gQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LmNyZWF0ZVNlcmlhbGl6ZWRLZXkoXG4gICAgICAgIEJsb2NrbHkudXRpbHMuS2V5Q29kZXMuUCwgW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuU0hJRlRdKTtcbiAgICBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkuYWRkS2V5TWFwcGluZyhcbiAgICAgICAgc2hpZnRQLCBwbGF5U2hvcnRjdXQubmFtZSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBmZWVkYmFjayB0ZXh0IGFuZCBzcGVha3MgaXQgb3V0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBzZXQgdGhlIGZlZWRiYWNrIHRvLlxuICAgKi9cbiAgc2V0RmVlZGJhY2tUZXh0KHRleHQpIHtcbiAgICBjb25zdCBmZWVkYmFja1RleHRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmZWVkYmFja1RleHQnKTtcbiAgICBmZWVkYmFja1RleHRFbC5pbm5lckhUTUwgPSB0ZXh0LnJlcGxhY2VBbGwoJ1xcbicsICc8YnI+Jyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZ29hbCB0ZXh0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBzZXQgdGhlIGdvYWwgdG8uXG4gICAqL1xuICBzZXRHb2FsVGV4dCh0ZXh0KSB7XG4gICAgY29uc3QgZ29hbFRleHRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb2FsVGV4dCcpO1xuICAgIGdvYWxUZXh0RWwuaW5uZXJIVE1MID0gdGV4dC5yZXBsYWNlQWxsKCdcXG4nLCAnPGJyPicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbXVzaWMgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtNdXNpY30gVGhlIGN1cnJlbnQgZ2FtZSBvYmplY3QuXG4gICAqL1xuICBnZXRNdXNpYygpIHtcbiAgICByZXR1cm4gdGhpcy5tdXNpY187XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBnYW1lIG9iamVjdC5cbiAgICogQHJldHVybiB7TXVzaWN9IFRoZSBjdXJyZW50IGdhbWUgb2JqZWN0LlxuICAgKi9cbiAgZ2V0R2FtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nYW1lXztcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB0aGUgdHV0b3JpYWwuXG4gICAqL1xuICBydW5UdXRvcmlhbCgpIHtcbiAgICBuZXcgVHV0b3JpYWwodGhpcy53b3Jrc3BhY2UsIHRoaXMubXVzaWNfLFxuICAgICAgICAodGV4dCkgPT4gdGhpcy5zZXRHb2FsVGV4dCh0ZXh0KSxcbiAgICAgICAgKCkgPT4gdGhpcy5ydW5HYW1lKClcbiAgICApLmluaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB0aGUgR2FtZS5cbiAgICovXG4gIHJ1bkdhbWUoKSB7XG4gICAgdGhpcy5nYW1lXy5pbml0KCk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyB0aGUgd2VsY29tZSBtb2RhbC5cbiAgICovXG4gIHNob3dXZWxjb21lTW9kYWwoKSB7XG4gICAgbmV3IFdlbGNvbWVNb2RhbCgoKSA9PiB0aGlzLnJ1blR1dG9yaWFsKCksICgpID0+IHRoaXMucnVuR2FtZSgpKS5pbml0KCk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/music_game_controller.js\n");

/***/ }),

/***/ "./src/note_player.js":
/*!****************************!*\
  !*** ./src/note_player.js ***!
  \****************************/
/*! exports provided: NotePlayer, notePlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NotePlayer\", function() { return NotePlayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"notePlayer\", function() { return notePlayer; });\n/* harmony import */ var tone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tone */ \"./node_modules/tone/build/esm/index.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Wrapper class for Tone.js.\n */\n\n/**\n * Wrapper class for Tone.js.\n * More information on tone.js can be found here:\n * https://tonejs.github.io/.\n */\n\nvar NotePlayer = /*#__PURE__*/function () {\n  /**\n   * Constructor for a class that plays notes.\n   */\n  function NotePlayer() {\n    _classCallCheck(this, NotePlayer);\n\n    this.synth = new tone__WEBPACK_IMPORTED_MODULE_0__[\"Synth\"]().toDestination();\n  }\n  /**\n   * Plays the given note for the given duration.\n   * @param {string} note The note to play.\n   * @param {Tone.Time} duration The duration of the note (ex: 8n, 4n, 2n).\n   * @param {Tone.Time=} time When the note should be triggered.\n   */\n\n\n  _createClass(NotePlayer, [{\n    key: \"playNote\",\n    value: function playNote(note, duration, time) {\n      this.synth.triggerAttackRelease(note, duration, time);\n    }\n    /**\n     * Triggers attack for specified note.\n     * @param {string} note The note to start.\n     */\n\n  }, {\n    key: \"triggerAttack\",\n    value: function triggerAttack(note) {\n      this.synth.triggerAttack(note, tone__WEBPACK_IMPORTED_MODULE_0__[\"now\"]());\n    }\n    /**\n     * Triggers release of note.\n     */\n\n  }, {\n    key: \"triggerRelease\",\n    value: function triggerRelease() {\n      this.synth.triggerRelease(tone__WEBPACK_IMPORTED_MODULE_0__[\"now\"]());\n    }\n  }]);\n\n  return NotePlayer;\n}();\nvar notePlayer = new NotePlayer();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbm90ZV9wbGF5ZXIuanM/OGM1NCJdLCJuYW1lcyI6WyJOb3RlUGxheWVyIiwic3ludGgiLCJUb25lIiwidG9EZXN0aW5hdGlvbiIsIm5vdGUiLCJkdXJhdGlvbiIsInRpbWUiLCJ0cmlnZ2VyQXR0YWNrUmVsZWFzZSIsInRyaWdnZXJBdHRhY2siLCJ0cmlnZ2VyUmVsZWFzZSIsIm5vdGVQbGF5ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxJQUFNQSxVQUFiO0FBQ0U7QUFDRjtBQUNBO0FBQ0Usd0JBQWM7QUFBQTs7QUFDWixTQUFLQyxLQUFMLEdBQWEsSUFBSUMsMENBQUosR0FBaUJDLGFBQWpCLEVBQWI7QUFDRDtBQUVEO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBYkE7QUFBQTtBQUFBLDZCQWNXQyxJQWRYLEVBY2lCQyxRQWRqQixFQWMyQkMsSUFkM0IsRUFjaUM7QUFDN0IsV0FBS0wsS0FBTCxDQUFXTSxvQkFBWCxDQUFnQ0gsSUFBaEMsRUFBc0NDLFFBQXRDLEVBQWdEQyxJQUFoRDtBQUNEO0FBRUQ7QUFDRjtBQUNBO0FBQ0E7O0FBckJBO0FBQUE7QUFBQSxrQ0FzQmdCRixJQXRCaEIsRUFzQnNCO0FBQ2xCLFdBQUtILEtBQUwsQ0FBV08sYUFBWCxDQUF5QkosSUFBekIsRUFBK0JGLHdDQUFBLEVBQS9CO0FBQ0Q7QUFDRDtBQUNGO0FBQ0E7O0FBM0JBO0FBQUE7QUFBQSxxQ0E0Qm1CO0FBQ2YsV0FBS0QsS0FBTCxDQUFXUSxjQUFYLENBQTBCUCx3Q0FBQSxFQUExQjtBQUNEO0FBOUJIOztBQUFBO0FBQUE7QUFpQ08sSUFBTVEsVUFBVSxHQUFHLElBQUlWLFVBQUosRUFBbkIiLCJmaWxlIjoiLi9zcmMvbm90ZV9wbGF5ZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFdyYXBwZXIgY2xhc3MgZm9yIFRvbmUuanMuXG4gKi9cblxuaW1wb3J0ICogYXMgVG9uZSBmcm9tICd0b25lJztcblxuLyoqXG4gKiBXcmFwcGVyIGNsYXNzIGZvciBUb25lLmpzLlxuICogTW9yZSBpbmZvcm1hdGlvbiBvbiB0b25lLmpzIGNhbiBiZSBmb3VuZCBoZXJlOlxuICogaHR0cHM6Ly90b25lanMuZ2l0aHViLmlvLy5cbiAqL1xuZXhwb3J0IGNsYXNzIE5vdGVQbGF5ZXIge1xuICAvKipcbiAgICogQ29uc3RydWN0b3IgZm9yIGEgY2xhc3MgdGhhdCBwbGF5cyBub3Rlcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3ludGggPSBuZXcgVG9uZS5TeW50aCgpLnRvRGVzdGluYXRpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQbGF5cyB0aGUgZ2l2ZW4gbm90ZSBmb3IgdGhlIGdpdmVuIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbm90ZSBUaGUgbm90ZSB0byBwbGF5LlxuICAgKiBAcGFyYW0ge1RvbmUuVGltZX0gZHVyYXRpb24gVGhlIGR1cmF0aW9uIG9mIHRoZSBub3RlIChleDogOG4sIDRuLCAybikuXG4gICAqIEBwYXJhbSB7VG9uZS5UaW1lPX0gdGltZSBXaGVuIHRoZSBub3RlIHNob3VsZCBiZSB0cmlnZ2VyZWQuXG4gICAqL1xuICBwbGF5Tm90ZShub3RlLCBkdXJhdGlvbiwgdGltZSkge1xuICAgIHRoaXMuc3ludGgudHJpZ2dlckF0dGFja1JlbGVhc2Uobm90ZSwgZHVyYXRpb24sIHRpbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGF0dGFjayBmb3Igc3BlY2lmaWVkIG5vdGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBub3RlIFRoZSBub3RlIHRvIHN0YXJ0LlxuICAgKi9cbiAgdHJpZ2dlckF0dGFjayhub3RlKSB7XG4gICAgdGhpcy5zeW50aC50cmlnZ2VyQXR0YWNrKG5vdGUsIFRvbmUubm93KCkpO1xuICB9XG4gIC8qKlxuICAgKiBUcmlnZ2VycyByZWxlYXNlIG9mIG5vdGUuXG4gICAqL1xuICB0cmlnZ2VyUmVsZWFzZSgpIHtcbiAgICB0aGlzLnN5bnRoLnRyaWdnZXJSZWxlYXNlKFRvbmUubm93KCkpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBub3RlUGxheWVyID0gbmV3IE5vdGVQbGF5ZXIoKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/note_player.js\n");

/***/ }),

/***/ "./src/overrides.js":
/*!**************************!*\
  !*** ./src/overrides.js ***!
  \**************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _speaker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./speaker */ \"./src/speaker.js\");\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview The class representing a line cursor.\n * A line cursor traverses the blocks as if they were\n * lines of code in a text editor.\n * Previous and next go up and down lines. In and out go\n * through the elements in a line.\n * @author aschmiedt@google.com (Abby Schmiedt)\n */\n\n\n\n\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.handleEnterForWS_ = function (workspace) {\n  var cursor = workspace.getCursor();\n  var curNode = cursor.getCurNode();\n  var nodeType = curNode.getType();\n\n  if (nodeType == blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.FIELD && curNode.getLocation().isClickable()) {\n    // TODO: Had to override so I could add this speaker in.\n    _speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak('Use next and previous to read off your options.', true);\n\n    /** @type {!Blockly.Field} */\n    curNode.getLocation().showEditor();\n  } else if (curNode.isConnection() || nodeType == blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.WORKSPACE) {\n    blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.markAtCursor_();\n  } else if (nodeType == blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.BLOCK) {\n    blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.warn_('Cannot mark a block.');\n  } else if (nodeType == blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.STACK) {\n    blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.warn_('Cannot mark a stack.');\n  }\n};\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.FieldDropdown.prototype.onBlocklyAction = function (action) {\n  var fieldNextOptions = 'To select this option hit enter';\n\n  if (this.menu_) {\n    switch (action.name) {\n      case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.PREVIOUS:\n        this.menu_.highlightPrevious();\n        _speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak(this.menu_.highlightedItem_.content_.alt, true);\n        _speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak(fieldNextOptions);\n        return true;\n\n      case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.NEXT:\n        this.menu_.highlightNext(); // TODO: Needed to override so that I could speak out the location when\n        // it changes.\n\n        _speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak(this.menu_.highlightedItem_.content_.alt, true);\n        _speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak(fieldNextOptions);\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  return blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.FieldDropdown.superClass_.onBlocklyAction.call(this, action);\n};\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Block.prototype.toString = function (opt_maxLength, opt_emptyToken) {\n  var text = [];\n  var emptyFieldPlaceholder = opt_emptyToken || '?'; // Temporarily set flag to navigate to all fields.\n\n  var prevNavigateFields = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.NAVIGATE_ALL_FIELDS;\n  blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.NAVIGATE_ALL_FIELDS = true;\n  var node = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.createBlockNode(this);\n  var rootNode = node;\n  /**\n   * Whether or not to add parentheses around an input.\n   * @param {!Blockly.Connection} connection The connection.\n   * @return {boolean} True if we should add parentheses around the input.\n   */\n\n  function shouldAddParentheses(connection) {\n    var checks = connection.getCheck();\n\n    if (!checks && connection.targetConnection) {\n      checks = connection.targetConnection.getCheck();\n    }\n\n    return !!checks && (checks.indexOf('Boolean') != -1 || checks.indexOf('Number') != -1);\n  }\n  /**\n   * Check that we haven't circled back to the original root node.\n   */\n\n\n  function checkRoot() {\n    if (node && node.getType() == rootNode.getType() && node.getLocation() == rootNode.getLocation()) {\n      node = null;\n    }\n  }\n\n  var connection = null;\n  var field = null; // Traverse the AST building up our text string.\n\n  while (node) {\n    switch (node.getType()) {\n      case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.INPUT:\n        connection =\n        /** @type {!Blockly.Connection} */\n        node.getLocation();\n\n        if (!node.in()) {\n          text.push(emptyFieldPlaceholder);\n        } else if (shouldAddParentheses(connection)) {\n          text.push('(');\n        }\n\n        break;\n\n      case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.FIELD:\n        field =\n        /** @type {Blockly.Field} */\n        node.getLocation();\n\n        if (field.name != blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Block.COLLAPSED_FIELD_NAME) {\n          text.push(field.getText());\n        }\n\n        break;\n    }\n\n    var current = node;\n    node = current.in() || current.next(); // TODO: This only works in our specific use case of having a block with a\n    // single statement connection.\n\n    if (node && node.getType() == blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.INPUT && node.getLocation().type === blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.NEXT_STATEMENT) {\n      node = null;\n    }\n\n    if (!node) {\n      // Can't go in or next, keep going out until we can go next.\n      node = current.out();\n      checkRoot();\n\n      while (node && !node.next()) {\n        node = node.out();\n        checkRoot(); // If we hit an input on the way up, possibly close out parentheses.\n\n        if (node && node.getType() == blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.INPUT && shouldAddParentheses(\n        /** @type {!Blockly.Connection} */\n        node.getLocation())) {\n          text.push(')');\n        }\n      }\n\n      if (node) {\n        node = node.next();\n      }\n    }\n  } // Restore state of NAVIGATE_ALL_FIELDS.\n\n\n  blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.NAVIGATE_ALL_FIELDS = prevNavigateFields; // Run through our text array and simplify expression to remove parentheses\n  // around single field blocks.\n\n  for (var i = 2, l = text.length; i < l; i++) {\n    if (text[i - 2] == '(' && text[i] == ')') {\n      text[i - 2] = text[i - 1];\n      text.splice(i - 1, 2);\n      l -= 2;\n    }\n  } // Join the text array, removing spaces around added paranthesis.\n\n\n  text = text.join(' ').replace(/(\\() | (\\))/gmi, '$1$2').trim() || '???';\n\n  if (opt_maxLength) {\n    // TODO: Improve truncation so that text from this block is given priority.\n    // E.g. \"1+2+3+4+5+6+7+8+9=0\" should be \"...6+7+8+9=0\", not \"1+2+3+4+5...\".\n    // E.g. \"1+2+3+4+5=6+7+8+9+0\" should be \"...4+5=6+7...\".\n    if (text.length > opt_maxLength) {\n      text = text.substring(0, opt_maxLength - 3) + '...';\n    }\n  }\n\n  return text;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvb3ZlcnJpZGVzLmpzPzFjYjQiXSwibmFtZXMiOlsiQmxvY2tseSIsIm5hdmlnYXRpb24iLCJoYW5kbGVFbnRlckZvcldTXyIsIndvcmtzcGFjZSIsImN1cnNvciIsImdldEN1cnNvciIsImN1ck5vZGUiLCJnZXRDdXJOb2RlIiwibm9kZVR5cGUiLCJnZXRUeXBlIiwiQVNUTm9kZSIsInR5cGVzIiwiRklFTEQiLCJnZXRMb2NhdGlvbiIsImlzQ2xpY2thYmxlIiwic3BlYWtlciIsInNwZWFrIiwic2hvd0VkaXRvciIsImlzQ29ubmVjdGlvbiIsIldPUktTUEFDRSIsIm1hcmtBdEN1cnNvcl8iLCJCTE9DSyIsIndhcm5fIiwiU1RBQ0siLCJGaWVsZERyb3Bkb3duIiwicHJvdG90eXBlIiwib25CbG9ja2x5QWN0aW9uIiwiYWN0aW9uIiwiZmllbGROZXh0T3B0aW9ucyIsIm1lbnVfIiwibmFtZSIsImFjdGlvbk5hbWVzIiwiUFJFVklPVVMiLCJoaWdobGlnaHRQcmV2aW91cyIsImhpZ2hsaWdodGVkSXRlbV8iLCJjb250ZW50XyIsImFsdCIsIk5FWFQiLCJoaWdobGlnaHROZXh0Iiwic3VwZXJDbGFzc18iLCJjYWxsIiwiQmxvY2siLCJ0b1N0cmluZyIsIm9wdF9tYXhMZW5ndGgiLCJvcHRfZW1wdHlUb2tlbiIsInRleHQiLCJlbXB0eUZpZWxkUGxhY2Vob2xkZXIiLCJwcmV2TmF2aWdhdGVGaWVsZHMiLCJOQVZJR0FURV9BTExfRklFTERTIiwibm9kZSIsImNyZWF0ZUJsb2NrTm9kZSIsInJvb3ROb2RlIiwic2hvdWxkQWRkUGFyZW50aGVzZXMiLCJjb25uZWN0aW9uIiwiY2hlY2tzIiwiZ2V0Q2hlY2siLCJ0YXJnZXRDb25uZWN0aW9uIiwiaW5kZXhPZiIsImNoZWNrUm9vdCIsImZpZWxkIiwiSU5QVVQiLCJpbiIsInB1c2giLCJDT0xMQVBTRURfRklFTERfTkFNRSIsImdldFRleHQiLCJjdXJyZW50IiwibmV4dCIsInR5cGUiLCJORVhUX1NUQVRFTUVOVCIsIm91dCIsImkiLCJsIiwibGVuZ3RoIiwic3BsaWNlIiwiam9pbiIsInJlcGxhY2UiLCJ0cmltIiwic3Vic3RyaW5nIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUViO0FBQ0E7O0FBR0FBLG1EQUFPLENBQUNDLFVBQVIsQ0FBbUJDLGlCQUFuQixHQUF1QyxVQUFTQyxTQUFULEVBQW9CO0FBQ3pELE1BQU1DLE1BQU0sR0FBR0QsU0FBUyxDQUFDRSxTQUFWLEVBQWY7QUFDQSxNQUFNQyxPQUFPLEdBQUdGLE1BQU0sQ0FBQ0csVUFBUCxFQUFoQjtBQUNBLE1BQU1DLFFBQVEsR0FBR0YsT0FBTyxDQUFDRyxPQUFSLEVBQWpCOztBQUNBLE1BQUlELFFBQVEsSUFBSVIsbURBQU8sQ0FBQ1UsT0FBUixDQUFnQkMsS0FBaEIsQ0FBc0JDLEtBQWxDLElBQ0FOLE9BQU8sQ0FBQ08sV0FBUixHQUFzQkMsV0FBdEIsRUFESixFQUN5QztBQUN2QztBQUVBQyxvREFBTyxDQUFDQyxLQUFSLENBQWMsaURBQWQsRUFBaUUsSUFBakU7O0FBQ0M7QUFBOEJWLFdBQU8sQ0FBQ08sV0FBUixFQUEvQixDQUF1REksVUFBdkQ7QUFDRCxHQU5ELE1BTU8sSUFBSVgsT0FBTyxDQUFDWSxZQUFSLE1BQ1BWLFFBQVEsSUFBSVIsbURBQU8sQ0FBQ1UsT0FBUixDQUFnQkMsS0FBaEIsQ0FBc0JRLFNBRC9CLEVBQzBDO0FBQy9DbkIsdURBQU8sQ0FBQ0MsVUFBUixDQUFtQm1CLGFBQW5CO0FBQ0QsR0FITSxNQUdBLElBQUlaLFFBQVEsSUFBSVIsbURBQU8sQ0FBQ1UsT0FBUixDQUFnQkMsS0FBaEIsQ0FBc0JVLEtBQXRDLEVBQTZDO0FBQ2xEckIsdURBQU8sQ0FBQ0MsVUFBUixDQUFtQnFCLEtBQW5CLENBQXlCLHNCQUF6QjtBQUNELEdBRk0sTUFFQSxJQUFJ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TCxDQUFKLEdBQWN6QixJQUFJLENBQUN5QixDQUFDLEdBQUcsQ0FBTCxDQUFsQjtBQUNBekIsVUFBSSxDQUFDNEIsTUFBTCxDQUFZSCxDQUFDLEdBQUcsQ0FBaEIsRUFBbUIsQ0FBbkI7QUFDQUMsT0FBQyxJQUFJLENBQUw7QUFDRDtBQUNGLEdBL0Z3RSxDQWlHekU7OztBQUNBMUIsTUFBSSxHQUFHQSxJQUFJLENBQUM2QixJQUFMLENBQVUsR0FBVixFQUFlQyxPQUFmLENBQXVCLGdCQUF2QixFQUF5QyxNQUF6QyxFQUFpREMsSUFBakQsTUFBMkQsS0FBbEU7O0FBQ0EsTUFBSWpDLGFBQUosRUFBbUI7QUFDakI7QUFDQTtBQUNGO0FBQ0UsUUFBSUUsSUFBSSxDQUFDMkIsTUFBTCxHQUFjN0IsYUFBbEIsRUFBaUM7QUFDL0JFLFVBQUksR0FBR0EsSUFBSSxDQUFDZ0MsU0FBTCxDQUFlLENBQWYsRUFBa0JsQyxhQUFhLEdBQUcsQ0FBbEMsSUFBdUMsS0FBOUM7QUFDRDtBQUNGOztBQUNELFNBQU9FLElBQVA7QUFDRCxDQTVHRCIsImZpbGUiOiIuL3NyYy9vdmVycmlkZXMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBUaGUgY2xhc3MgcmVwcmVzZW50aW5nIGEgbGluZSBjdXJzb3IuXG4gKiBBIGxpbmUgY3Vyc29yIHRyYXZlcnNlcyB0aGUgYmxvY2tzIGFzIGlmIHRoZXkgd2VyZVxuICogbGluZXMgb2YgY29kZSBpbiBhIHRleHQgZWRpdG9yLlxuICogUHJldmlvdXMgYW5kIG5leHQgZ28gdXAgYW5kIGRvd24gbGluZXMuIEluIGFuZCBvdXQgZ29cbiAqIHRocm91Z2ggdGhlIGVsZW1lbnRzIGluIGEgbGluZS5cbiAqIEBhdXRob3IgYXNjaG1pZWR0QGdvb2dsZS5jb20gKEFiYnkgU2NobWllZHQpXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEJsb2NrbHkgZnJvbSAnYmxvY2tseS9jb3JlJztcbmltcG9ydCB7c3BlYWtlcn0gZnJvbSAnLi9zcGVha2VyJztcblxuXG5CbG9ja2x5Lm5hdmlnYXRpb24uaGFuZGxlRW50ZXJGb3JXU18gPSBmdW5jdGlvbih3b3Jrc3BhY2UpIHtcbiAgY29uc3QgY3Vyc29yID0gd29ya3NwYWNlLmdldEN1cnNvcigpO1xuICBjb25zdCBjdXJOb2RlID0gY3Vyc29yLmdldEN1ck5vZGUoKTtcbiAgY29uc3Qgbm9kZVR5cGUgPSBjdXJOb2RlLmdldFR5cGUoKTtcbiAgaWYgKG5vZGVUeXBlID09IEJsb2NrbHkuQVNUTm9kZS50eXBlcy5GSUVMRCAmJlxuICAgICAgY3VyTm9kZS5nZXRMb2NhdGlvbigpLmlzQ2xpY2thYmxlKCkpIHtcbiAgICAvLyBUT0RPOiBIYWQgdG8gb3ZlcnJpZGUgc28gSSBjb3VsZCBhZGQgdGhpcyBzcGVha2VyIGluLlxuXG4gICAgc3BlYWtlci5zcGVhaygnVXNlIG5leHQgYW5kIHByZXZpb3VzIHRvIHJlYWQgb2ZmIHlvdXIgb3B0aW9ucy4nLCB0cnVlKTtcbiAgICAoLyoqIEB0eXBlIHshQmxvY2tseS5GaWVsZH0gKi8oY3VyTm9kZS5nZXRMb2NhdGlvbigpKSkuc2hvd0VkaXRvcigpO1xuICB9IGVsc2UgaWYgKGN1ck5vZGUuaXNDb25uZWN0aW9uKCkgfHxcbiAgICAgIG5vZGVUeXBlID09IEJsb2NrbHkuQVNUTm9kZS50eXBlcy5XT1JLU1BBQ0UpIHtcbiAgICBCbG9ja2x5Lm5hdmlnYXRpb24ubWFya0F0Q3Vyc29yXygpO1xuICB9IGVsc2UgaWYgKG5vZGVUeXBlID09IEJsb2NrbHkuQVNUTm9kZS50eXBlcy5CTE9DSykge1xuICAgIEJsb2NrbHkubmF2aWdhdGlvbi53YXJuXygnQ2Fubm90IG1hcmsgYSBibG9jay4nKTtcbiAgfSBlbHNlIGlmIChub2RlVHlwZSA9PSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuU1RBQ0spIHtcbiAgICBCbG9ja2x5Lm5hdmlnYXRpb24ud2Fybl8oJ0Nhbm5vdCBtYXJrIGEgc3RhY2suJyk7XG4gIH1cbn07XG5cblxuQmxvY2tseS5GaWVsZERyb3Bkb3duLnByb3RvdHlwZS5vbkJsb2NrbHlBY3Rpb24gPSBmdW5jdGlvbihhY3Rpb24pIHtcbiAgY29uc3QgZmllbGROZXh0T3B0aW9ucyA9ICdUbyBzZWxlY3QgdGhpcyBvcHRpb24gaGl0IGVudGVyJztcbiAgaWYgKHRoaXMubWVudV8pIHtcbiAgICBzd2l0Y2ggKGFjdGlvbi5uYW1lKSB7XG4gICAgICBjYXNlIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5QUkVWSU9VUzpcbiAgICAgICAgdGhpcy5tZW51Xy5oaWdobGlnaHRQcmV2aW91cygpO1xuICAgICAgICBzcGVha2VyLnNwZWFrKHRoaXMubWVudV8uaGlnaGxpZ2h0ZWRJdGVtXy5jb250ZW50Xy5hbHQsIHRydWUpO1xuICAgICAgICBzcGVha2VyLnNwZWFrKGZpZWxkTmV4dE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLk5FWFQ6XG4gICAgICAgIHRoaXMubWVudV8uaGlnaGxpZ2h0TmV4dCgpO1xuICAgICAgICAvLyBUT0RPOiBOZWVkZWQgdG8gb3ZlcnJpZGUgc28gdGhhdCBJIGNvdWxkIHNwZWFrIG91dCB0aGUgbG9jYXRpb24gd2hlblxuICAgICAgICAvLyBpdCBjaGFuZ2VzLlxuICAgICAgICBzcGVha2VyLnNwZWFrKHRoaXMubWVudV8uaGlnaGxpZ2h0ZWRJdGVtXy5jb250ZW50Xy5hbHQsIHRydWUpO1xuICAgICAgICBzcGVha2VyLnNwZWFrKGZpZWxkTmV4dE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIEJsb2NrbHkuRmllbGREcm9wZG93bi5zdXBlckNsYXNzXy5vbkJsb2NrbHlBY3Rpb24uY2FsbCh0aGlzLCBhY3Rpb24pO1xufTtcblxuXG5CbG9ja2x5LkJsb2NrLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdF9tYXhMZW5ndGgsIG9wdF9lbXB0eVRva2VuKSB7XG4gIGxldCB0ZXh0ID0gW107XG4gIGNvbnN0IGVtcHR5RmllbGRQbGFjZWhvbGRlciA9IG9wdF9lbXB0eVRva2VuIHx8ICc/JztcblxuICAvLyBUZW1wb3JhcmlseSBzZXQgZmxhZyB0byBuYXZpZ2F0ZSB0byBhbGwgZmllbGRzLlxuICBjb25zdCBwcmV2TmF2aWdhdGVGaWVsZHMgPSBCbG9ja2x5LkFTVE5vZGUuTkFWSUdBVEVfQUxMX0ZJRUxEUztcbiAgQmxvY2tseS5BU1ROb2RlLk5BVklHQVRFX0FMTF9GSUVMRFMgPSB0cnVlO1xuXG4gIGxldCBub2RlID0gQmxvY2tseS5BU1ROb2RlLmNyZWF0ZUJsb2NrTm9kZSh0aGlzKTtcbiAgY29uc3Qgcm9vdE5vZGUgPSBub2RlO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0byBhZGQgcGFyZW50aGVzZXMgYXJvdW5kIGFuIGlucHV0LlxuICAgKiBAcGFyYW0geyFCbG9ja2x5LkNvbm5lY3Rpb259IGNvbm5lY3Rpb24gVGhlIGNvbm5lY3Rpb24uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgd2Ugc2hvdWxkIGFkZCBwYXJlbnRoZXNlcyBhcm91bmQgdGhlIGlucHV0LlxuICAgKi9cbiAgZnVuY3Rpb24gc2hvdWxkQWRkUGFyZW50aGVzZXMoY29ubmVjdGlvbikge1xuICAgIGxldCBjaGVja3MgPSBjb25uZWN0aW9uLmdldENoZWNrKCk7XG4gICAgaWYgKCFjaGVja3MgJiYgY29ubmVjdGlvbi50YXJnZXRDb25uZWN0aW9uKSB7XG4gICAgICBjaGVja3MgPSBjb25uZWN0aW9uLnRhcmdldENvbm5lY3Rpb24uZ2V0Q2hlY2soKTtcbiAgICB9XG4gICAgcmV0dXJuICEhY2hlY2tzICYmIChjaGVja3MuaW5kZXhPZignQm9vbGVhbicpICE9IC0xIHx8XG4gICAgICAgIGNoZWNrcy5pbmRleE9mKCdOdW1iZXInKSAhPSAtMSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgdGhhdCB3ZSBoYXZlbid0IGNpcmNsZWQgYmFjayB0byB0aGUgb3JpZ2luYWwgcm9vdCBub2RlLlxuICAgKi9cbiAgZnVuY3Rpb24gY2hlY2tSb290KCkge1xuICAgIGlmIChub2RlICYmIG5vZGUuZ2V0VHlwZSgpID09IHJvb3ROb2RlLmdldFR5cGUoKSAmJlxuICAgICAgICBub2RlLmdldExvY2F0aW9uKCkgPT0gcm9vdE5vZGUuZ2V0TG9jYXRpb24oKSkge1xuICAgICAgbm9kZSA9IG51bGw7XG4gICAgfVxuICB9XG4gIGxldCBjb25uZWN0aW9uID0gbnVsbDtcbiAgbGV0IGZpZWxkID0gbnVsbDtcblxuICAvLyBUcmF2ZXJzZSB0aGUgQVNUIGJ1aWxkaW5nIHVwIG91ciB0ZXh0IHN0cmluZy5cbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBzd2l0Y2ggKG5vZGUuZ2V0VHlwZSgpKSB7XG4gICAgICBjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5JTlBVVDpcbiAgICAgICAgY29ubmVjdGlvbiA9IC8qKiBAdHlwZSB7IUJsb2NrbHkuQ29ubmVjdGlvbn0gKi8gKG5vZGUuZ2V0TG9jYXRpb24oKSk7XG4gICAgICAgIGlmICghbm9kZS5pbigpKSB7XG4gICAgICAgICAgdGV4dC5wdXNoKGVtcHR5RmllbGRQbGFjZWhvbGRlcik7XG4gICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkQWRkUGFyZW50aGVzZXMoY29ubmVjdGlvbikpIHtcbiAgICAgICAgICB0ZXh0LnB1c2goJygnKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLkZJRUxEOlxuICAgICAgICBmaWVsZCA9IC8qKiBAdHlwZSB7QmxvY2tseS5GaWVsZH0gKi8gKG5vZGUuZ2V0TG9jYXRpb24oKSk7XG4gICAgICAgIGlmIChmaWVsZC5uYW1lICE9IEJsb2NrbHkuQmxvY2suQ09MTEFQU0VEX0ZJRUxEX05BTUUpIHtcbiAgICAgICAgICB0ZXh0LnB1c2goZmllbGQuZ2V0VGV4dCgpKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50ID0gbm9kZTtcbiAgICBub2RlID0gY3VycmVudC5pbigpIHx8IGN1cnJlbnQubmV4dCgpO1xuICAgIC8vIFRPRE86IFRoaXMgb25seSB3b3JrcyBpbiBvdXIgc3BlY2lmaWMgdXNlIGNhc2Ugb2YgaGF2aW5nIGEgYmxvY2sgd2l0aCBhXG4gICAgLy8gc2luZ2xlIHN0YXRlbWVudCBjb25uZWN0aW9uLlxuICAgIGlmIChub2RlICYmIG5vZGUuZ2V0VHlwZSgpID09IEJsb2NrbHkuQVNUTm9kZS50eXBlcy5JTlBVVCAmJlxuICAgICAgICBub2RlLmdldExvY2F0aW9uKCkudHlwZSA9PT0gQmxvY2tseS5ORVhUX1NUQVRFTUVOVCkge1xuICAgICAgbm9kZSA9IG51bGw7XG4gICAgfVxuICAgIGlmICghbm9kZSkge1xuICAgICAgLy8gQ2FuJ3QgZ28gaW4gb3IgbmV4dCwga2VlcCBnb2luZyBvdXQgdW50aWwgd2UgY2FuIGdvIG5leHQuXG4gICAgICBub2RlID0gY3VycmVudC5vdXQoKTtcbiAgICAgIGNoZWNrUm9vdCgpO1xuICAgICAgd2hpbGUgKG5vZGUgJiYgIW5vZGUubmV4dCgpKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLm91dCgpO1xuICAgICAgICBjaGVja1Jvb3QoKTtcbiAgICAgICAgLy8gSWYgd2UgaGl0IGFuIGlucHV0IG9uIHRoZSB3YXkgdXAsIHBvc3NpYmx5IGNsb3NlIG91dCBwYXJlbnRoZXNlcy5cbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5nZXRUeXBlKCkgPT0gQmxvY2tseS5BU1ROb2RlLnR5cGVzLklOUFVUICYmXG4gICAgICAgICAgICBzaG91bGRBZGRQYXJlbnRoZXNlcyhcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUgeyFCbG9ja2x5LkNvbm5lY3Rpb259ICovIChub2RlLmdldExvY2F0aW9uKCkpKSkge1xuICAgICAgICAgIHRleHQucHVzaCgnKScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobm9kZSkge1xuICAgICAgICBub2RlID0gbm9kZS5uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmVzdG9yZSBzdGF0ZSBvZiBOQVZJR0FURV9BTExfRklFTERTLlxuICBCbG9ja2x5LkFTVE5vZGUuTkFWSUdBVEVfQUxMX0ZJRUxEUyA9IHByZXZOYXZpZ2F0ZUZpZWxkcztcblxuICAvLyBSdW4gdGhyb3VnaCBvdXIgdGV4dCBhcnJheSBhbmQgc2ltcGxpZnkgZXhwcmVzc2lvbiB0byByZW1vdmUgcGFyZW50aGVzZXNcbiAgLy8gYXJvdW5kIHNpbmdsZSBmaWVsZCBibG9ja3MuXG4gIGZvciAobGV0IGkgPSAyLCBsID0gdGV4dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAodGV4dFtpIC0gMl0gPT0gJygnICYmIHRleHRbaV0gPT0gJyknKSB7XG4gICAgICB0ZXh0W2kgLSAyXSA9IHRleHRbaSAtIDFdO1xuICAgICAgdGV4dC5zcGxpY2UoaSAtIDEsIDIpO1xuICAgICAgbCAtPSAyO1xuICAgIH1cbiAgfVxuXG4gIC8vIEpvaW4gdGhlIHRleHQgYXJyYXksIHJlbW92aW5nIHNwYWNlcyBhcm91bmQgYWRkZWQgcGFyYW50aGVzaXMuXG4gIHRleHQgPSB0ZXh0LmpvaW4oJyAnKS5yZXBsYWNlKC8oXFwoKSB8IChcXCkpL2dtaSwgJyQxJDInKS50cmltKCkgfHwgJz8/Pyc7XG4gIGlmIChvcHRfbWF4TGVuZ3RoKSB7XG4gICAgLy8gVE9ETzogSW1wcm92ZSB0cnVuY2F0aW9uIHNvIHRoYXQgdGV4dCBmcm9tIHRoaXMgYmxvY2sgaXMgZ2l2ZW4gcHJpb3JpdHkuXG4gICAgLy8gRS5nLiBcIjErMiszKzQrNSs2KzcrOCs5PTBcIiBzaG91bGQgYmUgXCIuLi42KzcrOCs5PTBcIiwgbm90IFwiMSsyKzMrNCs1Li4uXCIuXG4gIC8vIEUuZy4gXCIxKzIrMys0KzU9Nis3KzgrOSswXCIgc2hvdWxkIGJlIFwiLi4uNCs1PTYrNy4uLlwiLlxuICAgIGlmICh0ZXh0Lmxlbmd0aCA+IG9wdF9tYXhMZW5ndGgpIHtcbiAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZygwLCBvcHRfbWF4TGVuZ3RoIC0gMykgKyAnLi4uJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRleHQ7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/overrides.js\n");

/***/ }),

/***/ "./src/speaker.js":
/*!************************!*\
  !*** ./src/speaker.js ***!
  \************************/
/*! exports provided: Speaker, speaker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Speaker\", function() { return Speaker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"speaker\", function() { return speaker; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Speaker used for speaking out text.\n */\n\n/**\n * Convenience methods for speaking out text.\n * More information on speakers can be found here:\n * https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis.\n */\n\nvar Speaker = /*#__PURE__*/function () {\n  /**\n   * Constructor for a speaker.\n   * @param {SpeakerMessages=} optMessages Optional messages for the speaker.\n   */\n  function Speaker(optMessages) {\n    _classCallCheck(this, Speaker);\n\n    var messages = {\n      'MAIN_WS': 'On the main workspace',\n      'STACK': 'To go to the last block in the previous group of blocks, press' + 'previous. To go to the first block in the stack hit next.',\n      'PREVIOUS': 'You are on a connection before, ',\n      'NEXT': 'On a connection after, ',\n      'OUTPUT': 'On an output connection. ',\n      'CONNECTION': 'At a connection point.',\n      'BLOCK': 'On a block of type',\n      'CLICKABLE_FIELD': 'To interact with the field hit enter.',\n      'EMPTY_TOKEN': 'blank',\n      'MARK_CONNECTION': 'To mark the block press enter. ',\n      'EXIT_EDIT_MODE': 'To exit edit mode hit escape. '\n    };\n    blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.object.mixin(messages, optMessages);\n    this.setLocale(messages);\n    this.noOverrides = false;\n  }\n  /**\n   * The messages to be read out by a screen reader.\n   * @typedef {{\n   *     MAIN_WS: string,\n   *     STACK: string,\n   *     PREVIOUS: string,\n   *     NEXT: string,\n   *     OUTPUT: string,\n   *     CONNECTION: string,\n   *     BLOCK: string,\n   *     EMPTY_TOKEN: string,\n   *     MARK_CONNECTION: string,\n   * }} SpeakerMessages\n   */\n\n  /**\n   * Set the messages for the speaker.\n   * @param {!SpeakerMessages} messages The messages needed to create a speaker.\n   */\n\n\n  _createClass(Speaker, [{\n    key: \"setLocale\",\n    value: function setLocale(messages) {\n      Object.keys(messages).forEach(function (k) {\n        blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Msg[k] = messages[k];\n      });\n    }\n    /**\n     * Speaks out the text that was given to it.\n     * @param {string} text The text to speak out.\n     * @param {boolean=} shouldCancel True to stop the current utterance, false to\n     *     wait until the current utterance is done before speaking.\n     * @param {function=} onEnd The function to run after the text has been\n     *     spoken.\n     * @param {function=} onStart The function run when the text has begun to\n     *     be spoken.\n     * @public\n     */\n\n  }, {\n    key: \"speak\",\n    value: function speak(text, shouldCancel, onEnd, onStart) {\n      var audio = new SpeechSynthesisUtterance(text);\n\n      if (shouldCancel && !this.noOverrides && window.speechSynthesis.speaking) {\n        window.speechSynthesis.cancel();\n      }\n\n      if (onEnd) {\n        audio.onend = onEnd;\n      }\n\n      if (onStart) {\n        audio.onstart = onStart;\n      } // Putting on timeout fixes some weird issues with onend being called too\n      // early.\n\n\n      setTimeout(function () {\n        return window.speechSynthesis.speak(audio);\n      }, 1);\n    }\n    /**\n     * Clears out the queue of text to speak.\n     * @public\n     */\n\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      window.speechSynthesis.cancel();\n    }\n    /**\n     * Pauses speaking.\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      window.speechSynthesis.pause();\n    }\n    /**\n     * Resumes speaking.\n     */\n\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      window.speechSynthesis.resume();\n    }\n    /**\n     * Speaks out text if the event is of type marker or cursor move.\n     * @param {!Blockly.Events} event The event to speak out.\n     */\n\n  }, {\n    key: \"nodeToSpeech\",\n    value: function nodeToSpeech(event) {\n      // TODO: Update this if we link to the current version of blockly.\n      if (event.type === blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Events.MARKER_MOVE) {\n        var nodeText = this.nodeToText_(event.newNode, event.oldNode, !event.isCursor);\n\n        if (!event.isCursor) {\n          nodeText = \"You have marked a location. To find a new block to connect\\n        to this location hit T. ! . To insert a block on the workspace,\\n        find the location of the block and hit I. \";\n        }\n\n        var onStart;\n\n        if (event.newNode && event.newNode.getLocation() && event.newNode.getLocation().actionBeforeSpeaker) {\n          var location = event.newNode.getLocation();\n          onStart = location.actionBeforeSpeaker.bind(location);\n        }\n\n        this.speak(nodeText, true, undefined, onStart);\n      }\n    }\n    /**\n     * Speaks out the text for a modal.\n     * @param {Element} modal The modal to collect the text to read out.\n     * @public\n     */\n\n  }, {\n    key: \"modalToText\",\n    value: function modalToText(modal) {\n      var header = modal.querySelector('header');\n      var headerText = header.textContent.trim();\n\n      if (headerText !== '') {\n        this.speak(headerText);\n      }\n\n      this.addButtonListeners_(header.querySelectorAll('button'));\n      var mainText = modal.querySelector('main').textContent.trim();\n\n      if (mainText !== '') {\n        this.speak(mainText);\n      }\n\n      var footerBtns = modal.querySelector('footer').querySelectorAll('button');\n      this.addButtonListeners_(footerBtns);\n    }\n    /**\n     * Adds listeners for when the button is focused.\n     * @param {!NodeList} btns The buttons to add listeners to.\n     * @private\n     */\n\n  }, {\n    key: \"addButtonListeners_\",\n    value: function addButtonListeners_(btns) {\n      var _this = this;\n\n      var _iterator = _createForOfIteratorHelper(btns),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var btn = _step.value;\n          btn.addEventListener('focus', function () {\n            _this.buttonToSpeech_(btns, btn, true);\n          });\n\n          if (document.activeElement === btn) {\n            _this.buttonToSpeech_(btns, btn, false);\n          }\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    /**\n     * Speaks out information about a button.\n     * @param {NodeList} btns The list of buttons on the modal.\n     * @param {Element} btn The button.\n     * @param {boolean} shouldCancel True if this should cancel the previous\n     *     utterance.\n     * @private\n     */\n\n  }, {\n    key: \"buttonToSpeech_\",\n    value: function buttonToSpeech_(btns, btn, shouldCancel) {\n      this.speak('Hit enter to ', shouldCancel);\n\n      if (btn.textContent === '') {\n        this.speak(btn.getAttribute('aria-label'));\n      } else {\n        this.speak(btn.textContent);\n      }\n\n      if (btns.length > 0) {\n        this.speak('Hit tab to go to your next option');\n      }\n    }\n    /**\n     * Speaks out an audio representation of the given node.\n     * @param {Blockly.ASTNode} node The node to speak out.\n     * @param {Blockly.ASTNode} oldNode The previous node to speak out.\n     * @param {boolean} isMarker True to get the text for a marker,\n     *     false otherwise.\n     * @return {string} The text representation of the node.\n     * @public\n     */\n\n  }, {\n    key: \"nodeToText_\",\n    value: function nodeToText_(node, oldNode, isMarker) {\n      var finalText = '';\n\n      switch (node.getType()) {\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.FIELD:\n          finalText = this.fieldNodeToText_(node);\n          break;\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.BLOCK:\n          finalText = this.blockNodeToText_(node);\n          break;\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.INPUT:\n          finalText = this.inputNodeToText_(node, isMarker);\n          break;\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.OUTPUT:\n          finalText = this.outputNodeToText_(node, isMarker);\n          break;\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.NEXT:\n          finalText = this.nextNodeToText_(node, isMarker);\n          break;\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.PREVIOUS:\n          finalText = this.previousNodeToText_(node, isMarker);\n          break;\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.STACK:\n          finalText = this.stackNodeToText_(node, oldNode);\n          break;\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.WORKSPACE:\n          finalText = this.workspaceNodeToText_(node);\n          break;\n\n        default:\n          return node.toString();\n      }\n\n      finalText += this.getNextOptions_(node, oldNode, isMarker);\n      return finalText;\n    }\n    /**\n     * Gets text explaining the next options available for a user.\n     * @param {!Blockly.ASTNode} node The current node.\n     * @param {!Blockly.ASTNode} oldNode The previous node.\n     * @param {boolean} isMarker True if the marker was moved.\n     * @return {string} Text explaining next options for the field.\n     * @private\n     */\n\n  }, {\n    key: \"getNextOptions_\",\n    value: function getNextOptions_(node, oldNode, isMarker) {\n      switch (node.getType()) {\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.FIELD:\n          return this.getFieldOptions_(node);\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.BLOCK:\n          return this.getBlockOptions_(node);\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.INPUT:\n          return this.getConnectionOptions_(node, isMarker);\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.OUTPUT:\n          return this.getConnectionOptions_(node, isMarker);\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.NEXT:\n          return this.getConnectionOptions_(node, isMarker);\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.PREVIOUS:\n          return this.getConnectionOptions_(node, isMarker);\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.STACK:\n          return this.getStackOptions_(node);\n\n        case blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.types.WORKSPACE:\n          return '';\n\n        default:\n          return node.toString();\n      }\n    }\n    /**\n     * Gets the next options for when a user is on a field.\n     * This is to open the field or to change locations.\n     * @param {!Blockly.ASTNode} node The field node.\n     * @return {string} The text explaining the next options when a user is on a\n     *     field.\n     * @private\n     */\n\n  }, {\n    key: \"getFieldOptions_\",\n    value: function getFieldOptions_(node) {\n      var field = node.getLocation();\n\n      if (field.isClickable()) {\n        return \"To interact with the field hit enter. Use the next or previous\\n      keys to change locations. \";\n      } else {\n        return 'Use the next or previous keys to change locations. ';\n      }\n    }\n    /**\n     * Gets the next options for when a user is on a block.\n     * @return {string} The text explaining the next options for a block.\n     * @private\n     */\n\n  }, {\n    key: \"getBlockOptions_\",\n    value: function getBlockOptions_() {\n      return \"Use the next or previous keys to change locations. \";\n    }\n    /**\n     * Gets the text for the connection point.\n     * @param {!Blockly.ASTNode} node The connection node.\n     * @param {boolean} isMarker True if the marker was moved.\n     * @return {string} The text explaining the next options when a user is on a\n     *     connection.\n     * @private\n     */\n\n  }, {\n    key: \"getConnectionOptions_\",\n    value: function getConnectionOptions_(node, isMarker) {\n      var markerText = \". To mark this location, hit enter.\\n    To change locations use the next or previous keys\";\n      var finalText = '';\n\n      if (!isMarker) {\n        finalText += \"\".concat(markerText);\n      }\n\n      return finalText;\n    }\n    /**\n     * Gets the options for a user on a  stack of blocks.\n     * @param {Blockly.ASTNode} node The stack node.\n     * @return {string} The text explaining the next options when a user is on a\n     *     stack of blocks.\n     * @private\n     */\n\n  }, {\n    key: \"getStackOptions_\",\n    value: function getStackOptions_(node) {\n      var finalText = '';\n\n      if (node.prev()) {\n        finalText += \"To go to the last block in the previous group of blocks,\\n      press previous.\";\n      }\n\n      finalText += \" To go to the first block in the stack hit next.\";\n      return finalText;\n    }\n    /**\n     * Get the text for the source block of the node.\n     * @param {!Blockly.BlockSvg} srcBlock The block to get the text for.\n     * @param {string=} opt_emptyToken The optional empty token.\n     * @return {string} The text describing the source block of the node.\n     * @private\n     */\n\n  }, {\n    key: \"getBlockText_\",\n    value: function getBlockText_(srcBlock, opt_emptyToken) {\n      var emptyToken = opt_emptyToken || blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Msg['EMPTY_TOKEN'];\n\n      if (srcBlock) {\n        if (srcBlock.statementInputCount > 0) {\n          emptyToken = ' do blank ';\n        }\n\n        return srcBlock.toString(null, emptyToken);\n      } else {\n        return '';\n      }\n    }\n    /**\n     * Creates text for a feild.\n     * @param {!Blockly.ASTNode} node The node to create text for.\n     * @return {string} The text for the screen reader to read out.\n     * @protected\n     */\n\n  }, {\n    key: \"fieldNodeToText_\",\n    value: function fieldNodeToText_(node) {\n      var field = node.getLocation();\n      return field.getText() + '. ';\n    }\n    /**\n     * Creates text for a feild.\n     * @param {!Blockly.ASTNode} node The node to create text for.\n     * @return {string} The text for the screen reader to read out.\n     * @protected\n     */\n\n  }, {\n    key: \"blockNodeToText_\",\n    value: function blockNodeToText_(node) {\n      var block =\n      /** @type{Blockly.BlockSvg} */\n      node.getLocation();\n      var blockText = this.getBlockText_(block);\n      var finalText = '';\n\n      if (block.getSurroundParent()) {\n        var parentBlockText = this.getBlockText_(block.getSurroundParent());\n        finalText += \"You are inside of block \".concat(parentBlockText, \". . \");\n      }\n\n      finalText += \"You are on , \".concat(blockText, \". . \");\n      return finalText;\n    }\n    /**\n     * Creates text for an input.\n     * @param {!Blockly.ASTNode} node The node to create text for.\n     * @param {boolean} isMarker True if the marker was moved.\n     * @return {string} The text for the screen reader to read out.\n     * @protected\n     */\n\n  }, {\n    key: \"inputNodeToText_\",\n    value: function inputNodeToText_(node, isMarker) {\n      var inputConnection =\n      /** @type{Blockly.Input} */\n      node.getLocation();\n      var connectionText = \"You are on a connection\";\n      var finalText = '';\n\n      if (inputConnection.type === blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.NEXT_STATEMENT) {\n        var blockText = this.getBlockText_(node.getSourceBlock());\n        finalText = \"Inside \".concat(blockText, \". \").concat(connectionText, \". \");\n      } else if (inputConnection.type === blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.INPUT_VALUE) {\n        var _blockText = this.getBlockText_(node.getSourceBlock(), ' ');\n\n        finalText = \"\".concat(connectionText, \" after \").concat(_blockText);\n      }\n\n      return finalText;\n    }\n    /**\n     * Creates text for a output connection.\n     * @param {!Blockly.ASTNode} node The node to create text for.\n     * @return {string} The text for the screen reader to read out.\n     * @protected\n     */\n\n  }, {\n    key: \"outputNodeToText_\",\n    value: function outputNodeToText_(node) {\n      var blockText = this.getBlockText_(node.getSourceBlock());\n      return \"You are on a connection for block, \".concat(blockText);\n    }\n    /**\n     * Creates text for a next connection.\n     * @param {!Blockly.ASTNode} node The node to create text for.\n     * @param {boolean} isMarker True to get the text for a marker,\n     *     false otherwise.\n     * @return {string} The text for the screen reader to read out.\n     * @protected\n     */\n\n  }, {\n    key: \"nextNodeToText_\",\n    value: function nextNodeToText_(node, isMarker) {\n      var block = node.getSourceBlock();\n      var blockText = this.getBlockText_(node.getSourceBlock());\n      var finalText = '';\n\n      if (block.getSurroundParent()) {\n        var parentBlockText = this.getBlockText_(block.getSurroundParent());\n        finalText += \"You are inside of block \".concat(parentBlockText, \". . \");\n      }\n\n      finalText += \"\".concat(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Msg['NEXT'], \" \").concat(blockText);\n      return finalText;\n    }\n    /**\n     * Creates text for a previous connection.\n     * @param {!Blockly.ASTNode} node The node to create text for.\n     * @param {boolean} isMarker True to get the text for a marker,\n     *     false otherwise.\n     * @return {string} The text for the screen reader to read out.\n     * @protected\n     */\n\n  }, {\n    key: \"previousNodeToText_\",\n    value: function previousNodeToText_(node, isMarker) {\n      var block = node.getSourceBlock();\n      var blockText = this.getBlockText_(block);\n      var finalText = '';\n\n      if (block.getSurroundParent()) {\n        var parentBlockText = this.getBlockText_(block.getSurroundParent());\n        finalText += \"You are inside of block \".concat(parentBlockText, \". . \");\n      }\n\n      finalText += \"\".concat(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Msg['PREVIOUS'], \" \").concat(blockText);\n      return finalText;\n    }\n    /**\n     * Creates text for a stack of blocks.\n     * @param {!Blockly.ASTNode} node The node to create text for.\n     * @param {!Blockly.ASTNode} oldNode The previous node.\n     * @return {string} The text for the screen reader to read out.\n     * @protected\n     */\n\n  }, {\n    key: \"stackNodeToText_\",\n    value: function stackNodeToText_(node, oldNode) {\n      var srcBlock = node.getSourceBlock();\n      var newNodeTopBlock = srcBlock.getTopStackBlock();\n      var oldNodeTopBlock = null;\n\n      if (oldNode && oldNode.getSourceBlock()) {\n        oldNodeTopBlock = oldNode.getSourceBlock().getTopStackBlock();\n      }\n\n      var finalText = '';\n\n      if (srcBlock && srcBlock.workspace.isFlyout) {\n        finalText = this.getBlockText_(node.getSourceBlock());\n        finalText += \" . . To add this block to the workspace press Enter. .\\n      To go to the next block hit next. . To go back to the workspace\\n      hit escape. \";\n      } else if (srcBlock) {\n        if (oldNodeTopBlock !== newNodeTopBlock) {\n          finalText += \"You are on a new group of blocks. \";\n        } else {\n          finalText += \"You are on a group of blocks. \";\n        }\n      }\n\n      return finalText;\n    }\n    /**\n     * Creates text for a workspace.\n     * @param {!Blockly.ASTNode} node The node to create text for.\n     * @return {string} The text for the screen reader to read out.\n     * @protected\n     */\n\n  }, {\n    key: \"workspaceNodeToText_\",\n    value: function workspaceNodeToText_(node) {\n      var workspace =\n      /** @type{Blockly.WorkspaceSvg} */\n      node.getLocation(); // TODO: All text should be added to Blockly.Msg to allow for translation.\n\n      var text = null;\n\n      if (workspace.isFlyout) {\n        text = 'In the flyout, please select a block';\n      } else if (workspace.isMutator) {\n        text = 'In the mutator workspace, use this workspace to change a block';\n      } else {\n        text = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Msg['MAIN_WS'];\n      }\n\n      return text;\n    }\n  }]);\n\n  return Speaker;\n}();\nvar speaker = new Speaker();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc3BlYWtlci5qcz9jZDc3Il0sIm5hbWVzIjpbIlNwZWFrZXIiLCJvcHRNZXNzYWdlcyIsIm1lc3NhZ2VzIiwiQmxvY2tseSIsInV0aWxzIiwib2JqZWN0IiwibWl4aW4iLCJzZXRMb2NhbGUiLCJub092ZXJyaWRlcyIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwiayIsIk1zZyIsInRleHQiLCJzaG91bGRDYW5jZWwiLCJvbkVuZCIsIm9uU3RhcnQiLCJhdWRpbyIsIlNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSIsIndpbmRvdyIsInNwZWVjaFN5bnRoZXNpcyIsInNwZWFraW5nIiwiY2FuY2VsIiwib25lbmQiLCJvbnN0YXJ0Iiwic2V0VGltZW91dCIsInNwZWFrIiwicGF1c2UiLCJyZXN1bWUiLCJldmVudCIsInR5cGUiLCJFdmVudHMiLCJNQVJLRVJfTU9WRSIsIm5vZGVUZXh0Iiwibm9kZVRvVGV4dF8iLCJuZXdOb2RlIiwib2xkTm9kZSIsImlzQ3Vyc29yIiwiZ2V0TG9jYXRpb24iLCJhY3Rpb25CZWZvcmVTcGVha2VyIiwibG9jYXRpb24iLCJiaW5kIiwidW5kZWZpbmVkIiwibW9kYWwiLCJoZWFkZXIiLCJxdWVyeVNlbGVjdG9yIiwiaGVhZGVyVGV4dCIsInRleHRDb250ZW50IiwidHJpbSIsImFkZEJ1dHRvbkxpc3RlbmVyc18iLCJxdWVyeVNlbGVjdG9yQWxsIiwibWFpblRleHQiLCJmb290ZXJCdG5zIiwiYnRucyIsImJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJidXR0b25Ub1NwZWVjaF8iLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJsZW5ndGgiLCJub2RlIiwiaXNNYXJrZXIiLCJmaW5hbFRleHQiLCJnZXRUeXBlIiwiQVNUTm9kZSIsInR5cGVzIiwiRklFTEQiLCJmaWVsZE5vZGVUb1RleHRfIiwiQkxPQ0siLCJibG9ja05vZGVUb1RleHRfIiwiSU5QVVQiLCJpbnB1dE5vZGVUb1RleHRfIiwiT1VUUFVUIiwib3V0cHV0Tm9kZVRvVGV4dF8iLCJORVhUIiwibmV4dE5vZGVUb1RleHRfIiwiUFJFVklPVVMiLCJwcmV2aW91c05vZGVUb1RleHRfIiwiU1RBQ0siLCJzdGFja05vZGVUb1RleHRfIiwiV09SS1NQQUNFIiwid29ya3NwYWNlTm9kZVRvVGV4dF8iLCJ0b1N0cmluZyIsImdldE5leHRPcHRpb25zXyIsImdldEZpZWxkT3B0aW9uc18iLCJnZXRCbG9ja09wdGlvbnNfIiwiZ2V0Q29ubmVjdGlvbk9wdGlvbnNfIiwiZ2V0U3RhY2tPcHRpb25zXyIsImZpZWxkIiwiaXNDbGlja2FibGUiLCJtYXJrZXJUZXh0IiwicHJldiIsInNyY0Jsb2NrIiwib3B0X2VtcHR5VG9rZW4iLCJlbXB0eVRva2VuIiwic3RhdGVtZW50SW5wdXRDb3VudCIsImdldFRleHQiLCJibG9jayIsImJsb2NrVGV4dCIsImdldEJsb2NrVGV4dF8iLCJnZXRTdXJyb3VuZFBhcmVudCIsInBhcmVudEJsb2NrVGV4dCIsImlucHV0Q29ubmVjdGlvbiIsImNvbm5lY3Rpb25UZXh0IiwiTkVYVF9TVEFURU1FTlQiLCJnZXRTb3VyY2VCbG9jayIsIklOUFVUX1ZBTFVFIiwibmV3Tm9kZVRvcEJsb2NrIiwiZ2V0VG9wU3RhY2tCbG9jayIsIm9sZE5vZGVUb3BCbG9jayIsIndvcmtzcGFjZSIsImlzRmx5b3V0IiwiaXNNdXRhdG9yIiwic3BlYWtlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxJQUFNQSxPQUFiO0FBQ0U7QUFDRjtBQUNBO0FBQ0E7QUFDRSxtQkFBWUMsV0FBWixFQUF5QjtBQUFBOztBQUN2QixRQUFNQyxRQUFRLEdBQUc7QUFDZixpQkFBVyx1QkFESTtBQUVmLGVBQ0ksbUVBQ0EsMkRBSlc7QUFLZixrQkFBWSxrQ0FMRztBQU1mLGNBQVEseUJB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T0FGRCxNQUVPLElBQUlrRyxTQUFTLENBQUNFLFNBQWQsRUFBeUI7QUFDOUJwRyxZQUFJLEdBQUcsZ0VBQVA7QUFDRCxPQUZNLE1BRUE7QUFDTEEsWUFBSSxHQUFHWCxtREFBTyxDQUFDVSxHQUFSLENBQVksU0FBWixDQUFQO0FBQ0Q7O0FBQ0QsYUFBT0MsSUFBUDtBQUNEO0FBaGZIOztBQUFBO0FBQUE7QUFtZk8sSUFBTXFHLE9BQU8sR0FBRyxJQUFJbkgsT0FBSixFQUFoQiIsImZpbGUiOiIuL3NyYy9zcGVha2VyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBTcGVha2VyIHVzZWQgZm9yIHNwZWFraW5nIG91dCB0ZXh0LlxuICovXG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kcyBmb3Igc3BlYWtpbmcgb3V0IHRleHQuXG4gKiBNb3JlIGluZm9ybWF0aW9uIG9uIHNwZWFrZXJzIGNhbiBiZSBmb3VuZCBoZXJlOlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NwZWVjaFN5bnRoZXNpcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFNwZWFrZXIge1xuICAvKipcbiAgICogQ29uc3RydWN0b3IgZm9yIGEgc3BlYWtlci5cbiAgICogQHBhcmFtIHtTcGVha2VyTWVzc2FnZXM9fSBvcHRNZXNzYWdlcyBPcHRpb25hbCBtZXNzYWdlcyBmb3IgdGhlIHNwZWFrZXIuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRNZXNzYWdlcykge1xuICAgIGNvbnN0IG1lc3NhZ2VzID0ge1xuICAgICAgJ01BSU5fV1MnOiAnT24gdGhlIG1haW4gd29ya3NwYWNlJyxcbiAgICAgICdTVEFDSyc6XG4gICAgICAgICAgJ1RvIGdvIHRvIHRoZSBsYXN0IGJsb2NrIGluIHRoZSBwcmV2aW91cyBncm91cCBvZiBibG9ja3MsIHByZXNzJyArXG4gICAgICAgICAgJ3ByZXZpb3VzLiBUbyBnbyB0byB0aGUgZmlyc3QgYmxvY2sgaW4gdGhlIHN0YWNrIGhpdCBuZXh0LicsXG4gICAgICAnUFJFVklPVVMnOiAnWW91IGFyZSBvbiBhIGNvbm5lY3Rpb24gYmVmb3JlLCAnLFxuICAgICAgJ05FWFQnOiAnT24gYSBjb25uZWN0aW9uIGFmdGVyLCAnLFxuICAgICAgJ09VVFBVVCc6ICdPbiBhbiBvdXRwdXQgY29ubmVjdGlvbi4gJyxcbiAgICAgICdDT05ORUNUSU9OJzogJ0F0IGEgY29ubmVjdGlvbiBwb2ludC4nLFxuICAgICAgJ0JMT0NLJzogJ09uIGEgYmxvY2sgb2YgdHlwZScsXG4gICAgICAnQ0xJQ0tBQkxFX0ZJRUxEJzogJ1RvIGludGVyYWN0IHdpdGggdGhlIGZpZWxkIGhpdCBlbnRlci4nLFxuICAgICAgJ0VNUFRZX1RPS0VOJzogJ2JsYW5rJyxcbiAgICAgICdNQVJLX0NPTk5FQ1RJT04nOiAnVG8gbWFyayB0aGUgYmxvY2sgcHJlc3MgZW50ZXIuICcsXG4gICAgICAnRVhJVF9FRElUX01PREUnOiAnVG8gZXhpdCBlZGl0IG1vZGUgaGl0IGVzY2FwZS4gJyxcbiAgICB9O1xuXG4gICAgQmxvY2tseS51dGlscy5vYmplY3QubWl4aW4obWVzc2FnZXMsIG9wdE1lc3NhZ2VzKTtcblxuICAgIHRoaXMuc2V0TG9jYWxlKG1lc3NhZ2VzKTtcbiAgICB0aGlzLm5vT3ZlcnJpZGVzID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1lc3NhZ2VzIHRvIGJlIHJlYWQgb3V0IGJ5IGEgc2NyZWVuIHJlYWRlci5cbiAgICogQHR5cGVkZWYge3tcbiAgICogICAgIE1BSU5fV1M6IHN0cmluZyxcbiAgICogICAgIFNUQUNLOiBzdHJpbmcsXG4gICAqICAgICBQUkVWSU9VUzogc3RyaW5nLFxuICAgKiAgICAgTkVYVDogc3RyaW5nLFxuICAgKiAgICAgT1VUUFVUOiBzdHJpbmcsXG4gICAqICAgICBDT05ORUNUSU9OOiBzdHJpbmcsXG4gICAqICAgICBCTE9DSzogc3RyaW5nLFxuICAgKiAgICAgRU1QVFlfVE9LRU46IHN0cmluZyxcbiAgICogICAgIE1BUktfQ09OTkVDVElPTjogc3RyaW5nLFxuICAgKiB9fSBTcGVha2VyTWVzc2FnZXNcbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbWVzc2FnZXMgZm9yIHRoZSBzcGVha2VyLlxuICAgKiBAcGFyYW0geyFTcGVha2VyTWVzc2FnZXN9IG1lc3NhZ2VzIFRoZSBtZXNzYWdlcyBuZWVkZWQgdG8gY3JlYXRlIGEgc3BlYWtlci5cbiAgICovXG4gIHNldExvY2FsZShtZXNzYWdlcykge1xuICAgIE9iamVjdC5rZXlzKG1lc3NhZ2VzKS5mb3JFYWNoKChrKSA9PiB7XG4gICAgICBCbG9ja2x5Lk1zZ1trXSA9IG1lc3NhZ2VzW2tdO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWFrcyBvdXQgdGhlIHRleHQgdGhhdCB3YXMgZ2l2ZW4gdG8gaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIHNwZWFrIG91dC5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gc2hvdWxkQ2FuY2VsIFRydWUgdG8gc3RvcCB0aGUgY3VycmVudCB1dHRlcmFuY2UsIGZhbHNlIHRvXG4gICAqICAgICB3YWl0IHVudGlsIHRoZSBjdXJyZW50IHV0dGVyYW5jZSBpcyBkb25lIGJlZm9yZSBzcGVha2luZy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbj19IG9uRW5kIFRoZSBmdW5jdGlvbiB0byBydW4gYWZ0ZXIgdGhlIHRleHQgaGFzIGJlZW5cbiAgICogICAgIHNwb2tlbi5cbiAgICogQHBhcmFtIHtmdW5jdGlvbj19IG9uU3RhcnQgVGhlIGZ1bmN0aW9uIHJ1biB3aGVuIHRoZSB0ZXh0IGhhcyBiZWd1biB0b1xuICAgKiAgICAgYmUgc3Bva2VuLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzcGVhayh0ZXh0LCBzaG91bGRDYW5jZWwsIG9uRW5kLCBvblN0YXJ0KSB7XG4gICAgY29uc3QgYXVkaW8gPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKHRleHQpO1xuXG4gICAgaWYgKHNob3VsZENhbmNlbCAmJiAhdGhpcy5ub092ZXJyaWRlcyAmJiB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLnNwZWFraW5nKSB7XG4gICAgICB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLmNhbmNlbCgpO1xuICAgIH1cblxuICAgIGlmIChvbkVuZCkge1xuICAgICAgYXVkaW8ub25lbmQgPSBvbkVuZDtcbiAgICB9XG5cbiAgICBpZiAob25TdGFydCkge1xuICAgICAgYXVkaW8ub25zdGFydCA9IG9uU3RhcnQ7XG4gICAgfVxuICAgIC8vIFB1dHRpbmcgb24gdGltZW91dCBmaXhlcyBzb21lIHdlaXJkIGlzc3VlcyB3aXRoIG9uZW5kIGJlaW5nIGNhbGxlZCB0b29cbiAgICAvLyBlYXJseS5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHdpbmRvdy5zcGVlY2hTeW50aGVzaXMuc3BlYWsoYXVkaW8pLCAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgb3V0IHRoZSBxdWV1ZSBvZiB0ZXh0IHRvIHNwZWFrLlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjYW5jZWwoKSB7XG4gICAgd2luZG93LnNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXVzZXMgc3BlYWtpbmcuXG4gICAqL1xuICBwYXVzZSgpIHtcbiAgICB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLnBhdXNlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdW1lcyBzcGVha2luZy5cbiAgICovXG4gIHJlc3VtZSgpIHtcbiAgICB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLnJlc3VtZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWFrcyBvdXQgdGV4dCBpZiB0aGUgZXZlbnQgaXMgb2YgdHlwZSBtYXJrZXIgb3IgY3Vyc29yIG1vdmUuXG4gICAqIEBwYXJhbSB7IUJsb2NrbHkuRXZlbnRzfSBldmVudCBUaGUgZXZlbnQgdG8gc3BlYWsgb3V0LlxuICAgKi9cbiAgbm9kZVRvU3BlZWNoKGV2ZW50KSB7XG4gICAgLy8gVE9ETzogVXBkYXRlIHRoaXMgaWYgd2UgbGluayB0byB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIGJsb2NrbHkuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09IEJsb2NrbHkuRXZlbnRzLk1BUktFUl9NT1ZFKSB7XG4gICAgICBsZXQgbm9kZVRleHQgPVxuICAgICAgICAgIHRoaXMubm9kZVRvVGV4dF8oZXZlbnQubmV3Tm9kZSwgZXZlbnQub2xkTm9kZSwgIWV2ZW50LmlzQ3Vyc29yKTtcbiAgICAgIGlmICghZXZlbnQuaXNDdXJzb3IpIHtcbiAgICAgICAgbm9kZVRleHQgPSBgWW91IGhhdmUgbWFya2VkIGEgbG9jYXRpb24uIFRvIGZpbmQgYSBuZXcgYmxvY2sgdG8gY29ubmVjdFxuICAgICAgICB0byB0aGlzIGxvY2F0aW9uIGhpdCBULiAhIC4gVG8gaW5zZXJ0IGEgYmxvY2sgb24gdGhlIHdvcmtzcGFjZSxcbiAgICAgICAgZmluZCB0aGUgbG9jYXRpb24gb2YgdGhlIGJsb2NrIGFuZCBoaXQgSS4gYDtcbiAgICAgIH1cbiAgICAgIGxldCBvblN0YXJ0O1xuICAgICAgaWYgKGV2ZW50Lm5ld05vZGUgJiYgZXZlbnQubmV3Tm9kZS5nZXRMb2NhdGlvbigpICYmXG4gICAgICAgICAgZXZlbnQubmV3Tm9kZS5nZXRMb2NhdGlvbigpLmFjdGlvbkJlZm9yZVNwZWFrZXIpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSBldmVudC5uZXdOb2RlLmdldExvY2F0aW9uKCk7XG4gICAgICAgIG9uU3RhcnQgPSBsb2NhdGlvbi5hY3Rpb25CZWZvcmVTcGVha2VyLmJpbmQobG9jYXRpb24pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNwZWFrKG5vZGVUZXh0LCB0cnVlLCB1bmRlZmluZWQsIG9uU3RhcnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVha3Mgb3V0IHRoZSB0ZXh0IGZvciBhIG1vZGFsLlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IG1vZGFsIFRoZSBtb2RhbCB0byBjb2xsZWN0IHRoZSB0ZXh0IHRvIHJlYWQgb3V0LlxuICAgKiBAcHVibGljXG4gICAqL1xuICBtb2RhbFRvVGV4dChtb2RhbCkge1xuICAgIGNvbnN0IGhlYWRlciA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpO1xuICAgIGNvbnN0IGhlYWRlclRleHQgPSBoZWFkZXIudGV4dENvbnRlbnQudHJpbSgpO1xuICAgIGlmIChoZWFkZXJUZXh0ICE9PSAnJykge1xuICAgICAgdGhpcy5zcGVhayhoZWFkZXJUZXh0KTtcbiAgICB9XG4gICAgdGhpcy5hZGRCdXR0b25MaXN0ZW5lcnNfKGhlYWRlci5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSk7XG5cbiAgICBjb25zdCBtYWluVGV4dCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ21haW4nKS50ZXh0Q29udGVudC50cmltKCk7XG5cbiAgICBpZiAobWFpblRleHQgIT09ICcnKSB7XG4gICAgICB0aGlzLnNwZWFrKG1haW5UZXh0KTtcbiAgICB9XG5cbiAgICBjb25zdCBmb290ZXJCdG5zID0gbW9kYWwucXVlcnlTZWxlY3RvcignZm9vdGVyJykucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyk7XG4gICAgdGhpcy5hZGRCdXR0b25MaXN0ZW5lcnNfKGZvb3RlckJ0bnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgbGlzdGVuZXJzIGZvciB3aGVuIHRoZSBidXR0b24gaXMgZm9jdXNlZC5cbiAgICogQHBhcmFtIHshTm9kZUxpc3R9IGJ0bnMgVGhlIGJ1dHRvbnMgdG8gYWRkIGxpc3RlbmVycyB0by5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZEJ1dHRvbkxpc3RlbmVyc18oYnRucykge1xuICAgIGZvciAoY29uc3QgYnRuIG9mIGJ0bnMpIHtcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHtcbiAgICAgICAgdGhpcy5idXR0b25Ub1NwZWVjaF8oYnRucywgYnRuLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGJ0bikge1xuICAgICAgICB0aGlzLmJ1dHRvblRvU3BlZWNoXyhidG5zLCBidG4sIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3BlYWtzIG91dCBpbmZvcm1hdGlvbiBhYm91dCBhIGJ1dHRvbi5cbiAgICogQHBhcmFtIHtOb2RlTGlzdH0gYnRucyBUaGUgbGlzdCBvZiBidXR0b25zIG9uIHRoZSBtb2RhbC5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBidG4gVGhlIGJ1dHRvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBzaG91bGRDYW5jZWwgVHJ1ZSBpZiB0aGlzIHNob3VsZCBjYW5jZWwgdGhlIHByZXZpb3VzXG4gICAqICAgICB1dHRlcmFuY2UuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBidXR0b25Ub1NwZWVjaF8oYnRucywgYnRuLCBzaG91bGRDYW5jZWwpIHtcbiAgICB0aGlzLnNwZWFrKCdIaXQgZW50ZXIgdG8gJywgc2hvdWxkQ2FuY2VsKTtcbiAgICBpZiAoYnRuLnRleHRDb250ZW50ID09PSAnJykge1xuICAgICAgdGhpcy5zcGVhayhidG4uZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNwZWFrKGJ0bi50ZXh0Q29udGVudCk7XG4gICAgfVxuICAgIGlmIChidG5zLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc3BlYWsoJ0hpdCB0YWIgdG8gZ28gdG8geW91ciBuZXh0IG9wdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTcGVha3Mgb3V0IGFuIGF1ZGlvIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBub2RlLlxuICAgKiBAcGFyYW0ge0Jsb2NrbHkuQVNUTm9kZX0gbm9kZSBUaGUgbm9kZSB0byBzcGVhayBvdXQuXG4gICAqIEBwYXJhbSB7QmxvY2tseS5BU1ROb2RlfSBvbGROb2RlIFRoZSBwcmV2aW91cyBub2RlIHRvIHNwZWFrIG91dC5cbiAgICogQHBhcmFtIHtib29sZWFufSBpc01hcmtlciBUcnVlIHRvIGdldCB0aGUgdGV4dCBmb3IgYSBtYXJrZXIsXG4gICAqICAgICBmYWxzZSBvdGhlcndpc2UuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRleHQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG5vZGUuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG5vZGVUb1RleHRfKG5vZGUsIG9sZE5vZGUsIGlzTWFya2VyKSB7XG4gICAgbGV0IGZpbmFsVGV4dCA9ICcnO1xuICAgIHN3aXRjaCAobm9kZS5nZXRUeXBlKCkpIHtcbiAgICAgIGNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLkZJRUxEOlxuICAgICAgICBmaW5hbFRleHQgPSB0aGlzLmZpZWxkTm9kZVRvVGV4dF8obm9kZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuQkxPQ0s6XG4gICAgICAgIGZpbmFsVGV4dCA9IHRoaXMuYmxvY2tOb2RlVG9UZXh0Xyhub2RlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5JTlBVVDpcbiAgICAgICAgZmluYWxUZXh0ID0gdGhpcy5pbnB1dE5vZGVUb1RleHRfKG5vZGUsIGlzTWFya2VyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5PVVRQVVQ6XG4gICAgICAgIGZpbmFsVGV4dCA9IHRoaXMub3V0cHV0Tm9kZVRvVGV4dF8obm9kZSwgaXNNYXJrZXIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLk5FWFQ6XG4gICAgICAgIGZpbmFsVGV4dCA9IHRoaXMubmV4dE5vZGVUb1RleHRfKG5vZGUsIGlzTWFya2VyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5QUkVWSU9VUzpcbiAgICAgICAgZmluYWxUZXh0ID0gdGhpcy5wcmV2aW91c05vZGVUb1RleHRfKG5vZGUsIGlzTWFya2VyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5TVEFDSzpcbiAgICAgICAgZmluYWxUZXh0ID0gdGhpcy5zdGFja05vZGVUb1RleHRfKG5vZGUsIG9sZE5vZGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLldPUktTUEFDRTpcbiAgICAgICAgZmluYWxUZXh0ID0gdGhpcy53b3Jrc3BhY2VOb2RlVG9UZXh0Xyhub2RlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbm9kZS50b1N0cmluZygpO1xuICAgIH1cbiAgICBmaW5hbFRleHQgKz0gdGhpcy5nZXROZXh0T3B0aW9uc18obm9kZSwgb2xkTm9kZSwgaXNNYXJrZXIpO1xuICAgIHJldHVybiBmaW5hbFRleHQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0ZXh0IGV4cGxhaW5pbmcgdGhlIG5leHQgb3B0aW9ucyBhdmFpbGFibGUgZm9yIGEgdXNlci5cbiAgICogQHBhcmFtIHshQmxvY2tseS5BU1ROb2RlfSBub2RlIFRoZSBjdXJyZW50IG5vZGUuXG4gICAqIEBwYXJhbSB7IUJsb2NrbHkuQVNUTm9kZX0gb2xkTm9kZSBUaGUgcHJldmlvdXMgbm9kZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBpc01hcmtlciBUcnVlIGlmIHRoZSBtYXJrZXIgd2FzIG1vdmVkLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRleHQgZXhwbGFpbmluZyBuZXh0IG9wdGlvbnMgZm9yIHRoZSBmaWVsZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldE5leHRPcHRpb25zXyhub2RlLCBvbGROb2RlLCBpc01hcmtlcikge1xuICAgIHN3aXRjaCAobm9kZS5nZXRUeXBlKCkpIHtcbiAgICAgIGNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLkZJRUxEOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZE9wdGlvbnNfKG5vZGUpO1xuICAgICAgY2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuQkxPQ0s6XG4gICAgICAgIHJldHVybiB0aGlzLmdldEJsb2NrT3B0aW9uc18obm9kZSk7XG4gICAgICBjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5JTlBVVDpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29ubmVjdGlvbk9wdGlvbnNfKG5vZGUsIGlzTWFya2VyKTtcbiAgICAgIGNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLk9VVFBVVDpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29ubmVjdGlvbk9wdGlvbnNfKG5vZGUsIGlzTWFya2VyKTtcbiAgICAgIGNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLk5FWFQ6XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbm5lY3Rpb25PcHRpb25zXyhub2RlLCBpc01hcmtlcik7XG4gICAgICBjYXNlIEJsb2NrbHkuQVNUTm9kZS50eXBlcy5QUkVWSU9VUzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29ubmVjdGlvbk9wdGlvbnNfKG5vZGUsIGlzTWFya2VyKTtcbiAgICAgIGNhc2UgQmxvY2tseS5BU1ROb2RlLnR5cGVzLlNUQUNLOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGFja09wdGlvbnNfKG5vZGUpO1xuICAgICAgY2FzZSBCbG9ja2x5LkFTVE5vZGUudHlwZXMuV09SS1NQQUNFOlxuICAgICAgICByZXR1cm4gJyc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbm9kZS50b1N0cmluZygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBuZXh0IG9wdGlvbnMgZm9yIHdoZW4gYSB1c2VyIGlzIG9uIGEgZmllbGQuXG4gICAqIFRoaXMgaXMgdG8gb3BlbiB0aGUgZmllbGQgb3IgdG8gY2hhbmdlIGxvY2F0aW9ucy5cbiAgICogQHBhcmFtIHshQmxvY2tseS5BU1ROb2RlfSBub2RlIFRoZSBmaWVsZCBub2RlLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZXh0IGV4cGxhaW5pbmcgdGhlIG5leHQgb3B0aW9ucyB3aGVuIGEgdXNlciBpcyBvbiBhXG4gICAqICAgICBmaWVsZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldEZpZWxkT3B0aW9uc18obm9kZSkge1xuICAgIGNvbnN0IGZpZWxkID0gbm9kZS5nZXRMb2NhdGlvbigpO1xuICAgIGlmIChmaWVsZC5pc0NsaWNrYWJsZSgpKSB7XG4gICAgICByZXR1cm4gYFRvIGludGVyYWN0IHdpdGggdGhlIGZpZWxkIGhpdCBlbnRlci4gVXNlIHRoZSBuZXh0IG9yIHByZXZpb3VzXG4gICAgICBrZXlzIHRvIGNoYW5nZSBsb2NhdGlvbnMuIGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnVXNlIHRoZSBuZXh0IG9yIHByZXZpb3VzIGtleXMgdG8gY2hhbmdlIGxvY2F0aW9ucy4gJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbmV4dCBvcHRpb25zIGZvciB3aGVuIGEgdXNlciBpcyBvbiBhIGJsb2NrLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZXh0IGV4cGxhaW5pbmcgdGhlIG5leHQgb3B0aW9ucyBmb3IgYSBibG9jay5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldEJsb2NrT3B0aW9uc18oKSB7XG4gICAgcmV0dXJuIGBVc2UgdGhlIG5leHQgb3IgcHJldmlvdXMga2V5cyB0byBjaGFuZ2UgbG9jYXRpb25zLiBgO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRleHQgZm9yIHRoZSBjb25uZWN0aW9uIHBvaW50LlxuICAgKiBAcGFyYW0geyFCbG9ja2x5LkFTVE5vZGV9IG5vZGUgVGhlIGNvbm5lY3Rpb24gbm9kZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBpc01hcmtlciBUcnVlIGlmIHRoZSBtYXJrZXIgd2FzIG1vdmVkLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZXh0IGV4cGxhaW5pbmcgdGhlIG5leHQgb3B0aW9ucyB3aGVuIGEgdXNlciBpcyBvbiBhXG4gICAqICAgICBjb25uZWN0aW9uLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0Q29ubmVjdGlvbk9wdGlvbnNfKG5vZGUsIGlzTWFya2VyKSB7XG4gICAgY29uc3QgbWFya2VyVGV4dCA9IGAuIFRvIG1hcmsgdGhpcyBsb2NhdGlvbiwgaGl0IGVudGVyLlxuICAgIFRvIGNoYW5nZSBsb2NhdGlvbnMgdXNlIHRoZSBuZXh0IG9yIHByZXZpb3VzIGtleXNgO1xuICAgIGxldCBmaW5hbFRleHQgPSAnJztcbiAgICBpZiAoIWlzTWFya2VyKSB7XG4gICAgICBmaW5hbFRleHQgKz0gYCR7bWFya2VyVGV4dH1gO1xuICAgIH1cbiAgICByZXR1cm4gZmluYWxUZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG9wdGlvbnMgZm9yIGEgdXNlciBvbiBhICBzdGFjayBvZiBibG9ja3MuXG4gICAqIEBwYXJhbSB7QmxvY2tseS5BU1ROb2RlfSBub2RlIFRoZSBzdGFjayBub2RlLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZXh0IGV4cGxhaW5pbmcgdGhlIG5leHQgb3B0aW9ucyB3aGVuIGEgdXNlciBpcyBvbiBhXG4gICAqICAgICBzdGFjayBvZiBibG9ja3MuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRTdGFja09wdGlvbnNfKG5vZGUpIHtcbiAgICBsZXQgZmluYWxUZXh0ID0gJyc7XG4gICAgaWYgKG5vZGUucHJldigpKSB7XG4gICAgICBmaW5hbFRleHQgKz0gYFRvIGdvIHRvIHRoZSBsYXN0IGJsb2NrIGluIHRoZSBwcmV2aW91cyBncm91cCBvZiBibG9ja3MsXG4gICAgICBwcmVzcyBwcmV2aW91cy5gO1xuICAgIH1cbiAgICBmaW5hbFRleHQgKz0gYCBUbyBnbyB0byB0aGUgZmlyc3QgYmxvY2sgaW4gdGhlIHN0YWNrIGhpdCBuZXh0LmA7XG4gICAgcmV0dXJuIGZpbmFsVGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRleHQgZm9yIHRoZSBzb3VyY2UgYmxvY2sgb2YgdGhlIG5vZGUuXG4gICAqIEBwYXJhbSB7IUJsb2NrbHkuQmxvY2tTdmd9IHNyY0Jsb2NrIFRoZSBibG9jayB0byBnZXQgdGhlIHRleHQgZm9yLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9lbXB0eVRva2VuIFRoZSBvcHRpb25hbCBlbXB0eSB0b2tlbi5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGV4dCBkZXNjcmliaW5nIHRoZSBzb3VyY2UgYmxvY2sgb2YgdGhlIG5vZGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRCbG9ja1RleHRfKHNyY0Jsb2NrLCBvcHRfZW1wdHlUb2tlbikge1xuICAgIGxldCBlbXB0eVRva2VuID0gb3B0X2VtcHR5VG9rZW4gfHwgQmxvY2tseS5Nc2dbJ0VNUFRZX1RPS0VOJ107XG4gICAgaWYgKHNyY0Jsb2NrKSB7XG4gICAgICBpZiAoc3JjQmxvY2suc3RhdGVtZW50SW5wdXRDb3VudCA+IDApIHtcbiAgICAgICAgZW1wdHlUb2tlbiA9ICcgZG8gYmxhbmsgJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBzcmNCbG9jay50b1N0cmluZyhudWxsLCBlbXB0eVRva2VuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRleHQgZm9yIGEgZmVpbGQuXG4gICAqIEBwYXJhbSB7IUJsb2NrbHkuQVNUTm9kZX0gbm9kZSBUaGUgbm9kZSB0byBjcmVhdGUgdGV4dCBmb3IuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRleHQgZm9yIHRoZSBzY3JlZW4gcmVhZGVyIHRvIHJlYWQgb3V0LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBmaWVsZE5vZGVUb1RleHRfKG5vZGUpIHtcbiAgICBjb25zdCBmaWVsZCA9IG5vZGUuZ2V0TG9jYXRpb24oKTtcbiAgICByZXR1cm4gZmllbGQuZ2V0VGV4dCgpICsgJy4gJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRleHQgZm9yIGEgZmVpbGQuXG4gICAqIEBwYXJhbSB7IUJsb2NrbHkuQVNUTm9kZX0gbm9kZSBUaGUgbm9kZSB0byBjcmVhdGUgdGV4dCBmb3IuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRleHQgZm9yIHRoZSBzY3JlZW4gcmVhZGVyIHRvIHJlYWQgb3V0LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBibG9ja05vZGVUb1RleHRfKG5vZGUpIHtcbiAgICBjb25zdCBibG9jayA9IC8qKiBAdHlwZXtCbG9ja2x5LkJsb2NrU3ZnfSAqLyAobm9kZS5nZXRMb2NhdGlvbigpKTtcbiAgICBjb25zdCBibG9ja1RleHQgPSB0aGlzLmdldEJsb2NrVGV4dF8oYmxvY2spO1xuICAgIGxldCBmaW5hbFRleHQgPSAnJztcbiAgICBpZiAoYmxvY2suZ2V0U3Vycm91bmRQYXJlbnQoKSkge1xuICAgICAgY29uc3QgcGFyZW50QmxvY2tUZXh0ID0gdGhpcy5nZXRCbG9ja1RleHRfKGJsb2NrLmdldFN1cnJvdW5kUGFyZW50KCkpO1xuICAgICAgZmluYWxUZXh0ICs9IGBZb3UgYXJlIGluc2lkZSBvZiBibG9jayAke3BhcmVudEJsb2NrVGV4dH0uIC4gYDtcbiAgICB9XG4gICAgZmluYWxUZXh0ICs9IGBZb3UgYXJlIG9uICwgJHtibG9ja1RleHR9LiAuIGA7XG4gICAgcmV0dXJuIGZpbmFsVGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRleHQgZm9yIGFuIGlucHV0LlxuICAgKiBAcGFyYW0geyFCbG9ja2x5LkFTVE5vZGV9IG5vZGUgVGhlIG5vZGUgdG8gY3JlYXRlIHRleHQgZm9yLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzTWFya2VyIFRydWUgaWYgdGhlIG1hcmtlciB3YXMgbW92ZWQuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRleHQgZm9yIHRoZSBzY3JlZW4gcmVhZGVyIHRvIHJlYWQgb3V0LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBpbnB1dE5vZGVUb1RleHRfKG5vZGUsIGlzTWFya2VyKSB7XG4gICAgY29uc3QgaW5wdXRDb25uZWN0aW9uID0gLyoqIEB0eXBle0Jsb2NrbHkuSW5wdXR9ICovIChub2RlLmdldExvY2F0aW9uKCkpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb25UZXh0ID0gYFlvdSBhcmUgb24gYSBjb25uZWN0aW9uYDtcbiAgICBsZXQgZmluYWxUZXh0ID0gJyc7XG4gICAgaWYgKGlucHV0Q29ubmVjdGlvbi50eXBlID09PSBCbG9ja2x5Lk5FWFRfU1RBVEVNRU5UKSB7XG4gICAgICBjb25zdCBibG9ja1RleHQgPSB0aGlzLmdldEJsb2NrVGV4dF8obm9kZS5nZXRTb3VyY2VCbG9jaygpKTtcbiAgICAgIGZpbmFsVGV4dCA9IGBJbnNpZGUgJHtibG9ja1RleHR9LiAke2Nvbm5lY3Rpb25UZXh0fS4gYDtcbiAgICB9IGVsc2UgaWYgKGlucHV0Q29ubmVjdGlvbi50eXBlID09PSBCbG9ja2x5LklOUFVUX1ZBTFVFKSB7XG4gICAgICBjb25zdCBibG9ja1RleHQgPSB0aGlzLmdldEJsb2NrVGV4dF8obm9kZS5nZXRTb3VyY2VCbG9jaygpLCAnICcpO1xuICAgICAgZmluYWxUZXh0ID0gYCR7Y29ubmVjdGlvblRleHR9IGFmdGVyICR7YmxvY2tUZXh0fWA7XG4gICAgfVxuICAgIHJldHVybiBmaW5hbFRleHQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB0ZXh0IGZvciBhIG91dHB1dCBjb25uZWN0aW9uLlxuICAgKiBAcGFyYW0geyFCbG9ja2x5LkFTVE5vZGV9IG5vZGUgVGhlIG5vZGUgdG8gY3JlYXRlIHRleHQgZm9yLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZXh0IGZvciB0aGUgc2NyZWVuIHJlYWRlciB0byByZWFkIG91dC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgb3V0cHV0Tm9kZVRvVGV4dF8obm9kZSkge1xuICAgIGNvbnN0IGJsb2NrVGV4dCA9IHRoaXMuZ2V0QmxvY2tUZXh0Xyhub2RlLmdldFNvdXJjZUJsb2NrKCkpO1xuICAgIHJldHVybiBgWW91IGFyZSBvbiBhIGNvbm5lY3Rpb24gZm9yIGJsb2NrLCAke2Jsb2NrVGV4dH1gO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGV4dCBmb3IgYSBuZXh0IGNvbm5lY3Rpb24uXG4gICAqIEBwYXJhbSB7IUJsb2NrbHkuQVNUTm9kZX0gbm9kZSBUaGUgbm9kZSB0byBjcmVhdGUgdGV4dCBmb3IuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNNYXJrZXIgVHJ1ZSB0byBnZXQgdGhlIHRleHQgZm9yIGEgbWFya2VyLFxuICAgKiAgICAgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZXh0IGZvciB0aGUgc2NyZWVuIHJlYWRlciB0byByZWFkIG91dC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgbmV4dE5vZGVUb1RleHRfKG5vZGUsIGlzTWFya2VyKSB7XG4gICAgY29uc3QgYmxvY2sgPSBub2RlLmdldFNvdXJjZUJsb2NrKCk7XG4gICAgY29uc3QgYmxvY2tUZXh0ID0gdGhpcy5nZXRCbG9ja1RleHRfKG5vZGUuZ2V0U291cmNlQmxvY2soKSk7XG4gICAgbGV0IGZpbmFsVGV4dCA9ICcnO1xuICAgIGlmIChibG9jay5nZXRTdXJyb3VuZFBhcmVudCgpKSB7XG4gICAgICBjb25zdCBwYXJlbnRCbG9ja1RleHQgPSB0aGlzLmdldEJsb2NrVGV4dF8oYmxvY2suZ2V0U3Vycm91bmRQYXJlbnQoKSk7XG4gICAgICBmaW5hbFRleHQgKz0gYFlvdSBhcmUgaW5zaWRlIG9mIGJsb2NrICR7cGFyZW50QmxvY2tUZXh0fS4gLiBgO1xuICAgIH1cbiAgICBmaW5hbFRleHQgKz0gYCR7QmxvY2tseS5Nc2dbJ05FWFQnXX0gJHtibG9ja1RleHR9YDtcbiAgICByZXR1cm4gZmluYWxUZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGV4dCBmb3IgYSBwcmV2aW91cyBjb25uZWN0aW9uLlxuICAgKiBAcGFyYW0geyFCbG9ja2x5LkFTVE5vZGV9IG5vZGUgVGhlIG5vZGUgdG8gY3JlYXRlIHRleHQgZm9yLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzTWFya2VyIFRydWUgdG8gZ2V0IHRoZSB0ZXh0IGZvciBhIG1hcmtlcixcbiAgICogICAgIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGV4dCBmb3IgdGhlIHNjcmVlbiByZWFkZXIgdG8gcmVhZCBvdXQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHByZXZpb3VzTm9kZVRvVGV4dF8obm9kZSwgaXNNYXJrZXIpIHtcbiAgICBjb25zdCBibG9jayA9IG5vZGUuZ2V0U291cmNlQmxvY2soKTtcbiAgICBjb25zdCBibG9ja1RleHQgPSB0aGlzLmdldEJsb2NrVGV4dF8oYmxvY2spO1xuICAgIGxldCBmaW5hbFRleHQgPSAnJztcbiAgICBpZiAoYmxvY2suZ2V0U3Vycm91bmRQYXJlbnQoKSkge1xuICAgICAgY29uc3QgcGFyZW50QmxvY2tUZXh0ID0gdGhpcy5nZXRCbG9ja1RleHRfKGJsb2NrLmdldFN1cnJvdW5kUGFyZW50KCkpO1xuICAgICAgZmluYWxUZXh0ICs9IGBZb3UgYXJlIGluc2lkZSBvZiBibG9jayAke3BhcmVudEJsb2NrVGV4dH0uIC4gYDtcbiAgICB9XG5cbiAgICBmaW5hbFRleHQgKz0gYCR7QmxvY2tseS5Nc2dbJ1BSRVZJT1VTJ119ICR7YmxvY2tUZXh0fWA7XG4gICAgcmV0dXJuIGZpbmFsVGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRleHQgZm9yIGEgc3RhY2sgb2YgYmxvY2tzLlxuICAgKiBAcGFyYW0geyFCbG9ja2x5LkFTVE5vZGV9IG5vZGUgVGhlIG5vZGUgdG8gY3JlYXRlIHRleHQgZm9yLlxuICAgKiBAcGFyYW0geyFCbG9ja2x5LkFTVE5vZGV9IG9sZE5vZGUgVGhlIHByZXZpb3VzIG5vZGUuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRleHQgZm9yIHRoZSBzY3JlZW4gcmVhZGVyIHRvIHJlYWQgb3V0LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBzdGFja05vZGVUb1RleHRfKG5vZGUsIG9sZE5vZGUpIHtcbiAgICBjb25zdCBzcmNCbG9jayA9IG5vZGUuZ2V0U291cmNlQmxvY2soKTtcbiAgICBjb25zdCBuZXdOb2RlVG9wQmxvY2sgPSBzcmNCbG9jay5nZXRUb3BTdGFja0Jsb2NrKCk7XG4gICAgbGV0IG9sZE5vZGVUb3BCbG9jayA9IG51bGw7XG4gICAgaWYgKG9sZE5vZGUgJiYgb2xkTm9kZS5nZXRTb3VyY2VCbG9jaygpKSB7XG4gICAgICBvbGROb2RlVG9wQmxvY2sgPSBvbGROb2RlLmdldFNvdXJjZUJsb2NrKCkuZ2V0VG9wU3RhY2tCbG9jaygpO1xuICAgIH1cblxuICAgIGxldCBmaW5hbFRleHQgPSAnJztcblxuICAgIGlmIChzcmNCbG9jayAmJiBzcmNCbG9jay53b3Jrc3BhY2UuaXNGbHlvdXQpIHtcbiAgICAgIGZpbmFsVGV4dCA9IHRoaXMuZ2V0QmxvY2tUZXh0Xyhub2RlLmdldFNvdXJjZUJsb2NrKCkpO1xuICAgICAgZmluYWxUZXh0ICs9IGAgLiAuIFRvIGFkZCB0aGlzIGJsb2NrIHRvIHRoZSB3b3Jrc3BhY2UgcHJlc3MgRW50ZXIuIC5cbiAgICAgIFRvIGdvIHRvIHRoZSBuZXh0IGJsb2NrIGhpdCBuZXh0LiAuIFRvIGdvIGJhY2sgdG8gdGhlIHdvcmtzcGFjZVxuICAgICAgaGl0IGVzY2FwZS4gYDtcbiAgICB9IGVsc2UgaWYgKHNyY0Jsb2NrKSB7XG4gICAgICBpZiAob2xkTm9kZVRvcEJsb2NrICE9PSBuZXdOb2RlVG9wQmxvY2spIHtcbiAgICAgICAgZmluYWxUZXh0ICs9IGBZb3UgYXJlIG9uIGEgbmV3IGdyb3VwIG9mIGJsb2Nrcy4gYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbmFsVGV4dCArPSBgWW91IGFyZSBvbiBhIGdyb3VwIG9mIGJsb2Nrcy4gYDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZpbmFsVGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRleHQgZm9yIGEgd29ya3NwYWNlLlxuICAgKiBAcGFyYW0geyFCbG9ja2x5LkFTVE5vZGV9IG5vZGUgVGhlIG5vZGUgdG8gY3JlYXRlIHRleHQgZm9yLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0ZXh0IGZvciB0aGUgc2NyZWVuIHJlYWRlciB0byByZWFkIG91dC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgd29ya3NwYWNlTm9kZVRvVGV4dF8obm9kZSkge1xuICAgIGNvbnN0IHdvcmtzcGFjZSA9IC8qKiBAdHlwZXtCbG9ja2x5LldvcmtzcGFjZVN2Z30gKi8gKG5vZGUuZ2V0TG9jYXRpb24oKSk7XG4gICAgLy8gVE9ETzogQWxsIHRleHQgc2hvdWxkIGJlIGFkZGVkIHRvIEJsb2NrbHkuTXNnIHRvIGFsbG93IGZvciB0cmFuc2xhdGlvbi5cbiAgICBsZXQgdGV4dCA9IG51bGw7XG4gICAgaWYgKHdvcmtzcGFjZS5pc0ZseW91dCkge1xuICAgICAgdGV4dCA9ICdJbiB0aGUgZmx5b3V0LCBwbGVhc2Ugc2VsZWN0IGEgYmxvY2snO1xuICAgIH0gZWxzZSBpZiAod29ya3NwYWNlLmlzTXV0YXRvcikge1xuICAgICAgdGV4dCA9ICdJbiB0aGUgbXV0YXRvciB3b3Jrc3BhY2UsIHVzZSB0aGlzIHdvcmtzcGFjZSB0byBjaGFuZ2UgYSBibG9jayc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRleHQgPSBCbG9ja2x5Lk1zZ1snTUFJTl9XUyddO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc3BlYWtlciA9IG5ldyBTcGVha2VyKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/speaker.js\n");

/***/ }),

/***/ "./src/tutorial.js":
/*!*************************!*\
  !*** ./src/tutorial.js ***!
  \*************************/
/*! exports provided: Tutorial */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Tutorial\", function() { return Tutorial; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _music__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./music */ \"./src/music.js\");\n/* harmony import */ var _tutorial_step__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tutorial_step */ \"./src/tutorial_step.js\");\n/* harmony import */ var micromodal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! micromodal */ \"./node_modules/micromodal/dist/micromodal.es.js\");\n/* harmony import */ var _speaker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./speaker */ \"./src/speaker.js\");\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Multi-step tutorial using modals.\n */\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n/**\n * A multi-step tutorial for the accessible music game.\n */\n\nvar Tutorial = /*#__PURE__*/function () {\n  /**\n   * Class for a tutorial.\n   * @param {Blockly.WorkspaceSvg} workspace The workspace the user\n   *     will interact with.\n   * @param {Music} music A reference to the music logic object.\n   * @param {function(string)} goalUpdateCb The callback function for goal\n   *    change.\n   * @param {function} endTutorialCb The function to call at the end of the\n   *     tutorial.\n   * @constructor\n   */\n  function Tutorial(workspace, music, goalUpdateCb, endTutorialCb) {\n    var _this = this;\n\n    _classCallCheck(this, Tutorial);\n\n    /**\n     * The id of the modal.\n     * @type {string}\n     */\n    this.modalId = 'tutorialModal';\n    /**\n     * The id of the tutorial text.\n     * @type {string}\n     */\n\n    this.stepTextId = this.modalId + 'Text';\n    /**\n     * The id of the next step button.\n     * @type {string}\n     */\n\n    this.stepButtonId = this.modalId + 'StepBtn';\n    /**\n     * The id of the hide modal button.\n     * @type {string}\n     */\n\n    this.hideButtonId = this.modalId + 'HideBtn';\n    /**\n     * An array of steps in the tutorial.\n     * @type {Array<!TutorialStep>}\n     */\n\n    this.steps = Tutorial.STEP_OBJECTS.map(function (obj) {\n      return new _tutorial_step__WEBPACK_IMPORTED_MODULE_2__[\"TutorialStep\"](obj.text, _this.stepTextId, _this.nextStep);\n    });\n    /**\n     * The index of the currently active step.\n     * @type {number}\n     */\n\n    this.curStepIndex = 0;\n    /**\n     * The currently active step.\n     * @type {TutorialStep}\n     */\n\n    this.curStep = this.steps[this.curStepIndex];\n    /**\n     * The Blockly workspace the user will interact with.\n     * @type {Blockly.WorkspaceSvg}\n     */\n\n    this.workspace = workspace;\n    /**\n     * The Music logic object.\n     * @type {Music}\n     */\n\n    this.music = music;\n    /**\n     * The node that was selected on the workspace when the modal\n     * opened.\n     * @type {Blockly.ASTNode}\n     */\n\n    this.curNode = null;\n    /**\n     * Callback function for goal update, which accepts a string\n     *     with the text to set the goal to.\n     * @type {function(string)}\n     */\n\n    this.goalUpdateCb = goalUpdateCb;\n    /**\n     * Callback function for the end of the tutorial.\n     * @type {function}\n     */\n\n    this.endTutorialCb = endTutorialCb;\n  }\n  /**\n   * Initialize DOM and show.\n   */\n\n\n  _createClass(Tutorial, [{\n    key: \"init\",\n    value: function init() {\n      this.createDom();\n      this.addCallbacks();\n      micromodal__WEBPACK_IMPORTED_MODULE_3__[\"default\"].show(this.modalId, {\n        onClose: function onClose() {\n          return _speaker__WEBPACK_IMPORTED_MODULE_4__[\"speaker\"].cancel();\n        }\n      });\n      this.curStep.show();\n      this.registerPlayHelpText();\n      this.loadWorkspace();\n      this.music.setOnFinishPlayCallback(null);\n    }\n    /**\n     * Load the workspace for the tutorial.\n     */\n\n  }, {\n    key: \"loadWorkspace\",\n    value: function loadWorkspace() {\n      var toolboxJson = {\n        'kind': 'flyoutToolbox',\n        'contents': [{\n          'kind': 'block',\n          'blockxml': \"<block type=\\\"music_note\\\">\\n                        <field name=\\\"DURATION\\\">0.25</field>\\n                        <value name=\\\"PITCH\\\">\\n                          <shadow type=\\\"music_pitch\\\">\\n                            <field name=\\\"PITCH\\\">C4</field>\\n                          </shadow>\\n                        </value>\\n                      </block>\"\n        }, {\n          'kind': 'block',\n          'type': 'music_rest'\n        }]\n      };\n      this.workspace.updateToolbox(toolboxJson);\n      var starterXml = \"<xml>\\n            <block type=\\\"music_start\\\" deletable=\\\"false\\\" x=\\\"180\\\"\\n            y=\\\"50\\\"></block>\\n          </xml>\";\n      this.workspace.clear();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.domToWorkspace(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.textToDom(starterXml), this.workspace);\n    }\n    /**\n     * Registers shortcut to replay the current tutorial step.\n     */\n\n  }, {\n    key: \"registerPlayHelpText\",\n    value: function registerPlayHelpText() {\n      var _this2 = this;\n\n      /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n      var playHelpText = {\n        name: 'playHelpText',\n        preconditionFn: function preconditionFn(workspace) {\n          return !workspace.options.readOnly;\n        },\n        callback: function callback() {\n          _speaker__WEBPACK_IMPORTED_MODULE_4__[\"speaker\"].speak(_this2.curStep.text, true);\n        }\n      };\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.register(playHelpText);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.addKeyMapping(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.H, playHelpText.name);\n    }\n    /**\n     * Display the next step, or end the tutorial if there are no more steps.\n     */\n\n  }, {\n    key: \"nextStep\",\n    value: function nextStep() {\n      this.curStepIndex++;\n\n      if (this.curStepIndex < this.steps.length) {\n        this.curStep = this.steps[this.curStepIndex];\n        micromodal__WEBPACK_IMPORTED_MODULE_3__[\"default\"].show(this.modalId, {\n          onClose: function onClose() {\n            return _speaker__WEBPACK_IMPORTED_MODULE_4__[\"speaker\"].cancel();\n          }\n        });\n        this.curStep.show();\n        this.goalUpdateCb(Tutorial.STEP_OBJECTS[this.curStepIndex].goalText);\n        this.stashCursor();\n      } else {\n        this.done();\n      }\n    }\n    /**\n     * End the tutorial.\n     */\n\n  }, {\n    key: \"done\",\n    value: function done() {\n      micromodal__WEBPACK_IMPORTED_MODULE_3__[\"default\"].close(this.modalId, {\n        onClose: function onClose() {\n          return _speaker__WEBPACK_IMPORTED_MODULE_4__[\"speaker\"].cancel();\n        }\n      });\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.disableKeyboardAccessibility();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.unregister('playHelpText');\n      this.endTutorialCb();\n    }\n    /**\n     * Save the current cursor node and disable keyboard nav.\n     * Call this when opening the modal.\n     */\n\n  }, {\n    key: \"stashCursor\",\n    value: function stashCursor() {\n      this.curNode = this.workspace.getCursor().getCurNode();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.disableKeyboardAccessibility();\n    }\n    /**\n     * Reenable keyboard nav and move the cursor to the previously\n     * selected cursor node. Call this when closing the modal.\n     */\n\n  }, {\n    key: \"popCursor\",\n    value: function popCursor() {\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.enableKeyboardAccessibility();\n\n      if (this.curNode) {// this.workspace.getCursor().setCurNode(this.curNode);\n        // speaker.cancel();\n      }\n    }\n    /**\n     * Add necessary handlers for any buttons on the modal.\n     */\n\n  }, {\n    key: \"addCallbacks\",\n    value: function addCallbacks() {\n      var _this3 = this;\n\n      document.getElementById(this.stepButtonId).addEventListener('click', function () {\n        _this3.nextStep();\n      });\n      document.getElementById(this.hideButtonId).addEventListener('click', function (e) {\n        micromodal__WEBPACK_IMPORTED_MODULE_3__[\"default\"].close(_this3.modalId);\n\n        _this3.popCursor();\n\n        Tutorial.STEP_OBJECTS[_this3.curStepIndex].onStart(_this3);\n\n        e.stopPropagation();\n        e.preventDefault();\n      });\n    }\n    /**\n     * Create the dom for the modal.\n     */\n\n  }, {\n    key: \"createDom\",\n    value: function createDom() {\n      document.getElementById(this.modalId).innerHTML = \"\\n     <div class=\\\"modal__overlay\\\" tabindex=\\\"-1\\\" data-micromodal-close>\\n      <div class=\\\"modal__container\\\" role=\\\"dialog\\\" aria-modal=\\\"true\\\"\\n        aria-labelledby=\\\"modal-1-title\\\">\\n        <header class=\\\"modal__header\\\">\\n          <button class=\\\"modal__close\\\" aria-label=\\\"Close modal\\\"\\n            id=\\\"tutorialCloseBtn\\\" data-micromodal-close></button>\\n        </header>\\n        <main class=\\\"modal__content\\\" id=\\\"modal-1-content\\\">\\n          <h2 class=\\\"modal__title\\\" id=\\\"\".concat(this.stepTextId, \"\\\"></h2>\\n        </main>\\n        <footer class=\\\"modal__footer\\\">\\n          <button class=\\\"modal__btn modal__btn-primary\\\" aria-label=\\\"Start step\\\"\\n            id=\\\"\").concat(this.hideButtonId, \"\\\">Start step</button>\\n          <button class=\\\"modal__btn modal__btn-primary\\\" aria-label=\\\"Skip step\\\"\\n            id=\\\"\").concat(this.stepButtonId, \"\\\">Skip step</button>\\n        </footer>\\n      </div>\\n    </div>\");\n    }\n    /**\n     * Get the current location, based on the event.\n     * @param {Blockly.Event} event An event to inspect for a cursor location.\n     * @return {Blockly.ASTNode} The current cursor location, or null if the event\n     *     didn't have one.\n     */\n\n  }, {\n    key: \"getCurrentLocation\",\n    value: function getCurrentLocation(event) {\n      var curNode = event.newNode;\n\n      if (curNode) {\n        return curNode.getLocation();\n      }\n\n      return null;\n    }\n  }]);\n\n  return Tutorial;\n}();\nTutorial.STEP_OBJECTS = [{\n  text: \"In this tutorial you will write code that plays musical notes. If at\\n      any point you are confused about what to do, press H to replay the goal\\n      for the current step. Press Enter to go to the next step.\",\n  goalText: \"Press Enter to go to the next step.\",\n  onStart: function onStart(tutorial) {\n    setTimeout(function () {\n      return tutorial.nextStep();\n    }, 10);\n  }\n}, {\n  text: \"You can move around the blocks of code with the up and down arrows.\\n    You will hear descriptions as you move around the blocks. .\\n    All blocks have connection points, which are places where you can add more\\n    code. . Use the down arrow to move to a connection point.\\n    Hit enter to begin. \",\n  goalText: \"Use the down arrow to move to a connection point.\",\n  onStart: function onStart(tutorial) {\n    var workspace = tutorial.workspace;\n\n    var listener = function listener(event) {\n      if (event.type === blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Events.MARKER_MOVE) {\n        var curNode = event.newNode;\n        var correctLocation = workspace.getTopBlocks()[0].inputList[1].connection;\n\n        if (curNode) {\n          var location = curNode.getLocation();\n\n          if (location === correctLocation) {\n            setTimeout(function () {\n              workspace.removeChangeListener(wrapper);\n              tutorial.nextStep();\n            }, 4700);\n          }\n        }\n      }\n    }; // Add a shortcut in place of the down arrow shortcut.\n\n\n    var wrapper = workspace.addChangeListener(listener);\n  }\n}, {\n  text: \"Great! You moved to a connection point. .\\n      To add more code, you first mark a location and then select the block you\\n      want to add. .\\n      Navigate to the connection point, then press enter to mark it. .\\n      Hit enter to begin. \",\n  goalText: \"Navigate to the connection point, then press enter to mark it.\",\n  onStart: function onStart(tutorial) {\n    var workspace = tutorial.workspace;\n\n    var listener = function listener(event) {\n      if (event.type === blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Events.MARKER_MOVE) {\n        var currentLocation = tutorial.getCurrentLocation(event);\n\n        if (currentLocation && !event.isCursor) {\n          var correctLocation = workspace.getTopBlocks()[0].inputList[1].connection;\n\n          if (currentLocation === correctLocation) {\n            setTimeout(function () {\n              workspace.removeChangeListener(wrapper);\n              tutorial.nextStep();\n            }, 2000);\n          }\n        }\n      }\n    }; // Add a shortcut in place of the down arrow shortcut.\n\n\n    var wrapper = workspace.addChangeListener(listener);\n  }\n}, {\n  text: \"Great! You marked a connection point. Now you can add more code\\n    blocks. .\\n    The toolbox is a list of code blocks that you can add to the workspace.\\n    You can always open the toolbox by pressing T. .\\n    Press T to open the toolbox, then use the up and down arrows to explore\\n    it. .\\n    Press F when you are finished exploring.\",\n  goalText: \"Press T to open the toolbox, then use the up and down arrows to\\n      explore it. . Press F when you are finished exploring.\",\n  onStart: function onStart(tutorial) {\n    /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n    var finishStep = {\n      name: 'finishStep',\n      preconditionFn: function preconditionFn(workspace) {\n        return workspace.keyboardAccessibilityMode && !workspace.options.readOnly;\n      },\n      callback: function callback() {\n        tutorial.nextStep();\n        blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.unregister('finishStep');\n      }\n    };\n    blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.register(finishStep);\n    var shiftF = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.createSerializedKey(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.F);\n    blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.addKeyMapping(shiftF, finishStep.name);\n  }\n}, {\n  text: \"Great! You have now successfully marked a connection point and\\n    navigated to a list of blocks that you can insert. .\\n    Now it\\u2019s time to put it all together. .\\n    Navigate to the connection and mark it, then press T to open the\\n    toolbox. Find the block that says \\u201Cplay whole note c4\\u201D and press\\n    enter to add it at the marked location.\",\n  goalText: \"Navigate to the connection and mark it, then press T to open the\\n    toolbox. Find the block that says \\u201Cplay whole note c4\\u201D and press\\n    enter to add it at the marked location.\",\n  onStart: function onStart(tutorial) {\n    var workspace = tutorial.workspace;\n\n    var listener = function listener(event) {\n      if (event.type === blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Events.MARKER_MOVE) {\n        var currentLocation = tutorial.getCurrentLocation(event);\n\n        if (currentLocation && event.isCursor && workspace.getAllBlocks().length > 1) {\n          var correctLocation = workspace.getAllBlocks()[1].previousConnection;\n\n          if (currentLocation === correctLocation) {\n            setTimeout(function () {\n              workspace.removeChangeListener(wrapper);\n              tutorial.nextStep();\n            }, 5400);\n          }\n        }\n      }\n    }; // Add a shortcut in place of the down arrow shortcut.\n\n\n    var wrapper = workspace.addChangeListener(listener);\n  }\n}, {\n  text: \"Great! You can now press Shift and P at the same time to run your\\n    code. You should hear a note play!\",\n  goalText: \"Press Shift and P at the same time to run your code.\",\n  onStart: function onStart(tutorial) {\n    var workspace = tutorial.workspace;\n    var starterXml = \"<xml>\\n            <block type=\\\"music_note\\\">\\n                    <field name=\\\"DURATION\\\">0.25</field>\\n                    <value name=\\\"PITCH\\\">\\n                      <shadow type=\\\"music_pitch\\\">\\n                        <field name=\\\"PITCH\\\">C4</field>\\n                      </shadow>\\n                    </value>\\n                  </block>\\n          </xml>\";\n    blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.domToWorkspace(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.textToDom(starterXml), workspace);\n    var musicNote = workspace.getBlocksByType('music_note')[0];\n    var musicStart = workspace.getBlocksByType('music_start')[0];\n    musicStart.inputList[1].connection.connect(musicNote.previousConnection);\n    tutorial.music.setOnFinishPlayCallback(function () {\n      tutorial.nextStep();\n    });\n  }\n}, {\n  text: \"Congratulations! You have finished the tutorial! In the game use\\n    H to give you tips and Shift and P to play your solution. .\\n    Hit enter to start the game.\",\n  goalText: \"Start the game.\",\n  onStart: function onStart(tutorial) {\n    setTimeout(function () {\n      return tutorial.nextStep();\n    }, 100);\n  }\n}];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHV0b3JpYWwuanM/MjQzOCJdLCJuYW1lcyI6WyJUdXRvcmlhbCIsIndvcmtzcGFjZSIsIm11c2ljIiwiZ29hbFVwZGF0ZUNiIiwiZW5kVHV0b3JpYWxDYiIsIm1vZGFsSWQiLCJzdGVwVGV4dElkIiwic3RlcEJ1dHRvbklkIiwiaGlkZUJ1dHRvbklkIiwic3RlcHMiLCJTVEVQX09CSkVDVFMiLCJtYXAiLCJvYmoiLCJUdXRvcmlhbFN0ZXAiLCJ0ZXh0IiwibmV4dFN0ZXAiLCJjdXJTdGVwSW5kZXgiLCJjdXJTdGVwIiwiY3VyTm9kZSIsImNyZWF0ZURvbSIsImFkZENhbGxiYWNrcyIsIk1pY3JvTW9kYWwiLCJzaG93Iiwib25DbG9zZSIsInNwZWFrZXIiLCJjYW5jZWwiLCJyZWdpc3RlclBsYXlIZWxwVGV4dCIsImxvYWRXb3Jrc3BhY2UiLCJzZXRPbkZpbmlzaFBsYXlDYWxsYmFjayIsInRvb2xib3hKc29uIiwidXBkYXRlVG9vbGJveCIsInN0YXJ0ZXJYbWwiLCJjbGVhciIsIkJsb2NrbHkiLCJYbWwiLCJkb21Ub1dvcmtzcGFjZSIsInRleHRUb0RvbSIsInBsYXlIZWxwVGV4dCIsIm5hbWUiLCJwcmVjb25kaXRpb25GbiIsIm9wdGlvbnMiLCJyZWFkT25seSIsImNhbGxiYWNrIiwic3BlYWsiLCJTaG9ydGN1dFJlZ2lzdHJ5IiwicmVnaXN0cnkiLCJyZWdpc3RlciIsImFkZEtleU1hcHBpbmciLCJ1dGlscyIsIktleUNvZGVzIiwiSCIsImxlbmd0aCIsImdvYWxUZXh0Iiwic3Rhc2hDdXJzb3IiLCJkb25lIiwiY2xvc2UiLCJuYXZpZ2F0aW9uIiwiZGlzYWJsZUtleWJvYXJkQWNjZXNzaWJpbGl0eSIsInVucmVnaXN0ZXIiLCJnZXRDdXJzb3IiLCJnZXRDdXJOb2RlIiwiZW5hYmxlS2V5Ym9hcmRBY2Nlc3NpYmlsaXR5IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicG9wQ3Vyc29yIiwib25TdGFydCIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiaW5uZXJIVE1MIiwiZXZlbnQiLCJuZXdOb2RlIiwiZ2V0TG9jYXRpb24iLCJ0dXRvcmlhbCIsInNldFRpbWVvdXQiLCJsaXN0ZW5lciIsInR5cGUiLCJFdmVudHMiLCJNQVJLRVJfTU9WRSIsImNvcnJlY3RMb2NhdGlvbiIsImdldFRvcEJsb2NrcyIsImlucHV0TGlzdCIsImNvbm5lY3Rpb24iLCJsb2NhdGlvbiIsInJlbW92ZUNoYW5nZUxpc3RlbmVyIiwid3JhcHBlciIsImFkZENoYW5nZUxpc3RlbmVyIiwiY3VycmVudExvY2F0aW9uIiwiZ2V0Q3VycmVudExvY2F0aW9uIiwiaXNDdXJzb3IiLCJmaW5pc2hTdGVwIiwia2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSIsInNoaWZ0RiIsImNyZWF0ZVNlcmlhbGl6ZWRLZXkiLCJGIiwiZ2V0QWxsQmxvY2tzIiwicHJldmlvdXNDb25uZWN0aW9uIiwibXVzaWNOb3RlIiwiZ2V0QmxvY2tzQnlUeXBlIiwibXVzaWNTdGFydCIsImNvbm5lY3QiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNhOzs7Ozs7OztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ08sSUFBTUEsUUFBYjtBQUNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRSxvQkFBWUMsU0FBWixFQUF1QkMsS0FBdkIsRUFBOEJDLFlBQTlCLEVBQTRDQyxhQUE1QyxFQUEyRDtBQUFBOztBQUFBOztBQUN6RDtBQUNKO0FBQ0E7QUFDQTtBQUNJLFNBQUtDLE9BQUwsR0FBZSxlQUFmO0FBRUE7QUFDSjtBQUNBO0FBQ0E7O0FBQ0ksU0FBS0MsVUFBTCxHQUFrQixLQUFLRCxPQUFMLEdBQWUsTUFB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QUFTLENBQUNELGtCQUFyRDtBQUVBdkIsWUFBUSxDQUFDeEUsS0FBVCxDQUFlMEIsdUJBQWYsQ0FBdUMsWUFBSTtBQUN6QzhDLGNBQVEsQ0FBQzNELFFBQVQ7QUFDRCxLQUZEO0FBR0Q7QUExQkgsQ0F0SXNCLEVBa0t0QjtBQUNFRCxNQUFJLHVLQUROO0FBSUVzQyxVQUFRLG1CQUpWO0FBS0VlLFNBQU8sRUFBRSxpQkFBU08sUUFBVCxFQUFtQjtBQUMxQkMsY0FBVSxDQUFDO0FBQUEsYUFBTUQsUUFBUSxDQUFDM0QsUUFBVCxFQUFOO0FBQUEsS0FBRCxFQUE0QixHQUE1QixDQUFWO0FBQ0Q7QUFQSCxDQWxLc0IsQ0FBeEIiLCJmaWxlIjoiLi9zcmMvdHV0b3JpYWwuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBNdWx0aS1zdGVwIHR1dG9yaWFsIHVzaW5nIG1vZGFscy5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgQmxvY2tseSBmcm9tICdibG9ja2x5L2NvcmUnO1xuaW1wb3J0IHtNdXNpY30gZnJvbSAnLi9tdXNpYyc7XG5pbXBvcnQge1R1dG9yaWFsU3RlcH0gZnJvbSAnLi90dXRvcmlhbF9zdGVwJztcbmltcG9ydCBNaWNyb01vZGFsIGZyb20gJ21pY3JvbW9kYWwnO1xuaW1wb3J0IHtzcGVha2VyfSBmcm9tICcuL3NwZWFrZXInO1xuXG4vKipcbiAqIEEgbXVsdGktc3RlcCB0dXRvcmlhbCBmb3IgdGhlIGFjY2Vzc2libGUgbXVzaWMgZ2FtZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFR1dG9yaWFsIHtcbiAgLyoqXG4gICAqIENsYXNzIGZvciBhIHR1dG9yaWFsLlxuICAgKiBAcGFyYW0ge0Jsb2NrbHkuV29ya3NwYWNlU3ZnfSB3b3Jrc3BhY2UgVGhlIHdvcmtzcGFjZSB0aGUgdXNlclxuICAgKiAgICAgd2lsbCBpbnRlcmFjdCB3aXRoLlxuICAgKiBAcGFyYW0ge011c2ljfSBtdXNpYyBBIHJlZmVyZW5jZSB0byB0aGUgbXVzaWMgbG9naWMgb2JqZWN0LlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IGdvYWxVcGRhdGVDYiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gZm9yIGdvYWxcbiAgICogICAgY2hhbmdlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBlbmRUdXRvcmlhbENiIFRoZSBmdW5jdGlvbiB0byBjYWxsIGF0IHRoZSBlbmQgb2YgdGhlXG4gICAqICAgICB0dXRvcmlhbC5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3b3Jrc3BhY2UsIG11c2ljLCBnb2FsVXBkYXRlQ2IsIGVuZFR1dG9yaWFsQ2IpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgaWQgb2YgdGhlIG1vZGFsLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5tb2RhbElkID0gJ3R1dG9yaWFsTW9kYWwnO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGlkIG9mIHRoZSB0dXRvcmlhbCB0ZXh0LlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5zdGVwVGV4dElkID0gdGhpcy5tb2RhbElkICsgJ1RleHQnO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGlkIG9mIHRoZSBuZXh0IHN0ZXAgYnV0dG9uLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5zdGVwQnV0dG9uSWQgPSB0aGlzLm1vZGFsSWQgKyAnU3RlcEJ0bic7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaWQgb2YgdGhlIGhpZGUgbW9kYWwgYnV0dG9uLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5oaWRlQnV0dG9uSWQgPSB0aGlzLm1vZGFsSWQgKyAnSGlkZUJ0bic7XG5cbiAgICAvKipcbiAgICAgKiBBbiBhcnJheSBvZiBzdGVwcyBpbiB0aGUgdHV0b3JpYWwuXG4gICAgICogQHR5cGUge0FycmF5PCFUdXRvcmlhbFN0ZXA+fVxuICAgICAqL1xuICAgIHRoaXMuc3RlcHMgPSBUdXRvcmlhbC5TVEVQX09CSkVDVFMubWFwKFxuICAgICAgICAob2JqKSA9PiBuZXcgVHV0b3JpYWxTdGVwKG9iai50ZXh0LCB0aGlzLnN0ZXBUZXh0SWQsIHRoaXMubmV4dFN0ZXApXG4gICAgKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBzdGVwLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5jdXJTdGVwSW5kZXggPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnRseSBhY3RpdmUgc3RlcC5cbiAgICAgKiBAdHlwZSB7VHV0b3JpYWxTdGVwfVxuICAgICAqL1xuICAgIHRoaXMuY3VyU3RlcCA9IHRoaXMuc3RlcHNbdGhpcy5jdXJTdGVwSW5kZXhdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIEJsb2NrbHkgd29ya3NwYWNlIHRoZSB1c2VyIHdpbGwgaW50ZXJhY3Qgd2l0aC5cbiAgICAgKiBAdHlwZSB7QmxvY2tseS5Xb3Jrc3BhY2VTdmd9XG4gICAgICovXG4gICAgdGhpcy53b3Jrc3BhY2UgPSB3b3Jrc3BhY2U7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgTXVzaWMgbG9naWMgb2JqZWN0LlxuICAgICAqIEB0eXBlIHtNdXNpY31cbiAgICAgKi9cbiAgICB0aGlzLm11c2ljID0gbXVzaWM7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbm9kZSB0aGF0IHdhcyBzZWxlY3RlZCBvbiB0aGUgd29ya3NwYWNlIHdoZW4gdGhlIG1vZGFsXG4gICAgICogb3BlbmVkLlxuICAgICAqIEB0eXBlIHtCbG9ja2x5LkFTVE5vZGV9XG4gICAgICovXG4gICAgdGhpcy5jdXJOb2RlID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciBnb2FsIHVwZGF0ZSwgd2hpY2ggYWNjZXB0cyBhIHN0cmluZ1xuICAgICAqICAgICB3aXRoIHRoZSB0ZXh0IHRvIHNldCB0aGUgZ29hbCB0by5cbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oc3RyaW5nKX1cbiAgICAgKi9cbiAgICB0aGlzLmdvYWxVcGRhdGVDYiA9IGdvYWxVcGRhdGVDYjtcblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgZW5kIG9mIHRoZSB0dXRvcmlhbC5cbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy5lbmRUdXRvcmlhbENiID0gZW5kVHV0b3JpYWxDYjtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIERPTSBhbmQgc2hvdy5cbiAgICovXG4gIGluaXQoKSB7XG4gICAgdGhpcy5jcmVhdGVEb20oKTtcbiAgICB0aGlzLmFkZENhbGxiYWNrcygpO1xuICAgIE1pY3JvTW9kYWwuc2hvdyh0aGlzLm1vZGFsSWQsIHtcbiAgICAgIG9uQ2xvc2U6ICgpID0+IHNwZWFrZXIuY2FuY2VsKCksXG4gICAgfSk7XG4gICAgdGhpcy5jdXJTdGVwLnNob3coKTtcbiAgICB0aGlzLnJlZ2lzdGVyUGxheUhlbHBUZXh0KCk7XG4gICAgdGhpcy5sb2FkV29ya3NwYWNlKCk7XG4gICAgdGhpcy5tdXNpYy5zZXRPbkZpbmlzaFBsYXlDYWxsYmFjayhudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHRoZSB3b3Jrc3BhY2UgZm9yIHRoZSB0dXRvcmlhbC5cbiAgICovXG4gIGxvYWRXb3Jrc3BhY2UoKSB7XG4gICAgY29uc3QgdG9vbGJveEpzb24gPSB7XG4gICAgICAna2luZCc6ICdmbHlvdXRUb29sYm94JyxcbiAgICAgICdjb250ZW50cyc6IFtcbiAgICAgICAge1xuICAgICAgICAgICdraW5kJzogJ2Jsb2NrJyxcbiAgICAgICAgICAnYmxvY2t4bWwnOiBgPGJsb2NrIHR5cGU9XCJtdXNpY19ub3RlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIkRVUkFUSU9OXCI+MC4yNTwvZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dmFsdWUgbmFtZT1cIlBJVENIXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzaGFkb3cgdHlwZT1cIm11c2ljX3BpdGNoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZpZWxkIG5hbWU9XCJQSVRDSFwiPkM0PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaGFkb3c+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3ZhbHVlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvYmxvY2s+YCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICdraW5kJzogJ2Jsb2NrJyxcbiAgICAgICAgICAndHlwZSc6ICdtdXNpY19yZXN0JyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcbiAgICB0aGlzLndvcmtzcGFjZS51cGRhdGVUb29sYm94KHRvb2xib3hKc29uKTtcbiAgICBjb25zdCBzdGFydGVyWG1sID1cbiAgICAgICAgYDx4bWw+XG4gICAgICAgICAgICA8YmxvY2sgdHlwZT1cIm11c2ljX3N0YXJ0XCIgZGVsZXRhYmxlPVwiZmFsc2VcIiB4PVwiMTgwXCJcbiAgICAgICAgICAgIHk9XCI1MFwiPjwvYmxvY2s+XG4gICAgICAgICAgPC94bWw+YDtcbiAgICB0aGlzLndvcmtzcGFjZS5jbGVhcigpO1xuICAgIEJsb2NrbHkuWG1sLmRvbVRvV29ya3NwYWNlKFxuICAgICAgICBCbG9ja2x5LlhtbC50ZXh0VG9Eb20oc3RhcnRlclhtbCksIHRoaXMud29ya3NwYWNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgc2hvcnRjdXQgdG8gcmVwbGF5IHRoZSBjdXJyZW50IHR1dG9yaWFsIHN0ZXAuXG4gICAqL1xuICByZWdpc3RlclBsYXlIZWxwVGV4dCgpIHtcbiAgICAvKiogQHR5cGUgeyFCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkuS2V5Ym9hcmRTaG9ydGN1dH0gKi9cbiAgICBjb25zdCBwbGF5SGVscFRleHQgPSB7XG4gICAgICBuYW1lOiAncGxheUhlbHBUZXh0JyxcbiAgICAgIHByZWNvbmRpdGlvbkZuOiBmdW5jdGlvbih3b3Jrc3BhY2UpIHtcbiAgICAgICAgcmV0dXJuICF3b3Jrc3BhY2Uub3B0aW9ucy5yZWFkT25seTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBzcGVha2VyLnNwZWFrKHRoaXMuY3VyU3RlcC50ZXh0LCB0cnVlKTtcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5yZWdpc3RlcihwbGF5SGVscFRleHQpO1xuICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5hZGRLZXlNYXBwaW5nKFxuICAgICAgICBCbG9ja2x5LnV0aWxzLktleUNvZGVzLkgsIHBsYXlIZWxwVGV4dC5uYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHRoZSBuZXh0IHN0ZXAsIG9yIGVuZCB0aGUgdHV0b3JpYWwgaWYgdGhlcmUgYXJlIG5vIG1vcmUgc3RlcHMuXG4gICAqL1xuICBuZXh0U3RlcCgpIHtcbiAgICB0aGlzLmN1clN0ZXBJbmRleCsrO1xuICAgIGlmICh0aGlzLmN1clN0ZXBJbmRleCA8IHRoaXMuc3RlcHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmN1clN0ZXAgPSB0aGlzLnN0ZXBzW3RoaXMuY3VyU3RlcEluZGV4XTtcbiAgICAgIE1pY3JvTW9kYWwuc2hvdyh0aGlzLm1vZGFsSWQsIHtcbiAgICAgICAgb25DbG9zZTogKCkgPT4gc3BlYWtlci5jYW5jZWwoKSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jdXJTdGVwLnNob3coKTtcbiAgICAgIHRoaXMuZ29hbFVwZGF0ZUNiKFR1dG9yaWFsLlNURVBfT0JKRUNUU1t0aGlzLmN1clN0ZXBJbmRleF0uZ29hbFRleHQpO1xuICAgICAgdGhpcy5zdGFzaEN1cnNvcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5kIHRoZSB0dXRvcmlhbC5cbiAgICovXG4gIGRvbmUoKSB7XG4gICAgTWljcm9Nb2RhbC5jbG9zZSh0aGlzLm1vZGFsSWQsIHtcbiAgICAgIG9uQ2xvc2U6ICgpID0+IHNwZWFrZXIuY2FuY2VsKCksXG4gICAgfSk7XG4gICAgQmxvY2tseS5uYXZpZ2F0aW9uLmRpc2FibGVLZXlib2FyZEFjY2Vzc2liaWxpdHkoKTtcbiAgICBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkudW5yZWdpc3RlcigncGxheUhlbHBUZXh0Jyk7XG4gICAgdGhpcy5lbmRUdXRvcmlhbENiKCk7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSB0aGUgY3VycmVudCBjdXJzb3Igbm9kZSBhbmQgZGlzYWJsZSBrZXlib2FyZCBuYXYuXG4gICAqIENhbGwgdGhpcyB3aGVuIG9wZW5pbmcgdGhlIG1vZGFsLlxuICAgKi9cbiAgc3Rhc2hDdXJzb3IoKSB7XG4gICAgdGhpcy5jdXJOb2RlID0gdGhpcy53b3Jrc3BhY2UuZ2V0Q3Vyc29yKCkuZ2V0Q3VyTm9kZSgpO1xuICAgIEJsb2NrbHkubmF2aWdhdGlvbi5kaXNhYmxlS2V5Ym9hcmRBY2Nlc3NpYmlsaXR5KCk7XG4gIH1cblxuICAvKipcbiAgICogUmVlbmFibGUga2V5Ym9hcmQgbmF2IGFuZCBtb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIHByZXZpb3VzbHlcbiAgICogc2VsZWN0ZWQgY3Vyc29yIG5vZGUuIENhbGwgdGhpcyB3aGVuIGNsb3NpbmcgdGhlIG1vZGFsLlxuICAgKi9cbiAgcG9wQ3Vyc29yKCkge1xuICAgIEJsb2NrbHkubmF2aWdhdGlvbi5lbmFibGVLZXlib2FyZEFjY2Vzc2liaWxpdHkoKTtcbiAgICBpZiAodGhpcy5jdXJOb2RlKSB7XG4gICAgICAvLyB0aGlzLndvcmtzcGFjZS5nZXRDdXJzb3IoKS5zZXRDdXJOb2RlKHRoaXMuY3VyTm9kZSk7XG4gICAgICAvLyBzcGVha2VyLmNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbmVjZXNzYXJ5IGhhbmRsZXJzIGZvciBhbnkgYnV0dG9ucyBvbiB0aGUgbW9kYWwuXG4gICAqL1xuICBhZGRDYWxsYmFja3MoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGVwQnV0dG9uSWQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMubmV4dFN0ZXAoKTtcbiAgICAgICAgfSk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5oaWRlQnV0dG9uSWQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICBNaWNyb01vZGFsLmNsb3NlKHRoaXMubW9kYWxJZCk7XG4gICAgICAgICAgdGhpcy5wb3BDdXJzb3IoKTtcbiAgICAgICAgICBUdXRvcmlhbC5TVEVQX09CSkVDVFNbdGhpcy5jdXJTdGVwSW5kZXhdLm9uU3RhcnQodGhpcyk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZG9tIGZvciB0aGUgbW9kYWwuXG4gICAqL1xuICBjcmVhdGVEb20oKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5tb2RhbElkKS5pbm5lckhUTUwgPSBgXG4gICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9fb3ZlcmxheVwiIHRhYmluZGV4PVwiLTFcIiBkYXRhLW1pY3JvbW9kYWwtY2xvc2U+XG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfX2NvbnRhaW5lclwiIHJvbGU9XCJkaWFsb2dcIiBhcmlhLW1vZGFsPVwidHJ1ZVwiXG4gICAgICAgIGFyaWEtbGFiZWxsZWRieT1cIm1vZGFsLTEtdGl0bGVcIj5cbiAgICAgICAgPGhlYWRlciBjbGFzcz1cIm1vZGFsX19oZWFkZXJcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibW9kYWxfX2Nsb3NlXCIgYXJpYS1sYWJlbD1cIkNsb3NlIG1vZGFsXCJcbiAgICAgICAgICAgIGlkPVwidHV0b3JpYWxDbG9zZUJ0blwiIGRhdGEtbWljcm9tb2RhbC1jbG9zZT48L2J1dHRvbj5cbiAgICAgICAgPC9oZWFkZXI+XG4gICAgICAgIDxtYWluIGNsYXNzPVwibW9kYWxfX2NvbnRlbnRcIiBpZD1cIm1vZGFsLTEtY29udGVudFwiPlxuICAgICAgICAgIDxoMiBjbGFzcz1cIm1vZGFsX190aXRsZVwiIGlkPVwiJHt0aGlzLnN0ZXBUZXh0SWR9XCI+PC9oMj5cbiAgICAgICAgPC9tYWluPlxuICAgICAgICA8Zm9vdGVyIGNsYXNzPVwibW9kYWxfX2Zvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtb2RhbF9fYnRuIG1vZGFsX19idG4tcHJpbWFyeVwiIGFyaWEtbGFiZWw9XCJTdGFydCBzdGVwXCJcbiAgICAgICAgICAgIGlkPVwiJHt0aGlzLmhpZGVCdXR0b25JZH1cIj5TdGFydCBzdGVwPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZGFsX19idG4gbW9kYWxfX2J0bi1wcmltYXJ5XCIgYXJpYS1sYWJlbD1cIlNraXAgc3RlcFwiXG4gICAgICAgICAgICBpZD1cIiR7dGhpcy5zdGVwQnV0dG9uSWR9XCI+U2tpcCBzdGVwPC9idXR0b24+XG4gICAgICAgIDwvZm9vdGVyPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24sIGJhc2VkIG9uIHRoZSBldmVudC5cbiAgICogQHBhcmFtIHtCbG9ja2x5LkV2ZW50fSBldmVudCBBbiBldmVudCB0byBpbnNwZWN0IGZvciBhIGN1cnNvciBsb2NhdGlvbi5cbiAgICogQHJldHVybiB7QmxvY2tseS5BU1ROb2RlfSBUaGUgY3VycmVudCBjdXJzb3IgbG9jYXRpb24sIG9yIG51bGwgaWYgdGhlIGV2ZW50XG4gICAqICAgICBkaWRuJ3QgaGF2ZSBvbmUuXG4gICAqL1xuICBnZXRDdXJyZW50TG9jYXRpb24oZXZlbnQpIHtcbiAgICBjb25zdCBjdXJOb2RlID0gZXZlbnQubmV3Tm9kZTtcbiAgICBpZiAoY3VyTm9kZSkge1xuICAgICAgcmV0dXJuIGN1ck5vZGUuZ2V0TG9jYXRpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuVHV0b3JpYWwuU1RFUF9PQkpFQ1RTID0gW1xuICB7XG4gICAgdGV4dDogYEluIHRoaXMgdHV0b3JpYWwgeW91IHdpbGwgd3JpdGUgY29kZSB0aGF0IHBsYXlzIG11c2ljYWwgbm90ZXMuIElmIGF0XG4gICAgICBhbnkgcG9pbnQgeW91IGFyZSBjb25mdXNlZCBhYm91dCB3aGF0IHRvIGRvLCBwcmVzcyBIIHRvIHJlcGxheSB0aGUgZ29hbFxuICAgICAgZm9yIHRoZSBjdXJyZW50IHN0ZXAuIFByZXNzIEVudGVyIHRvIGdvIHRvIHRoZSBuZXh0IHN0ZXAuYCxcbiAgICBnb2FsVGV4dDogYFByZXNzIEVudGVyIHRvIGdvIHRvIHRoZSBuZXh0IHN0ZXAuYCxcbiAgICBvblN0YXJ0OiBmdW5jdGlvbih0dXRvcmlhbCkge1xuICAgICAgc2V0VGltZW91dCgoKT0+IHR1dG9yaWFsLm5leHRTdGVwKCksIDEwKTtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGV4dDogYFlvdSBjYW4gbW92ZSBhcm91bmQgdGhlIGJsb2NrcyBvZiBjb2RlIHdpdGggdGhlIHVwIGFuZCBkb3duIGFycm93cy5cbiAgICBZb3Ugd2lsbCBoZWFyIGRlc2NyaXB0aW9ucyBhcyB5b3UgbW92ZSBhcm91bmQgdGhlIGJsb2Nrcy4gLlxuICAgIEFsbCBibG9ja3MgaGF2ZSBjb25uZWN0aW9uIHBvaW50cywgd2hpY2ggYXJlIHBsYWNlcyB3aGVyZSB5b3UgY2FuIGFkZCBtb3JlXG4gICAgY29kZS4gLiBVc2UgdGhlIGRvd24gYXJyb3cgdG8gbW92ZSB0byBhIGNvbm5lY3Rpb24gcG9pbnQuXG4gICAgSGl0IGVudGVyIHRvIGJlZ2luLiBgLFxuICAgIGdvYWxUZXh0OiBgVXNlIHRoZSBkb3duIGFycm93IHRvIG1vdmUgdG8gYSBjb25uZWN0aW9uIHBvaW50LmAsXG4gICAgb25TdGFydDogZnVuY3Rpb24odHV0b3JpYWwpIHtcbiAgICAgIGNvbnN0IHdvcmtzcGFjZSA9IHR1dG9yaWFsLndvcmtzcGFjZTtcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IEJsb2NrbHkuRXZlbnRzLk1BUktFUl9NT1ZFKSB7XG4gICAgICAgICAgY29uc3QgY3VyTm9kZSA9IGV2ZW50Lm5ld05vZGU7XG4gICAgICAgICAgY29uc3QgY29ycmVjdExvY2F0aW9uID1cbiAgICAgICAgICAgICAgd29ya3NwYWNlLmdldFRvcEJsb2NrcygpWzBdLmlucHV0TGlzdFsxXS5jb25uZWN0aW9uO1xuICAgICAgICAgIGlmIChjdXJOb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGN1ck5vZGUuZ2V0TG9jYXRpb24oKTtcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbiA9PT0gY29ycmVjdExvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICB3b3Jrc3BhY2UucmVtb3ZlQ2hhbmdlTGlzdGVuZXIod3JhcHBlcik7XG4gICAgICAgICAgICAgICAgdHV0b3JpYWwubmV4dFN0ZXAoKTtcbiAgICAgICAgICAgICAgfSwgNDcwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBBZGQgYSBzaG9ydGN1dCBpbiBwbGFjZSBvZiB0aGUgZG93biBhcnJvdyBzaG9ydGN1dC5cbiAgICAgIGNvbnN0IHdyYXBwZXIgPSB3b3Jrc3BhY2UuYWRkQ2hhbmdlTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXh0OlxuICAgICAgYEdyZWF0ISBZb3UgbW92ZWQgdG8gYSBjb25uZWN0aW9uIHBvaW50LiAuXG4gICAgICBUbyBhZGQgbW9yZSBjb2RlLCB5b3UgZmlyc3QgbWFyayBhIGxvY2F0aW9uIGFuZCB0aGVuIHNlbGVjdCB0aGUgYmxvY2sgeW91XG4gICAgICB3YW50IHRvIGFkZC4gLlxuICAgICAgTmF2aWdhdGUgdG8gdGhlIGNvbm5lY3Rpb24gcG9pbnQsIHRoZW4gcHJlc3MgZW50ZXIgdG8gbWFyayBpdC4gLlxuICAgICAgSGl0IGVudGVyIHRvIGJlZ2luLiBgLFxuICAgIGdvYWxUZXh0OiBgTmF2aWdhdGUgdG8gdGhlIGNvbm5lY3Rpb24gcG9pbnQsIHRoZW4gcHJlc3MgZW50ZXIgdG8gbWFyayBpdC5gLFxuICAgIG9uU3RhcnQ6IGZ1bmN0aW9uKHR1dG9yaWFsKSB7XG4gICAgICBjb25zdCB3b3Jrc3BhY2UgPSB0dXRvcmlhbC53b3Jrc3BhY2U7XG4gICAgICBjb25zdCBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSBCbG9ja2x5LkV2ZW50cy5NQVJLRVJfTU9WRSkge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRMb2NhdGlvbiA9IHR1dG9yaWFsLmdldEN1cnJlbnRMb2NhdGlvbihldmVudCk7XG4gICAgICAgICAgaWYgKGN1cnJlbnRMb2NhdGlvbiAmJiAhZXZlbnQuaXNDdXJzb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvcnJlY3RMb2NhdGlvbiA9XG4gICAgICAgICAgICAgICAgd29ya3NwYWNlLmdldFRvcEJsb2NrcygpWzBdLmlucHV0TGlzdFsxXS5jb25uZWN0aW9uO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRMb2NhdGlvbiA9PT0gY29ycmVjdExvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICB3b3Jrc3BhY2UucmVtb3ZlQ2hhbmdlTGlzdGVuZXIod3JhcHBlcik7XG4gICAgICAgICAgICAgICAgdHV0b3JpYWwubmV4dFN0ZXAoKTtcbiAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBBZGQgYSBzaG9ydGN1dCBpbiBwbGFjZSBvZiB0aGUgZG93biBhcnJvdyBzaG9ydGN1dC5cbiAgICAgIGNvbnN0IHdyYXBwZXIgPSB3b3Jrc3BhY2UuYWRkQ2hhbmdlTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXh0OiBgR3JlYXQhIFlvdSBtYXJrZWQgYSBjb25uZWN0aW9uIHBvaW50LiBOb3cgeW91IGNhbiBhZGQgbW9yZSBjb2RlXG4gICAgYmxvY2tzLiAuXG4gICAgVGhlIHRvb2xib3ggaXMgYSBsaXN0IG9mIGNvZGUgYmxvY2tzIHRoYXQgeW91IGNhbiBhZGQgdG8gdGhlIHdvcmtzcGFjZS5cbiAgICBZb3UgY2FuIGFsd2F5cyBvcGVuIHRoZSB0b29sYm94IGJ5IHByZXNzaW5nIFQuIC5cbiAgICBQcmVzcyBUIHRvIG9wZW4gdGhlIHRvb2xib3gsIHRoZW4gdXNlIHRoZSB1cCBhbmQgZG93biBhcnJvd3MgdG8gZXhwbG9yZVxuICAgIGl0LiAuXG4gICAgUHJlc3MgRiB3aGVuIHlvdSBhcmUgZmluaXNoZWQgZXhwbG9yaW5nLmAsXG4gICAgZ29hbFRleHQ6IGBQcmVzcyBUIHRvIG9wZW4gdGhlIHRvb2xib3gsIHRoZW4gdXNlIHRoZSB1cCBhbmQgZG93biBhcnJvd3MgdG9cbiAgICAgIGV4cGxvcmUgaXQuIC4gUHJlc3MgRiB3aGVuIHlvdSBhcmUgZmluaXNoZWQgZXhwbG9yaW5nLmAsXG4gICAgb25TdGFydDogZnVuY3Rpb24odHV0b3JpYWwpIHtcbiAgICAgIC8qKiBAdHlwZSB7IUJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5LZXlib2FyZFNob3J0Y3V0fSAqL1xuICAgICAgY29uc3QgZmluaXNoU3RlcCA9IHtcbiAgICAgICAgbmFtZTogJ2ZpbmlzaFN0ZXAnLFxuICAgICAgICBwcmVjb25kaXRpb25GbjogZnVuY3Rpb24od29ya3NwYWNlKSB7XG4gICAgICAgICAgcmV0dXJuIHdvcmtzcGFjZS5rZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlICYmXG4gICAgICAgICAgICAgICF3b3Jrc3BhY2Uub3B0aW9ucy5yZWFkT25seTtcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICB0dXRvcmlhbC5uZXh0U3RlcCgpO1xuICAgICAgICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS51bnJlZ2lzdGVyKCdmaW5pc2hTdGVwJyk7XG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkucmVnaXN0ZXIoZmluaXNoU3RlcCk7XG4gICAgICBjb25zdCBzaGlmdEYgPSBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkuY3JlYXRlU2VyaWFsaXplZEtleShcbiAgICAgICAgICBCbG9ja2x5LnV0aWxzLktleUNvZGVzLkYpO1xuICAgICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LmFkZEtleU1hcHBpbmcoXG4gICAgICAgICAgc2hpZnRGLCBmaW5pc2hTdGVwLm5hbWUpO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXh0OiBgR3JlYXQhIFlvdSBoYXZlIG5vdyBzdWNjZXNzZnVsbHkgbWFya2VkIGEgY29ubmVjdGlvbiBwb2ludCBhbmRcbiAgICBuYXZpZ2F0ZWQgdG8gYSBsaXN0IG9mIGJsb2NrcyB0aGF0IHlvdSBjYW4gaW5zZXJ0LiAuXG4gICAgTm93IGl04oCZcyB0aW1lIHRvIHB1dCBpdCBhbGwgdG9nZXRoZXIuIC5cbiAgICBOYXZpZ2F0ZSB0byB0aGUgY29ubmVjdGlvbiBhbmQgbWFyayBpdCwgdGhlbiBwcmVzcyBUIHRvIG9wZW4gdGhlXG4gICAgdG9vbGJveC4gRmluZCB0aGUgYmxvY2sgdGhhdCBzYXlzIOKAnHBsYXkgd2hvbGUgbm90ZSBjNOKAnSBhbmQgcHJlc3NcbiAgICBlbnRlciB0byBhZGQgaXQgYXQgdGhlIG1hcmtlZCBsb2NhdGlvbi5gLFxuICAgIGdvYWxUZXh0OiBgTmF2aWdhdGUgdG8gdGhlIGNvbm5lY3Rpb24gYW5kIG1hcmsgaXQsIHRoZW4gcHJlc3MgVCB0byBvcGVuIHRoZVxuICAgIHRvb2xib3guIEZpbmQgdGhlIGJsb2NrIHRoYXQgc2F5cyDigJxwbGF5IHdob2xlIG5vdGUgYzTigJ0gYW5kIHByZXNzXG4gICAgZW50ZXIgdG8gYWRkIGl0IGF0IHRoZSBtYXJrZWQgbG9jYXRpb24uYCxcbiAgICBvblN0YXJ0OiBmdW5jdGlvbih0dXRvcmlhbCkge1xuICAgICAgY29uc3Qgd29ya3NwYWNlID0gdHV0b3JpYWwud29ya3NwYWNlO1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gQmxvY2tseS5FdmVudHMuTUFSS0VSX01PVkUpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50TG9jYXRpb24gPSB0dXRvcmlhbC5nZXRDdXJyZW50TG9jYXRpb24oZXZlbnQpO1xuICAgICAgICAgIGlmIChjdXJyZW50TG9jYXRpb24gJiYgZXZlbnQuaXNDdXJzb3IgJiZcbiAgICAgICAgICAgICAgd29ya3NwYWNlLmdldEFsbEJsb2NrcygpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvcnJlY3RMb2NhdGlvbiA9XG4gICAgICAgICAgICAgICAgd29ya3NwYWNlLmdldEFsbEJsb2NrcygpWzFdLnByZXZpb3VzQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIGlmIChjdXJyZW50TG9jYXRpb24gPT09IGNvcnJlY3RMb2NhdGlvbikge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgd29ya3NwYWNlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIHR1dG9yaWFsLm5leHRTdGVwKCk7XG4gICAgICAgICAgICAgIH0sIDU0MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gQWRkIGEgc2hvcnRjdXQgaW4gcGxhY2Ugb2YgdGhlIGRvd24gYXJyb3cgc2hvcnRjdXQuXG4gICAgICBjb25zdCB3cmFwcGVyID0gd29ya3NwYWNlLmFkZENoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGV4dDogYEdyZWF0ISBZb3UgY2FuIG5vdyBwcmVzcyBTaGlmdCBhbmQgUCBhdCB0aGUgc2FtZSB0aW1lIHRvIHJ1biB5b3VyXG4gICAgY29kZS4gWW91IHNob3VsZCBoZWFyIGEgbm90ZSBwbGF5IWAsXG4gICAgZ29hbFRleHQ6IGBQcmVzcyBTaGlmdCBhbmQgUCBhdCB0aGUgc2FtZSB0aW1lIHRvIHJ1biB5b3VyIGNvZGUuYCxcbiAgICBvblN0YXJ0OiBmdW5jdGlvbih0dXRvcmlhbCkge1xuICAgICAgY29uc3Qgd29ya3NwYWNlID0gdHV0b3JpYWwud29ya3NwYWNlO1xuICAgICAgY29uc3Qgc3RhcnRlclhtbCA9XG4gICAgICAgIGA8eG1sPlxuICAgICAgICAgICAgPGJsb2NrIHR5cGU9XCJtdXNpY19ub3RlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxmaWVsZCBuYW1lPVwiRFVSQVRJT05cIj4wLjI1PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgPHZhbHVlIG5hbWU9XCJQSVRDSFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzaGFkb3cgdHlwZT1cIm11c2ljX3BpdGNoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIlBJVENIXCI+QzQ8L2ZpZWxkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvc2hhZG93PlxuICAgICAgICAgICAgICAgICAgICA8L3ZhbHVlPlxuICAgICAgICAgICAgICAgICAgPC9ibG9jaz5cbiAgICAgICAgICA8L3htbD5gO1xuICAgICAgQmxvY2tseS5YbWwuZG9tVG9Xb3Jrc3BhY2UoXG4gICAgICAgICAgQmxvY2tseS5YbWwudGV4dFRvRG9tKHN0YXJ0ZXJYbWwpLCB3b3Jrc3BhY2UpO1xuICAgICAgY29uc3QgbXVzaWNOb3RlID0gd29ya3NwYWNlLmdldEJsb2Nrc0J5VHlwZSgnbXVzaWNfbm90ZScpWzBdO1xuICAgICAgY29uc3QgbXVzaWNTdGFydCA9IHdvcmtzcGFjZS5nZXRCbG9ja3NCeVR5cGUoJ211c2ljX3N0YXJ0JylbMF07XG4gICAgICBtdXNpY1N0YXJ0LmlucHV0TGlzdFsxXS5jb25uZWN0aW9uLmNvbm5lY3QobXVzaWNOb3RlLnByZXZpb3VzQ29ubmVjdGlvbik7XG5cbiAgICAgIHR1dG9yaWFsLm11c2ljLnNldE9uRmluaXNoUGxheUNhbGxiYWNrKCgpPT57XG4gICAgICAgIHR1dG9yaWFsLm5leHRTdGVwKCk7XG4gICAgICB9KTtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGV4dDogYENvbmdyYXR1bGF0aW9ucyEgWW91IGhhdmUgZmluaXNoZWQgdGhlIHR1dG9yaWFsISBJbiB0aGUgZ2FtZSB1c2VcbiAgICBIIHRvIGdpdmUgeW91IHRpcHMgYW5kIFNoaWZ0IGFuZCBQIHRvIHBsYXkgeW91ciBzb2x1dGlvbi4gLlxuICAgIEhpdCBlbnRlciB0byBzdGFydCB0aGUgZ2FtZS5gLFxuICAgIGdvYWxUZXh0OiBgU3RhcnQgdGhlIGdhbWUuYCxcbiAgICBvblN0YXJ0OiBmdW5jdGlvbih0dXRvcmlhbCkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0dXRvcmlhbC5uZXh0U3RlcCgpLCAxMDApO1xuICAgIH0sXG4gIH0sXG5dO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/tutorial.js\n");

/***/ }),

/***/ "./test/index.js":
/*!***********************!*\
  !*** ./test/index.js ***!
  \***********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_speaker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/speaker */ \"./src/speaker.js\");\n/* harmony import */ var _src_note_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/note_player */ \"./src/note_player.js\");\n/* harmony import */ var _src_music_game_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/music_game_controller */ \"./src/music_game_controller.js\");\n/* harmony import */ var _src_overrides__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../src/overrides */ \"./src/overrides.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Plugin test.\n */\n\n\n\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var controller = new _src_music_game_controller__WEBPACK_IMPORTED_MODULE_3__[\"MusicGameController\"]();\n  document.getElementById('logGeneratedCode').addEventListener('click', function (event) {\n    controller.getMusic().logGeneratedCode();\n  });\n  document.getElementById('executeCode').addEventListener('click', function (event) {\n    controller.getMusic().execute();\n  });\n  document.getElementById('speedSlider').addEventListener('input', function (event) {\n    controller.getMusic().setBpm(this.value);\n  });\n  document.getElementById('playOnly').addEventListener('input', function (event) {\n    controller.getGame().setPlayOnly(this.checked);\n  }); // Initial state has arrow keys turned on.\n\n  registerArrowKeys(true);\n  addTestButtons();\n});\n/**\n * Add buttons for testing basic functionality (speaker, etc).\n */\n\nfunction addTestButtons() {\n  document.getElementById('playNote').addEventListener('click', function () {\n    _src_note_player__WEBPACK_IMPORTED_MODULE_2__[\"notePlayer\"].playNote('C4', '8n');\n  });\n  document.getElementById('playText').addEventListener('click', function () {\n    var textContent = document.getElementById('textInput').value;\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak(textContent);\n  });\n  document.getElementById('playNoteAndText').addEventListener('click', function () {\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak('C4', false, function () {\n      _src_note_player__WEBPACK_IMPORTED_MODULE_2__[\"notePlayer\"].playNote('C4', '8n');\n    });\n  });\n  document.addEventListener('visibilitychange', function (event) {\n    if (document.visibilityState === 'visible') {\n      console.log('tab is activate');\n    } else {\n      _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].cancel();\n    }\n  });\n  document.getElementById('enableArrowKeys').addEventListener('click', function (event) {\n    registerArrowKeys(event.currentTarget.checked);\n  });\n  document.getElementById('modalButton').addEventListener('click', function () {\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].modalToText(document.getElementById('modal-1'));\n  });\n  document.getElementById('modalButton').addEventListener('focus', function (e) {\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak('Hit enter to open the help menu');\n  });\n  document.getElementById('replayButton').addEventListener('click', function () {\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].modalToText(document.getElementById('modal-1'));\n  });\n}\n/**\n * Register the arrow keys to do keyboard navigation actions.\n * @param {boolean} register True if the arrow keys should be used for nav.\n */\n\n\nfunction registerArrowKeys(register) {\n  var keyCodeMappings = [[blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.UP, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.PREVIOUS], [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.DOWN, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.NEXT], [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.RIGHT, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.IN], [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.LEFT, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.OUT]];\n  keyCodeMappings.forEach(function (mapping) {\n    if (register) {\n      var _Blockly$ShortcutRegi;\n\n      (_Blockly$ShortcutRegi = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry).addKeyMapping.apply(_Blockly$ShortcutRegi, _toConsumableArray(mapping));\n    } else {\n      var _Blockly$ShortcutRegi2;\n\n      (_Blockly$ShortcutRegi2 = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry).removeKeyMapping.apply(_Blockly$ShortcutRegi2, _toConsumableArray(mapping));\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi90ZXN0L2luZGV4LmpzPzA0NDEiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udHJvbGxlciIsIk11c2ljR2FtZUNvbnRyb2xsZXIiLCJnZXRFbGVtZW50QnlJZCIsImV2ZW50IiwiZ2V0TXVzaWMiLCJsb2dHZW5lcmF0ZWRDb2RlIiwiZXhlY3V0ZSIsInNldEJwbSIsInZhbHVlIiwiZ2V0R2FtZSIsInNldFBsYXlPbmx5IiwiY2hlY2tlZCIsInJlZ2lzdGVyQXJyb3dLZXlzIiwiYWRkVGVzdEJ1dHRvbnMiLCJub3RlUGxheWVyIiwicGxheU5vdGUiLCJ0ZXh0Q29udGVudCIsInNwZWFrZXIiLCJzcGVhayIsInZpc2liaWxpdHlTdGF0ZSIsImNvbnNvbGUiLCJsb2ciLCJjYW5jZWwiLCJjdXJyZW50VGFyZ2V0IiwibW9kYWxUb1RleHQiLCJlIiwicmVnaXN0ZXIiLCJrZXlDb2RlTWFwcGluZ3MiLCJCbG9ja2x5IiwidXRpbHMiLCJLZXlDb2RlcyIsIlVQIiwibmF2aWdhdGlvbiIsImFjdGlvbk5hbWVzIiwiUFJFVklPVVMiLCJET1dOIiwiTkVYVCIsIlJJR0hUIiwiSU4iLCJMRUZUIiwiT1VUIiwiZm9yRWFjaCIsIm1hcHBpbmciLCJTaG9ydGN1dFJlZ2lzdHJ5IiwicmVnaXN0cnkiLCJhZGRLZXlNYXBwaW5nIiwicmVtb3ZlS2V5TWFwcGluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBQSxRQUFRLENBQUNDLGdCQUFULENBQTBCLGtCQUExQixFQUE4QyxZQUFXO0FBQ3ZELE1BQU1DLFVBQVUsR0FBRyxJQUFJQyw4RUFBSixFQUFuQjtBQUNBSCxVQUFRLENBQUNJLGNBQVQsQ0FBd0Isa0JBQXhCLEVBQTRDSCxnQkFBNUMsQ0FDSSxPQURKLEVBQ2EsVUFBU0ks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Q0FBQ0ksY0FBVCxDQUF3QixTQUF4QixDQUFwQjtBQUNELEdBSEw7QUFJRDtBQUVEO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQSxTQUFTVSxpQkFBVCxDQUEyQmMsUUFBM0IsRUFBcUM7QUFDbkMsTUFBTUMsZUFBZSxHQUFHLENBQ3RCLENBQUNDLG1EQUFPLENBQUNDLEtBQVIsQ0FBY0MsUUFBZCxDQUF1QkMsRUFBeEIsRUFBNEJILG1EQUFPLENBQUNJLFVBQVIsQ0FBbUJDLFdBQW5CLENBQStCQyxRQUEzRCxDQURzQixFQUV0QixDQUFDTixtREFBTyxDQUFDQyxLQUFSLENBQWNDLFFBQWQsQ0FBdUJLLElBQXhCLEVBQThCUCxtREFBTyxDQUFDSSxVQUFSLENBQW1CQyxXQUFuQixDQUErQkcsSUFBN0QsQ0FGc0IsRUFHdEIsQ0FBQ1IsbURBQU8sQ0FBQ0MsS0FBUixDQUFjQyxRQUFkLENBQXVCTyxLQUF4QixFQUErQlQsbURBQU8sQ0FBQ0ksVUFBUixDQUFtQkMsV0FBbkIsQ0FBK0JLLEVBQTlELENBSHNCLEVBSXRCLENBQUNWLG1EQUFPLENBQUNDLEtBQVIsQ0FBY0MsUUFBZCxDQUF1QlMsSUFBeEIsRUFBOEJYLG1EQUFPLENBQUNJLFVBQVIsQ0FBbUJDLFdBQW5CLENBQStCTyxHQUE3RCxDQUpzQixDQUF4QjtBQUtBYixpQkFBZSxDQUFDYyxPQUFoQixDQUF3QixVQUFDQyxPQUFELEVBQWE7QUFDbkMsUUFBSWhCLFFBQUosRUFBYztBQUFBOztBQUNaLCtCQUFBRSxtREFBTyxDQUFDZSxnQkFBUixDQUF5QkMsUUFBekIsRUFBa0NDLGFBQWxDLGlEQUFtREgsT0FBbkQ7QUFDRCxLQUZELE1BRU87QUFBQTs7QUFDTCxnQ0FBQWQsbURBQU8sQ0FBQ2UsZ0JBQVIsQ0FBeUJDLFFBQXpCLEVBQWtDRSxnQkFBbEMsa0RBQXNESixPQUF0RDtBQUNEO0FBQ0YsR0FORDtBQU9EIiwiZmlsZSI6Ii4vdGVzdC9pbmRleC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFBsdWdpbiB0ZXN0LlxuICovXG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5pbXBvcnQge3NwZWFrZXJ9IGZyb20gJy4uL3NyYy9zcGVha2VyJztcbmltcG9ydCB7bm90ZVBsYXllcn0gZnJvbSAnLi4vc3JjL25vdGVfcGxheWVyJztcbmltcG9ydCB7TXVzaWNHYW1lQ29udHJvbGxlcn0gZnJvbSAnLi4vc3JjL211c2ljX2dhbWVfY29udHJvbGxlcic7XG5pbXBvcnQgJy4uL3NyYy9vdmVycmlkZXMnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgTXVzaWNHYW1lQ29udHJvbGxlcigpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nR2VuZXJhdGVkQ29kZScpLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb250cm9sbGVyLmdldE11c2ljKCkubG9nR2VuZXJhdGVkQ29kZSgpO1xuICAgICAgfSk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGVjdXRlQ29kZScpLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb250cm9sbGVyLmdldE11c2ljKCkuZXhlY3V0ZSgpO1xuICAgICAgfSk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGVlZFNsaWRlcicpLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnaW5wdXQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb250cm9sbGVyLmdldE11c2ljKCkuc2V0QnBtKHRoaXMudmFsdWUpO1xuICAgICAgfSk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5T25seScpLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnaW5wdXQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb250cm9sbGVyLmdldEdhbWUoKS5zZXRQbGF5T25seSh0aGlzLmNoZWNrZWQpO1xuICAgICAgfSk7XG5cbiAgLy8gSW5pdGlhbCBzdGF0ZSBoYXMgYXJyb3cga2V5cyB0dXJuZWQgb24uXG4gIHJlZ2lzdGVyQXJyb3dLZXlzKHRydWUpO1xuICBhZGRUZXN0QnV0dG9ucygpO1xufSk7XG5cbi8qKlxuICogQWRkIGJ1dHRvbnMgZm9yIHRlc3RpbmcgYmFzaWMgZnVuY3Rpb25hbGl0eSAoc3BlYWtlciwgZXRjKS5cbiAqL1xuZnVuY3Rpb24gYWRkVGVzdEJ1dHRvbnMoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5Tm90ZScpLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbm90ZVBsYXllci5wbGF5Tm90ZSgnQzQnLCAnOG4nKTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheVRleHQnKS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHRJbnB1dCcpLnZhbHVlO1xuICAgICAgICBzcGVha2VyLnNwZWFrKHRleHRDb250ZW50KTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheU5vdGVBbmRUZXh0JykuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzcGVha2VyLnNwZWFrKCdDNCcsIGZhbHNlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBub3RlUGxheWVyLnBsYXlOb3RlKCdDNCcsICc4bicpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgKGV2ZW50KSA9PiB7XG4gICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICBjb25zb2xlLmxvZygndGFiIGlzIGFjdGl2YXRlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIuY2FuY2VsKCk7XG4gICAgfVxuICB9KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5hYmxlQXJyb3dLZXlzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLFxuICAgICAgKGV2ZW50KSA9PiB7XG4gICAgICAgIHJlZ2lzdGVyQXJyb3dLZXlzKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZCk7XG4gICAgICB9KTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsQnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNwZWFrZXIubW9kYWxUb1RleHQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLTEnKSk7XG4gICAgICB9KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxCdXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsXG4gICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgIHNwZWFrZXIuc3BlYWsoJ0hpdCBlbnRlciB0byBvcGVuIHRoZSBoZWxwIG1lbnUnKTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwbGF5QnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNwZWFrZXIubW9kYWxUb1RleHQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLTEnKSk7XG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlciB0aGUgYXJyb3cga2V5cyB0byBkbyBrZXlib2FyZCBuYXZpZ2F0aW9uIGFjdGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHJlZ2lzdGVyIFRydWUgaWYgdGhlIGFycm93IGtleXMgc2hvdWxkIGJlIHVzZWQgZm9yIG5hdi5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJBcnJvd0tleXMocmVnaXN0ZXIpIHtcbiAgY29uc3Qga2V5Q29kZU1hcHBpbmdzID0gW1xuICAgIFtCbG9ja2x5LnV0aWxzLktleUNvZGVzLlVQLCBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuUFJFVklPVVNdLFxuICAgIFtCbG9ja2x5LnV0aWxzLktleUNvZGVzLkRPV04sIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5ORVhUXSxcbiAgICBbQmxvY2tseS51dGlscy5LZXlDb2Rlcy5SSUdIVCwgQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLklOXSxcbiAgICBbQmxvY2tseS51dGlscy5LZXlDb2Rlcy5MRUZULCBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuT1VUXV07XG4gIGtleUNvZGVNYXBwaW5ncy5mb3JFYWNoKChtYXBwaW5nKSA9PiB7XG4gICAgaWYgKHJlZ2lzdGVyKSB7XG4gICAgICBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkuYWRkS2V5TWFwcGluZyguLi5tYXBwaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LnJlbW92ZUtleU1hcHBpbmcoLi4ubWFwcGluZyk7XG4gICAgfVxuICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./test/index.js\n");

/***/ })

})
webpackHotUpdate("main",{

/***/ "./src/field_pitch.js":
/*!****************************!*\
  !*** ./src/field_pitch.js ***!
  \****************************/
/*! exports provided: FieldPitch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FieldPitch\", function() { return FieldPitch; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * @license\n * Copyright 2016 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Music pitch input field. Borrowed from Blockly Games.\n * @author fraser@google.com (Neil Fraser)\n * @author samelh@google.com (Sam El-Husseini)\n */\n\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n/**\n * Pitch field from Blockly Games music.\n * @extends {Blockly.FieldTextInput}\n */\n\nvar FieldPitch = /*#__PURE__*/function (_Blockly$FieldTextInp) {\n  _inherits(FieldPitch, _Blockly$FieldTextInp);\n\n  var _super = _createSuper(FieldPitch);\n\n  /**\n   * Class for an editable pitch field.\n   * @param {string} text The initial content of the field.\n   * @constructor\n   */\n  function FieldPitch(text) {\n    _classCallCheck(this, FieldPitch);\n\n    return _super.call(this, text);\n  }\n  /**\n   * Construct a FieldPitch from a JSON arg object.\n   * @param {!Object} options A JSON object with options (pitch).\n   * @return {!FieldPitch} The new field instance.\n   * @package\n   * @nocollapse\n   */\n\n\n  _createClass(FieldPitch, [{\n    key: \"showEditor_\",\n\n    /**\n     * Show the inline free-text editor on top of the text and the note picker.\n     * @private\n     */\n    value: function showEditor_() {\n      _get(_getPrototypeOf(FieldPitch.prototype), \"showEditor_\", this).call(this);\n\n      var div = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.WidgetDiv.DIV;\n\n      if (!div.firstChild) {\n        // Mobile interface uses Blockly.prompt.\n        return;\n      } // Build the DOM.\n\n\n      var editor = this.dropdownCreate_();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.DropDownDiv.getContentDiv().appendChild(editor);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.DropDownDiv.setColour(this.sourceBlock_.getColour(), this.sourceBlock_.style.colourTertiary);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.DropDownDiv.showPositionedByField(this, this.dropdownDispose_.bind(this)); // The note picker is different from other fields in that it updates on\n      // mousemove even if it's not in the middle of a drag.  In future we may\n      // change this behaviour.  For now, using bindEvent_ instead of\n      // bindEventWithChecks_ allows it to work without a mousedown/touchstart.\n\n      this.clickWrapper_ = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.bindEvent_(this.imageElement_, 'click', this, this.hide_);\n      this.moveWrapper_ = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.bindEvent_(this.imageElement_, 'mousemove', this, this.onMouseMove);\n      this.bindAdditionalInputEvents_(this.htmlInput_);\n      this.updateGraph_();\n    }\n    /**\n     * Create the pitch editor.\n     * @return {!Element} The newly created pitch picker.\n     * @private\n     */\n\n  }, {\n    key: \"dropdownCreate_\",\n    value: function dropdownCreate_() {\n      this.imageElement_ = document.createElement('div');\n      this.imageElement_.id = 'notePicker';\n      return this.imageElement_;\n    }\n    /**\n     * Dispose of events belonging to the pitch editor.\n     * @private\n     */\n\n  }, {\n    key: \"dropdownDispose_\",\n    value: function dropdownDispose_() {\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.unbindEvent_(this.clickWrapper_);\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.unbindEvent_(this.moveWrapper_);\n    }\n    /**\n     * Hide the editor.\n     * @private\n     */\n\n  }, {\n    key: \"hide_\",\n    value: function hide_() {\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.WidgetDiv.hide();\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.DropDownDiv.hideWithoutAnimation();\n    }\n    /**\n     * Set the note to match the mouse's position.\n     * @param {!Event} e Mouse move event.\n     */\n\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove(e) {\n      var bBox = this.imageElement_.getBoundingClientRect();\n      var dy = e.clientY - bBox.top;\n      var note = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.math.clamp(Math.round(13.5 - dy / 7.5), 0, 12);\n      this.imageElement_.style.backgroundPosition = -note * 37 + 'px 0';\n      this.setEditorValue_(this.valueToNote(note));\n    }\n    /**\n     * Convert the machine-readable value (0-12) to human-readable text (C3-A4).\n     * @param {number|string} value The provided value.\n     * @return {string|undefined} The respective note, or undefined if invalid.\n     */\n\n  }, {\n    key: \"valueToNote\",\n    value: function valueToNote(value) {\n      return FieldPitch.NOTES[Number(value)];\n    }\n    /**\n     * Convert the human-readable text (C3-A4) to machine-readable value (0-12).\n     * @param {string} text The provided note.\n     * @return {number|undefined} The respective value, or undefined if invalid.\n     */\n\n  }, {\n    key: \"noteToValue\",\n    value: function noteToValue(text) {\n      var normalizedText = text.trim().toUpperCase();\n      var i = FieldPitch.NOTES.indexOf(normalizedText);\n      return i > -1 ? i : undefined;\n    }\n    /**\n     * Updates the graph when the field rerenders.\n     * @private\n     * @override\n     */\n\n  }, {\n    key: \"render_\",\n    value: function render_() {\n      _get(_getPrototypeOf(FieldPitch.prototype), \"render_\", this).call(this);\n\n      this.updateGraph_();\n    }\n    /**\n     * Redraw the note picker with the current note.\n     * @private\n     */\n\n  }, {\n    key: \"updateGraph_\",\n    value: function updateGraph_() {\n      if (!this.imageElement_) {\n        return;\n      }\n\n      var i = this.noteToValue(this.getValue());\n      this.imageElement_.style.backgroundPosition = -i * 37 + 'px 0';\n    }\n    /**\n     * Ensure that only a valid value may be entered.\n     * @param {*} opt_newValue The input value.\n     * @return {*} A valid value, or null if invalid.\n     */\n\n  }, {\n    key: \"doClassValidation_\",\n    value: function doClassValidation_(opt_newValue) {\n      if (opt_newValue === null || opt_newValue === undefined) {\n        return null;\n      }\n\n      var noteNum = this.noteToValue(opt_newValue);\n\n      if (noteNum && this.valueToNote(noteNum) == opt_newValue) {\n        return opt_newValue;\n      }\n\n      return null;\n    }\n    /**\n     * Select a note one higher than current, or stay at the highest note.\n     */\n\n  }, {\n    key: \"selectHigherNote\",\n    value: function selectHigherNote() {\n      var note = Math.min(this.getValue() + 1, 12);\n      this.setEditorValue_(note);\n    }\n    /**\n     * Select a note one lower than current, or stay at the lowest note.\n     */\n\n  }, {\n    key: \"selectLowerNote\",\n    value: function selectLowerNote() {\n      var note = Math.max(this.getValue() - 1, 0);\n      this.setEditorValue_(note);\n    }\n    /**\n     * Handles next/previous key presses on the input event.\n     * OnBlocklyAction would normally receive next/previous actions,\n     * but the html input element is capturing the keypresses.\n     * We bind our own event that only handles keys registered to next/previous.\n     * If we handle it, we stop other handlers from firing.\n     * This does not clobber the events registered by FieldTextInput, so\n     * esc and enter presses are still handled by that.\n     * @param {!Event} e Keyboard event.\n     */\n\n  }, {\n    key: \"handleKeyPress_\",\n    value: function handleKeyPress_(e) {\n      var action = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry.getKeyboardShortcuts(e.keyCode);\n      var handled = false;\n\n      if (action.includes('next')) {\n        this.selectLowerNote();\n        handled = true;\n      } else if (action.includes('previous')) {\n        this.selectHigherNote();\n        handled = true;\n      }\n\n      if (handled) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n    /**\n     * Bind handler for keypresses on input.\n     * @param {!HTMLElement} htmlInput Input element.\n     */\n\n  }, {\n    key: \"bindAdditionalInputEvents_\",\n    value: function bindAdditionalInputEvents_(htmlInput) {\n      this.additionalOnKeyDownWrapper_ = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.bindEventWithChecks_(htmlInput, 'keydown', this, this.handleKeyPress_);\n    }\n    /**\n     * Unbind handler for user input.\n     * @private\n     */\n\n  }, {\n    key: \"unbindAdditionalInputEvents_\",\n    value: function unbindAdditionalInputEvents_() {\n      if (this.additionalOnKeyDownWrapper_) {\n        blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.unbindEvent_(this.additionalOnKeyDownWrapper_);\n        this.additionalOnKeyDownWrapper_ = null;\n      }\n    }\n    /**\n     * Dispose of event handlers.\n     * @override\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.unbindAdditionalInputEvents_();\n\n      _get(_getPrototypeOf(FieldPitch.prototype), \"dispose\", this).call(this);\n    }\n  }], [{\n    key: \"fromJson\",\n    value: function fromJson(options) {\n      return new FieldPitch(options['pitch']);\n    }\n  }]);\n\n  return FieldPitch;\n}(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.FieldTextInput);\n/**\n * All notes available for the picker.\n */\n\nFieldPitch.NOTES = 'C3 D3 E3 F3 G3 A3 B3 C4 D4 E4 F4 G4 A4'.split(/ /);\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.fieldRegistry.register('field_pitch', FieldPitch);\n/**\n * CSS for the pitch field.\n * This field is using CSS to set a background image of a series of notes, then\n * translating left or right to show only the correct note.\n */\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Css.register([\n/* eslint-disable indent */\n\"#notePicker {\\n    background-image: url(https://raw.githubusercontent.com/google/blockly-games/master/appengine/music/notes.png);\\n    border: 1px solid #ccc;\\n    height: 109px;\\n    width: 46px;\\n  }\"\n/* eslint-enable indent */\n]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZmllbGRfcGl0Y2guanM/OThkZCJdLCJuYW1lcyI6WyJGaWVsZFBpdGNoIiwidGV4dCIsImRpdiIsIkJsb2NrbHkiLCJXaWRnZXREaXYiLCJESVYiLCJmaXJzdENoaWxkIiwiZWRpdG9yIiwiZHJvcGRvd25DcmVhdGVfIiwiRHJvcERvd25EaXYiLCJnZXRDb250ZW50RGl2IiwiYXBwZW5kQ2hpbGQiLCJzZXRDb2xvdXIiLCJzb3VyY2VCbG9ja18iLCJnZXRDb2xvdXIiLCJzdHlsZSIsImNvbG91clRlcnRpYXJ5Iiwic2hvd1Bvc2l0aW9uZWRCeUZpZWxkIiwiZHJvcGRvd25EaXNwb3NlXyIsImJpbmQiLCJjbGlja1dyYXBwZXJfIiwiYmluZEV2ZW50XyIsImltYWdlRWxlbWVudF8iLCJoaWRlXyIsIm1vdmVXcmFwcGVyXyIsIm9uTW91c2VNb3ZlIiwiYmluZEFkZGl0aW9uYWxJbnB1dEV2ZW50c18iLCJodG1sSW5wdXRfIiwidXBkYXRlR3JhcGhfIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJ1bmJpbmRFdmVudF8iLCJoaWRlIiwiaGlkZVdpdGhvdXRBbmltYXRpb24iLCJlIiwiYkJveCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImR5IiwiY2xpZW50WSIsInRvcCIsIm5vdGUiLCJ1dGlscyIsIm1hdGgiLCJjbGFtcCIsIk1hdGgiLCJyb3VuZCIsImJhY2tncm91bmRQb3NpdGlvbiIsInNldEVkaXRvclZhbHVlXyIsInZhbHVlVG9Ob3RlIiwidmFsdWUiLCJOT1RFUyIsIk51bWJlciIsIm5vcm1hbGl6ZWRUZXh0IiwidHJpbSIsInRvVXBwZXJDYXNlIiwiaSIsImluZGV4T2YiLCJ1bmRlZmluZWQiLCJub3RlVG9WYWx1ZSIsImdldFZhbHVlIiwib3B0X25ld1ZhbHVlIiwibm90ZU51bSIsIm1pbiIsIm1heCIsImFjdGlvbiIsIlNob3J0Y3V0UmVnaXN0cnkiLCJyZWdpc3RyeSIsImdldEtleWJvYXJkU2hvcnRjdXRzIiwia2V5Q29kZSIsImhhbmRsZWQiLCJpbmNsdWRlcyIsInNlbGVjdExvd2VyTm90ZSIsInNlbGVjdEhpZ2hlck5vdGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImh0bWxJbnB1dCIsImFkZGl0aW9uYWxPbktleURvd25XcmFwcGVyXyIsImJpbmRFdmVudFdpdGhDaGVja3NfIiwiaGFuZGxlS2V5UHJlc3NfIiwidW5iaW5kQWRkaXRpb25hbElucHV0RXZlbnRzXyIsIm9wdGlvbnMiLCJGaWVsZFRleHRJbnB1dCIsInNwbGl0IiwiZmllbGRSZWdpc3RyeSIsInJlZ2lzdGVyIiwiQ3NzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWI7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDTyxJQUFNQSxVQUFiO0FBQUE7O0FBQUE7O0FBQ0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNFLHNCQUFZQyxJQUFaLEVBQWtCO0FBQUE7O0FBQUEsNkJBQ1ZBLElBRFU7QUFFakI7QUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBaEJBO0FBQUE7O0FBcUJFO0FBQ0Y7QUFDQTtBQUNBO0FBeEJBLGtDQXlCZ0I7QUFDWjs7QUFFQSxVQUFNQyxHQUFHLEdBQUdDLG1EQUFPLENBQUNDLFNBQVIsQ0FBa0JDLEdBQTlCOztBQUNBLFVBQUksQ0FBQ0gsR0FBRyxDQUFDSSxVQUFULEVBQXFCO0FBQ25CO0FBQ0E7QUFDRCxPQVBXLENBUVo7OztBQUNBLFVBQU1DLE1BQU0sR0FBRyxLQUFLQyxlQUFMLEVBQWY7QUFDQUwseURBQU8sQ0FBQ00sV0FBUixDQUFvQkMsYUFBcEIsR0FBb0NDLFdBQXBDLENBQWdESixNQUFoRDtBQUVBSix5REFBTyxDQUFDTSxXQUFSLENBQW9CRyxTQUFwQixDQUE4QixLQUFLQyxZQUFM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YUFBTyxJQUFJakYsVUFBSixDQUFlaUYsT0FBTyxDQUFDLE9BQUQsQ0FBdEIsQ0FBUDtBQUNEO0FBbkJIOztBQUFBO0FBQUEsRUFBZ0M5RSxtREFBTyxDQUFDK0UsY0FBeEM7QUF5T0E7QUFDQTtBQUNBOztBQUNBbEYsVUFBVSxDQUFDbUQsS0FBWCxHQUFtQix5Q0FBeUNnQyxLQUF6QyxDQUErQyxHQUEvQyxDQUFuQjtBQUdBaEYsbURBQU8sQ0FBQ2lGLGFBQVIsQ0FBc0JDLFFBQXRCLENBQStCLGFBQS9CLEVBQThDckYsVUFBOUM7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBRyxtREFBTyxDQUFDbUYsR0FBUixDQUFZRCxRQUFaLENBQXFCO0FBQ3JCO0FBRHFCO0FBUW5CO0FBUm1CLENBQXJCIiwiZmlsZSI6Ii4vc3JjL2ZpZWxkX3BpdGNoLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgTXVzaWMgcGl0Y2ggaW5wdXQgZmllbGQuIEJvcnJvd2VkIGZyb20gQmxvY2tseSBHYW1lcy5cbiAqIEBhdXRob3IgZnJhc2VyQGdvb2dsZS5jb20gKE5laWwgRnJhc2VyKVxuICogQGF1dGhvciBzYW1lbGhAZ29vZ2xlLmNvbSAoU2FtIEVsLUh1c3NlaW5pKVxuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5cbi8qKlxuICogUGl0Y2ggZmllbGQgZnJvbSBCbG9ja2x5IEdhbWVzIG11c2ljLlxuICogQGV4dGVuZHMge0Jsb2NrbHkuRmllbGRUZXh0SW5wdXR9XG4gKi9cbmV4cG9ydCBjbGFzcyBGaWVsZFBpdGNoIGV4dGVuZHMgQmxvY2tseS5GaWVsZFRleHRJbnB1dCB7XG4gIC8qKlxuICAgKiBDbGFzcyBmb3IgYW4gZWRpdGFibGUgcGl0Y2ggZmllbGQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSBpbml0aWFsIGNvbnRlbnQgb2YgdGhlIGZpZWxkLlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKHRleHQpIHtcbiAgICBzdXBlcih0ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3QgYSBGaWVsZFBpdGNoIGZyb20gYSBKU09OIGFyZyBvYmplY3QuXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gb3B0aW9ucyBBIEpTT04gb2JqZWN0IHdpdGggb3B0aW9ucyAocGl0Y2gpLlxuICAgKiBAcmV0dXJuIHshRmllbGRQaXRjaH0gVGhlIG5ldyBmaWVsZCBpbnN0YW5jZS5cbiAgICogQHBhY2thZ2VcbiAgICogQG5vY29sbGFwc2VcbiAgICovXG4gIHN0YXRpYyBmcm9tSnNvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBGaWVsZFBpdGNoKG9wdGlvbnNbJ3BpdGNoJ10pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGlubGluZSBmcmVlLXRleHQgZWRpdG9yIG9uIHRvcCBvZiB0aGUgdGV4dCBhbmQgdGhlIG5vdGUgcGlja2VyLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2hvd0VkaXRvcl8oKSB7XG4gICAgc3VwZXIuc2hvd0VkaXRvcl8oKTtcblxuICAgIGNvbnN0IGRpdiA9IEJsb2NrbHkuV2lkZ2V0RGl2LkRJVjtcbiAgICBpZiAoIWRpdi5maXJzdENoaWxkKSB7XG4gICAgICAvLyBNb2JpbGUgaW50ZXJmYWNlIHVzZXMgQmxvY2tseS5wcm9tcHQuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIEJ1aWxkIHRoZSBET00uXG4gICAgY29uc3QgZWRpdG9yID0gdGhpcy5kcm9wZG93bkNyZWF0ZV8oKTtcbiAgICBCbG9ja2x5LkRyb3BEb3duRGl2LmdldENvbnRlbnREaXYoKS5hcHBlbmRDaGlsZChlZGl0b3IpO1xuXG4gICAgQmxvY2tseS5Ecm9wRG93bkRpdi5zZXRDb2xvdXIodGhpcy5zb3VyY2VCbG9ja18uZ2V0Q29sb3VyKCksXG4gICAgICAgIHRoaXMuc291cmNlQmxvY2tfLnN0eWxlLmNvbG91clRlcnRpYXJ5KTtcblxuICAgIEJsb2NrbHkuRHJvcERvd25EaXYuc2hvd1Bvc2l0aW9uZWRCeUZpZWxkKFxuICAgICAgICB0aGlzLCB0aGlzLmRyb3Bkb3duRGlzcG9zZV8uYmluZCh0aGlzKSk7XG5cbiAgICAvLyBUaGUgbm90ZSBwaWNrZXIgaXMgZGlmZmVyZW50IGZyb20gb3RoZXIgZmllbGRzIGluIHRoYXQgaXQgdXBkYXRlcyBvblxuICAgIC8vIG1vdXNlbW92ZSBldmVuIGlmIGl0J3Mgbm90IGluIHRoZSBtaWRkbGUgb2YgYSBkcmFnLiAgSW4gZnV0dXJlIHdlIG1heVxuICAgIC8vIGNoYW5nZSB0aGlzIGJlaGF2aW91ci4gIEZvciBub3csIHVzaW5nIGJpbmRFdmVudF8gaW5zdGVhZCBvZlxuICAgIC8vIGJpbmRFdmVudFdpdGhDaGVja3NfIGFsbG93cyBpdCB0byB3b3JrIHdpdGhvdXQgYSBtb3VzZWRvd24vdG91Y2hzdGFydC5cbiAgICB0aGlzLmNsaWNrV3JhcHBlcl8gPVxuICAgICAgQmxvY2tseS5iaW5kRXZlbnRfKHRoaXMuaW1hZ2VFbGVtZW50XywgJ2NsaWNrJywgdGhpcyxcbiAgICAgICAgICB0aGlzLmhpZGVfKTtcbiAgICB0aGlzLm1vdmVXcmFwcGVyXyA9XG4gICAgICBCbG9ja2x5LmJpbmRFdmVudF8odGhpcy5pbWFnZUVsZW1lbnRfLCAnbW91c2Vtb3ZlJywgdGhpcyxcbiAgICAgICAgICB0aGlzLm9uTW91c2VNb3ZlKTtcblxuICAgIHRoaXMuYmluZEFkZGl0aW9uYWxJbnB1dEV2ZW50c18odGhpcy5odG1sSW5wdXRfKTtcblxuICAgIHRoaXMudXBkYXRlR3JhcGhfKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBwaXRjaCBlZGl0b3IuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fSBUaGUgbmV3bHkgY3JlYXRlZCBwaXRjaCBwaWNrZXIuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkcm9wZG93bkNyZWF0ZV8oKSB7XG4gICAgdGhpcy5pbWFnZUVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5pbWFnZUVsZW1lbnRfLmlkID0gJ25vdGVQaWNrZXInO1xuXG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VFbGVtZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwb3NlIG9mIGV2ZW50cyBiZWxvbmdpbmcgdG8gdGhlIHBpdGNoIGVkaXRvci5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRyb3Bkb3duRGlzcG9zZV8oKSB7XG4gICAgQmxvY2tseS51bmJpbmRFdmVudF8odGhpcy5jbGlja1dyYXBwZXJfKTtcbiAgICBCbG9ja2x5LnVuYmluZEV2ZW50Xyh0aGlzLm1vdmVXcmFwcGVyXyk7XG4gIH1cblxuICAvKipcbiAgICogSGlkZSB0aGUgZWRpdG9yLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGlkZV8oKSB7XG4gICAgQmxvY2tseS5XaWRnZXREaXYuaGlkZSgpO1xuICAgIEJsb2NrbHkuRHJvcERvd25EaXYuaGlkZVdpdGhvdXRBbmltYXRpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG5vdGUgdG8gbWF0Y2ggdGhlIG1vdXNlJ3MgcG9zaXRpb24uXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBlIE1vdXNlIG1vdmUgZXZlbnQuXG4gICAqL1xuICBvbk1vdXNlTW92ZShlKSB7XG4gICAgY29uc3QgYkJveCA9IHRoaXMuaW1hZ2VFbGVtZW50Xy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBkeSA9IGUuY2xpZW50WSAtIGJCb3gudG9wO1xuICAgIGNvbnN0IG5vdGUgPSBCbG9ja2x5LnV0aWxzLm1hdGguY2xhbXAoTWF0aC5yb3VuZCgxMy41IC0gZHkgLyA3LjUpLCAwLCAxMik7XG4gICAgdGhpcy5pbWFnZUVsZW1lbnRfLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9ICgtbm90ZSAqIDM3KSArICdweCAwJztcbiAgICB0aGlzLnNldEVkaXRvclZhbHVlXyh0aGlzLnZhbHVlVG9Ob3RlKG5vdGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoZSBtYWNoaW5lLXJlYWRhYmxlIHZhbHVlICgwLTEyKSB0byBodW1hbi1yZWFkYWJsZSB0ZXh0IChDMy1BNCkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWUgVGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaGUgcmVzcGVjdGl2ZSBub3RlLCBvciB1bmRlZmluZWQgaWYgaW52YWxpZC5cbiAgICovXG4gIHZhbHVlVG9Ob3RlKHZhbHVlKSB7XG4gICAgcmV0dXJuIEZpZWxkUGl0Y2guTk9URVNbTnVtYmVyKHZhbHVlKV07XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCB0aGUgaHVtYW4tcmVhZGFibGUgdGV4dCAoQzMtQTQpIHRvIG1hY2hpbmUtcmVhZGFibGUgdmFsdWUgKDAtMTIpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgcHJvdmlkZWQgbm90ZS5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc3BlY3RpdmUgdmFsdWUsIG9yIHVuZGVmaW5lZCBpZiBpbnZhbGlkLlxuICAgKi9cbiAgbm90ZVRvVmFsdWUodGV4dCkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRUZXh0ID0gdGV4dC50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgICBjb25zdCBpID0gRmllbGRQaXRjaC5OT1RFUy5pbmRleE9mKG5vcm1hbGl6ZWRUZXh0KTtcbiAgICByZXR1cm4gaSA+IC0xID8gaSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBncmFwaCB3aGVuIHRoZSBmaWVsZCByZXJlbmRlcnMuXG4gICAqIEBwcml2YXRlXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcmVuZGVyXygpIHtcbiAgICBzdXBlci5yZW5kZXJfKCk7XG4gICAgdGhpcy51cGRhdGVHcmFwaF8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWRyYXcgdGhlIG5vdGUgcGlja2VyIHdpdGggdGhlIGN1cnJlbnQgbm90ZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZUdyYXBoXygpIHtcbiAgICBpZiAoIXRoaXMuaW1hZ2VFbGVtZW50Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpID0gdGhpcy5ub3RlVG9WYWx1ZSh0aGlzLmdldFZhbHVlKCkpO1xuICAgIHRoaXMuaW1hZ2VFbGVtZW50Xy5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAoLWkgKiAzNykgKyAncHggMCc7XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlIHRoYXQgb25seSBhIHZhbGlkIHZhbHVlIG1heSBiZSBlbnRlcmVkLlxuICAgKiBAcGFyYW0geyp9IG9wdF9uZXdWYWx1ZSBUaGUgaW5wdXQgdmFsdWUuXG4gICAqIEByZXR1cm4geyp9IEEgdmFsaWQgdmFsdWUsIG9yIG51bGwgaWYgaW52YWxpZC5cbiAgICovXG4gIGRvQ2xhc3NWYWxpZGF0aW9uXyhvcHRfbmV3VmFsdWUpIHtcbiAgICBpZiAob3B0X25ld1ZhbHVlID09PSBudWxsIHx8IG9wdF9uZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3Qgbm90ZU51bSA9IHRoaXMubm90ZVRvVmFsdWUob3B0X25ld1ZhbHVlKTtcbiAgICBpZiAobm90ZU51bSAmJiB0aGlzLnZhbHVlVG9Ob3RlKG5vdGVOdW0pID09IG9wdF9uZXdWYWx1ZSkge1xuICAgICAgcmV0dXJuIG9wdF9uZXdWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IGEgbm90ZSBvbmUgaGlnaGVyIHRoYW4gY3VycmVudCwgb3Igc3RheSBhdCB0aGUgaGlnaGVzdCBub3RlLlxuICAgKi9cbiAgc2VsZWN0SGlnaGVyTm90ZSgpIHtcbiAgICBjb25zdCBub3RlID0gTWF0aC5taW4odGhpcy5nZXRWYWx1ZSgpICsgMSwgMTIpO1xuICAgIHRoaXMuc2V0RWRpdG9yVmFsdWVfKG5vdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdCBhIG5vdGUgb25lIGxvd2VyIHRoYW4gY3VycmVudCwgb3Igc3RheSBhdCB0aGUgbG93ZXN0IG5vdGUuXG4gICAqL1xuICBzZWxlY3RMb3dlck5vdGUoKSB7XG4gICAgY29uc3Qgbm90ZSA9IE1hdGgubWF4KHRoaXMuZ2V0VmFsdWUoKSAtIDEsIDApO1xuICAgIHRoaXMuc2V0RWRpdG9yVmFsdWVfKG5vdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgbmV4dC9wcmV2aW91cyBrZXkgcHJlc3NlcyBvbiB0aGUgaW5wdXQgZXZlbnQuXG4gICAqIE9uQmxvY2tseUFjdGlvbiB3b3VsZCBub3JtYWxseSByZWNlaXZlIG5leHQvcHJldmlvdXMgYWN0aW9ucyxcbiAgICogYnV0IHRoZSBodG1sIGlucHV0IGVsZW1lbnQgaXMgY2FwdHVyaW5nIHRoZSBrZXlwcmVzc2VzLlxuICAgKiBXZSBiaW5kIG91ciBvd24gZXZlbnQgdGhhdCBvbmx5IGhhbmRsZXMga2V5cyByZWdpc3RlcmVkIHRvIG5leHQvcHJldmlvdXMuXG4gICAqIElmIHdlIGhhbmRsZSBpdCwgd2Ugc3RvcCBvdGhlciBoYW5kbGVycyBmcm9tIGZpcmluZy5cbiAgICogVGhpcyBkb2VzIG5vdCBjbG9iYmVyIHRoZSBldmVudHMgcmVnaXN0ZXJlZCBieSBGaWVsZFRleHRJbnB1dCwgc29cbiAgICogZXNjIGFuZCBlbnRlciBwcmVzc2VzIGFyZSBzdGlsbCBoYW5kbGVkIGJ5IHRoYXQuXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBlIEtleWJvYXJkIGV2ZW50LlxuICAgKi9cbiAgaGFuZGxlS2V5UHJlc3NfKGUpIHtcbiAgICBjb25zdCBhY3Rpb24gPVxuICAgICAgICBCbG9ja2x5LlNob3J0Y3V0UmVnaXN0cnkucmVnaXN0cnkuZ2V0S2V5Ym9hcmRTaG9ydGN1dHMoZS5rZXlDb2RlKTtcbiAgICBsZXQgaGFuZGxlZCA9IGZhbHNlO1xuICAgIGlmIChhY3Rpb24uaW5jbHVkZXMoJ25leHQnKSkge1xuICAgICAgdGhpcy5zZWxlY3RMb3dlck5vdGUoKTtcbiAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoYWN0aW9uLmluY2x1ZGVzKCdwcmV2aW91cycpKSB7XG4gICAgICB0aGlzLnNlbGVjdEhpZ2hlck5vdGUoKTtcbiAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoaGFuZGxlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQmluZCBoYW5kbGVyIGZvciBrZXlwcmVzc2VzIG9uIGlucHV0LlxuICAgKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gaHRtbElucHV0IElucHV0IGVsZW1lbnQuXG4gICAqL1xuICBiaW5kQWRkaXRpb25hbElucHV0RXZlbnRzXyhodG1sSW5wdXQpIHtcbiAgICB0aGlzLmFkZGl0aW9uYWxPbktleURvd25XcmFwcGVyXyA9XG4gICAgICAgIEJsb2NrbHkuYmluZEV2ZW50V2l0aENoZWNrc18oXG4gICAgICAgICAgICBodG1sSW5wdXQsICdrZXlkb3duJywgdGhpcywgdGhpcy5oYW5kbGVLZXlQcmVzc18pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuYmluZCBoYW5kbGVyIGZvciB1c2VyIGlucHV0LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdW5iaW5kQWRkaXRpb25hbElucHV0RXZlbnRzXygpIHtcbiAgICBpZiAodGhpcy5hZGRpdGlvbmFsT25LZXlEb3duV3JhcHBlcl8pIHtcbiAgICAgIEJsb2NrbHkudW5iaW5kRXZlbnRfKHRoaXMuYWRkaXRpb25hbE9uS2V5RG93bldyYXBwZXJfKTtcbiAgICAgIHRoaXMuYWRkaXRpb25hbE9uS2V5RG93bldyYXBwZXJfID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZSBvZiBldmVudCBoYW5kbGVycy5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBkaXNwb3NlKCkge1xuICAgIHRoaXMudW5iaW5kQWRkaXRpb25hbElucHV0RXZlbnRzXygpO1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgfVxufVxuXG4vKipcbiAqIEFsbCBub3RlcyBhdmFpbGFibGUgZm9yIHRoZSBwaWNrZXIuXG4gKi9cbkZpZWxkUGl0Y2guTk9URVMgPSAnQzMgRDMgRTMgRjMgRzMgQTMgQjMgQzQgRDQgRTQgRjQgRzQgQTQnLnNwbGl0KC8gLyk7XG5cblxuQmxvY2tseS5maWVsZFJlZ2lzdHJ5LnJlZ2lzdGVyKCdmaWVsZF9waXRjaCcsIEZpZWxkUGl0Y2gpO1xuXG4vKipcbiAqIENTUyBmb3IgdGhlIHBpdGNoIGZpZWxkLlxuICogVGhpcyBmaWVsZCBpcyB1c2luZyBDU1MgdG8gc2V0IGEgYmFja2dyb3VuZCBpbWFnZSBvZiBhIHNlcmllcyBvZiBub3RlcywgdGhlblxuICogdHJhbnNsYXRpbmcgbGVmdCBvciByaWdodCB0byBzaG93IG9ubHkgdGhlIGNvcnJlY3Qgbm90ZS5cbiAqL1xuQmxvY2tseS5Dc3MucmVnaXN0ZXIoW1xuLyogZXNsaW50LWRpc2FibGUgaW5kZW50ICovXG4gIGAjbm90ZVBpY2tlciB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9nb29nbGUvYmxvY2tseS1nYW1lcy9tYXN0ZXIvYXBwZW5naW5lL211c2ljL25vdGVzLnBuZyk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICBoZWlnaHQ6IDEwOXB4O1xuICAgIHdpZHRoOiA0NnB4O1xuICB9YCxcbiAgLyogZXNsaW50LWVuYWJsZSBpbmRlbnQgKi9cbl0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/field_pitch.js\n");

/***/ }),

/***/ "./src/music.js":
/*!**********************!*\
  !*** ./src/music.js ***!
  \**********************/
/*! exports provided: Music */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Music\", function() { return Music; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _speaker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./speaker */ \"./src/speaker.js\");\n/* harmony import */ var _music_blocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./music_blocks */ \"./src/music_blocks.js\");\n/* harmony import */ var _line_cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./line_cursor */ \"./src/line_cursor.js\");\n/* harmony import */ var _music_block_generators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./music_block_generators */ \"./src/music_block_generators.js\");\n!(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js-interpreter'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _note_player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./note_player */ \"./src/note_player.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Game logic for music game.\n */\n\n\n\n\n\n\n\n/**\n * Constant denoting a rest.\n */\n\nvar REST = 'REST';\n\nvar Stave = /*#__PURE__*/function () {\n  function Stave(id, stateStack) {\n    _classCallCheck(this, Stave);\n\n    /**\n     * The id.\n     * @type {number}\n     */\n    this.id = id;\n    /**\n     * The state stack.\n     * @type {Array<Interpreter.State>}\n     */\n\n    this.stateStack = stateStack;\n    /**\n     * Whether all the notes have ben played.\n     * @type {boolean}\n     */\n\n    this.done = false;\n    /**\n     * The time to pause till.\n     * @type {number}\n     * @private\n     */\n\n    this.pauseUntil64ths_ = 0;\n    /**\n     * The transcript of notes played.\n     * @type {Array<string|number>}\n     * @private\n     */\n\n    this.transcript_ = [];\n    /**\n     * Currently playing note.\n     * @type {string}\n     * @private\n     */\n\n    this.note_ = '';\n  }\n  /**\n   * Whether this stave is currently paused.\n   * @param {number} clock64ths Number of 1/64ths notes since the start.\n   * @return {boolean} Whether this stave is paused.\n   */\n\n\n  _createClass(Stave, [{\n    key: \"isPaused\",\n    value: function isPaused(clock64ths) {\n      return this.pauseUntil64ths_ > clock64ths;\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note to play.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(duration, pitch, clock64ths) {\n      this.stopSound();\n      this.note_ = pitch;\n      _note_player__WEBPACK_IMPORTED_MODULE_6__[\"notePlayer\"].triggerAttack(pitch);\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this note.\n\n      this.transcript_.push(pitch, duration);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     * @param {number} clock64ths Number of 1/64ths notes since the start.\n     */\n\n  }, {\n    key: \"rest\",\n    value: function rest(duration, clock64ths) {\n      this.stopSound();\n      this.pauseUntil64ths_ = duration * 64 + clock64ths; // Make a record of this rest.\n\n      var transcriptLen = this.transcript_.length;\n\n      if (transcriptLen > 1 && this.transcript_[transcriptLen - 2] === REST) {\n        // Concatenate this rest with previous one.\n        this.transcript_[transcriptLen - 1] += duration;\n      } else {\n        this.transcript_.push(REST, duration);\n      }\n    }\n    /**\n     * Stops currently playing note.\n     */\n\n  }, {\n    key: \"stopSound\",\n    value: function stopSound() {\n      if (this.note_) {\n        _note_player__WEBPACK_IMPORTED_MODULE_6__[\"notePlayer\"].triggerRelease();\n        this.note_ = '';\n      }\n    }\n    /**\n     * Returns whether the transcript matched expected.\n     * @param {Array<string|number>} expectedTranscript The expected transcript.\n     * @return {boolean} Whether the transcript matches.\n     */\n\n  }, {\n    key: \"checkTranscript\",\n    value: function checkTranscript(expectedTranscript) {\n      return JSON.stringify(expectedTranscript) === JSON.stringify(this.transcript_);\n    }\n  }]);\n\n  return Stave;\n}();\n/**\n * Game logic for music game.\n */\n\n\nvar Music = /*#__PURE__*/function () {\n  /**\n   * Class for a music game.\n   * @constructor\n   */\n  function Music() {\n    _classCallCheck(this, Music);\n\n    /**\n     * The Blockly workspace associated with this game.\n     * @type {!Blockly.WorkspaceSvg}\n     */\n    this.workspace = this.createWorkspace_();\n    /**\n     * The currently loaded level. 0 if no level loaded.\n     */\n\n    this.level = 0;\n    /**\n     * The HTML element containing the goal text for the game.\n     * @type {HTMLElement}\n     * @private\n     */\n\n    this.goalTextElement_ = document.getElementById('goalText');\n    /**\n     * The expected answer.\n     * @type {Array<Array<string|number>>}\n     * @private\n     */\n\n    this.expectedAnswer_ = [[]];\n    /**\n     * The interpreter.\n     * @type {?Interpreter}\n     * @private\n     */\n\n    this.interpreter_ = null;\n    /**\n     * @type {Array<Stave>}\n     * @private\n     */\n\n    this.staves_ = [];\n    /**\n     * The current active stave.\n     * @type {?Stave}\n     * @private\n     */\n\n    this.activeStave_ = null;\n    /**\n     * Time of start of execution.\n     * @type {number}\n     * @private\n     */\n\n    this.startTime_ = 0;\n    /**\n     * Number of 1/64ths notes since the start.\n     * @type {number}\n     * @private\n     */\n\n    this.clock64ths_ = 0;\n    /**\n     * The speed at which to play notes. Between 0 and 1, with 0 being slow,\n     * 0.5 being normal speed, and 1 being fast.\n     * @type {number}\n     * @private\n     */\n\n    this.speed_ = 0.5;\n  }\n  /**\n   * Initializes the Blockly workspace.\n   * @return {!Blockly.WorkspaceSvg} The Blockly workspace.\n   * @private\n   */\n\n\n  _createClass(Music, [{\n    key: \"createWorkspace_\",\n    value: function createWorkspace_() {\n      // Initialize Blockly workspace.\n      var blocklyDiv = document.getElementById('blocklyDiv');\n      var workspace = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.inject(blocklyDiv, {\n        toolbox: _music_blocks__WEBPACK_IMPORTED_MODULE_2__[\"toolboxPitch\"]\n      });\n      blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ASTNode.NAVIGATE_ALL_FIELDS = true;\n      workspace.getMarkerManager().setCursor(new _line_cursor__WEBPACK_IMPORTED_MODULE_3__[\"LineCursor\"]());\n      workspace.addChangeListener(function (event) {\n        return _speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].nodeToSpeech(event);\n      });\n      workspace.getFlyout().getWorkspace().addChangeListener(function (event) {\n        return _speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].nodeToSpeech(event);\n      });\n      return workspace;\n    }\n    /**\n     * Sets the goal text.\n     * @param {string} text The text to set the goal to.\n     */\n\n  }, {\n    key: \"setGoalText\",\n    value: function setGoalText(text) {\n      this.goalTextElement_.innerHTML = text;\n    }\n    /**\n     * Update the goal based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateGoal_\",\n    value: function updateGoal_() {\n      var goalText = '';\n\n      switch (this.level) {\n        case 1:\n          goalText = 'Play c4 d4 e4 c4';\n          this.expectedAnswer_ = [['C4', 0.25, 'D4', 0.25, 'E4', 0.25, 'C4', 0.25]];\n          break;\n      }\n\n      this.setGoalText(goalText);\n    }\n    /**\n     * Update the toolbox based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"updateToolbox_\",\n    value: function updateToolbox_() {\n      var toolboxJson = _music_blocks__WEBPACK_IMPORTED_MODULE_2__[\"toolboxPitch\"]; // Use toolboxPitch as default.\n\n      if (this.level < 6) {\n        toolboxJson = {\n          'kind': 'flyoutToolbox',\n          'contents': [{\n            'kind': 'block',\n            'type': 'pitch_test'\n          }, {\n            'kind': 'block',\n            'type': 'music_pitch'\n          }, {\n            'kind': 'block',\n            'type': 'music_note'\n          }, {\n            'kind': 'block',\n            'type': 'music_rest_whole'\n          }, {\n            'kind': 'block',\n            'type': 'music_rest'\n          }, {\n            'kind': 'block',\n            'type': 'music_instrument'\n          }]\n        };\n      }\n\n      this.workspace.updateToolbox(toolboxJson);\n    }\n    /**\n     * Update the workspace blocks based on the current level.\n     * @private\n     */\n\n  }, {\n    key: \"loadLevelBlocks_\",\n    value: function loadLevelBlocks_() {\n      this.workspace.clear();\n      var levelXml = '';\n\n      if (this.level === 2) {\n        levelXml = \"<xml>\\n            <block type=\\\"music_start\\\" deletable=\\\"false\\\" x=\\\"180\\\"\\n            y=\\\"50\\\">\\n              <statement name=\\\"STACK\\\">\\n                <block type=\\\"music_note\\\">\\n                  <field name=\\\"DURATION\\\">0.25</field>\\n                  <value name=\\\"PITCH\\\">\\n                    <shadow type=\\\"music_pitch\\\">\\n                      <field name=\\\"PITCH\\\">C4</field>\\n                    </shadow>\\n                  </value>\\n                  <next>\\n                    <block type=\\\"music_note\\\">\\n                      <field name=\\\"DURATION\\\">0.25</field>\\n                      <value name=\\\"PITCH\\\">\\n                        <shadow type=\\\"music_pitch\\\">\\n                          <field name=\\\"PITCH\\\">D4</field>\\n                        </shadow>\\n                      </value>\\n                      <next>\\n                        <block type=\\\"music_note\\\">\\n                          <field name=\\\"DURATION\\\">0.25</field>\\n                          <value name=\\\"PITCH\\\">\\n                            <shadow type=\\\"music_pitch\\\">\\n                              <field name=\\\"PITCH\\\">E4</field>\\n                            </shadow>\\n                          </value>\\n                          <next>\\n                            <block type=\\\"music_note\\\">\\n                              <field name=\\\"DURATION\\\">0.25</field>\\n                              <value name=\\\"PITCH\\\">\\n                                <shadow type=\\\"music_pitch\\\">\\n                                  <field name=\\\"PITCH\\\">C4</field>\\n                                </shadow>\\n                              </value>\\n                            </block>\\n                          </next>\\n                        </block>\\n                      </next>\\n                    </block>\\n                  </next>\\n                </block>\\n              </statement>\\n            </block>\\n          </xml>\";\n      } else if (this.level < 6) {\n        levelXml = \"<xml>\\n            <block type=\\\"music_start\\\" deletable=\\\"\".concat(this.level > 6, \"\\\" x=\\\"180\\\"\\n            y=\\\"50\\\"></block>\\n          </xml>\");\n      }\n\n      if (levelXml) {\n        blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.domToWorkspace(blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.Xml.textToDom(levelXml), this.workspace);\n      }\n    }\n    /**\n     * Load the specified level.\n     * @param {number|string} level The level to load.\n     */\n\n  }, {\n    key: \"loadLevel\",\n    value: function loadLevel(level) {\n      this.level = Number(level);\n      this.updateGoal_();\n      this.updateToolbox_();\n      this.loadLevelBlocks_();\n    }\n    /**\n     * Generates code and logs it to the console.\n     */\n\n  }, {\n    key: \"logGeneratedCode\",\n    value: function logGeneratedCode() {\n      var codeJs = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace);\n      console.log(codeJs);\n    }\n    /**\n     * Evaluates whether the answer for the currently loaded level is correct.\n     * @return {boolean} Whether the answer is correct.\n     */\n\n  }, {\n    key: \"checkAnswer_\",\n    value: function checkAnswer_() {\n      var correct = true;\n\n      for (var i = 0; i < this.expectedAnswer_.length; i++) {\n        if (!this.staves_[i].checkTranscript(this.expectedAnswer_[i])) {\n          correct = false;\n          break;\n        }\n      }\n\n      return correct;\n    }\n    /**\n     * Play one note.\n     * @param {number} duration Fraction of a whole note length to play.\n     * @param {string} pitch Note play.\n     */\n\n  }, {\n    key: \"play_\",\n    value: function play_(duration, pitch) {\n      this.activeStave_.play(duration, pitch, this.clock64ths_);\n    }\n    /**\n     * Wait one rest.\n     * @param {number} duration Fraction of a whole note length to rest.\n     */\n\n  }, {\n    key: \"rest_\",\n    value: function rest_(duration) {\n      this.activeStave_.rest(duration, this.clock64ths_);\n    }\n    /**\n     * Inject the Music API into a JavaScript interpreter.\n     * @param {!Interpreter} interpreter The JS-Interpreter.\n     * @param {!Interpreter.Object} globalObject Global object.\n     */\n\n  }, {\n    key: \"interpreterInit_\",\n    value: function interpreterInit_(interpreter, globalObject) {\n      var _this = this;\n\n      // API\n      var wrapper;\n\n      wrapper = function wrapper(duration, pitch, _id) {\n        _this.play_(duration, pitch);\n      };\n\n      interpreter.setProperty(globalObject, 'play', interpreter.createNativeFunction(wrapper));\n\n      wrapper = function wrapper(duration, _id) {\n        _this.rest_(duration);\n      };\n\n      interpreter.setProperty(globalObject, 'rest', interpreter.createNativeFunction(wrapper)); // TODO implement changing instrument.\n      // wrapper = function(instrument, id) {\n      //   Music.setInstrument(instrument, id);\n      // };\n      // interpreter.setProperty(globalObject, 'setInstrument',\n      //     interpreter.createNativeFunction(wrapper));\n    }\n    /**\n     * Execute a bite-sized chunk of the user's code.\n     * @param {Stave} stave The stave to execute.\n     */\n\n  }, {\n    key: \"executeChunk_\",\n    value: function executeChunk_(stave) {\n      this.activeStave_ = stave; // Switch the interpreter to run the provided staff.\n\n      this.interpreter_.stateStack = stave.stateStack;\n      var ticks = 10000;\n      var go;\n\n      do {\n        try {\n          go = this.interpreter_.step();\n        } catch (e) {\n          // User error, terminate in shame.\n          alert(e);\n          go = false;\n        }\n\n        if (ticks-- == 0) {\n          console.warn('Staff ' + stave.id + ' is running slowly.');\n          return;\n        }\n\n        if (stave.isPaused(this.clock64ths_)) {\n          // Previously executed command (play or rest) requested a pause.\n          return;\n        }\n      } while (go); // Thread complete.  Wrap up.\n\n\n      stave.stopSound(stave);\n      stave.done = true;\n    }\n    /**\n     * Set the speed (Number between 0 and 1).\n     * @param {number} speed The speed to set to.\n     */\n\n  }, {\n    key: \"setSpeed\",\n    value: function setSpeed(speed) {\n      if (speed <= 0 || speed > 1) {\n        console.error('Invalid speed');\n        return;\n      }\n\n      this.speed_ = speed;\n      this.startTime_ = 0;\n    }\n    /**\n     * Execute a 1/64th tick of the program.\n     * @private\n     */\n\n  }, {\n    key: \"tick_\",\n    value: function tick_() {\n      var _this2 = this;\n\n      // Delay between start of each beat (1/64ths of a whole note).\n      // Reminder: The startTime_ should be reset after the slider is adjusted.\n      var scaleDuration = 1000 * (2.5 - 2 * this.speed_) / 64;\n\n      if (!this.startTime_) {\n        // Either the first tick, or first tick after slider was adjusted.\n        this.startTime_ = Date.now() - this.clock64ths_ * scaleDuration;\n      }\n\n      var done = true;\n      this.staves_.forEach(function (stave) {\n        if (!stave.done) {\n          done = false;\n\n          if (!stave.isPaused(_this2.clock64ths_)) {\n            _this2.executeChunk_(stave);\n          }\n        }\n      });\n\n      if (done) {\n        // Program complete.\n        if (this.checkAnswer_()) {\n          console.log('CORRECT');\n        } else {\n          console.log('INCORRECT');\n        }\n      } else {\n        this.clock64ths_++;\n        var ms = this.startTime_ + this.clock64ths_ * scaleDuration - Date.now();\n        this.pid = setTimeout(function () {\n          return _this2.tick_();\n        }, ms);\n      }\n    }\n    /**\n     * Reset the music to the start position, clear the display, and kill any\n     * pending tasks.\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      // Kill any task.\n      clearTimeout(this.pid);\n      this.staves_.forEach(function (stave) {\n        stave.stopSound();\n      });\n      this.interpreter_ = null;\n      this.activeStave_ = null;\n      this.staves_.length = 0;\n      this.clock64ths_ = 0;\n      this.startTime_ = 0;\n    }\n    /**\n     * Plays music based on the blocks on the workspace.\n     */\n\n  }, {\n    key: \"execute\",\n    value: function execute() {\n      var _this3 = this;\n\n      this.reset(); // Get generated code from workspace\n\n      var code = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.workspaceToCode(this.workspace); // Run user code.\n\n      this.interpreter_ = new !(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js-interpreter'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(code, this.interpreterInit_.bind(this)); // TODO support multiple threads\n      // Assume only one thread.\n\n      var interpreter = new !(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js-interpreter'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(''); // Replace this thread's global scope with the cross-thread global.\n\n      interpreter.stateStack[0].scope = this.interpreter_.globalScope; // Add start call.\n\n      interpreter.appendCode('start();\\n');\n      this.staves_.push(new Stave(0, interpreter.stateStack));\n      setTimeout(function () {\n        return _this3.tick_();\n      }, 100);\n    }\n  }]);\n\n  return Music;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbXVzaWMuanM/MmE0ZiJdLCJuYW1lcyI6WyJSRVNUIiwiU3RhdmUiLCJpZCIsInN0YXRlU3RhY2siLCJkb25lIiwicGF1c2VVbnRpbDY0dGhzXyIsInRyYW5zY3JpcHRfIiwibm90ZV8iLCJjbG9jazY0dGhzIiwiZHVyYXRpb24iLCJwaXRjaCIsInN0b3BTb3VuZCIsIm5vdGVQbGF5ZXIiLCJ0cmlnZ2VyQXR0YWNrIiwicHVzaCIsInRyYW5zY3JpcHRMZW4iLCJsZW5ndGgiLCJ0cmlnZ2VyUmVsZWFzZSIsImV4cGVjdGVkVHJhbnNjcmlwdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJNdXNpYyIsIndvcmtzcGFjZSIsImNyZWF0ZVdvcmtzcGFjZV8iLCJsZXZlbCIsImdvYWxUZXh0RWxlbWVudF8iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZXhwZWN0ZWRBbnN3ZXJfIiwiaW50ZXJwcmV0ZXJfIiwic3RhdmVzXyIsImFjdGl2ZVN0YXZlXyIsInN0YXJ0VGltZV8iLCJjbG9jazY0dGhzXyIsInNwZWVkXyIsImJsb2NrbHlEaXYiLCJCbG9ja2x5IiwiaW5qZWN0IiwidG9vbGJveCIsInRvb2xib3hQaXRjaCIsIkFTVE5vZGUiLCJOQVZJR0FURV9BTExfRklFTERTIiwiZ2V0TWFya2VyTWFuYWdlciIsInNldEN1cnNvciIsIkxpbmVDdXJzb3IiLCJhZGRDaGFuZ2VMaXN0ZW5lciIsImV2ZW50Iiwic3BlYWtlciIsIm5vZGVUb1NwZWVjaCIsImdldEZseW91dCIsImdldFdvcmtzcGFjZSIsInRleHQiLCJpbm5lckhUTUwiLCJnb2FsVGV4dCIsInNldEdvYWxUZXh0IiwidG9vbGJveEpzb24iLCJ1cGRhdGVUb29sYm94IiwiY2xlYXIiLCJsZXZlbFhtbCIsIlhtbCIsImRvbVRvV29ya3NwYWNlIiwidGV4dFRvRG9tIiwiTnVtYmVyIiwidXBkYXRlR29hbF8iLCJ1cGRhdGVUb29sYm94XyIsImxvYWRMZXZlbEJsb2Nrc18iLCJjb2RlSnMiLCJKYXZhU2NyaXB0Iiwid29ya3NwYWNlVG9Db2RlIiwiY29uc29sZSIsImxvZyIsImNvcnJlY3QiLCJpIiwiY2hlY2tUcmFuc2NyaXB0IiwicGxheSIsInJlc3QiLCJpbnRlcnByZXRlciIsImdsb2JhbE9iamVjdCIsIndyYXBwZXIiLCJfaWQiLCJwbGF5XyIsInNldFByb3BlcnR5IiwiY3JlYXRlTmF0aXZlRnVuY3Rpb24iLCJyZXN0XyIsInN0YXZlIiwidGlja3MiLCJnbyIsInN0ZXAiLCJlIiwiYWxlcnQiLCJ3YXJuIiwiaXNQYXVzZWQiLCJzcGVlZCIsImVycm9yIiwic2NhbGVEdXJhdGlvbiIsIkRhdGUiLCJub3ciLCJmb3JFYWNoIiwiZXhlY3V0ZUNodW5rXyIsImNoZWNrQW5zd2VyXyIsIm1zIiwicGlkIiwic2V0VGltZW91dCIsInRpY2tfIiwiY2xlYXJUaW1lb3V0IiwicmVzZXQiLCJjb2RlIiwiSW50ZXJwcmV0ZXIiLCJpbnRlcnByZXRlckluaXRfIiwiYmluZCIsInNjb3BlIiwiZ2xvYmFsU2NvcGUiLCJhcHBlbmRDb2RlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7QUFDQSxJQUFNQSxJQUFJLEdBQUcsTUFBYjs7SUFFTUMsSztBQUNKLGlCQUFZQyxFQUFaLEVBQWdCQyxVQUFoQixFQUE0QjtBQUFBOztBQUMxQjtBQUNKO0FBQ0E7QUFDQTtBQUNJLFNBQUtELEVBQUwsR0FBVUEsRUFBVjtBQUNBO0FBQ0o7QUFDQTtBQUNBOztBQUNJLFNBQUtDLFVBQUwsR0FBa0JBLFVBQWxCO0FBRUE7QUFDSjtBQUNBO0FBQ0E7O0FBQ0ksU0FBS0MsSUFBTCxHQUFZLEtBQVo7QUFFQTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUNJLFNBQUtDLGdCQUFMLEdBQXdCLENBQXhCO0FBRUE7QUFDSjtBQUNBO0FBQ0E7QUFD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QUNGO0FBQ0E7O0FBcFpBO0FBQUE7QUFBQSw4QkFxWlk7QUFBQTs7QUFDUixXQUFLeUUsS0FBTCxHQURRLENBRVI7O0FBQ0EsVUFBTUMsSUFBSSxHQUFHdEUsbURBQU8sQ0FBQytCLFVBQVIsQ0FBbUJDLGVBQW5CLENBQW1DLEtBQUs5QyxTQUF4QyxDQUFiLENBSFEsQ0FLUjs7QUFDQSxXQUFLTyxZQUFMLEdBQW9CLElBQUk4RSx3SUFBSixDQUFnQkQsSUFBaEIsRUFBc0IsS0FBS0UsZ0JBQUwsQ0FBc0JDLElBQXRCLENBQTJCLElBQTNCLENBQXRCLENBQXBCLENBTlEsQ0FPUjtBQUNBOztBQUNBLFVBQU1qQyxXQUFXLEdBQUcsSUFBSStCLHdJQUFKLENBQWdCLEVBQWhCLENBQXBCLENBVFEsQ0FVUjs7QUFDQS9CLGlCQUFXLENBQUN6RSxVQUFaLENBQXVCLENBQXZCLEVBQTBCMkcsS0FBMUIsR0FBa0MsS0FBS2pGLFlBQUwsQ0FBa0JrRixXQUFwRCxDQVhRLENBWVI7O0FBQ0FuQyxpQkFBVyxDQUFDb0MsVUFBWixDQUF1QixZQUF2QjtBQUNBLFdBQUtsRixPQUFMLENBQWFoQixJQUFiLENBQWtCLElBQUliLEtBQUosQ0FBVSxDQUFWLEVBQWEyRSxXQUFXLENBQUN6RSxVQUF6QixDQUFsQjtBQUVBbUcsZ0JBQVUsQ0FBQztBQUFBLGVBQU0sTUFBSSxDQUFDQyxLQUFMLEVBQU47QUFBQSxPQUFELEVBQXFCLEdBQXJCLENBQVY7QUFDRDtBQXRhSDs7QUFBQTtBQUFBIiwiZmlsZSI6Ii4vc3JjL211c2ljLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgR2FtZSBsb2dpYyBmb3IgbXVzaWMgZ2FtZS5cbiAqL1xuXG5pbXBvcnQgQmxvY2tseSBmcm9tICdibG9ja2x5L2NvcmUnO1xuaW1wb3J0IHtzcGVha2VyfSBmcm9tICcuL3NwZWFrZXInO1xuaW1wb3J0IHt0b29sYm94UGl0Y2h9IGZyb20gJy4vbXVzaWNfYmxvY2tzJztcbmltcG9ydCB7TGluZUN1cnNvcn0gZnJvbSAnLi9saW5lX2N1cnNvcic7XG5pbXBvcnQgJy4vbXVzaWNfYmxvY2tfZ2VuZXJhdG9ycyc7XG5pbXBvcnQgSW50ZXJwcmV0ZXIgZnJvbSAnanMtaW50ZXJwcmV0ZXInO1xuaW1wb3J0IHtub3RlUGxheWVyfSBmcm9tICcuL25vdGVfcGxheWVyJztcblxuXG4vKipcbiAqIENvbnN0YW50IGRlbm90aW5nIGEgcmVzdC5cbiAqL1xuY29uc3QgUkVTVCA9ICdSRVNUJztcblxuY2xhc3MgU3RhdmUge1xuICBjb25zdHJ1Y3RvcihpZCwgc3RhdGVTdGFjaykge1xuICAgIC8qKlxuICAgICAqIFRoZSBpZC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdGUgc3RhY2suXG4gICAgICogQHR5cGUge0FycmF5PEludGVycHJldGVyLlN0YXRlPn1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXRlU3RhY2sgPSBzdGF0ZVN0YWNrO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciBhbGwgdGhlIG5vdGVzIGhhdmUgYmVuIHBsYXllZC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmRvbmUgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lIHRvIHBhdXNlIHRpbGwuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNjcmlwdCBvZiBub3RlcyBwbGF5ZWQuXG4gICAgICogQHR5cGUge0FycmF5PHN0cmluZ3xudW1iZXI+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50cmFuc2NyaXB0XyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQ3VycmVudGx5IHBsYXlpbmcgbm90ZS5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5ub3RlXyA9ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBzdGF2ZSBpcyBjdXJyZW50bHkgcGF1c2VkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gY2xvY2s2NHRocyBOdW1iZXIgb2YgMS82NHRocyBub3RlcyBzaW5jZSB0aGUgc3RhcnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBzdGF2ZSBpcyBwYXVzZWQuXG4gICAqL1xuICBpc1BhdXNlZChjbG9jazY0dGhzKSB7XG4gICAgcmV0dXJuIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA+IGNsb2NrNjR0aHM7XG4gIH1cblxuICAvKipcbiAgICogUGxheSBvbmUgbm90ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uIEZyYWN0aW9uIG9mIGEgd2hvbGUgbm90ZSBsZW5ndGggdG8gcGxheS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBpdGNoIE5vdGUgdG8gcGxheS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNsb2NrNjR0aHMgTnVtYmVyIG9mIDEvNjR0aHMgbm90ZXMgc2luY2UgdGhlIHN0YXJ0LlxuICAgKi9cbiAgcGxheShkdXJhdGlvbiwgcGl0Y2gsIGNsb2NrNjR0aHMpIHtcbiAgICB0aGlzLnN0b3BTb3VuZCgpO1xuICAgIHRoaXMubm90ZV8gPSBwaXRjaDtcbiAgICBub3RlUGxheWVyLnRyaWdnZXJBdHRhY2socGl0Y2gpO1xuICAgIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA9IGR1cmF0aW9uICogNjQgKyBjbG9jazY0dGhzO1xuICAgIC8vIE1ha2UgYSByZWNvcmQgb2YgdGhpcyBub3RlLlxuICAgIHRoaXMudHJhbnNjcmlwdF8ucHVzaChwaXRjaCwgZHVyYXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgb25lIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBGcmFjdGlvbiBvZiBhIHdob2xlIG5vdGUgbGVuZ3RoIHRvIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjbG9jazY0dGhzIE51bWJlciBvZiAxLzY0dGhzIG5vdGVzIHNpbmNlIHRoZSBzdGFydC5cbiAgICovXG4gIHJlc3QoZHVyYXRpb24sIGNsb2NrNjR0aHMpIHtcbiAgICB0aGlzLnN0b3BTb3VuZCgpO1xuICAgIHRoaXMucGF1c2VVbnRpbDY0dGhzXyA9IGR1cmF0aW9uICogNjQgKyBjbG9jazY0dGhzO1xuICAgIC8vIE1ha2UgYSByZWNvcmQgb2YgdGhpcyByZXN0LlxuICAgIGNvbnN0IHRyYW5zY3JpcHRMZW4gPSB0aGlzLnRyYW5zY3JpcHRfLmxlbmd0aDtcbiAgICBpZiAodHJhbnNjcmlwdExlbiA+IDEgJiYgdGhpcy50cmFuc2NyaXB0X1t0cmFuc2NyaXB0TGVuIC0gMl0gPT09IFJFU1QpIHtcbiAgICAgIC8vIENvbmNhdGVuYXRlIHRoaXMgcmVzdCB3aXRoIHByZXZpb3VzIG9uZS5cbiAgICAgIHRoaXMudHJhbnNjcmlwdF9bdHJhbnNjcmlwdExlbiAtIDFdICs9IGR1cmF0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRyYW5zY3JpcHRfLnB1c2goUkVTVCwgZHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyBjdXJyZW50bHkgcGxheWluZyBub3RlLlxuICAgKi9cbiAgc3RvcFNvdW5kKCkge1xuICAgIGlmICh0aGlzLm5vdGVfKSB7XG4gICAgICBub3RlUGxheWVyLnRyaWdnZXJSZWxlYXNlKCk7XG4gICAgICB0aGlzLm5vdGVfID0gJyc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgdHJhbnNjcmlwdCBtYXRjaGVkIGV4cGVjdGVkLlxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZ3xudW1iZXI+fSBleHBlY3RlZFRyYW5zY3JpcHQgVGhlIGV4cGVjdGVkIHRyYW5zY3JpcHQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHRyYW5zY3JpcHQgbWF0Y2hlcy5cbiAgICovXG4gIGNoZWNrVHJhbnNjcmlwdChleHBlY3RlZFRyYW5zY3JpcHQpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIGV4cGVjdGVkVHJhbnNjcmlwdCkgPT09IEpTT04uc3RyaW5naWZ5KHRoaXMudHJhbnNjcmlwdF8pO1xuICB9XG59XG5cbi8qKlxuICogR2FtZSBsb2dpYyBmb3IgbXVzaWMgZ2FtZS5cbiAqL1xuZXhwb3J0IGNsYXNzIE11c2ljIHtcbiAgLyoqXG4gICAqIENsYXNzIGZvciBhIG11c2ljIGdhbWUuXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqXG4gICAgICogVGhlIEJsb2NrbHkgd29ya3NwYWNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGdhbWUuXG4gICAgICogQHR5cGUgeyFCbG9ja2x5LldvcmtzcGFjZVN2Z31cbiAgICAgKi9cbiAgICB0aGlzLndvcmtzcGFjZSA9IHRoaXMuY3JlYXRlV29ya3NwYWNlXygpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnRseSBsb2FkZWQgbGV2ZWwuIDAgaWYgbm8gbGV2ZWwgbG9hZGVkLlxuICAgICAqL1xuICAgIHRoaXMubGV2ZWwgPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIEhUTUwgZWxlbWVudCBjb250YWluaW5nIHRoZSBnb2FsIHRleHQgZm9yIHRoZSBnYW1lLlxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZ29hbFRleHRFbGVtZW50XyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb2FsVGV4dCcpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGV4cGVjdGVkIGFuc3dlci5cbiAgICAgKiBAdHlwZSB7QXJyYXk8QXJyYXk8c3RyaW5nfG51bWJlcj4+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5leHBlY3RlZEFuc3dlcl8gPSBbW11dO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGludGVycHJldGVyLlxuICAgICAqIEB0eXBlIHs/SW50ZXJwcmV0ZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmludGVycHJldGVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXk8U3RhdmU+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdGF2ZXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhY3RpdmUgc3RhdmUuXG4gICAgICogQHR5cGUgez9TdGF2ZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRpbWUgb2Ygc3RhcnQgb2YgZXhlY3V0aW9uLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIDEvNjR0aHMgbm90ZXMgc2luY2UgdGhlIHN0YXJ0LlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNsb2NrNjR0aHNfID0gMDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzcGVlZCBhdCB3aGljaCB0byBwbGF5IG5vdGVzLiBCZXR3ZWVuIDAgYW5kIDEsIHdpdGggMCBiZWluZyBzbG93LFxuICAgICAqIDAuNSBiZWluZyBub3JtYWwgc3BlZWQsIGFuZCAxIGJlaW5nIGZhc3QuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc3BlZWRfID0gMC41O1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBCbG9ja2x5IHdvcmtzcGFjZS5cbiAgICogQHJldHVybiB7IUJsb2NrbHkuV29ya3NwYWNlU3ZnfSBUaGUgQmxvY2tseSB3b3Jrc3BhY2UuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVXb3Jrc3BhY2VfKCkge1xuICAgIC8vIEluaXRpYWxpemUgQmxvY2tseSB3b3Jrc3BhY2UuXG4gICAgY29uc3QgYmxvY2tseURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibG9ja2x5RGl2Jyk7XG4gICAgY29uc3Qgd29ya3NwYWNlID0gQmxvY2tseS5pbmplY3QoYmxvY2tseURpdiwge1xuICAgICAgdG9vbGJveDogdG9vbGJveFBpdGNoLFxuICAgIH0pO1xuICAgIEJsb2NrbHkuQVNUTm9kZS5OQVZJR0FURV9BTExfRklFTERTID0gdHJ1ZTtcbiAgICB3b3Jrc3BhY2UuZ2V0TWFya2VyTWFuYWdlcigpLnNldEN1cnNvcihuZXcgTGluZUN1cnNvcigpKTtcbiAgICB3b3Jrc3BhY2UuYWRkQ2hhbmdlTGlzdGVuZXIoKGV2ZW50KSA9PiBzcGVha2VyLm5vZGVUb1NwZWVjaChldmVudCkpO1xuICAgIHdvcmtzcGFjZS5nZXRGbHlvdXQoKS5nZXRXb3Jrc3BhY2UoKS5hZGRDaGFuZ2VMaXN0ZW5lcihcbiAgICAgICAgKGV2ZW50KSA9PiBzcGVha2VyLm5vZGVUb1NwZWVjaChldmVudCkpO1xuICAgIHJldHVybiB3b3Jrc3BhY2U7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZ29hbCB0ZXh0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBzZXQgdGhlIGdvYWwgdG8uXG4gICAqL1xuICBzZXRHb2FsVGV4dCh0ZXh0KSB7XG4gICAgdGhpcy5nb2FsVGV4dEVsZW1lbnRfLmlubmVySFRNTCA9IHRleHQ7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBnb2FsIGJhc2VkIG9uIHRoZSBjdXJyZW50IGxldmVsLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlR29hbF8oKSB7XG4gICAgbGV0IGdvYWxUZXh0ID0gJyc7XG4gICAgc3dpdGNoICh0aGlzLmxldmVsKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGdvYWxUZXh0ID0gJ1BsYXkgYzQgZDQgZTQgYzQnO1xuICAgICAgICB0aGlzLmV4cGVjdGVkQW5zd2VyXyA9XG4gICAgICAgICAgICBbWydDNCcsIDAuMjUsICdENCcsIDAuMjUsICdFNCcsIDAuMjUsICdDNCcsIDAuMjVdXTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuc2V0R29hbFRleHQoZ29hbFRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgdG9vbGJveCBiYXNlZCBvbiB0aGUgY3VycmVudCBsZXZlbC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZVRvb2xib3hfKCkge1xuICAgIGxldCB0b29sYm94SnNvbiA9IHRvb2xib3hQaXRjaDsgLy8gVXNlIHRvb2xib3hQaXRjaCBhcyBkZWZhdWx0LlxuICAgIGlmICh0aGlzLmxldmVsIDwgNikge1xuICAgICAgdG9vbGJveEpzb24gPSB7XG4gICAgICAgICdraW5kJzogJ2ZseW91dFRvb2xib3gnLFxuICAgICAgICAnY29udGVudHMnOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgJ2tpbmQnOiAnYmxvY2snLFxuICAgICAgICAgICAgJ3R5cGUnOiAncGl0Y2hfdGVzdCcsXG4gICAgICAgICAgfSxcblxuICAgICAgICAgIHtcbiAgICAgICAgICAgICdraW5kJzogJ2Jsb2NrJyxcbiAgICAgICAgICAgICd0eXBlJzogJ211c2ljX3BpdGNoJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICdraW5kJzogJ2Jsb2NrJyxcbiAgICAgICAgICAgICd0eXBlJzogJ211c2ljX25vdGUnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgJ2tpbmQnOiAnYmxvY2snLFxuICAgICAgICAgICAgJ3R5cGUnOiAnbXVzaWNfcmVzdF93aG9sZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICAna2luZCc6ICdibG9jaycsXG4gICAgICAgICAgICAndHlwZSc6ICdtdXNpY19yZXN0JyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICdraW5kJzogJ2Jsb2NrJyxcbiAgICAgICAgICAgICd0eXBlJzogJ211c2ljX2luc3RydW1lbnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLndvcmtzcGFjZS51cGRhdGVUb29sYm94KHRvb2xib3hKc29uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHdvcmtzcGFjZSBibG9ja3MgYmFzZWQgb24gdGhlIGN1cnJlbnQgbGV2ZWwuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBsb2FkTGV2ZWxCbG9ja3NfKCkge1xuICAgIHRoaXMud29ya3NwYWNlLmNsZWFyKCk7XG4gICAgbGV0IGxldmVsWG1sID0gJyc7XG4gICAgaWYgKHRoaXMubGV2ZWwgPT09IDIpIHtcbiAgICAgIGxldmVsWG1sID1cbiAgICAgICAgICBgPHhtbD5cbiAgICAgICAgICAgIDxibG9jayB0eXBlPVwibXVzaWNfc3RhcnRcIiBkZWxldGFibGU9XCJmYWxzZVwiIHg9XCIxODBcIlxuICAgICAgICAgICAgeT1cIjUwXCI+XG4gICAgICAgICAgICAgIDxzdGF0ZW1lbnQgbmFtZT1cIlNUQUNLXCI+XG4gICAgICAgICAgICAgICAgPGJsb2NrIHR5cGU9XCJtdXNpY19ub3RlXCI+XG4gICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIkRVUkFUSU9OXCI+MC4yNTwvZmllbGQ+XG4gICAgICAgICAgICAgICAgICA8dmFsdWUgbmFtZT1cIlBJVENIXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzaGFkb3cgdHlwZT1cIm11c2ljX3BpdGNoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGZpZWxkIG5hbWU9XCJQSVRDSFwiPkM0PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgPC9zaGFkb3c+XG4gICAgICAgICAgICAgICAgICA8L3ZhbHVlPlxuICAgICAgICAgICAgICAgICAgPG5leHQ+XG4gICAgICAgICAgICAgICAgICAgIDxibG9jayB0eXBlPVwibXVzaWNfbm90ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZCBuYW1lPVwiRFVSQVRJT05cIj4wLjI1PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICA8dmFsdWUgbmFtZT1cIlBJVENIXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2hhZG93IHR5cGU9XCJtdXNpY19waXRjaFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIlBJVENIXCI+RDQ8L2ZpZWxkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zaGFkb3c+XG4gICAgICAgICAgICAgICAgICAgICAgPC92YWx1ZT5cbiAgICAgICAgICAgICAgICAgICAgICA8bmV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxibG9jayB0eXBlPVwibXVzaWNfbm90ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIkRVUkFUSU9OXCI+MC4yNTwvZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx2YWx1ZSBuYW1lPVwiUElUQ0hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2hhZG93IHR5cGU9XCJtdXNpY19waXRjaFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZpZWxkIG5hbWU9XCJQSVRDSFwiPkU0PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NoYWRvdz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC92YWx1ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPG5leHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJsb2NrIHR5cGU9XCJtdXNpY19ub3RlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIkRVUkFUSU9OXCI+MC4yNTwvZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dmFsdWUgbmFtZT1cIlBJVENIXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaGFkb3cgdHlwZT1cIm11c2ljX3BpdGNoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGZpZWxkIG5hbWU9XCJQSVRDSFwiPkM0PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaGFkb3c+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3ZhbHVlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYmxvY2s+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmV4dD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYmxvY2s+XG4gICAgICAgICAgICAgICAgICAgICAgPC9uZXh0PlxuICAgICAgICAgICAgICAgICAgICA8L2Jsb2NrPlxuICAgICAgICAgICAgICAgICAgPC9uZXh0PlxuICAgICAgICAgICAgICAgIDwvYmxvY2s+XG4gICAgICAgICAgICAgIDwvc3RhdGVtZW50PlxuICAgICAgICAgICAgPC9ibG9jaz5cbiAgICAgICAgICA8L3htbD5gO1xuICAgIH0gZWxzZSBpZiAodGhpcy5sZXZlbCA8IDYpIHtcbiAgICAgIGxldmVsWG1sID1cbiAgICAgICAgICBgPHhtbD5cbiAgICAgICAgICAgIDxibG9jayB0eXBlPVwibXVzaWNfc3RhcnRcIiBkZWxldGFibGU9XCIke3RoaXMubGV2ZWwgPiA2fVwiIHg9XCIxODBcIlxuICAgICAgICAgICAgeT1cIjUwXCI+PC9ibG9jaz5cbiAgICAgICAgICA8L3htbD5gO1xuICAgIH1cbiAgICBpZiAobGV2ZWxYbWwpIHtcbiAgICAgIEJsb2NrbHkuWG1sLmRvbVRvV29ya3NwYWNlKFxuICAgICAgICAgIEJsb2NrbHkuWG1sLnRleHRUb0RvbShsZXZlbFhtbCksIHRoaXMud29ya3NwYWNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9hZCB0aGUgc3BlY2lmaWVkIGxldmVsLlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGxldmVsIFRoZSBsZXZlbCB0byBsb2FkLlxuICAgKi9cbiAgbG9hZExldmVsKGxldmVsKSB7XG4gICAgdGhpcy5sZXZlbCA9IE51bWJlcihsZXZlbCk7XG4gICAgdGhpcy51cGRhdGVHb2FsXygpO1xuICAgIHRoaXMudXBkYXRlVG9vbGJveF8oKTtcbiAgICB0aGlzLmxvYWRMZXZlbEJsb2Nrc18oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgY29kZSBhbmQgbG9ncyBpdCB0byB0aGUgY29uc29sZS5cbiAgICovXG4gIGxvZ0dlbmVyYXRlZENvZGUoKSB7XG4gICAgY29uc3QgY29kZUpzID0gQmxvY2tseS5KYXZhU2NyaXB0LndvcmtzcGFjZVRvQ29kZSh0aGlzLndvcmtzcGFjZSk7XG4gICAgY29uc29sZS5sb2coY29kZUpzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZXMgd2hldGhlciB0aGUgYW5zd2VyIGZvciB0aGUgY3VycmVudGx5IGxvYWRlZCBsZXZlbCBpcyBjb3JyZWN0LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBhbnN3ZXIgaXMgY29ycmVjdC5cbiAgICovXG4gIGNoZWNrQW5zd2VyXygpIHtcbiAgICBsZXQgY29ycmVjdCA9IHRydWU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmV4cGVjdGVkQW5zd2VyXy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLnN0YXZlc19baV0uY2hlY2tUcmFuc2NyaXB0KHRoaXMuZXhwZWN0ZWRBbnN3ZXJfW2ldKSkge1xuICAgICAgICBjb3JyZWN0ID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29ycmVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQbGF5IG9uZSBub3RlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gRnJhY3Rpb24gb2YgYSB3aG9sZSBub3RlIGxlbmd0aCB0byBwbGF5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGl0Y2ggTm90ZSBwbGF5LlxuICAgKi9cbiAgcGxheV8oZHVyYXRpb24sIHBpdGNoKSB7XG4gICAgdGhpcy5hY3RpdmVTdGF2ZV8ucGxheShkdXJhdGlvbiwgcGl0Y2gsIHRoaXMuY2xvY2s2NHRoc18pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgb25lIHJlc3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiBGcmFjdGlvbiBvZiBhIHdob2xlIG5vdGUgbGVuZ3RoIHRvIHJlc3QuXG4gICAqL1xuICByZXN0XyhkdXJhdGlvbikge1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfLnJlc3QoZHVyYXRpb24sIHRoaXMuY2xvY2s2NHRoc18pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluamVjdCB0aGUgTXVzaWMgQVBJIGludG8gYSBKYXZhU2NyaXB0IGludGVycHJldGVyLlxuICAgKiBAcGFyYW0geyFJbnRlcnByZXRlcn0gaW50ZXJwcmV0ZXIgVGhlIEpTLUludGVycHJldGVyLlxuICAgKiBAcGFyYW0geyFJbnRlcnByZXRlci5PYmplY3R9IGdsb2JhbE9iamVjdCBHbG9iYWwgb2JqZWN0LlxuICAgKi9cbiAgaW50ZXJwcmV0ZXJJbml0XyhpbnRlcnByZXRlciwgZ2xvYmFsT2JqZWN0KSB7XG4gICAgLy8gQVBJXG4gICAgbGV0IHdyYXBwZXI7XG4gICAgd3JhcHBlciA9IChkdXJhdGlvbiwgcGl0Y2gsIF9pZCkgPT4ge1xuICAgICAgdGhpcy5wbGF5XyhkdXJhdGlvbiwgcGl0Y2gpO1xuICAgIH07XG4gICAgaW50ZXJwcmV0ZXIuc2V0UHJvcGVydHkoZ2xvYmFsT2JqZWN0LCAncGxheScsXG4gICAgICAgIGludGVycHJldGVyLmNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKHdyYXBwZXIpKTtcbiAgICB3cmFwcGVyID0gKGR1cmF0aW9uLCBfaWQpID0+IHtcbiAgICAgIHRoaXMucmVzdF8oZHVyYXRpb24pO1xuICAgIH07XG4gICAgaW50ZXJwcmV0ZXIuc2V0UHJvcGVydHkoZ2xvYmFsT2JqZWN0LCAncmVzdCcsXG4gICAgICAgIGludGVycHJldGVyLmNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKHdyYXBwZXIpKTtcblxuICAgIC8vIFRPRE8gaW1wbGVtZW50IGNoYW5naW5nIGluc3RydW1lbnQuXG4gICAgLy8gd3JhcHBlciA9IGZ1bmN0aW9uKGluc3RydW1lbnQsIGlkKSB7XG4gICAgLy8gICBNdXNpYy5zZXRJbnN0cnVtZW50KGluc3RydW1lbnQsIGlkKTtcbiAgICAvLyB9O1xuICAgIC8vIGludGVycHJldGVyLnNldFByb3BlcnR5KGdsb2JhbE9iamVjdCwgJ3NldEluc3RydW1lbnQnLFxuICAgIC8vICAgICBpbnRlcnByZXRlci5jcmVhdGVOYXRpdmVGdW5jdGlvbih3cmFwcGVyKSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIGJpdGUtc2l6ZWQgY2h1bmsgb2YgdGhlIHVzZXIncyBjb2RlLlxuICAgKiBAcGFyYW0ge1N0YXZlfSBzdGF2ZSBUaGUgc3RhdmUgdG8gZXhlY3V0ZS5cbiAgICovXG4gIGV4ZWN1dGVDaHVua18oc3RhdmUpIHtcbiAgICB0aGlzLmFjdGl2ZVN0YXZlXyA9IHN0YXZlO1xuICAgIC8vIFN3aXRjaCB0aGUgaW50ZXJwcmV0ZXIgdG8gcnVuIHRoZSBwcm92aWRlZCBzdGFmZi5cbiAgICB0aGlzLmludGVycHJldGVyXy5zdGF0ZVN0YWNrID0gc3RhdmUuc3RhdGVTdGFjaztcbiAgICBsZXQgdGlja3MgPSAxMDAwMDtcbiAgICBsZXQgZ287XG4gICAgZG8ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZ28gPSB0aGlzLmludGVycHJldGVyXy5zdGVwKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIFVzZXIgZXJyb3IsIHRlcm1pbmF0ZSBpbiBzaGFtZS5cbiAgICAgICAgYWxlcnQoZSk7XG4gICAgICAgIGdvID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAodGlja3MtLSA9PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignU3RhZmYgJyArIHN0YXZlLmlkICsgJyBpcyBydW5uaW5nIHNsb3dseS4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXZlLmlzUGF1c2VkKHRoaXMuY2xvY2s2NHRoc18pKSB7XG4gICAgICAgIC8vIFByZXZpb3VzbHkgZXhlY3V0ZWQgY29tbWFuZCAocGxheSBvciByZXN0KSByZXF1ZXN0ZWQgYSBwYXVzZS5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKGdvKTtcbiAgICAvLyBUaHJlYWQgY29tcGxldGUuICBXcmFwIHVwLlxuICAgIHN0YXZlLnN0b3BTb3VuZChzdGF2ZSk7XG4gICAgc3RhdmUuZG9uZSA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBzcGVlZCAoTnVtYmVyIGJldHdlZW4gMCBhbmQgMSkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcGVlZCBUaGUgc3BlZWQgdG8gc2V0IHRvLlxuICAgKi9cbiAgc2V0U3BlZWQoc3BlZWQpIHtcbiAgICBpZiAoc3BlZWQgPD0gMCB8fCBzcGVlZCA+IDEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgc3BlZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zcGVlZF8gPSBzcGVlZDtcbiAgICB0aGlzLnN0YXJ0VGltZV8gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSAxLzY0dGggdGljayBvZiB0aGUgcHJvZ3JhbS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRpY2tfKCkge1xuICAgIC8vIERlbGF5IGJldHdlZW4gc3RhcnQgb2YgZWFjaCBiZWF0ICgxLzY0dGhzIG9mIGEgd2hvbGUgbm90ZSkuXG4gICAgLy8gUmVtaW5kZXI6IFRoZSBzdGFydFRpbWVfIHNob3VsZCBiZSByZXNldCBhZnRlciB0aGUgc2xpZGVyIGlzIGFkanVzdGVkLlxuICAgIGNvbnN0IHNjYWxlRHVyYXRpb24gPSAxMDAwICogKDIuNSAtIDIgKiB0aGlzLnNwZWVkXykgLyA2NDtcbiAgICBpZiAoIXRoaXMuc3RhcnRUaW1lXykge1xuICAgICAgLy8gRWl0aGVyIHRoZSBmaXJzdCB0aWNrLCBvciBmaXJzdCB0aWNrIGFmdGVyIHNsaWRlciB3YXMgYWRqdXN0ZWQuXG4gICAgICB0aGlzLnN0YXJ0VGltZV8gPSBEYXRlLm5vdygpIC0gdGhpcy5jbG9jazY0dGhzXyAqIHNjYWxlRHVyYXRpb247XG4gICAgfVxuICAgIGxldCBkb25lID0gdHJ1ZTtcbiAgICB0aGlzLnN0YXZlc18uZm9yRWFjaCgoc3RhdmUpID0+IHtcbiAgICAgIGlmICghc3RhdmUuZG9uZSkge1xuICAgICAgICBkb25lID0gZmFsc2U7XG4gICAgICAgIGlmICghc3RhdmUuaXNQYXVzZWQodGhpcy5jbG9jazY0dGhzXykpIHtcbiAgICAgICAgICB0aGlzLmV4ZWN1dGVDaHVua18oc3RhdmUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoZG9uZSkge1xuICAgICAgLy8gUHJvZ3JhbSBjb21wbGV0ZS5cbiAgICAgIGlmICh0aGlzLmNoZWNrQW5zd2VyXygpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDT1JSRUNUJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnSU5DT1JSRUNUJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xvY2s2NHRoc18rKztcbiAgICAgIGNvbnN0IG1zID1cbiAgICAgICAgICAodGhpcy5zdGFydFRpbWVfICsgdGhpcy5jbG9jazY0dGhzXyAqIHNjYWxlRHVyYXRpb24pIC0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMucGlkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnRpY2tfKCksIG1zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIG11c2ljIHRvIHRoZSBzdGFydCBwb3NpdGlvbiwgY2xlYXIgdGhlIGRpc3BsYXksIGFuZCBraWxsIGFueVxuICAgKiBwZW5kaW5nIHRhc2tzLlxuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgLy8gS2lsbCBhbnkgdGFzay5cbiAgICBjbGVhclRpbWVvdXQodGhpcy5waWQpO1xuICAgIHRoaXMuc3RhdmVzXy5mb3JFYWNoKChzdGF2ZSkgPT4ge1xuICAgICAgc3RhdmUuc3RvcFNvdW5kKCk7XG4gICAgfSk7XG4gICAgdGhpcy5pbnRlcnByZXRlcl8gPSBudWxsO1xuICAgIHRoaXMuYWN0aXZlU3RhdmVfID0gbnVsbDtcbiAgICB0aGlzLnN0YXZlc18ubGVuZ3RoID0gMDtcbiAgICB0aGlzLmNsb2NrNjR0aHNfID0gMDtcbiAgICB0aGlzLnN0YXJ0VGltZV8gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFBsYXlzIG11c2ljIGJhc2VkIG9uIHRoZSBibG9ja3Mgb24gdGhlIHdvcmtzcGFjZS5cbiAgICovXG4gIGV4ZWN1dGUoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICAgIC8vIEdldCBnZW5lcmF0ZWQgY29kZSBmcm9tIHdvcmtzcGFjZVxuICAgIGNvbnN0IGNvZGUgPSBCbG9ja2x5LkphdmFTY3JpcHQud29ya3NwYWNlVG9Db2RlKHRoaXMud29ya3NwYWNlKTtcblxuICAgIC8vIFJ1biB1c2VyIGNvZGUuXG4gICAgdGhpcy5pbnRlcnByZXRlcl8gPSBuZXcgSW50ZXJwcmV0ZXIoY29kZSwgdGhpcy5pbnRlcnByZXRlckluaXRfLmJpbmQodGhpcykpO1xuICAgIC8vIFRPRE8gc3VwcG9ydCBtdWx0aXBsZSB0aHJlYWRzXG4gICAgLy8gQXNzdW1lIG9ubHkgb25lIHRocmVhZC5cbiAgICBjb25zdCBpbnRlcnByZXRlciA9IG5ldyBJbnRlcnByZXRlcignJyk7XG4gICAgLy8gUmVwbGFjZSB0aGlzIHRocmVhZCdzIGdsb2JhbCBzY29wZSB3aXRoIHRoZSBjcm9zcy10aHJlYWQgZ2xvYmFsLlxuICAgIGludGVycHJldGVyLnN0YXRlU3RhY2tbMF0uc2NvcGUgPSB0aGlzLmludGVycHJldGVyXy5nbG9iYWxTY29wZTtcbiAgICAvLyBBZGQgc3RhcnQgY2FsbC5cbiAgICBpbnRlcnByZXRlci5hcHBlbmRDb2RlKCdzdGFydCgpO1xcbicpO1xuICAgIHRoaXMuc3RhdmVzXy5wdXNoKG5ldyBTdGF2ZSgwLCBpbnRlcnByZXRlci5zdGF0ZVN0YWNrKSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudGlja18oKSwgMTAwKTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/music.js\n");

/***/ }),

/***/ "./src/music_block_generators.js":
/*!***************************************!*\
  !*** ./src/music_block_generators.js ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview JavaScript generators for music blocks.\n */\n\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript['music_pitch'] = function (block) {\n  var code = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.quote_(block.getFieldValue('PITCH'));\n  return [code, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.ORDER_ATOMIC];\n};\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript['music_note'] = function (block) {\n  var pitch = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.valueToCode(block, 'PITCH', blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.ORDER_NONE) || 'C4';\n  return 'play(' + Number(block.getFieldValue('DURATION')) + ', ' + pitch + ', \\'block_id_' + block.id + '\\');\\n';\n};\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript['music_rest_whole'] = function (block) {\n  return 'rest(1, \\'block_id_' + block.id + '\\');\\n';\n};\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript['music_rest'] = function (block) {\n  return 'rest(' + Number(block.getFieldValue('DURATION')) + ', \\'block_id_' + block.id + '\\');\\n';\n};\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript['music_instrument'] = function (block) {\n  var instrument = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.quote_(block.getFieldValue('INSTRUMENT'));\n  return 'setInstrument(' + instrument + ', \\'block_id_' + block.id + '\\');\\n';\n};\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript['music_start'] = function (block) {\n  var statementsStack = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.statementToCode(block, 'STACK');\n  var code = 'function start() {\\n' + statementsStack + '}\\n'; // Add % so as not to collide with helper functions in definitions list.\n\n  blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.JavaScript.definitions_['%start'] = code;\n  return null;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbXVzaWNfYmxvY2tfZ2VuZXJhdG9ycy5qcz8zZWM4Il0sIm5hbWVzIjpbIkJsb2NrbHkiLCJKYXZhU2NyaXB0IiwiYmxvY2siLCJjb2RlIiwicXVvdGVfIiwiZ2V0RmllbGRWYWx1ZSIsIk9SREVSX0FUT01JQyIsInBpdGNoIiwidmFsdWVUb0NvZGUiLCJPUkRFUl9OT05FIiwiTnVtYmVyIiwiaWQiLCJpbnN0cnVtZW50Iiwic3RhdGVtZW50c1N0YWNrIiwic3RhdGVtZW50VG9Db2RlIiwiZGVmaW5pdGlvbnNfIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBQSxtREFBTyxDQUFDQyxVQUFSLENBQW1CLGFBQW5CLElBQW9DLFVBQVNDLEtBQVQsRUFBZ0I7QUFDbEQsTUFBTUMsSUFBSSxHQUFHSCxtREFBTyxDQUFDQyxVQUFSLENBQW1CRyxNQUFuQixDQUEwQkYsS0FBSyxDQUFDRyxhQUFOLENBQW9CLE9BQXBCLENBQTFCLENBQWI7QUFDQSxTQUFPLENBQUNGLElBQUQsRUFBT0gsbURBQU8sQ0FBQ0MsVUFBUixDQUFtQkssWUFBMUIsQ0FBUDtBQUNELENBSEQ7O0FBS0FOLG1EQUFPLENBQUNDLFVBQVIsQ0FBbUIsWUFBbkIsSUFBbUMsVUFBU0MsS0FBVCxFQUFnQjtBQUNqRCxNQUFNSyxLQUFLLEdBQUdQLG1EQUFPLENBQUNDLFVBQVIsQ0FBbUJPLFdBQW5CLENBQStCTixLQUEvQixFQUFzQyxPQUF0QyxFQUNWRixtREFBTyxDQUFDQyxVQUFSLENBQW1CUSxVQURULEtBQ3dCLElBRHRDO0FBRUEsU0FBTyxVQUFVQyxNQUFNLENBQUNSLEtBQUssQ0FBQ0csYUFBTixDQUFvQixVQUFwQixDQUFELENBQWhCLEdBQW9ELElBQXBELEdBQTJERSxLQUEzRCxHQUNILGVBREcsR0FDZUwsS0FBSyxDQUFDUyxFQURyQixHQUMwQixRQURqQztBQUVELENBTEQ7O0FBT0FYLG1EQUFPLENBQUNDLFVBQVIsQ0FBbUIsa0JBQW5CLElBQXlDLFVBQVNDLEtBQVQsRUFBZ0I7QUFDdkQsU0FBTyx3QkFBd0JBLEtBQUssQ0FBQ1MsRUFBOUIsR0FBbUMsUUFBMUM7QUFDRCxDQUZEOztBQUlBWCxtREFBTyxDQUFDQyxVQUFSLENBQW1CLFlBQW5CLElBQW1DLFVBQVNDLEtBQVQsRUFBZ0I7QUFDakQsU0FBTyxVQUFVUSxNQUFNLENBQUNSLEtBQUssQ0FBQ0csYUFBTixDQUFvQixVQUFwQixDQUFELENBQWhCLEdBQ0gsZUFERyxHQUNlSCxLQUFLLENBQUNTLEVBRHJCLEdBQzBCLFFBRGpDO0FBRUQsQ0FIRDs7QUFLQVgsbURBQU8sQ0FBQ0MsVUFBUixDQUFtQixrQkFBbkIsSUFBeUMsVUFBU0MsS0FBVCxFQUFnQjtBQUN2RCxNQUFNVSxVQUFVLEdBQ1paLG1EQUFPLENBQUNDLFVBQVIsQ0FBbUJHLE1BQW5CLENBQTBCRixLQUFLLENBQUNHLGFBQU4sQ0FBb0IsWUFBcEIsQ0FBMUIsQ0FESjtBQUVBLFNBQU8sbUJBQW1CTyxVQUFuQixHQUFnQyxlQUFoQyxHQUFrRFYsS0FBSyxDQUFDUyxFQUF4RCxHQUE2RCxRQUFwRTtBQUNELENBSkQ7O0FBTUFYLG1EQUFPLENBQUNDLFVBQVIsQ0FBbUIsYUFBbkIsSUFBb0MsVUFBU0MsS0FBVCxFQUFnQjtBQUNsRCxNQUFNVyxlQUFlLEdBQUdiLG1EQUFPLENBQUNDLFVBQVIsQ0FBbUJhLGVBQW5CLENBQW1DWixLQUFuQyxFQUEwQyxPQUExQyxDQUF4QjtBQUNBLE1BQU1DLElBQUksR0FBRyx5QkFDWFUsZUFEVyxHQUNPLEtBRHBCLENBRmtELENBSWxEOztBQUNBYixxREFBTyxDQUFDQyxVQUFSLENBQW1CYyxZQUFuQixDQUFnQyxRQUFoQyxJQUE0Q1osSUFBNUM7QUFDQSxTQUFPLElBQVA7QUFDRCxDQVBEIiwiZmlsZSI6Ii4vc3JjL211c2ljX2Jsb2NrX2dlbmVyYXRvcnMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBKYXZhU2NyaXB0IGdlbmVyYXRvcnMgZm9yIG11c2ljIGJsb2Nrcy5cbiAqL1xuXG5pbXBvcnQgQmxvY2tseSBmcm9tICdibG9ja2x5L2NvcmUnO1xuXG5CbG9ja2x5LkphdmFTY3JpcHRbJ211c2ljX3BpdGNoJ10gPSBmdW5jdGlvbihibG9jaykge1xuICBjb25zdCBjb2RlID0gQmxvY2tseS5KYXZhU2NyaXB0LnF1b3RlXyhibG9jay5nZXRGaWVsZFZhbHVlKCdQSVRDSCcpKTtcbiAgcmV0dXJuIFtjb2RlLCBCbG9ja2x5LkphdmFTY3JpcHQuT1JERVJfQVRPTUlDXTtcbn07XG5cbkJsb2NrbHkuSmF2YVNjcmlwdFsnbXVzaWNfbm90ZSddID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgY29uc3QgcGl0Y2ggPSBCbG9ja2x5LkphdmFTY3JpcHQudmFsdWVUb0NvZGUoYmxvY2ssICdQSVRDSCcsXG4gICAgICBCbG9ja2x5LkphdmFTY3JpcHQuT1JERVJfTk9ORSkgfHwgJ0M0JztcbiAgcmV0dXJuICdwbGF5KCcgKyBOdW1iZXIoYmxvY2suZ2V0RmllbGRWYWx1ZSgnRFVSQVRJT04nKSkgKyAnLCAnICsgcGl0Y2ggK1xuICAgICAgJywgXFwnYmxvY2tfaWRfJyArIGJsb2NrLmlkICsgJ1xcJyk7XFxuJztcbn07XG5cbkJsb2NrbHkuSmF2YVNjcmlwdFsnbXVzaWNfcmVzdF93aG9sZSddID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgcmV0dXJuICdyZXN0KDEsIFxcJ2Jsb2NrX2lkXycgKyBibG9jay5pZCArICdcXCcpO1xcbic7XG59O1xuXG5CbG9ja2x5LkphdmFTY3JpcHRbJ211c2ljX3Jlc3QnXSA9IGZ1bmN0aW9uKGJsb2NrKSB7XG4gIHJldHVybiAncmVzdCgnICsgTnVtYmVyKGJsb2NrLmdldEZpZWxkVmFsdWUoJ0RVUkFUSU9OJykpICtcbiAgICAgICcsIFxcJ2Jsb2NrX2lkXycgKyBibG9jay5pZCArICdcXCcpO1xcbic7XG59O1xuXG5CbG9ja2x5LkphdmFTY3JpcHRbJ211c2ljX2luc3RydW1lbnQnXSA9IGZ1bmN0aW9uKGJsb2NrKSB7XG4gIGNvbnN0IGluc3RydW1lbnQgPVxuICAgICAgQmxvY2tseS5KYXZhU2NyaXB0LnF1b3RlXyhibG9jay5nZXRGaWVsZFZhbHVlKCdJTlNUUlVNRU5UJykpO1xuICByZXR1cm4gJ3NldEluc3RydW1lbnQoJyArIGluc3RydW1lbnQgKyAnLCBcXCdibG9ja19pZF8nICsgYmxvY2suaWQgKyAnXFwnKTtcXG4nO1xufTtcblxuQmxvY2tseS5KYXZhU2NyaXB0WydtdXNpY19zdGFydCddID0gZnVuY3Rpb24oYmxvY2spIHtcbiAgY29uc3Qgc3RhdGVtZW50c1N0YWNrID0gQmxvY2tseS5KYXZhU2NyaXB0LnN0YXRlbWVudFRvQ29kZShibG9jaywgJ1NUQUNLJyk7XG4gIGNvbnN0IGNvZGUgPSAnZnVuY3Rpb24gc3RhcnQoKSB7XFxuJyArXG4gICAgc3RhdGVtZW50c1N0YWNrICsgJ31cXG4nO1xuICAvLyBBZGQgJSBzbyBhcyBub3QgdG8gY29sbGlkZSB3aXRoIGhlbHBlciBmdW5jdGlvbnMgaW4gZGVmaW5pdGlvbnMgbGlzdC5cbiAgQmxvY2tseS5KYXZhU2NyaXB0LmRlZmluaXRpb25zX1snJXN0YXJ0J10gPSBjb2RlO1xuICByZXR1cm4gbnVsbDtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/music_block_generators.js\n");

/***/ }),

/***/ "./src/music_blocks.js":
/*!*****************************!*\
  !*** ./src/music_blocks.js ***!
  \*****************************/
/*! exports provided: toolboxPitch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toolboxPitch\", function() { return toolboxPitch; });\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _field_pitch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./field_pitch */ \"./src/field_pitch.js\");\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Blocks for the accessible music demo.\n */\n\n\nvar mediaPrefix = 'https://raw.githubusercontent.com/google/blockly-games/master/appengine/';\n/* eslint-disable quotes */\n\nblockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.defineBlocksWithJsonArray([{\n  \"type\": \"pitch_test\",\n  \"message0\": 'pitch test: %1',\n  \"args0\": [{\n    \"type\": \"field_pitch\",\n    \"name\": \"PITCH\"\n  }],\n  \"output\": null,\n  \"colour\": 160\n}, {\n  \"type\": \"music_pitch\",\n  \"message0\": \"%1\",\n  \"args0\": [{\n    \"type\": \"field_pitch\",\n    \"name\": \"PITCH\"\n  }],\n  \"output\": \"String\",\n  \"colourPrimary\": 160\n}, {\n  \"type\": \"music_note\",\n  \"message0\": 'Music_playNote %1 %2',\n  \"args0\": [{\n    \"type\": \"field_dropdown\",\n    \"name\": \"DURATION\",\n    \"options\": [[{\n      \"src\": mediaPrefix + \"music/note1.png\",\n      \"width\": 9,\n      \"height\": 19,\n      \"alt\": \"whole\"\n    }, \"1\"], [{\n      \"src\": mediaPrefix + \"music/note0.5.png\",\n      \"width\": 9,\n      \"height\": 19,\n      \"alt\": \"half\"\n    }, \"0.5\"], [{\n      \"src\": mediaPrefix + \"music/note0.25.png\",\n      \"width\": 9,\n      \"height\": 19,\n      \"alt\": \"quarter\"\n    }, \"0.25\"], [{\n      \"src\": mediaPrefix + \"music/note0.125.png\",\n      \"width\": 9,\n      \"height\": 19,\n      \"alt\": \"eighth\"\n    }, \"0.125\"], [{\n      \"src\": mediaPrefix + \"music/note0.0625.png\",\n      \"width\": 9,\n      \"height\": 19,\n      \"alt\": \"sixteenth\"\n    }, \"0.0625\"]]\n  }, {\n    \"type\": \"input_value\",\n    \"name\": \"PITCH\",\n    \"check\": \"String\"\n  }],\n  \"inputsInline\": true,\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"colour\": 160,\n  \"tooltip\": 'Music_playNoteTooltip'\n}, {\n  \"type\": \"music_rest_whole\",\n  \"message0\": 'Music_rest %1',\n  \"args0\": [{\n    \"type\": \"field_image\",\n    \"src\": mediaPrefix + \"music/rest1.png\",\n    \"width\": 10,\n    \"height\": 20,\n    \"alt\": \"-\"\n  }],\n  \"inputsInline\": true,\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"colour\": 160,\n  \"tooltip\": 'Music_restWholeTooltip'\n}, {\n  \"type\": \"music_rest\",\n  \"message0\": 'Music_rest %1',\n  \"args0\": [{\n    \"type\": \"field_dropdown\",\n    \"name\": \"DURATION\",\n    \"options\": [[{\n      \"src\": mediaPrefix + \"music/rest1.png\",\n      \"width\": 10,\n      \"height\": 20,\n      \"alt\": \"whole\"\n    }, \"1\"], [{\n      \"src\": mediaPrefix + \"music/rest0.5.png\",\n      \"width\": 10,\n      \"height\": 20,\n      \"alt\": \"half\"\n    }, \"0.5\"], [{\n      \"src\": mediaPrefix + \"music/rest0.25.png\",\n      \"width\": 10,\n      \"height\": 20,\n      \"alt\": \"quarter\"\n    }, \"0.25\"], [{\n      \"src\": mediaPrefix + \"music/rest0.125.png\",\n      \"width\": 10,\n      \"height\": 20,\n      \"alt\": \"eighth\"\n    }, \"0.125\"], [{\n      \"src\": mediaPrefix + \"music/rest0.0625.png\",\n      \"width\": 10,\n      \"height\": 20,\n      \"alt\": \"sixteenth\"\n    }, \"0.0625\"]]\n  }],\n  \"inputsInline\": true,\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"colour\": 160,\n  \"tooltip\": 'Music_restTooltip'\n}, {\n  \"type\": \"music_instrument\",\n  \"message0\": 'Music_setInstrument %1',\n  \"args0\": [{\n    \"type\": \"field_dropdown\",\n    \"name\": \"INSTRUMENT\",\n    \"options\": [['Music_piano', \"piano\"], ['Music_trumpet', \"trumpet\"], ['Music_banjo', \"banjo\"], ['Music_violin', \"violin\"], ['Music_guitar', \"guitar\"], ['Music_flute', \"flute\"], ['Music_drum', \"drum\"], ['Music_choir', \"choir\"]]\n  }],\n  \"inputsInline\": true,\n  \"previousStatement\": null,\n  \"nextStatement\": null,\n  \"colour\": 160,\n  \"tooltip\": 'Music_setInstrumentTooltip'\n}, {\n  \"type\": \"music_start\",\n  \"message0\": 'Music_start %1',\n  \"args0\": [{\n    \"type\": \"field_image\",\n    \"src\": mediaPrefix + \"music/play.png\",\n    \"width\": 17,\n    \"height\": 17,\n    \"alt\": \"▶\"\n  }],\n  \"message1\": \"%1\",\n  \"args1\": [{\n    \"type\": \"input_statement\",\n    \"name\": \"STACK\"\n  }],\n  \"colour\": 0,\n  \"tooltip\": 'Music_startTooltip'\n}]);\nvar toolboxPitch = {\n  \"kind\": \"flyoutToolbox\",\n  \"contents\": [{\n    \"kind\": \"block\",\n    \"type\": \"pitch_test\"\n  }, {\n    \"kind\": \"block\",\n    \"type\": \"music_pitch\"\n  }, {\n    \"kind\": \"block\",\n    \"type\": \"music_note\"\n  }, {\n    \"kind\": \"block\",\n    \"type\": \"music_rest_whole\"\n  }, {\n    \"kind\": \"block\",\n    \"type\": \"music_rest\"\n  }, {\n    \"kind\": \"block\",\n    \"type\": \"music_instrument\"\n  }, {\n    \"kind\": \"block\",\n    \"type\": \"music_start\"\n  }]\n};\n/* eslint-enable quotes *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbXVzaWNfYmxvY2tzLmpzPzQ3NzUiXSwibmFtZXMiOlsibWVkaWFQcmVmaXgiLCJCbG9ja2x5IiwiZGVmaW5lQmxvY2tzV2l0aEpzb25BcnJheSIsInRvb2xib3hQaXRjaCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBLElBQU1BLFdBQVcsR0FDYiwwRUFESjtBQUdBOztBQUNBQyxtREFBTyxDQUFDQyx5QkFBUixDQUFrQyxDQUNoQztBQUNFLFVBQVEsWUFEVjtBQUVFLGNBQVksZ0JBRmQ7QUFHRSxXQUFTLENBQ1A7QUFDRSxZQUFRLGFBRFY7QUFFRSxZQUFRO0FBRlYsR0FETyxDQUhYO0FBU0UsWUFBVSxJQVRaO0FBVUUsWUFBVTtBQVZaLENBRGdDLEVBYWhDO0FBQ0UsVUFBUSxhQURWO0FBRUUsY0FBWSxJQUZkO0FBR0UsV0FBUyxDQUNQO0FBQ0UsWUFBUSxhQURWO0FBRUUsWUFBUTtBQUZWLEdBRE8sQ0FIWDtBQVNFLFlBQVUsUUFUWjtBQVVFLG1CQUFpQjtBQVZuQixDQWJnQyxFQXlCaEM7QUFDRSxVQUFRLFlBRFY7QUFFRSxjQUFZLHNCQUZkO0FBR0UsV0FBUyxDQUNQO0FBQ0UsWUFBUSxnQkFEVjtBQUVFLFlBQVEsVUFGVjtBQUdFLGVBQVcsQ0FDVCxDQUFDO0FBQ0MsYUFBT0YsV0FBVyxHQUFHLGlCQUR0QjtBQUVDLGVBQVMsQ0FGVjtBQUVhLGdCQUFVLEVBRnZCO0FBRTJCLGFBQU87QUFGbEMsS0FBRCxFQUdHLEdBSEgsQ0FEUyxFQUtULENBQUM7QUFDQyxhQUFPQSxXQUFXLEdBQUcsbUJBRHRCO0FBRUMsZUFBUyxDQUZWO0FBRWEsZ0JBQVUsRUFGdkI7QUFFMkIsYUFBTztBQUZsQyxLQUFELEVBR0csS0FISCxDQUxTLEVBU1QsQ0FBQztBQUNDLGFBQU9BLFdBQVcsR0FBRyxvQkFEdEI7QUFF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LEdBRE8sQ0FIWDtBQW1CRSxrQkFBZ0IsSUFuQmxCO0FBb0JFLHVCQUFxQixJQXBCdkI7QUFxQkUsbUJBQWlCLElBckJuQjtBQXNCRSxZQUFVLEdBdEJaO0FBdUJFLGFBQVc7QUF2QmIsQ0ExSGdDLEVBbUpoQztBQUNFLFVBQVEsYUFEVjtBQUVFLGNBQVksZ0JBRmQ7QUFHRSxXQUFTLENBQ1A7QUFDRSxZQUFRLGFBRFY7QUFFRSxXQUFPQSxXQUFXLEdBQUcsZ0JBRnZCO0FBR0UsYUFBUyxFQUhYO0FBSUUsY0FBVSxFQUpaO0FBS0UsV0FBTztBQUxULEdBRE8sQ0FIWDtBQVlFLGNBQVksSUFaZDtBQWFFLFdBQVMsQ0FDUDtBQUNFLFlBQVEsaUJBRFY7QUFFRSxZQUFRO0FBRlYsR0FETyxDQWJYO0FBbUJFLFlBQVUsQ0FuQlo7QUFvQkUsYUFBVztBQXBCYixDQW5KZ0MsQ0FBbEM7QUEyS08sSUFBTUcsWUFBWSxHQUFHO0FBQzFCLFVBQVEsZUFEa0I7QUFFMUIsY0FBWSxDQUNWO0FBQ0UsWUFBUSxPQURWO0FBRUUsWUFBUTtBQUZWLEdBRFUsRUFNVjtBQUNFLFlBQVEsT0FEVjtBQUVFLFlBQVE7QUFGVixHQU5VLEVBVVY7QUFDRSxZQUFRLE9BRFY7QUFFRSxZQUFRO0FBRlYsR0FWVSxFQWNWO0FBQ0UsWUFBUSxPQURWO0FBRUUsWUFBUTtBQUZWLEdBZFUsRUFrQlY7QUFDRSxZQUFRLE9BRFY7QUFFRSxZQUFRO0FBRlYsR0FsQlUsRUFzQlY7QUFDRSxZQUFRLE9BRFY7QUFFRSxZQUFRO0FBRlYsR0F0QlUsRUEwQlY7QUFDRSxZQUFRLE9BRFY7QUFFRSxZQUFRO0FBRlYsR0ExQlU7QUFGYyxDQUFyQjtBQW1DUCIsImZpbGUiOiIuL3NyYy9tdXNpY19ibG9ja3MuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBCbG9ja3MgZm9yIHRoZSBhY2Nlc3NpYmxlIG11c2ljIGRlbW8uXG4gKi9cblxuaW1wb3J0IEJsb2NrbHkgZnJvbSAnYmxvY2tseS9jb3JlJztcbmltcG9ydCAnLi9maWVsZF9waXRjaCc7XG5cbmNvbnN0IG1lZGlhUHJlZml4ID1cbiAgICAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2dvb2dsZS9ibG9ja2x5LWdhbWVzL21hc3Rlci9hcHBlbmdpbmUvJztcblxuLyogZXNsaW50LWRpc2FibGUgcXVvdGVzICovXG5CbG9ja2x5LmRlZmluZUJsb2Nrc1dpdGhKc29uQXJyYXkoW1xuICB7XG4gICAgXCJ0eXBlXCI6IFwicGl0Y2hfdGVzdFwiLFxuICAgIFwibWVzc2FnZTBcIjogJ3BpdGNoIHRlc3Q6ICUxJyxcbiAgICBcImFyZ3MwXCI6IFtcbiAgICAgIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiZmllbGRfcGl0Y2hcIixcbiAgICAgICAgXCJuYW1lXCI6IFwiUElUQ0hcIixcbiAgICAgIH0sXG4gICAgXSxcbiAgICBcIm91dHB1dFwiOiBudWxsLFxuICAgIFwiY29sb3VyXCI6IDE2MCxcbiAgfSxcbiAge1xuICAgIFwidHlwZVwiOiBcIm11c2ljX3BpdGNoXCIsXG4gICAgXCJtZXNzYWdlMFwiOiBcIiUxXCIsXG4gICAgXCJhcmdzMFwiOiBbXG4gICAgICB7XG4gICAgICAgIFwidHlwZVwiOiBcImZpZWxkX3BpdGNoXCIsXG4gICAgICAgIFwibmFtZVwiOiBcIlBJVENIXCIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgXCJvdXRwdXRcIjogXCJTdHJpbmdcIixcbiAgICBcImNvbG91clByaW1hcnlcIjogMTYwLFxuICB9LFxuICB7XG4gICAgXCJ0eXBlXCI6IFwibXVzaWNfbm90ZVwiLFxuICAgIFwibWVzc2FnZTBcIjogJ011c2ljX3BsYXlOb3RlICUxICUyJyxcbiAgICBcImFyZ3MwXCI6IFtcbiAgICAgIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiZmllbGRfZHJvcGRvd25cIixcbiAgICAgICAgXCJuYW1lXCI6IFwiRFVSQVRJT05cIixcbiAgICAgICAgXCJvcHRpb25zXCI6IFtcbiAgICAgICAgICBbe1xuICAgICAgICAgICAgXCJzcmNcIjogbWVkaWFQcmVmaXggKyBcIm11c2ljL25vdGUxLnBuZ1wiLFxuICAgICAgICAgICAgXCJ3aWR0aFwiOiA5LCBcImhlaWdodFwiOiAxOSwgXCJhbHRcIjogXCJ3aG9sZVwiLFxuICAgICAgICAgIH0sIFwiMVwiXSxcbiAgICAgICAgICBbe1xuICAgICAgICAgICAgXCJzcmNcIjogbWVkaWFQcmVmaXggKyBcIm11c2ljL25vdGUwLjUucG5nXCIsXG4gICAgICAgICAgICBcIndpZHRoXCI6IDksIFwiaGVpZ2h0XCI6IDE5LCBcImFsdFwiOiBcImhhbGZcIixcbiAgICAgICAgICB9LCBcIjAuNVwiXSxcbiAgICAgICAgICBbe1xuICAgICAgICAgICAgXCJzcmNcIjogbWVkaWFQcmVmaXggKyBcIm11c2ljL25vdGUwLjI1LnBuZ1wiLFxuICAgICAgICAgICAgXCJ3aWR0aFwiOiA5LCBcImhlaWdodFwiOiAxOSwgXCJhbHRcIjogXCJxdWFydGVyXCIsXG4gICAgICAgICAgfSwgXCIwLjI1XCJdLFxuICAgICAgICAgIFt7XG4gICAgICAgICAgICBcInNyY1wiOiBtZWRpYVByZWZpeCArIFwibXVzaWMvbm90ZTAuMTI1LnBuZ1wiLFxuICAgICAgICAgICAgXCJ3aWR0aFwiOiA5LCBcImhlaWdodFwiOiAxOSwgXCJhbHRcIjogXCJlaWdodGhcIixcbiAgICAgICAgICB9LCBcIjAuMTI1XCJdLFxuICAgICAgICAgIFt7XG4gICAgICAgICAgICBcInNyY1wiOiBtZWRpYVByZWZpeCArIFwibXVzaWMvbm90ZTAuMDYyNS5wbmdcIixcbiAgICAgICAgICAgIFwid2lkdGhcIjogOSwgXCJoZWlnaHRcIjogMTksIFwiYWx0XCI6IFwic2l4dGVlbnRoXCIsXG4gICAgICAgICAgfSwgXCIwLjA2MjVcIl0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcInR5cGVcIjogXCJpbnB1dF92YWx1ZVwiLFxuICAgICAgICBcIm5hbWVcIjogXCJQSVRDSFwiLFxuICAgICAgICBcImNoZWNrXCI6IFwiU3RyaW5nXCIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgXCJpbnB1dHNJbmxpbmVcIjogdHJ1ZSxcbiAgICBcInByZXZpb3VzU3RhdGVtZW50XCI6IG51bGwsXG4gICAgXCJuZXh0U3RhdGVtZW50XCI6IG51bGwsXG4gICAgXCJjb2xvdXJcIjogMTYwLFxuICAgIFwidG9vbHRpcFwiOiAnTXVzaWNfcGxheU5vdGVUb29sdGlwJyxcbiAgfSxcbiAge1xuICAgIFwidHlwZVwiOiBcIm11c2ljX3Jlc3Rfd2hvbGVcIixcbiAgICBcIm1lc3NhZ2UwXCI6ICdNdXNpY19yZXN0ICUxJyxcbiAgICBcImFyZ3MwXCI6IFtcbiAgICAgIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiZmllbGRfaW1hZ2VcIixcbiAgICAgICAgXCJzcmNcIjogbWVkaWFQcmVmaXggKyBcIm11c2ljL3Jlc3QxLnBuZ1wiLFxuICAgICAgICBcIndpZHRoXCI6IDEwLFxuICAgICAgICBcImhlaWdodFwiOiAyMCxcbiAgICAgICAgXCJhbHRcIjogXCItXCIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgXCJpbnB1dHNJbmxpbmVcIjogdHJ1ZSxcbiAgICBcInByZXZpb3VzU3RhdGVtZW50XCI6IG51bGwsXG4gICAgXCJuZXh0U3RhdGVtZW50XCI6IG51bGwsXG4gICAgXCJjb2xvdXJcIjogMTYwLFxuICAgIFwidG9vbHRpcFwiOiAnTXVzaWNfcmVzdFdob2xlVG9vbHRpcCcsXG4gIH0sXG4gIHtcbiAgICBcInR5cGVcIjogXCJtdXNpY19yZXN0XCIsXG4gICAgXCJtZXNzYWdlMFwiOiAnTXVzaWNfcmVzdCAlMScsXG4gICAgXCJhcmdzMFwiOiBbXG4gICAgICB7XG4gICAgICAgIFwidHlwZVwiOiBcImZpZWxkX2Ryb3Bkb3duXCIsXG4gICAgICAgIFwibmFtZVwiOiBcIkRVUkFUSU9OXCIsXG4gICAgICAgIFwib3B0aW9uc1wiOiBbXG4gICAgICAgICAgW3tcbiAgICAgICAgICAgIFwic3JjXCI6IG1lZGlhUHJlZml4ICsgXCJtdXNpYy9yZXN0MS5wbmdcIixcbiAgICAgICAgICAgIFwid2lkdGhcIjogMTAsIFwiaGVpZ2h0XCI6IDIwLCBcImFsdFwiOiBcIndob2xlXCIsXG4gICAgICAgICAgfSwgXCIxXCJdLFxuICAgICAgICAgIFt7XG4gICAgICAgICAgICBcInNyY1wiOiBtZWRpYVByZWZpeCArIFwibXVzaWMvcmVzdDAuNS5wbmdcIixcbiAgICAgICAgICAgIFwid2lkdGhcIjogMTAsIFwiaGVpZ2h0XCI6IDIwLCBcImFsdFwiOiBcImhhbGZcIixcbiAgICAgICAgICB9LCBcIjAuNVwiXSxcbiAgICAgICAgICBbe1xuICAgICAgICAgICAgXCJzcmNcIjogbWVkaWFQcmVmaXggKyBcIm11c2ljL3Jlc3QwLjI1LnBuZ1wiLFxuICAgICAgICAgICAgXCJ3aWR0aFwiOiAxMCwgXCJoZWlnaHRcIjogMjAsIFwiYWx0XCI6IFwicXVhcnRlclwiLFxuICAgICAgICAgIH0sIFwiMC4yNVwiXSxcbiAgICAgICAgICBbe1xuICAgICAgICAgICAgXCJzcmNcIjogbWVkaWFQcmVmaXggKyBcIm11c2ljL3Jlc3QwLjEyNS5wbmdcIixcbiAgICAgICAgICAgIFwid2lkdGhcIjogMTAsIFwiaGVpZ2h0XCI6IDIwLCBcImFsdFwiOiBcImVpZ2h0aFwiLFxuICAgICAgICAgIH0sIFwiMC4xMjVcIl0sXG4gICAgICAgICAgW3tcbiAgICAgICAgICAgIFwic3JjXCI6IG1lZGlhUHJlZml4ICsgXCJtdXNpYy9yZXN0MC4wNjI1LnBuZ1wiLFxuICAgICAgICAgICAgXCJ3aWR0aFwiOiAxMCwgXCJoZWlnaHRcIjogMjAsIFwiYWx0XCI6IFwic2l4dGVlbnRoXCIsXG4gICAgICAgICAgfSwgXCIwLjA2MjVcIl0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0sXG4gICAgXCJpbnB1dHNJbmxpbmVcIjogdHJ1ZSxcbiAgICBcInByZXZpb3VzU3RhdGVtZW50XCI6IG51bGwsXG4gICAgXCJuZXh0U3RhdGVtZW50XCI6IG51bGwsXG4gICAgXCJjb2xvdXJcIjogMTYwLFxuICAgIFwidG9vbHRpcFwiOiAnTXVzaWNfcmVzdFRvb2x0aXAnLFxuICB9LFxuICB7XG4gICAgXCJ0eXBlXCI6IFwibXVzaWNfaW5zdHJ1bWVudFwiLFxuICAgIFwibWVzc2FnZTBcIjogJ011c2ljX3NldEluc3RydW1lbnQgJTEnLFxuICAgIFwiYXJnczBcIjogW1xuICAgICAge1xuICAgICAgICBcInR5cGVcIjogXCJmaWVsZF9kcm9wZG93blwiLFxuICAgICAgICBcIm5hbWVcIjogXCJJTlNUUlVNRU5UXCIsXG4gICAgICAgIFwib3B0aW9uc1wiOiBbXG4gICAgICAgICAgWygnTXVzaWNfcGlhbm8nKSwgXCJwaWFub1wiXSxcbiAgICAgICAgICBbKCdNdXNpY190cnVtcGV0JyksIFwidHJ1bXBldFwiXSxcbiAgICAgICAgICBbKCdNdXNpY19iYW5qbycpLCBcImJhbmpvXCJdLFxuICAgICAgICAgIFsoJ011c2ljX3Zpb2xpbicpLCBcInZpb2xpblwiXSxcbiAgICAgICAgICBbKCdNdXNpY19ndWl0YXInKSwgXCJndWl0YXJcIl0sXG4gICAgICAgICAgWygnTXVzaWNfZmx1dGUnKSwgXCJmbHV0ZVwiXSxcbiAgICAgICAgICBbKCdNdXNpY19kcnVtJyksIFwiZHJ1bVwiXSxcbiAgICAgICAgICBbKCdNdXNpY19jaG9pcicpLCBcImNob2lyXCJdLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdLFxuICAgIFwiaW5wdXRzSW5saW5lXCI6IHRydWUsXG4gICAgXCJwcmV2aW91c1N0YXRlbWVudFwiOiBudWxsLFxuICAgIFwibmV4dFN0YXRlbWVudFwiOiBudWxsLFxuICAgIFwiY29sb3VyXCI6IDE2MCxcbiAgICBcInRvb2x0aXBcIjogJ011c2ljX3NldEluc3RydW1lbnRUb29sdGlwJyxcbiAgfSxcbiAge1xuICAgIFwidHlwZVwiOiBcIm11c2ljX3N0YXJ0XCIsXG4gICAgXCJtZXNzYWdlMFwiOiAnTXVzaWNfc3RhcnQgJTEnLFxuICAgIFwiYXJnczBcIjogW1xuICAgICAge1xuICAgICAgICBcInR5cGVcIjogXCJmaWVsZF9pbWFnZVwiLFxuICAgICAgICBcInNyY1wiOiBtZWRpYVByZWZpeCArIFwibXVzaWMvcGxheS5wbmdcIixcbiAgICAgICAgXCJ3aWR0aFwiOiAxNyxcbiAgICAgICAgXCJoZWlnaHRcIjogMTcsXG4gICAgICAgIFwiYWx0XCI6IFwi4pa2XCIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgXCJtZXNzYWdlMVwiOiBcIiUxXCIsXG4gICAgXCJhcmdzMVwiOiBbXG4gICAgICB7XG4gICAgICAgIFwidHlwZVwiOiBcImlucHV0X3N0YXRlbWVudFwiLFxuICAgICAgICBcIm5hbWVcIjogXCJTVEFDS1wiLFxuICAgICAgfSxcbiAgICBdLFxuICAgIFwiY29sb3VyXCI6IDAsXG4gICAgXCJ0b29sdGlwXCI6ICdNdXNpY19zdGFydFRvb2x0aXAnLFxuICB9LFxuXSk7XG5cbmV4cG9ydCBjb25zdCB0b29sYm94UGl0Y2ggPSB7XG4gIFwia2luZFwiOiBcImZseW91dFRvb2xib3hcIixcbiAgXCJjb250ZW50c1wiOiBbXG4gICAge1xuICAgICAgXCJraW5kXCI6IFwiYmxvY2tcIixcbiAgICAgIFwidHlwZVwiOiBcInBpdGNoX3Rlc3RcIixcbiAgICB9LFxuXG4gICAge1xuICAgICAgXCJraW5kXCI6IFwiYmxvY2tcIixcbiAgICAgIFwidHlwZVwiOiBcIm11c2ljX3BpdGNoXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBcImtpbmRcIjogXCJibG9ja1wiLFxuICAgICAgXCJ0eXBlXCI6IFwibXVzaWNfbm90ZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgXCJraW5kXCI6IFwiYmxvY2tcIixcbiAgICAgIFwidHlwZVwiOiBcIm11c2ljX3Jlc3Rfd2hvbGVcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIFwia2luZFwiOiBcImJsb2NrXCIsXG4gICAgICBcInR5cGVcIjogXCJtdXNpY19yZXN0XCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBcImtpbmRcIjogXCJibG9ja1wiLFxuICAgICAgXCJ0eXBlXCI6IFwibXVzaWNfaW5zdHJ1bWVudFwiLFxuICAgIH0sXG4gICAge1xuICAgICAgXCJraW5kXCI6IFwiYmxvY2tcIixcbiAgICAgIFwidHlwZVwiOiBcIm11c2ljX3N0YXJ0XCIsXG4gICAgfSxcbiAgXSxcbn07XG5cbi8qIGVzbGludC1lbmFibGUgcXVvdGVzICovXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/music_blocks.js\n");

/***/ }),

/***/ "./src/note_player.js":
/*!****************************!*\
  !*** ./src/note_player.js ***!
  \****************************/
/*! exports provided: NotePlayer, notePlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NotePlayer\", function() { return NotePlayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"notePlayer\", function() { return notePlayer; });\n/* harmony import */ var tone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tone */ \"./node_modules/tone/build/esm/index.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Wrapper class for Tone.js.\n */\n\n/**\n * Wrapper class for Tone.js.\n * More information on tone.js can be found here:\n * https://tonejs.github.io/.\n */\n\nvar NotePlayer = /*#__PURE__*/function () {\n  /**\n   * Constructor for a class that plays notes.\n   */\n  function NotePlayer() {\n    _classCallCheck(this, NotePlayer);\n\n    this.synth = new tone__WEBPACK_IMPORTED_MODULE_0__[\"Synth\"]().toDestination();\n  }\n  /**\n   * Plays the given note for the given duration.\n   * @param {string} note The note to play.\n   * @param {string} duration The duration of the note (ex: 8n, 4n, 2n).\n   */\n\n\n  _createClass(NotePlayer, [{\n    key: \"playNote\",\n    value: function playNote(note, duration) {\n      this.synth.triggerAttackRelease(note, duration);\n    }\n    /**\n     * Triggers attack for specified note.\n     * @param {string} note The note to start.\n     */\n\n  }, {\n    key: \"triggerAttack\",\n    value: function triggerAttack(note) {\n      this.synth.triggerAttack(note, tone__WEBPACK_IMPORTED_MODULE_0__[\"now\"]());\n    }\n    /**\n     * Triggers release of note.\n     */\n\n  }, {\n    key: \"triggerRelease\",\n    value: function triggerRelease() {\n      this.synth.triggerRelease(tone__WEBPACK_IMPORTED_MODULE_0__[\"now\"]());\n    }\n  }]);\n\n  return NotePlayer;\n}();\nvar notePlayer = new NotePlayer();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbm90ZV9wbGF5ZXIuanM/OGM1NCJdLCJuYW1lcyI6WyJOb3RlUGxheWVyIiwic3ludGgiLCJUb25lIiwidG9EZXN0aW5hdGlvbiIsIm5vdGUiLCJkdXJhdGlvbiIsInRyaWdnZXJBdHRhY2tSZWxlYXNlIiwidHJpZ2dlckF0dGFjayIsInRyaWdnZXJSZWxlYXNlIiwibm90ZVBsYXllciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNPLElBQU1BLFVBQWI7QUFDRTtBQUNGO0FBQ0E7QUFDRSx3QkFBYztBQUFBOztBQUNaLFNBQUtDLEtBQUwsR0FBYSxJQUFJQywwQ0FBSixHQUFpQkMsYUFBakIsRUFBYjtBQUNEO0FBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7O0FBWkE7QUFBQTtBQUFBLDZCQWFXQyxJQWJYLEVBYWlCQyxRQWJqQixFQWEyQjtBQUN2QixXQUFLSixLQUFMLENBQVdLLG9CQUFYLENBQWdDRixJQUFoQyxFQUFzQ0MsUUFBdEM7QUFDRDtBQUVEO0FBQ0Y7QUFDQTtBQUNBOztBQXBCQTtBQUFBO0FBQUEsa0NBcUJnQkQsSUFyQmhCLEVBcUJzQjtBQUNsQixXQUFLSCxLQUFMLENBQVdNLGFBQVgsQ0FBeUJILElBQXpCLEVBQStCRix3Q0FBQSxFQUEvQjtBQUNEO0FBQ0Q7QUFDRjtBQUNBOztBQTFCQTtBQUFBO0FBQUEscUNBMkJtQjtBQUNmLFdBQUtELEtBQUwsQ0FBV08sY0FBWCxDQUEwQk4sd0NBQUEsRUFBMUI7QUFDRDtBQTdCSDs7QUFBQTtBQUFBO0FBZ0NPLElBQU1PLFVBQVUsR0FBRyxJQUFJVCxVQUFKLEVBQW5CIiwiZmlsZSI6Ii4vc3JjL25vdGVfcGxheWVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBXcmFwcGVyIGNsYXNzIGZvciBUb25lLmpzLlxuICovXG5cbmltcG9ydCAqIGFzIFRvbmUgZnJvbSAndG9uZSc7XG5cbi8qKlxuICogV3JhcHBlciBjbGFzcyBmb3IgVG9uZS5qcy5cbiAqIE1vcmUgaW5mb3JtYXRpb24gb24gdG9uZS5qcyBjYW4gYmUgZm91bmQgaGVyZTpcbiAqIGh0dHBzOi8vdG9uZWpzLmdpdGh1Yi5pby8uXG4gKi9cbmV4cG9ydCBjbGFzcyBOb3RlUGxheWVyIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yIGZvciBhIGNsYXNzIHRoYXQgcGxheXMgbm90ZXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN5bnRoID0gbmV3IFRvbmUuU3ludGgoKS50b0Rlc3RpbmF0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogUGxheXMgdGhlIGdpdmVuIG5vdGUgZm9yIHRoZSBnaXZlbiBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5vdGUgVGhlIG5vdGUgdG8gcGxheS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGR1cmF0aW9uIFRoZSBkdXJhdGlvbiBvZiB0aGUgbm90ZSAoZXg6IDhuLCA0biwgMm4pLlxuICAgKi9cbiAgcGxheU5vdGUobm90ZSwgZHVyYXRpb24pIHtcbiAgICB0aGlzLnN5bnRoLnRyaWdnZXJBdHRhY2tSZWxlYXNlKG5vdGUsIGR1cmF0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhdHRhY2sgZm9yIHNwZWNpZmllZCBub3RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbm90ZSBUaGUgbm90ZSB0byBzdGFydC5cbiAgICovXG4gIHRyaWdnZXJBdHRhY2sobm90ZSkge1xuICAgIHRoaXMuc3ludGgudHJpZ2dlckF0dGFjayhub3RlLCBUb25lLm5vdygpKTtcbiAgfVxuICAvKipcbiAgICogVHJpZ2dlcnMgcmVsZWFzZSBvZiBub3RlLlxuICAgKi9cbiAgdHJpZ2dlclJlbGVhc2UoKSB7XG4gICAgdGhpcy5zeW50aC50cmlnZ2VyUmVsZWFzZShUb25lLm5vdygpKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgbm90ZVBsYXllciA9IG5ldyBOb3RlUGxheWVyKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/note_player.js\n");

/***/ }),

/***/ "./test/index.js":
/*!***********************!*\
  !*** ./test/index.js ***!
  \***********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_speaker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/speaker */ \"./src/speaker.js\");\n/* harmony import */ var _src_note_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../src/note_player */ \"./src/note_player.js\");\n/* harmony import */ var _src_music_game_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/music_game_controller */ \"./src/music_game_controller.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Plugin test.\n */\n\n\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var controller = new _src_music_game_controller__WEBPACK_IMPORTED_MODULE_3__[\"MusicGameController\"]();\n  document.getElementById('setLevel').addEventListener('input', function (event) {\n    controller.getGame().loadLevel(this.value);\n  });\n  document.getElementById('logGeneratedCode').addEventListener('click', function (event) {\n    controller.getGame().logGeneratedCode();\n  });\n  document.getElementById('executeCode').addEventListener('click', function (event) {\n    controller.getGame().execute();\n  });\n  document.getElementById('speedSlider').addEventListener('input', function (event) {\n    controller.getGame().setSpeed(this.value / 100);\n  }); // Initial state has arrow keys turned on.\n\n  registerArrowKeys(true);\n  addTestButtons();\n});\n/**\n * Add buttons for testing basic functionality (speaker, etc).\n */\n\nfunction addTestButtons() {\n  document.getElementById('playNote').addEventListener('click', function () {\n    _src_note_player__WEBPACK_IMPORTED_MODULE_2__[\"notePlayer\"].playNote('C4', '8n');\n  });\n  document.getElementById('playText').addEventListener('click', function () {\n    var textContent = document.getElementById('textInput').value;\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak(textContent);\n  });\n  document.getElementById('playNoteAndText').addEventListener('click', function () {\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak('C4', false, function () {\n      _src_note_player__WEBPACK_IMPORTED_MODULE_2__[\"notePlayer\"].playNote('C4', '8n');\n    });\n  });\n  document.addEventListener('visibilitychange', function (event) {\n    if (document.visibilityState === 'visible') {\n      console.log('tab is activate');\n    } else {\n      _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].cancel();\n    }\n  });\n  document.getElementById('enableArrowKeys').addEventListener('click', function (event) {\n    registerArrowKeys(event.currentTarget.checked);\n  });\n  document.getElementById('modalButton').addEventListener('click', function () {\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].modalToText(document.getElementById('modal-1'));\n  });\n  document.getElementById('modalButton').addEventListener('focus', function (e) {\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].speak('Hit enter to open the help menu');\n  });\n  document.getElementById('replayButton').addEventListener('click', function () {\n    _src_speaker__WEBPACK_IMPORTED_MODULE_1__[\"speaker\"].modalToText(document.getElementById('modal-1'));\n  });\n}\n/**\n * Register the arrow keys to do keyboard navigation actions.\n * @param {boolean} register True if the arrow keys should be used for nav.\n */\n\n\nfunction registerArrowKeys(register) {\n  var keyCodeMappings = [[blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.UP, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.PREVIOUS], [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.DOWN, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.NEXT], [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.RIGHT, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.IN], [blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.utils.KeyCodes.LEFT, blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.navigation.actionNames.OUT]];\n  keyCodeMappings.forEach(function (mapping) {\n    if (register) {\n      var _Blockly$ShortcutRegi;\n\n      (_Blockly$ShortcutRegi = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry).addKeyMapping.apply(_Blockly$ShortcutRegi, _toConsumableArray(mapping));\n    } else {\n      var _Blockly$ShortcutRegi2;\n\n      (_Blockly$ShortcutRegi2 = blockly_core__WEBPACK_IMPORTED_MODULE_0___default.a.ShortcutRegistry.registry).removeKeyMapping.apply(_Blockly$ShortcutRegi2, _toConsumableArray(mapping));\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi90ZXN0L2luZGV4LmpzPzA0NDEiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udHJvbGxlciIsIk11c2ljR2FtZUNvbnRyb2xsZXIiLCJnZXRFbGVtZW50QnlJZCIsImV2ZW50IiwiZ2V0R2FtZSIsImxvYWRMZXZlbCIsInZhbHVlIiwibG9nR2VuZXJhdGVkQ29kZSIsImV4ZWN1dGUiLCJzZXRTcGVlZCIsInJlZ2lzdGVyQXJyb3dLZXlzIiwiYWRkVGVzdEJ1dHRvbnMiLCJub3RlUGxheWVyIiwicGxheU5vdGUiLCJ0ZXh0Q29udGVudCIsInNwZWFrZXIiLCJzcGVhayIsInZpc2liaWxpdHlTdGF0ZSIsImNvbnNvbGUiLCJsb2ciLCJjYW5jZWwiLCJjdXJyZW50VGFyZ2V0IiwiY2hlY2tlZCIsIm1vZGFsVG9UZXh0IiwiZSIsInJlZ2lzdGVyIiwia2V5Q29kZU1hcHBpbmdzIiwiQmxvY2tseSIsInV0aWxzIiwiS2V5Q29kZXMiLCJVUCIsIm5hdmlnYXRpb24iLCJhY3Rpb25OYW1lcyIsIlBSRVZJT1VTIiwiRE9XTiIsIk5FWFQiLCJSSUdIVCIsIklOIiwiTEVGVCIsIk9VVCIsImZvckVhY2giLCJtYXBwaW5nIiwiU2hvcnRjdXRSZWdpc3RyeSIsInJlZ2lzdHJ5IiwiYWRkS2V5TWFwcGluZyIsInJlbW92ZUtleU1hcHBpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQUEsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsWUFBVztBQUN2RCxNQUFNQyxVQUFVLEdBQUcsSUFBSUMsOEVBQUosRUFBbkI7QUFFQUgsVUFBUSxDQUFDSSxjQUFULENBQXdCLFVBQXhCLEVBQW9DSCxnQkFBcEMsQ0FDSSxPQURKLEVBQ2EsVUFBU0ksS0FBVCxFQUFnQjtBQUN2Qkgs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VCxDQUF3QixTQUF4QixDQUFwQjtBQUNELEdBSEw7QUFJRDtBQUNEO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQSxTQUFTUSxpQkFBVCxDQUEyQmUsUUFBM0IsRUFBcUM7QUFDbkMsTUFBTUMsZUFBZSxHQUFHLENBQ3RCLENBQUNDLG1EQUFPLENBQUNDLEtBQVIsQ0FBY0MsUUFBZCxDQUF1QkMsRUFBeEIsRUFBNEJILG1EQUFPLENBQUNJLFVBQVIsQ0FBbUJDLFdBQW5CLENBQStCQyxRQUEzRCxDQURzQixFQUV0QixDQUFDTixtREFBTyxDQUFDQyxLQUFSLENBQWNDLFFBQWQsQ0FBdUJLLElBQXhCLEVBQThCUCxtREFBTyxDQUFDSSxVQUFSLENBQW1CQyxXQUFuQixDQUErQkcsSUFBN0QsQ0FGc0IsRUFHdEIsQ0FBQ1IsbURBQU8sQ0FBQ0MsS0FBUixDQUFjQyxRQUFkLENBQXVCTyxLQUF4QixFQUErQlQsbURBQU8sQ0FBQ0ksVUFBUixDQUFtQkMsV0FBbkIsQ0FBK0JLLEVBQTlELENBSHNCLEVBSXRCLENBQUNWLG1EQUFPLENBQUNDLEtBQVIsQ0FBY0MsUUFBZCxDQUF1QlMsSUFBeEIsRUFBOEJYLG1EQUFPLENBQUNJLFVBQVIsQ0FBbUJDLFdBQW5CLENBQStCTyxHQUE3RCxDQUpzQixDQUF4QjtBQUtBYixpQkFBZSxDQUFDYyxPQUFoQixDQUF3QixVQUFDQyxPQUFELEVBQWE7QUFDbkMsUUFBSWhCLFFBQUosRUFBYztBQUFBOztBQUNaLCtCQUFBRSxtREFBTyxDQUFDZSxnQkFBUixDQUF5QkMsUUFBekIsRUFBa0NDLGFBQWxDLGlEQUFtREgsT0FBbkQ7QUFDRCxLQUZELE1BRU87QUFBQTs7QUFDTCxnQ0FBQWQsbURBQU8sQ0FBQ2UsZ0JBQVIsQ0FBeUJDLFFBQXpCLEVBQWtDRSxnQkFBbEMsa0RBQXNESixPQUF0RDtBQUNEO0FBQ0YsR0FORDtBQU9EIiwiZmlsZSI6Ii4vdGVzdC9pbmRleC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFBsdWdpbiB0ZXN0LlxuICovXG5cbmltcG9ydCBCbG9ja2x5IGZyb20gJ2Jsb2NrbHkvY29yZSc7XG5pbXBvcnQge3NwZWFrZXJ9IGZyb20gJy4uL3NyYy9zcGVha2VyJztcbmltcG9ydCB7bm90ZVBsYXllcn0gZnJvbSAnLi4vc3JjL25vdGVfcGxheWVyJztcbmltcG9ydCB7TXVzaWNHYW1lQ29udHJvbGxlcn0gZnJvbSAnLi4vc3JjL211c2ljX2dhbWVfY29udHJvbGxlcic7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBNdXNpY0dhbWVDb250cm9sbGVyKCk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldExldmVsJykuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdpbnB1dCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0R2FtZSgpLmxvYWRMZXZlbCh0aGlzLnZhbHVlKTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nR2VuZXJhdGVkQ29kZScpLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb250cm9sbGVyLmdldEdhbWUoKS5sb2dHZW5lcmF0ZWRDb2RlKCk7XG4gICAgICB9KTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4ZWN1dGVDb2RlJykuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZ2V0R2FtZSgpLmV4ZWN1dGUoKTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlZWRTbGlkZXInKS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2lucHV0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgY29udHJvbGxlci5nZXRHYW1lKCkuc2V0U3BlZWQodGhpcy52YWx1ZS8xMDApO1xuICAgICAgfSk7XG5cbiAgLy8gSW5pdGlhbCBzdGF0ZSBoYXMgYXJyb3cga2V5cyB0dXJuZWQgb24uXG4gIHJlZ2lzdGVyQXJyb3dLZXlzKHRydWUpO1xuICBhZGRUZXN0QnV0dG9ucygpO1xufSk7XG5cbi8qKlxuICogQWRkIGJ1dHRvbnMgZm9yIHRlc3RpbmcgYmFzaWMgZnVuY3Rpb25hbGl0eSAoc3BlYWtlciwgZXRjKS5cbiAqL1xuZnVuY3Rpb24gYWRkVGVzdEJ1dHRvbnMoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5Tm90ZScpLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbm90ZVBsYXllci5wbGF5Tm90ZSgnQzQnLCAnOG4nKTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheVRleHQnKS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHRJbnB1dCcpLnZhbHVlO1xuICAgICAgICBzcGVha2VyLnNwZWFrKHRleHRDb250ZW50KTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheU5vdGVBbmRUZXh0JykuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzcGVha2VyLnNwZWFrKCdDNCcsIGZhbHNlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBub3RlUGxheWVyLnBsYXlOb3RlKCdDNCcsICc4bicpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgKGV2ZW50KSA9PiB7XG4gICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICBjb25zb2xlLmxvZygndGFiIGlzIGFjdGl2YXRlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIuY2FuY2VsKCk7XG4gICAgfVxuICB9KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5hYmxlQXJyb3dLZXlzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLFxuICAgICAgKGV2ZW50KSA9PiB7XG4gICAgICAgIHJlZ2lzdGVyQXJyb3dLZXlzKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZCk7XG4gICAgICB9KTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsQnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNwZWFrZXIubW9kYWxUb1RleHQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLTEnKSk7XG4gICAgICB9KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxCdXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsXG4gICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgIHNwZWFrZXIuc3BlYWsoJ0hpdCBlbnRlciB0byBvcGVuIHRoZSBoZWxwIG1lbnUnKTtcbiAgICAgIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwbGF5QnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNwZWFrZXIubW9kYWxUb1RleHQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLTEnKSk7XG4gICAgICB9KTtcbn1cbi8qKlxuICogUmVnaXN0ZXIgdGhlIGFycm93IGtleXMgdG8gZG8ga2V5Ym9hcmQgbmF2aWdhdGlvbiBhY3Rpb25zLlxuICogQHBhcmFtIHtib29sZWFufSByZWdpc3RlciBUcnVlIGlmIHRoZSBhcnJvdyBrZXlzIHNob3VsZCBiZSB1c2VkIGZvciBuYXYuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyQXJyb3dLZXlzKHJlZ2lzdGVyKSB7XG4gIGNvbnN0IGtleUNvZGVNYXBwaW5ncyA9IFtcbiAgICBbQmxvY2tseS51dGlscy5LZXlDb2Rlcy5VUCwgQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLlBSRVZJT1VTXSxcbiAgICBbQmxvY2tseS51dGlscy5LZXlDb2Rlcy5ET1dOLCBCbG9ja2x5Lm5hdmlnYXRpb24uYWN0aW9uTmFtZXMuTkVYVF0sXG4gICAgW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuUklHSFQsIEJsb2NrbHkubmF2aWdhdGlvbi5hY3Rpb25OYW1lcy5JTl0sXG4gICAgW0Jsb2NrbHkudXRpbHMuS2V5Q29kZXMuTEVGVCwgQmxvY2tseS5uYXZpZ2F0aW9uLmFjdGlvbk5hbWVzLk9VVF1dO1xuICBrZXlDb2RlTWFwcGluZ3MuZm9yRWFjaCgobWFwcGluZykgPT4ge1xuICAgIGlmIChyZWdpc3Rlcikge1xuICAgICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LmFkZEtleU1hcHBpbmcoLi4ubWFwcGluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5yZW1vdmVLZXlNYXBwaW5nKC4uLm1hcHBpbmcpO1xuICAgIH1cbiAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./test/index.js\n");

/***/ })

})
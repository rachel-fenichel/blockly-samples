webpackHotUpdate("main",{

/***/ "./src/tutorial.js":
/*!*************************!*\
  !*** ./src/tutorial.js ***!
  \*************************/
/*! exports provided: Tutorial */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Tutorial\", function() { return Tutorial; });\n/* harmony import */ var _tutorial_step__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tutorial_step */ \"./src/tutorial_step.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! blockly/core */ \"./node_modules/blockly/dist/core-browser.js\");\n/* harmony import */ var blockly_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(blockly_core__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var micromodal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! micromodal */ \"./node_modules/micromodal/dist/micromodal.es.js\");\n/* harmony import */ var _speaker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./speaker */ \"./src/speaker.js\");\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Multi-step tutorial using modals.\n */\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n/**\n * A multi-step tutorial for the accessible music game.\n */\n\nvar Tutorial = /*#__PURE__*/function () {\n  /**\n   * Class for a tutorial.\n   * @param {Blockly.WorkspaceSvg} workspace The workspace the user\n   *     will interact with.\n   * @param {function(string)} goalUpdateCb The callback function for goal\n   *    change.\n   * @constructor\n   */\n  function Tutorial(workspace, onGoalUpdateCb, endTutorialCb) {\n    var _this = this;\n\n    _classCallCheck(this, Tutorial);\n\n    /**\n     * The id of the modal.\n     * @type {string}\n     */\n    this.modalId = 'tutorialModal';\n    /**\n     * The id of the tutorial text.\n     * @type {string}\n     */\n\n    this.stepTextId = this.modalId + 'Text';\n    /**\n     * The id of the next step button.\n     * @type {string}\n     */\n\n    this.stepButtonId = this.modalId + 'StepBtn';\n    /**\n     * The id of the hide modal button.\n     * @type {string}\n     */\n\n    this.hideButtonId = this.modalId + 'HideBtn';\n    /**\n     * An array of steps in the tutorial.\n     * @type {Array<!TutorialStep>}\n     */\n\n    this.steps = Tutorial.STEP_OBJECTS.map(function (obj) {\n      return new _tutorial_step__WEBPACK_IMPORTED_MODULE_0__[\"TutorialStep\"](obj.text, _this.stepTextId, _this.nextStep);\n    });\n    /**\n     * The index of the currently active step.\n     * @type {number}\n     */\n\n    this.curStepIndex = 0;\n    /**\n     * The currently active step.\n     * @type {TutorialStep}\n     */\n\n    this.curStep = this.steps[this.curStepIndex];\n    /**\n     * The Blockly workspace the user will interact with.\n     * @type {Blockly.WorkspaceSvg}\n     */\n\n    this.workspace = workspace;\n    /**\n     * The node that was selected on the workspace when the modal\n     * opened.\n     * @type {Blockly.ASTNode}\n     */\n\n    this.curNode = null;\n    /**\n     * Callback function for goal update, which accepts a string\n     *     with the text to set the goal to.\n     * @type {Function}\n     */\n\n    this.goalUpdateCb = goalUpdateCb;\n    /**\n     * Callback function for the end of the tutorial.\n     * @type {Function}\n     */\n\n    this.endTutorialCb = endTutorialCb;\n  }\n  /**\n   * Initialize DOM and show.\n   */\n\n\n  _createClass(Tutorial, [{\n    key: \"init\",\n    value: function init() {\n      this.createDom();\n      this.addCallbacks();\n      micromodal__WEBPACK_IMPORTED_MODULE_2__[\"default\"].show(this.modalId);\n      this.curStep.show();\n      this.registerPlayHelpText();\n      this.loadWorkspace();\n    }\n    /**\n     * Load the workspace for the tutorial.\n     */\n\n  }, {\n    key: \"loadWorkspace\",\n    value: function loadWorkspace() {\n      var toolboxJson = {\n        'kind': 'flyoutToolbox',\n        'contents': [{\n          'kind': 'block',\n          'blockxml': \"<block type=\\\"music_note\\\">\\n                        <field name=\\\"DURATION\\\">0.25</field>\\n                        <value name=\\\"PITCH\\\">\\n                          <shadow type=\\\"music_pitch\\\">\\n                            <field name=\\\"PITCH\\\">C4</field>\\n                          </shadow>\\n                        </value>\\n                      </block>\"\n        }, {\n          'kind': 'block',\n          'type': 'music_rest'\n        }]\n      };\n      this.workspace.updateToolbox(toolboxJson);\n      var starterXml = \"<xml>\\n            <block type=\\\"music_start\\\" deletable=\\\"false\\\" x=\\\"180\\\"\\n            y=\\\"50\\\"></block>\\n          </xml>\";\n      this.workspace.clear();\n      blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.Xml.domToWorkspace(blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.Xml.textToDom(starterXml), this.workspace);\n    }\n    /**\n     * Registers shortcut to replay the current tutorial step.\n     */\n\n  }, {\n    key: \"registerPlayHelpText\",\n    value: function registerPlayHelpText() {\n      var _this2 = this;\n\n      /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n      var playHelpText = {\n        name: 'playHelpText',\n        preconditionFn: function preconditionFn(workspace) {\n          return workspace.keyboardAccessibilityMode && !workspace.options.readOnly;\n        },\n        callback: function callback() {\n          _speaker__WEBPACK_IMPORTED_MODULE_3__[\"speaker\"].speak(_this2.curStep.text, true);\n        }\n      };\n      blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.ShortcutRegistry.registry.register(playHelpText);\n      var shiftW = blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.ShortcutRegistry.registry.createSerializedKey(blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.utils.KeyCodes.H);\n      blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.ShortcutRegistry.registry.addKeyMapping(shiftW, playHelpText.name);\n    }\n    /**\n     * Display the next step, or end the tutorial if there are no more steps.\n     */\n\n  }, {\n    key: \"nextStep\",\n    value: function nextStep() {\n      this.curStepIndex++;\n\n      if (this.curStepIndex < this.steps.length) {\n        this.curStep = this.steps[this.curStepIndex];\n        micromodal__WEBPACK_IMPORTED_MODULE_2__[\"default\"].show(this.modalId);\n        this.curStep.show();\n        this.onGoalUpdateCb(Tutorial.STEP_OBJECTS[this.curStepIndex].goalText);\n        this.stashCursor();\n      } else {\n        this.done();\n      }\n    }\n    /**\n     * End the tutorial.\n     */\n\n  }, {\n    key: \"done\",\n    value: function done() {\n      micromodal__WEBPACK_IMPORTED_MODULE_2__[\"default\"].close(this.modalId);\n    }\n    /**\n     * Save the current cursor node and disable keyboard nav.\n     * Call this when opening the modal.\n     */\n\n  }, {\n    key: \"stashCursor\",\n    value: function stashCursor() {\n      this.curNode = this.workspace.getCursor().getCurNode();\n      blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.navigation.disableKeyboardAccessibility();\n    }\n    /**\n     * Reenable keyboard nav and move the cursor to the previously\n     * selected cursor node. Call this when closing the modal.\n     */\n\n  }, {\n    key: \"popCursor\",\n    value: function popCursor() {\n      blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.navigation.enableKeyboardAccessibility();\n\n      if (this.curNode) {\n        this.workspace.getCursor().setCurNode(this.curNode);\n        _speaker__WEBPACK_IMPORTED_MODULE_3__[\"speaker\"].cancel();\n      }\n    }\n    /**\n     * Add necessary handlers for any buttons on the modal.\n     */\n\n  }, {\n    key: \"addCallbacks\",\n    value: function addCallbacks() {\n      var _this3 = this;\n\n      document.getElementById(this.stepButtonId).addEventListener('click', function () {\n        _this3.nextStep();\n      });\n      document.getElementById(this.hideButtonId).addEventListener('click', function (e) {\n        micromodal__WEBPACK_IMPORTED_MODULE_2__[\"default\"].close(_this3.modalId);\n\n        _this3.popCursor();\n\n        Tutorial.STEP_OBJECTS[_this3.curStepIndex].onStart(_this3);\n\n        e.stopPropagation();\n        e.preventDefault();\n      });\n    }\n    /**\n     * Create the dom for the modal.\n     */\n\n  }, {\n    key: \"createDom\",\n    value: function createDom() {\n      document.getElementById(this.modalId).innerHTML = \"\\n     <div class=\\\"modal__overlay\\\" tabindex=\\\"-1\\\" data-micromodal-close>\\n      <div class=\\\"modal__container\\\" role=\\\"dialog\\\" aria-modal=\\\"true\\\"\\n        aria-labelledby=\\\"modal-1-title\\\">\\n        <header class=\\\"modal__header\\\">\\n          <button class=\\\"modal__close\\\" aria-label=\\\"Close modal\\\"\\n            id=\\\"tutorialCloseBtn\\\" data-micromodal-close></button>\\n        </header>\\n        <main class=\\\"modal__content\\\" id=\\\"modal-1-content\\\">\\n          <h2 class=\\\"modal__title\\\" id=\\\"\".concat(this.stepTextId, \"\\\"></h2>\\n        </main>\\n        <footer class=\\\"modal__footer\\\">\\n          <button class=\\\"modal__btn modal__btn-primary\\\" aria-label=\\\"Start step\\\"\\n            id=\\\"\").concat(this.hideButtonId, \"\\\">Start step</button>\\n          <button class=\\\"modal__btn modal__btn-primary\\\" aria-label=\\\"Skip step\\\"\\n            id=\\\"\").concat(this.stepButtonId, \"\\\">Skip step</button>\\n        </footer>\\n      </div>\\n    </div>\");\n    }\n    /**\n     * Get the current location, based on the event.\n     * @param {Blockly.Event} event An event to inspect for a cursor location.\n     * @return {Blockly.ASTNode} The current cursor location, or null if the event\n     *     didn't have one.\n     */\n\n  }, {\n    key: \"getCurrentLocation\",\n    value: function getCurrentLocation(event) {\n      var curNode = event.newNode;\n\n      if (curNode) {\n        return curNode.getLocation();\n      }\n\n      return null;\n    }\n  }]);\n\n  return Tutorial;\n}();\nTutorial.STEP_OBJECTS = [{\n  text: \"In this tutorial you will write code that plays musical notes. If at\\n      any point you are confused about what to do, press H to replay the goal\\n      for the current step. Press Enter to go to the next step.\",\n  goalText: \"Press Enter to go to the next step.\",\n  onStart: function onStart(tutorial) {\n    setTimeout(function () {\n      return tutorial.nextStep();\n    }, 100);\n  }\n}, {\n  text: \"You can move around the blocks of code with the up and down arrows.\\n    You will hear descriptions as you move around the blocks. .\\n    All blocks have connection points, which are places where you can add more\\n    code. . Use the down arrow to move to a connection point.\\n    Hit enter to begin. \",\n  goalText: \"Use the down arrow to move to a connection point.\",\n  onStart: function onStart(tutorial) {\n    var workspace = tutorial.workspace;\n\n    var listener = function listener(event) {\n      if (event.type === blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.Events.MARKER_MOVE) {\n        var curNode = event.newNode;\n        var correctLocation = workspace.getTopBlocks()[0].inputList[1].connection;\n\n        if (curNode) {\n          var location = curNode.getLocation();\n\n          if (location === correctLocation) {\n            setTimeout(function () {\n              workspace.removeChangeListener(wrapper);\n              tutorial.nextStep();\n            }, 4700);\n          }\n        }\n      }\n    }; // Add a shortcut in place of the down arrow shortcut.\n\n\n    var wrapper = workspace.addChangeListener(listener);\n  }\n}, {\n  text: \"Great! You moved to a connection point. .\\n      To add more code, you first mark a location and then select the block you\\n      want to add. .\\n      Navigate to the connection point, then press enter to mark it.\",\n  goalText: \"Navigate to the connection point, then press enter to mark it.\",\n  onStart: function onStart(tutorial) {\n    var workspace = tutorial.workspace;\n\n    var listener = function listener(event) {\n      if (event.type === blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.Events.MARKER_MOVE) {\n        var currentLocation = tutorial.getCurrentLocation(event);\n\n        if (currentLocation && !event.isCursor) {\n          var correctLocation = workspace.getTopBlocks()[0].inputList[1].connection;\n\n          if (currentLocation === correctLocation) {\n            setTimeout(function () {\n              workspace.removeChangeListener(wrapper);\n              tutorial.nextStep();\n            }, 3000);\n          }\n        }\n      }\n    }; // Add a shortcut in place of the down arrow shortcut.\n\n\n    var wrapper = workspace.addChangeListener(listener);\n  }\n}, {\n  text: \"Great! You marked a connection point. Now you can add more code\\n    blocks. .\\n    The toolbox is a list of code blocks that you can add to the workspace.\\n    You can always open the toolbox by pressing T. .\\n    Press T to open the toolbox, then use the up and down arrows to explore\\n    it. .\\n    Press ??? when you are ready for the next step.\",\n  goalText: \"Press T to open the toolbox, then use the up and down arrows to\\n      explore it. . Press ??? when you are ready for the next step.\",\n  onStart: function onStart(tutorial) {\n    /** @type {!Blockly.ShortcutRegistry.KeyboardShortcut} */\n    var finishStep = {\n      name: 'finishStep',\n      preconditionFn: function preconditionFn(workspace) {\n        return workspace.keyboardAccessibilityMode && !workspace.options.readOnly;\n      },\n      callback: function callback() {\n        tutorial.nextStep();\n      }\n    };\n    blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.ShortcutRegistry.registry.register(finishStep);\n    var shiftW = blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.ShortcutRegistry.registry.createSerializedKey(blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.utils.KeyCodes.F);\n    blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.ShortcutRegistry.registry.addKeyMapping(shiftW, finishStep.name);\n  }\n}, {\n  text: \"Great! You have now successfully marked a connection point and\\n    navigated to a list of blocks that you can insert. .\\n    Now it\\u2019s time to put it all together. .\\n    Navigate to the connection and mark it, then press T to open the\\n    toolbox. Find the block that says \\u201Cplay whole note c4\\u201D and press\\n    enter to add it at the marked location.\",\n  goalText: \"Navigate to the connection and mark it, then press T to open the\\n    toolbox. Find the block that says \\u201Cplay whole note c4\\u201D and press\\n    enter to add it at the marked location.\",\n  onStart: function onStart(tutorial) {\n    var workspace = tutorial.workspace;\n\n    var listener = function listener(event) {\n      if (event.type === blockly_core__WEBPACK_IMPORTED_MODULE_1___default.a.Events.MARKER_MOVE) {\n        var currentLocation = tutorial.getCurrentLocation(event);\n\n        if (currentLocation && event.isCursor && workspace.getAllBlocks().length > 1) {\n          var correctLocation = workspace.getAllBlocks()[1].previousConnection;\n\n          if (currentLocation === correctLocation) {\n            setTimeout(function () {\n              workspace.removeChangeListener(wrapper);\n              tutorial.nextStep();\n            }, 4000);\n          }\n        }\n      }\n    }; // Add a shortcut in place of the down arrow shortcut.\n\n\n    var wrapper = workspace.addChangeListener(listener);\n  }\n}, {\n  text: \"Great! You can now press Shift and P at the same time to run your\\n    code. You should hear a note play!\",\n  goalText: \"Press Shift and P at the same time to run your code.\",\n  onStart: function onStart(tutorial) {}\n}];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHV0b3JpYWwuanM/MjQzOCJdLCJuYW1lcyI6WyJUdXRvcmlhbCIsIndvcmtzcGFjZSIsIm9uR29hbFVwZGF0ZUNiIiwiZW5kVHV0b3JpYWxDYiIsIm1vZGFsSWQiLCJzdGVwVGV4dElkIiwic3RlcEJ1dHRvbklkIiwiaGlkZUJ1dHRvbklkIiwic3RlcHMiLCJTVEVQX09CSkVDVFMiLCJtYXAiLCJvYmoiLCJUdXRvcmlhbFN0ZXAiLCJ0ZXh0IiwibmV4dFN0ZXAiLCJjdXJTdGVwSW5kZXgiLCJjdXJTdGVwIiwiY3VyTm9kZSIsImdvYWxVcGRhdGVDYiIsImNyZWF0ZURvbSIsImFkZENhbGxiYWNrcyIsIk1pY3JvTW9kYWwiLCJzaG93IiwicmVnaXN0ZXJQbGF5SGVscFRleHQiLCJsb2FkV29ya3NwYWNlIiwidG9vbGJveEpzb24iLCJ1cGRhdGVUb29sYm94Iiwic3RhcnRlclhtbCIsImNsZWFyIiwiQmxvY2tseSIsIlhtbCIsImRvbVRvV29ya3NwYWNlIiwidGV4dFRvRG9tIiwicGxheUhlbHBUZXh0IiwibmFtZSIsInByZWNvbmRpdGlvbkZuIiwia2V5Ym9hcmRBY2Nlc3NpYmlsaXR5TW9kZSIsIm9wdGlvbnMiLCJyZWFkT25seSIsImNhbGxiYWNrIiwic3BlYWtlciIsInNwZWFrIiwiU2hvcnRjdXRSZWdpc3RyeSIsInJlZ2lzdHJ5IiwicmVnaXN0ZXIiLCJzaGlmdFciLCJjcmVhdGVTZXJpYWxpemVkS2V5IiwidXRpbHMiLCJLZXlDb2RlcyIsIkgiLCJhZGRLZXlNYXBwaW5nIiwibGVuZ3RoIiwiZ29hbFRleHQiLCJzdGFzaEN1cnNvciIsImRvbmUiLCJjbG9zZSIsImdldEN1cnNvciIsImdldEN1ck5vZGUiLCJuYXZpZ2F0aW9uIiwiZGlzYWJsZUtleWJvYXJkQWNjZXNzaWJpbGl0eSIsImVuYWJsZUtleWJvYXJkQWNjZXNzaWJpbGl0eSIsInNldEN1ck5vZGUiLCJjYW5jZWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwb3BDdXJzb3IiLCJvblN0YXJ0Iiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJpbm5lckhUTUwiLCJldmVudCIsIm5ld05vZGUiLCJnZXRMb2NhdGlvbiIsInR1dG9yaWFsIiwic2V0VGltZW91dCIsImxpc3RlbmVyIiwidHlwZSIsIkV2ZW50cyIsIk1BUktFUl9NT1ZFIiwiY29ycmVjdExvY2F0aW9uIiwiZ2V0VG9wQmxvY2tzIiwiaW5wdXRMaXN0IiwiY29ubmVjdGlvbiIsImxvY2F0aW9uIiwicmVtb3ZlQ2hhbmdlTGlzdGVuZXIiLCJ3cmFwcGVyIiwiYWRkQ2hhbmdlTGlzdGVuZXIiLCJjdXJyZW50TG9jYXRpb24iLCJnZXRDdXJyZW50TG9jYXRpb24iLCJpc0N1cnNvciIsImZpbmlzaFN0ZXAiLCJGIiwiZ2V0QWxsQmxvY2tzIiwicHJldmlvdXNDb25uZWN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ2E7Ozs7Ozs7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQ08sSUFBTUEsUUFBYjtBQUNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRSxvQkFBWUMsU0FBWixFQUF1QkMsY0FBdkIsRUFBdUNDLGFBQXZDLEVBQXNEO0FBQUE7O0FBQUE7O0FBQ3BEO0FBQ0o7QUFDQTtBQUNBO0FBQ0ksU0FBS0MsT0FBTCxHQUFlLGVBQWY7QUFFQTtBQUNKO0FBQ0E7QUFDQTs7QUFDSSxTQUFLQyxVQUFMLEdBQWtCLEtBQUtELE9BQUwsR0FBZSxNQUFqQztBQUVBO0FBQ0o7QUFDQTtBQUNBOztBQUNJLFNBQUtFLFlBQUwsR0FBb0IsS0FBS0YsT0FBTCxHQUFlLFNBQW5DO0FBRUE7QUFDSjtBQUNBO0FBQ0E7O0FBQ0ksU0FBS0csWUFBTCxHQUFvQixLQUFLSCxP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O0FBQ0Q7QUEvQkgsQ0FuR3NCLEVBb0l0QjtBQUNFaEUsTUFBSSw2R0FETjtBQUdFdUMsVUFBUSx3REFIVjtBQUlFZ0IsU0FBTyxFQUFFLGlCQUFTTyxRQUFULEVBQW1CLENBQUU7QUFKaEMsQ0FwSXNCLENBQXhCIiwiZmlsZSI6Ii4vc3JjL3R1dG9yaWFsLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgTXVsdGktc3RlcCB0dXRvcmlhbCB1c2luZyBtb2RhbHMuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtUdXRvcmlhbFN0ZXB9IGZyb20gJy4vdHV0b3JpYWxfc3RlcCc7XG5pbXBvcnQgQmxvY2tseSBmcm9tICdibG9ja2x5L2NvcmUnO1xuaW1wb3J0IE1pY3JvTW9kYWwgZnJvbSAnbWljcm9tb2RhbCc7XG5pbXBvcnQge3NwZWFrZXJ9IGZyb20gJy4vc3BlYWtlcic7XG5cbi8qKlxuICogQSBtdWx0aS1zdGVwIHR1dG9yaWFsIGZvciB0aGUgYWNjZXNzaWJsZSBtdXNpYyBnYW1lLlxuICovXG5leHBvcnQgY2xhc3MgVHV0b3JpYWwge1xuICAvKipcbiAgICogQ2xhc3MgZm9yIGEgdHV0b3JpYWwuXG4gICAqIEBwYXJhbSB7QmxvY2tseS5Xb3Jrc3BhY2VTdmd9IHdvcmtzcGFjZSBUaGUgd29ya3NwYWNlIHRoZSB1c2VyXG4gICAqICAgICB3aWxsIGludGVyYWN0IHdpdGguXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKX0gZ29hbFVwZGF0ZUNiIFRoZSBjYWxsYmFjayBmdW5jdGlvbiBmb3IgZ29hbFxuICAgKiAgICBjaGFuZ2UuXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3Iod29ya3NwYWNlLCBvbkdvYWxVcGRhdGVDYiwgZW5kVHV0b3JpYWxDYikge1xuICAgIC8qKlxuICAgICAqIFRoZSBpZCBvZiB0aGUgbW9kYWwuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLm1vZGFsSWQgPSAndHV0b3JpYWxNb2RhbCc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaWQgb2YgdGhlIHR1dG9yaWFsIHRleHQuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnN0ZXBUZXh0SWQgPSB0aGlzLm1vZGFsSWQgKyAnVGV4dCc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaWQgb2YgdGhlIG5leHQgc3RlcCBidXR0b24uXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnN0ZXBCdXR0b25JZCA9IHRoaXMubW9kYWxJZCArICdTdGVwQnRuJztcblxuICAgIC8qKlxuICAgICAqIFRoZSBpZCBvZiB0aGUgaGlkZSBtb2RhbCBidXR0b24uXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmhpZGVCdXR0b25JZCA9IHRoaXMubW9kYWxJZCArICdIaWRlQnRuJztcblxuICAgIC8qKlxuICAgICAqIEFuIGFycmF5IG9mIHN0ZXBzIGluIHRoZSB0dXRvcmlhbC5cbiAgICAgKiBAdHlwZSB7QXJyYXk8IVR1dG9yaWFsU3RlcD59XG4gICAgICovXG4gICAgdGhpcy5zdGVwcyA9IFR1dG9yaWFsLlNURVBfT0JKRUNUUy5tYXAoXG4gICAgICAgIChvYmopID0+IG5ldyBUdXRvcmlhbFN0ZXAob2JqLnRleHQsIHRoaXMuc3RlcFRleHRJZCwgdGhpcy5uZXh0U3RlcClcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHN0ZXAuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmN1clN0ZXBJbmRleCA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudGx5IGFjdGl2ZSBzdGVwLlxuICAgICAqIEB0eXBlIHtUdXRvcmlhbFN0ZXB9XG4gICAgICovXG4gICAgdGhpcy5jdXJTdGVwID0gdGhpcy5zdGVwc1t0aGlzLmN1clN0ZXBJbmRleF07XG5cbiAgICAvKipcbiAgICAgKiBUaGUgQmxvY2tseSB3b3Jrc3BhY2UgdGhlIHVzZXIgd2lsbCBpbnRlcmFjdCB3aXRoLlxuICAgICAqIEB0eXBlIHtCbG9ja2x5LldvcmtzcGFjZVN2Z31cbiAgICAgKi9cbiAgICB0aGlzLndvcmtzcGFjZSA9IHdvcmtzcGFjZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBub2RlIHRoYXQgd2FzIHNlbGVjdGVkIG9uIHRoZSB3b3Jrc3BhY2Ugd2hlbiB0aGUgbW9kYWxcbiAgICAgKiBvcGVuZWQuXG4gICAgICogQHR5cGUge0Jsb2NrbHkuQVNUTm9kZX1cbiAgICAgKi9cbiAgICB0aGlzLmN1ck5vZGUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIGdvYWwgdXBkYXRlLCB3aGljaCBhY2NlcHRzIGEgc3RyaW5nXG4gICAgICogICAgIHdpdGggdGhlIHRleHQgdG8gc2V0IHRoZSBnb2FsIHRvLlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLmdvYWxVcGRhdGVDYiA9IGdvYWxVcGRhdGVDYjtcblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgZW5kIG9mIHRoZSB0dXRvcmlhbC5cbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy5lbmRUdXRvcmlhbENiID0gZW5kVHV0b3JpYWxDYjtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIERPTSBhbmQgc2hvdy5cbiAgICovXG4gIGluaXQoKSB7XG4gICAgdGhpcy5jcmVhdGVEb20oKTtcbiAgICB0aGlzLmFkZENhbGxiYWNrcygpO1xuICAgIE1pY3JvTW9kYWwuc2hvdyh0aGlzLm1vZGFsSWQpO1xuICAgIHRoaXMuY3VyU3RlcC5zaG93KCk7XG4gICAgdGhpcy5yZWdpc3RlclBsYXlIZWxwVGV4dCgpO1xuICAgIHRoaXMubG9hZFdvcmtzcGFjZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgdGhlIHdvcmtzcGFjZSBmb3IgdGhlIHR1dG9yaWFsLlxuICAgKi9cbiAgbG9hZFdvcmtzcGFjZSgpIHtcbiAgICBjb25zdCB0b29sYm94SnNvbiA9IHtcbiAgICAgICdraW5kJzogJ2ZseW91dFRvb2xib3gnLFxuICAgICAgJ2NvbnRlbnRzJzogW1xuICAgICAgICB7XG4gICAgICAgICAgJ2tpbmQnOiAnYmxvY2snLFxuICAgICAgICAgICdibG9ja3htbCc6IGA8YmxvY2sgdHlwZT1cIm11c2ljX25vdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxmaWVsZCBuYW1lPVwiRFVSQVRJT05cIj4wLjI1PC9maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx2YWx1ZSBuYW1lPVwiUElUQ0hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNoYWRvdyB0eXBlPVwibXVzaWNfcGl0Y2hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGQgbmFtZT1cIlBJVENIXCI+QzQ8L2ZpZWxkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NoYWRvdz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdmFsdWU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9ibG9jaz5gLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJ2tpbmQnOiAnYmxvY2snLFxuICAgICAgICAgICd0eXBlJzogJ211c2ljX3Jlc3QnLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuICAgIHRoaXMud29ya3NwYWNlLnVwZGF0ZVRvb2xib3godG9vbGJveEpzb24pO1xuICAgIGNvbnN0IHN0YXJ0ZXJYbWwgPVxuICAgICAgICBgPHhtbD5cbiAgICAgICAgICAgIDxibG9jayB0eXBlPVwibXVzaWNfc3RhcnRcIiBkZWxldGFibGU9XCJmYWxzZVwiIHg9XCIxODBcIlxuICAgICAgICAgICAgeT1cIjUwXCI+PC9ibG9jaz5cbiAgICAgICAgICA8L3htbD5gO1xuICAgIHRoaXMud29ya3NwYWNlLmNsZWFyKCk7XG4gICAgQmxvY2tseS5YbWwuZG9tVG9Xb3Jrc3BhY2UoXG4gICAgICAgIEJsb2NrbHkuWG1sLnRleHRUb0RvbShzdGFydGVyWG1sKSwgdGhpcy53b3Jrc3BhY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBzaG9ydGN1dCB0byByZXBsYXkgdGhlIGN1cnJlbnQgdHV0b3JpYWwgc3RlcC5cbiAgICovXG4gIHJlZ2lzdGVyUGxheUhlbHBUZXh0KCkge1xuICAgIC8qKiBAdHlwZSB7IUJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5LZXlib2FyZFNob3J0Y3V0fSAqL1xuICAgIGNvbnN0IHBsYXlIZWxwVGV4dCA9IHtcbiAgICAgIG5hbWU6ICdwbGF5SGVscFRleHQnLFxuICAgICAgcHJlY29uZGl0aW9uRm46IGZ1bmN0aW9uKHdvcmtzcGFjZSkge1xuICAgICAgICByZXR1cm4gd29ya3NwYWNlLmtleWJvYXJkQWNjZXNzaWJpbGl0eU1vZGUgJiZcbiAgICAgICAgICAgICF3b3Jrc3BhY2Uub3B0aW9ucy5yZWFkT25seTtcbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBzcGVha2VyLnNwZWFrKHRoaXMuY3VyU3RlcC50ZXh0LCB0cnVlKTtcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5yZWdpc3RlcihwbGF5SGVscFRleHQpO1xuICAgIGNvbnN0IHNoaWZ0VyA9IEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5jcmVhdGVTZXJpYWxpemVkS2V5KFxuICAgICAgICBCbG9ja2x5LnV0aWxzLktleUNvZGVzLkgpO1xuICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5hZGRLZXlNYXBwaW5nKFxuICAgICAgICBzaGlmdFcsIHBsYXlIZWxwVGV4dC5uYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHRoZSBuZXh0IHN0ZXAsIG9yIGVuZCB0aGUgdHV0b3JpYWwgaWYgdGhlcmUgYXJlIG5vIG1vcmUgc3RlcHMuXG4gICAqL1xuICBuZXh0U3RlcCgpIHtcbiAgICB0aGlzLmN1clN0ZXBJbmRleCsrO1xuICAgIGlmICh0aGlzLmN1clN0ZXBJbmRleCA8IHRoaXMuc3RlcHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmN1clN0ZXAgPSB0aGlzLnN0ZXBzW3RoaXMuY3VyU3RlcEluZGV4XTtcbiAgICAgIE1pY3JvTW9kYWwuc2hvdyh0aGlzLm1vZGFsSWQpO1xuICAgICAgdGhpcy5jdXJTdGVwLnNob3coKTtcbiAgICAgIHRoaXMub25Hb2FsVXBkYXRlQ2IoVHV0b3JpYWwuU1RFUF9PQkpFQ1RTW3RoaXMuY3VyU3RlcEluZGV4XS5nb2FsVGV4dCk7XG4gICAgICB0aGlzLnN0YXNoQ3Vyc29yKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9uZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbmQgdGhlIHR1dG9yaWFsLlxuICAgKi9cbiAgZG9uZSgpIHtcbiAgICBNaWNyb01vZGFsLmNsb3NlKHRoaXMubW9kYWxJZCk7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSB0aGUgY3VycmVudCBjdXJzb3Igbm9kZSBhbmQgZGlzYWJsZSBrZXlib2FyZCBuYXYuXG4gICAqIENhbGwgdGhpcyB3aGVuIG9wZW5pbmcgdGhlIG1vZGFsLlxuICAgKi9cbiAgc3Rhc2hDdXJzb3IoKSB7XG4gICAgdGhpcy5jdXJOb2RlID0gdGhpcy53b3Jrc3BhY2UuZ2V0Q3Vyc29yKCkuZ2V0Q3VyTm9kZSgpO1xuICAgIEJsb2NrbHkubmF2aWdhdGlvbi5kaXNhYmxlS2V5Ym9hcmRBY2Nlc3NpYmlsaXR5KCk7XG4gIH1cblxuICAvKipcbiAgICogUmVlbmFibGUga2V5Ym9hcmQgbmF2IGFuZCBtb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIHByZXZpb3VzbHlcbiAgICogc2VsZWN0ZWQgY3Vyc29yIG5vZGUuIENhbGwgdGhpcyB3aGVuIGNsb3NpbmcgdGhlIG1vZGFsLlxuICAgKi9cbiAgcG9wQ3Vyc29yKCkge1xuICAgIEJsb2NrbHkubmF2aWdhdGlvbi5lbmFibGVLZXlib2FyZEFjY2Vzc2liaWxpdHkoKTtcbiAgICBpZiAodGhpcy5jdXJOb2RlKSB7XG4gICAgICB0aGlzLndvcmtzcGFjZS5nZXRDdXJzb3IoKS5zZXRDdXJOb2RlKHRoaXMuY3VyTm9kZSk7XG4gICAgICBzcGVha2VyLmNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgbmVjZXNzYXJ5IGhhbmRsZXJzIGZvciBhbnkgYnV0dG9ucyBvbiB0aGUgbW9kYWwuXG4gICAqL1xuICBhZGRDYWxsYmFja3MoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGVwQnV0dG9uSWQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMubmV4dFN0ZXAoKTtcbiAgICAgICAgfSk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5oaWRlQnV0dG9uSWQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICBNaWNyb01vZGFsLmNsb3NlKHRoaXMubW9kYWxJZCk7XG4gICAgICAgICAgdGhpcy5wb3BDdXJzb3IoKTtcbiAgICAgICAgICBUdXRvcmlhbC5TVEVQX09CSkVDVFNbdGhpcy5jdXJTdGVwSW5kZXhdLm9uU3RhcnQodGhpcyk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZG9tIGZvciB0aGUgbW9kYWwuXG4gICAqL1xuICBjcmVhdGVEb20oKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5tb2RhbElkKS5pbm5lckhUTUwgPSBgXG4gICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9fb3ZlcmxheVwiIHRhYmluZGV4PVwiLTFcIiBkYXRhLW1pY3JvbW9kYWwtY2xvc2U+XG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfX2NvbnRhaW5lclwiIHJvbGU9XCJkaWFsb2dcIiBhcmlhLW1vZGFsPVwidHJ1ZVwiXG4gICAgICAgIGFyaWEtbGFiZWxsZWRieT1cIm1vZGFsLTEtdGl0bGVcIj5cbiAgICAgICAgPGhlYWRlciBjbGFzcz1cIm1vZGFsX19oZWFkZXJcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibW9kYWxfX2Nsb3NlXCIgYXJpYS1sYWJlbD1cIkNsb3NlIG1vZGFsXCJcbiAgICAgICAgICAgIGlkPVwidHV0b3JpYWxDbG9zZUJ0blwiIGRhdGEtbWljcm9tb2RhbC1jbG9zZT48L2J1dHRvbj5cbiAgICAgICAgPC9oZWFkZXI+XG4gICAgICAgIDxtYWluIGNsYXNzPVwibW9kYWxfX2NvbnRlbnRcIiBpZD1cIm1vZGFsLTEtY29udGVudFwiPlxuICAgICAgICAgIDxoMiBjbGFzcz1cIm1vZGFsX190aXRsZVwiIGlkPVwiJHt0aGlzLnN0ZXBUZXh0SWR9XCI+PC9oMj5cbiAgICAgICAgPC9tYWluPlxuICAgICAgICA8Zm9vdGVyIGNsYXNzPVwibW9kYWxfX2Zvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJtb2RhbF9fYnRuIG1vZGFsX19idG4tcHJpbWFyeVwiIGFyaWEtbGFiZWw9XCJTdGFydCBzdGVwXCJcbiAgICAgICAgICAgIGlkPVwiJHt0aGlzLmhpZGVCdXR0b25JZH1cIj5TdGFydCBzdGVwPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm1vZGFsX19idG4gbW9kYWxfX2J0bi1wcmltYXJ5XCIgYXJpYS1sYWJlbD1cIlNraXAgc3RlcFwiXG4gICAgICAgICAgICBpZD1cIiR7dGhpcy5zdGVwQnV0dG9uSWR9XCI+U2tpcCBzdGVwPC9idXR0b24+XG4gICAgICAgIDwvZm9vdGVyPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24sIGJhc2VkIG9uIHRoZSBldmVudC5cbiAgICogQHBhcmFtIHtCbG9ja2x5LkV2ZW50fSBldmVudCBBbiBldmVudCB0byBpbnNwZWN0IGZvciBhIGN1cnNvciBsb2NhdGlvbi5cbiAgICogQHJldHVybiB7QmxvY2tseS5BU1ROb2RlfSBUaGUgY3VycmVudCBjdXJzb3IgbG9jYXRpb24sIG9yIG51bGwgaWYgdGhlIGV2ZW50XG4gICAqICAgICBkaWRuJ3QgaGF2ZSBvbmUuXG4gICAqL1xuICBnZXRDdXJyZW50TG9jYXRpb24oZXZlbnQpIHtcbiAgICBjb25zdCBjdXJOb2RlID0gZXZlbnQubmV3Tm9kZTtcbiAgICBpZiAoY3VyTm9kZSkge1xuICAgICAgcmV0dXJuIGN1ck5vZGUuZ2V0TG9jYXRpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuVHV0b3JpYWwuU1RFUF9PQkpFQ1RTID0gW1xuICB7XG4gICAgdGV4dDogYEluIHRoaXMgdHV0b3JpYWwgeW91IHdpbGwgd3JpdGUgY29kZSB0aGF0IHBsYXlzIG11c2ljYWwgbm90ZXMuIElmIGF0XG4gICAgICBhbnkgcG9pbnQgeW91IGFyZSBjb25mdXNlZCBhYm91dCB3aGF0IHRvIGRvLCBwcmVzcyBIIHRvIHJlcGxheSB0aGUgZ29hbFxuICAgICAgZm9yIHRoZSBjdXJyZW50IHN0ZXAuIFByZXNzIEVudGVyIHRvIGdvIHRvIHRoZSBuZXh0IHN0ZXAuYCxcbiAgICBnb2FsVGV4dDogYFByZXNzIEVudGVyIHRvIGdvIHRvIHRoZSBuZXh0IHN0ZXAuYCxcbiAgICBvblN0YXJ0OiBmdW5jdGlvbih0dXRvcmlhbCkge1xuICAgICAgc2V0VGltZW91dCgoKT0+IHR1dG9yaWFsLm5leHRTdGVwKCksIDEwMCk7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRleHQ6IGBZb3UgY2FuIG1vdmUgYXJvdW5kIHRoZSBibG9ja3Mgb2YgY29kZSB3aXRoIHRoZSB1cCBhbmQgZG93biBhcnJvd3MuXG4gICAgWW91IHdpbGwgaGVhciBkZXNjcmlwdGlvbnMgYXMgeW91IG1vdmUgYXJvdW5kIHRoZSBibG9ja3MuIC5cbiAgICBBbGwgYmxvY2tzIGhhdmUgY29ubmVjdGlvbiBwb2ludHMsIHdoaWNoIGFyZSBwbGFjZXMgd2hlcmUgeW91IGNhbiBhZGQgbW9yZVxuICAgIGNvZGUuIC4gVXNlIHRoZSBkb3duIGFycm93IHRvIG1vdmUgdG8gYSBjb25uZWN0aW9uIHBvaW50LlxuICAgIEhpdCBlbnRlciB0byBiZWdpbi4gYCxcbiAgICBnb2FsVGV4dDogYFVzZSB0aGUgZG93biBhcnJvdyB0byBtb3ZlIHRvIGEgY29ubmVjdGlvbiBwb2ludC5gLFxuICAgIG9uU3RhcnQ6IGZ1bmN0aW9uKHR1dG9yaWFsKSB7XG4gICAgICBjb25zdCB3b3Jrc3BhY2UgPSB0dXRvcmlhbC53b3Jrc3BhY2U7XG4gICAgICBjb25zdCBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSBCbG9ja2x5LkV2ZW50cy5NQVJLRVJfTU9WRSkge1xuICAgICAgICAgIGNvbnN0IGN1ck5vZGUgPSBldmVudC5uZXdOb2RlO1xuICAgICAgICAgIGNvbnN0IGNvcnJlY3RMb2NhdGlvbiA9XG4gICAgICAgICAgICAgIHdvcmtzcGFjZS5nZXRUb3BCbG9ja3MoKVswXS5pbnB1dExpc3RbMV0uY29ubmVjdGlvbjtcbiAgICAgICAgICBpZiAoY3VyTm9kZSkge1xuICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBjdXJOb2RlLmdldExvY2F0aW9uKCk7XG4gICAgICAgICAgICBpZiAobG9jYXRpb24gPT09IGNvcnJlY3RMb2NhdGlvbikge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgd29ya3NwYWNlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIHR1dG9yaWFsLm5leHRTdGVwKCk7XG4gICAgICAgICAgICAgIH0sIDQ3MDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gQWRkIGEgc2hvcnRjdXQgaW4gcGxhY2Ugb2YgdGhlIGRvd24gYXJyb3cgc2hvcnRjdXQuXG4gICAgICBjb25zdCB3cmFwcGVyID0gd29ya3NwYWNlLmFkZENoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGV4dDpcbiAgICAgIGBHcmVhdCEgWW91IG1vdmVkIHRvIGEgY29ubmVjdGlvbiBwb2ludC4gLlxuICAgICAgVG8gYWRkIG1vcmUgY29kZSwgeW91IGZpcnN0IG1hcmsgYSBsb2NhdGlvbiBhbmQgdGhlbiBzZWxlY3QgdGhlIGJsb2NrIHlvdVxuICAgICAgd2FudCB0byBhZGQuIC5cbiAgICAgIE5hdmlnYXRlIHRvIHRoZSBjb25uZWN0aW9uIHBvaW50LCB0aGVuIHByZXNzIGVudGVyIHRvIG1hcmsgaXQuYCxcbiAgICBnb2FsVGV4dDogYE5hdmlnYXRlIHRvIHRoZSBjb25uZWN0aW9uIHBvaW50LCB0aGVuIHByZXNzIGVudGVyIHRvIG1hcmsgaXQuYCxcbiAgICBvblN0YXJ0OiBmdW5jdGlvbih0dXRvcmlhbCkge1xuICAgICAgY29uc3Qgd29ya3NwYWNlID0gdHV0b3JpYWwud29ya3NwYWNlO1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gQmxvY2tseS5FdmVudHMuTUFSS0VSX01PVkUpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50TG9jYXRpb24gPSB0dXRvcmlhbC5nZXRDdXJyZW50TG9jYXRpb24oZXZlbnQpO1xuICAgICAgICAgIGlmIChjdXJyZW50TG9jYXRpb24gJiYgIWV2ZW50LmlzQ3Vyc29yKSB7XG4gICAgICAgICAgICBjb25zdCBjb3JyZWN0TG9jYXRpb24gPVxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZS5nZXRUb3BCbG9ja3MoKVswXS5pbnB1dExpc3RbMV0uY29ubmVjdGlvbjtcbiAgICAgICAgICAgIGlmIChjdXJyZW50TG9jYXRpb24gPT09IGNvcnJlY3RMb2NhdGlvbikge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgd29ya3NwYWNlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIHR1dG9yaWFsLm5leHRTdGVwKCk7XG4gICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gQWRkIGEgc2hvcnRjdXQgaW4gcGxhY2Ugb2YgdGhlIGRvd24gYXJyb3cgc2hvcnRjdXQuXG4gICAgICBjb25zdCB3cmFwcGVyID0gd29ya3NwYWNlLmFkZENoYW5nZUxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGV4dDogYEdyZWF0ISBZb3UgbWFya2VkIGEgY29ubmVjdGlvbiBwb2ludC4gTm93IHlvdSBjYW4gYWRkIG1vcmUgY29kZVxuICAgIGJsb2Nrcy4gLlxuICAgIFRoZSB0b29sYm94IGlzIGEgbGlzdCBvZiBjb2RlIGJsb2NrcyB0aGF0IHlvdSBjYW4gYWRkIHRvIHRoZSB3b3Jrc3BhY2UuXG4gICAgWW91IGNhbiBhbHdheXMgb3BlbiB0aGUgdG9vbGJveCBieSBwcmVzc2luZyBULiAuXG4gICAgUHJlc3MgVCB0byBvcGVuIHRoZSB0b29sYm94LCB0aGVuIHVzZSB0aGUgdXAgYW5kIGRvd24gYXJyb3dzIHRvIGV4cGxvcmVcbiAgICBpdC4gLlxuICAgIFByZXNzID8/PyB3aGVuIHlvdSBhcmUgcmVhZHkgZm9yIHRoZSBuZXh0IHN0ZXAuYCxcbiAgICBnb2FsVGV4dDogYFByZXNzIFQgdG8gb3BlbiB0aGUgdG9vbGJveCwgdGhlbiB1c2UgdGhlIHVwIGFuZCBkb3duIGFycm93cyB0b1xuICAgICAgZXhwbG9yZSBpdC4gLiBQcmVzcyA/Pz8gd2hlbiB5b3UgYXJlIHJlYWR5IGZvciB0aGUgbmV4dCBzdGVwLmAsXG4gICAgb25TdGFydDogZnVuY3Rpb24odHV0b3JpYWwpIHtcbiAgICAgIC8qKiBAdHlwZSB7IUJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5LZXlib2FyZFNob3J0Y3V0fSAqL1xuICAgICAgY29uc3QgZmluaXNoU3RlcCA9IHtcbiAgICAgICAgbmFtZTogJ2ZpbmlzaFN0ZXAnLFxuICAgICAgICBwcmVjb25kaXRpb25GbjogZnVuY3Rpb24od29ya3NwYWNlKSB7XG4gICAgICAgICAgcmV0dXJuIHdvcmtzcGFjZS5rZXlib2FyZEFjY2Vzc2liaWxpdHlNb2RlICYmXG4gICAgICAgICAgICAgICF3b3Jrc3BhY2Uub3B0aW9ucy5yZWFkT25seTtcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICB0dXRvcmlhbC5uZXh0U3RlcCgpO1xuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LnJlZ2lzdGVyKGZpbmlzaFN0ZXApO1xuICAgICAgY29uc3Qgc2hpZnRXID0gQmxvY2tseS5TaG9ydGN1dFJlZ2lzdHJ5LnJlZ2lzdHJ5LmNyZWF0ZVNlcmlhbGl6ZWRLZXkoXG4gICAgICAgICAgQmxvY2tseS51dGlscy5LZXlDb2Rlcy5GKTtcbiAgICAgIEJsb2NrbHkuU2hvcnRjdXRSZWdpc3RyeS5yZWdpc3RyeS5hZGRLZXlNYXBwaW5nKFxuICAgICAgICAgIHNoaWZ0VywgZmluaXNoU3RlcC5uYW1lKTtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGV4dDogYEdyZWF0ISBZb3UgaGF2ZSBub3cgc3VjY2Vzc2Z1bGx5IG1hcmtlZCBhIGNvbm5lY3Rpb24gcG9pbnQgYW5kXG4gICAgbmF2aWdhdGVkIHRvIGEgbGlzdCBvZiBibG9ja3MgdGhhdCB5b3UgY2FuIGluc2VydC4gLlxuICAgIE5vdyBpdOKAmXMgdGltZSB0byBwdXQgaXQgYWxsIHRvZ2V0aGVyLiAuXG4gICAgTmF2aWdhdGUgdG8gdGhlIGNvbm5lY3Rpb24gYW5kIG1hcmsgaXQsIHRoZW4gcHJlc3MgVCB0byBvcGVuIHRoZVxuICAgIHRvb2xib3guIEZpbmQgdGhlIGJsb2NrIHRoYXQgc2F5cyDigJxwbGF5IHdob2xlIG5vdGUgYzTigJ0gYW5kIHByZXNzXG4gICAgZW50ZXIgdG8gYWRkIGl0IGF0IHRoZSBtYXJrZWQgbG9jYXRpb24uYCxcbiAgICBnb2FsVGV4dDogYE5hdmlnYXRlIHRvIHRoZSBjb25uZWN0aW9uIGFuZCBtYXJrIGl0LCB0aGVuIHByZXNzIFQgdG8gb3BlbiB0aGVcbiAgICB0b29sYm94LiBGaW5kIHRoZSBibG9jayB0aGF0IHNheXMg4oCccGxheSB3aG9sZSBub3RlIGM04oCdIGFuZCBwcmVzc1xuICAgIGVudGVyIHRvIGFkZCBpdCBhdCB0aGUgbWFya2VkIGxvY2F0aW9uLmAsXG4gICAgb25TdGFydDogZnVuY3Rpb24odHV0b3JpYWwpIHtcbiAgICAgIGNvbnN0IHdvcmtzcGFjZSA9IHR1dG9yaWFsLndvcmtzcGFjZTtcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IEJsb2NrbHkuRXZlbnRzLk1BUktFUl9NT1ZFKSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudExvY2F0aW9uID0gdHV0b3JpYWwuZ2V0Q3VycmVudExvY2F0aW9uKGV2ZW50KTtcbiAgICAgICAgICBpZiAoY3VycmVudExvY2F0aW9uICYmIGV2ZW50LmlzQ3Vyc29yICYmXG4gICAgICAgICAgICAgIHdvcmtzcGFjZS5nZXRBbGxCbG9ja3MoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCBjb3JyZWN0TG9jYXRpb24gPVxuICAgICAgICAgICAgICAgIHdvcmtzcGFjZS5nZXRBbGxCbG9ja3MoKVsxXS5wcmV2aW91c0Nvbm5lY3Rpb247XG4gICAgICAgICAgICBpZiAoY3VycmVudExvY2F0aW9uID09PSBjb3JyZWN0TG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIHdvcmtzcGFjZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih3cmFwcGVyKTtcbiAgICAgICAgICAgICAgICB0dXRvcmlhbC5uZXh0U3RlcCgpO1xuICAgICAgICAgICAgICB9LCA0MDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIEFkZCBhIHNob3J0Y3V0IGluIHBsYWNlIG9mIHRoZSBkb3duIGFycm93IHNob3J0Y3V0LlxuICAgICAgY29uc3Qgd3JhcHBlciA9IHdvcmtzcGFjZS5hZGRDaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRleHQ6IGBHcmVhdCEgWW91IGNhbiBub3cgcHJlc3MgU2hpZnQgYW5kIFAgYXQgdGhlIHNhbWUgdGltZSB0byBydW4geW91clxuICAgIGNvZGUuIFlvdSBzaG91bGQgaGVhciBhIG5vdGUgcGxheSFgLFxuICAgIGdvYWxUZXh0OiBgUHJlc3MgU2hpZnQgYW5kIFAgYXQgdGhlIHNhbWUgdGltZSB0byBydW4geW91ciBjb2RlLmAsXG4gICAgb25TdGFydDogZnVuY3Rpb24odHV0b3JpYWwpIHt9LFxuICB9LFxuXTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/tutorial.js\n");

/***/ })

})